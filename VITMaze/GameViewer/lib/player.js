!function(t){function e(e){for(var r,i,o=e[0],s=e[1],a=0,u=[];a<o.length;a++)i=o[a],n[i]&&u.push(n[i][0]),n[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(l&&l(e);u.length;)u.shift()()}var r={},n={0:0};function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(){return Promise.resolve()},i.m=t,i.c=r,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var a=0;a<o.length;a++)e(o[a]);var l=s;i(i.s="vvB1")}({"/457":function(t,e){t.exports='<div id=cg-player class=cg-player_container ng-class="{\'ultraSmall\': ultraSmall}"> <div class=tooltipIcons ng-show=displayTooltip> <div ng-if=tooltipsMessage translate={{tooltipsMessage}}></div> </div> <div class=player ng-class="{playing: gameManager.isPlaying(), \'tv-mode\': tvMode}"> <div class=gameBoxContainer> <div class=stats_panel ng-show=settingsVisible></div> <div class=settings_panel ng-class="{settings_panel_visible: settingsVisible}"> <button class="settings_close_button player_hover_container" ng-click=setOptionsVisible(false)> </button> <form class=settings_panel_form> <div ng-repeat="option in options" class=settings_option ng-class="{disabled: option.enabled && !option.enabled()}"> <h3 ng-bind=option.title></h3> <div class=settings_button> <input ng-disabled="option.enabled && !option.enabled()" ng-model=option.value ng-change="refresh(); drawerOptionChanged(option);" ng-value=value name="{{\'player\'+uniqueId+\'SettingsOption\'+$parent.$index}}" ng-repeat-start="(key, value) in option.values" type=radio id="{{\'player\'+uniqueId+\'SettingsOption\'+$parent.$index+\'\'+$index}}"><label ng-repeat-end for="{{\'player\'+uniqueId+\'SettingsOption\'+$parent.$index+\'\'+$index}}" ng-bind=key></label> </div> </div> <div class=settings_option> <h3 translate=cgPlayer.quality></h3> <div class=settings_button> <input type=radio name=quality id=player{{uniqueId}}QualitySd ng-change="resize(); drawerQualityChanged(1);" ng-model=overSampling ng-value=1><label for=player{{uniqueId}}QualitySd>SD</label> <input type=radio name=quality id=player{{uniqueId}}QualityHd ng-change="resize(); drawerQualityChanged(2);" ng-model=overSampling ng-value=2><label for=player{{uniqueId}}QualityHd>HD</label> </div> </div> <div class=settings_option ng-class="{disabled: !gameManager}"> <h3 translate=cgPlayer.speed></h3> <div class="settings_button player_speed"> <input ng-repeat-start="speed in availableSpeeds" ng-disabled=!gameManager ng-model=gameManager.speed ng-value=speed type=radio id=player{{uniqueId}}SettingsSpeed{{speed}} name=settingsSpeed ng-change=drawerSpeedChanged(speed);><label ng-repeat-end for=player{{uniqueId}}SettingsSpeed{{speed}}>X{{speed}}</label> </div> </div> </form> </div> <div class=canvas-container> </div> <div class=playerDummy></div> </div> <div class=control-panel> <a class="replay-prompt angular-animate" ng-click="analyticsOpenReplay({from: \'prompt\', analyticsGameId: analyticsGameId, analyticsType: analyticsType})" ng-if="showReplayPrompt && atEnd()" target=_blank ng-href={{baseUrl}}/share-replay/{{currentGameId}}> <span class=replay-prompt-content> <span class=prompt-text translate=cgPlayer.share></span> </span> <span class=prompt-triangle></span> </a> <div class=progress_hitbox ng-style="{\'pointer-events\':(startScreen) ? \'none\' : \'auto\'}"> <div class=progress_back> <div class=marker_container></div> <div class=progress_bar> <div class=scroller_handle></div> <div class=scroller> <div class=scroller_cursor></div> <div class="tooltipFrame tooltipFrameTimer"> <div class=tooltip_content> <div class="tooltip_text frame_timer_text">0/0</div> </div> <div class=tooltip_triangle></div> </div> </div> </div> </div> </div> <div class=control-panel-replay> <button ng-disabled="!gameManager || !gameManager.areInteractionsEnabled() || updater.first" class="control-panel-button first-button" ng-click=gameManager.first()></button> <button ng-disabled="!gameManager || !gameManager.areInteractionsEnabled() || updater.first" ng-show="tvMode !== true" class="control-panel-button prior-button" ng-click=gameManager.prior()></button> <button ng-disabled="!gameManager || !gameManager.areInteractionsEnabled()" class="control-panel-button play-pause-button" ng-click=gameManager.togglePlay(true)></button> <button ng-disabled="!gameManager || !gameManager.areInteractionsEnabled() || updater.last" class="control-panel-button next-button" ng-click=gameManager.next()></button> <button ng-disabled="!gameManager || !gameManager.areInteractionsEnabled() || updater.last" class="control-panel-button last-button" ng-click=gameManager.last()></button> <div ng-show=gameManager class="frame_timer_text frame-position">0/0</div> </div> <div class=control-panel-settings> <button class="control-panel-button settings-button" ng-click=toggleOptions() ng-mouseenter="updateTooltipMessage(\'cgPlayer.ToolTipIcons.options\')" ng-mouseleave=hideTooltip()></button> <a ng-if="shareable !== false" ng-class={disabled:!currentGameId} class="control-panel-button replay-button" target=_blank ng-href={{baseUrl}}/share-replay/{{currentGameId}} ng-mouseenter="updateTooltipMessage(\'cgPlayer.ToolTipIcons.replay\')" ng-mouseleave=hideTooltip() ng-click="analyticsOpenReplay({from: \'icon\', analyticsGameId: analyticsGameId, analyticsType: analyticsType})"></a> <button class="control-panel-button fullscreen-button" ng-click=toggleFullScreen() ng-mouseenter="updateTooltipMessage(\'cgPlayer.ToolTipIcons.fullscreen\')" ng-mouseleave=hideTooltip()></button> <button ng-if=false class="control-panel-button extract-button" ng-mouseenter="updateTooltipMessage(\'cgPlayer.ToolTipIcons.extract\')" ng-mouseleave=hideTooltip()></button> </div> </div> <div class=info_box ng-if=getShowConsole() ng-class="{\'console-open\': expandConsole || !collapsableConsole}"> <div class=info_game_container> <button ng-if=collapsableConsole class="info_ellipsis_button hover_container" ng-click=toggleConsole()> </button> <div class=info_game_label translate=cgPlayer.gameInformation></div> <div ng-show="expandConsole || !collapsableConsole" class=info_game></div> </div> <div ng-show="expandConsole || !collapsableConsole" class=info_stdout_container> <div class=info_stdout_label translate=cgPlayer.outputStream></div> <div class=info_stdout></div> </div> <div ng-show="expandConsole || !collapsableConsole" class=info_stderr_container> <div class=info_stderr_label translate=cgPlayer.errorStream></div> <div class=info_stderr></div> </div> </div> <div class="uinput info_box" ng-if="uinput && getShowConsole()" ng-show=expandConsole> <div class=info_parameters_container> <div class=info_parameters_label translate=cgPlayer.gameParameters></div> <pre class=info_parameters data-ng-bind=uinput></pre> </div> </div> </div> <div class=rankings ng-if="getShowRankings() && rankingData.length > 1"> <div class=stats_box ng-repeat="rank in rankingData"> <div class=stats_rank ng-style="{\n\t\t\t\t\'background-color\':rank.winner ? null : rank.color, \n\t\t\t\t\'font-size\':(rank.rank >= 100) ? \'16px\' : \'20px\'\n\t\t\t\t}"> <div class=star ng-show=rank.winner> <svg width=50 height=50 viewBox="0 3 50 50"> <path ng-style="{fill: rank.color}" d="M 1.7218182,17.028213 18.477139,16.760312 26.455858,3.099611 33.2821,16.671012 l 18.439718,0 -10.283685,16.3393 2.925533,20.089299 L 26.36721,39.796012 8.81401,53.010311 11.56224,32.921012 z"/> </svg> </div> <div class=star_text ng-bind="rank.rank | number"></div> </div> <div class=stats_details_box> <div class=stats_name ng-bind=rank.name></div> <div ng-if="rank.score !== null" class=stats_extra_box> <div ng-if="rank.score !== undefined" class="stats_icon player-img_leaderboard_score"></div> <div class=stats_score ng-bind="rank.score | number:2"></div> <div style=display:inline-block ng-show=rank.nation> <div class="stats_icon nation player-img_leaderboard_country"></div> <div class=stats_nation ng-bind=rank.nation></div> </div> </div> </div> </div> </div> <div class="rankings small" ng-if="showSmallRankings && rankingData"> <div class="stats_box small" ng-repeat="rank in rankingData"> <div class="stats_rank small" ng-style="{\'background-color\':rank.color, \'font-size\':(rank.rank >= 100) ? \'10px\' : \'14px\'}"> <div class=star ng-show=rank.winner ng-class="\'player-img_player_star_color_0\'+(rank.index+1)+\'_resized\'"></div> <div class=star_text ng-bind="rank.rank | number"></div> </div> <div class=stats_details_box> <div class="stats_name small" ng-bind=rank.name></div> <div class="stats_extra_box small"> <div class="stats_icon player-img_leaderboard_score"></div> <div class=stats_score ng-bind="rank.score | number:2"></div> <div style=display:inline-block ng-show=rank.nation> <div class="stats_icon nation player-img_leaderboard_country"></div> <div class=stats_nation ng-bind=rank.nation></div> </div> </div> </div> </div> <div style=clear:both></div> </div> </div> '},"/XPn":function(t){t.exports={cgPlayer:{gameInformation:"Informations sur la partie :",outputStream:"Sortie standard :",errorStream:"Sortie d'erreur :",gameParameters:"Paramètres de la partie :",speed:"VITESSE",quality:"QUALITÉ",ToolTipIcons:{options:"Options",replay:"Revoir et partager",fullscreen:"Plein écran",extract:"Extraire"},share:"Partager ce replay"}}},"14ch":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAYAAAC5tzfZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc5M0FFRjVDNUQxNTExRTVBMzEwQkFBQjJGMEUyM0RGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjc5M0FFRjVENUQxNTExRTVBMzEwQkFBQjJGMEUyM0RGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzkzQUVGNUE1RDE1MTFFNUEzMTBCQUFCMkYwRTIzREYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzkzQUVGNUI1RDE1MTFFNUEzMTBCQUFCMkYwRTIzREYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4P5XNmAAAAe0lEQVR42mL8//8/AxowAOIiIGZkwA56WbAIXgDitUBcg0MjDxMO0zYCcQsQ/8cmiUsTTOM+UjXFArEzlP2fGE0gDflQ9kQMp4JCDw3HAvEZKI5FEvcH4tNAbEOsBmSN1qRogGEmUjWAMYjwI0UDTJMQEK8iVgMIAwQYANRiBg5b26e2AAAAAElFTkSuQmCC"},"1TEc":function(t,e){(function(t,e){function r(t,e,n,i){r._super_.call(this),this.reset(t,e,n,i)}function n(t,e,r,i){n._super_.call(this),this.x=t,this.y=e,this.width=r,this.height=i}function i(t,e){i._super_.call(this),this.x=t,this.y=e}function o(t,e,r){o._super_.call(this),this.x=t,this.y=e,this.radius=r,this.angle=0,this.center={x:this.x,y:this.y}}function s(t,e,r,n,i){s._super_.call(this),r-t>=0?(this.x1=t,this.y1=e,this.x2=r,this.y2=n):(this.x1=r,this.y1=n,this.x2=t,this.y2=e),this.dx=this.x2-this.x1,this.dy=this.y2-this.y1,this.minx=Math.min(this.x1,this.x2),this.miny=Math.min(this.y1,this.y2),this.maxx=Math.max(this.x1,this.x2),this.maxy=Math.max(this.y1,this.y2),this.dot=this.x2*this.y1-this.x1*this.y2,this.xxyy=this.dx*this.dx+this.dy*this.dy,this.gradient=this.getGradient(),this.length=this.getLength(),this.direction=Y.Util.initValue(i,">")}function a(){this.vector=new Y.Vector2D(0,0),this.random=0,this.crossType="dead",this.alert=!0}function l(t,e){l._super_.call(this,t,e),this.gl=this.element.getContext("experimental-webgl",{antialias:!0,stencil:!1,depth:!1}),this.gl||alert("Sorry your browser do not suppest WebGL!"),this.initVar(),this.setMaxRadius(),this.initShaders(),this.initBuffers(),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enable(this.gl.BLEND)}function u(t,e,r){u._super_.call(this,t,e),this.context=this.element.getContext("2d"),this.imageData=null,this.rectangle=null,this.rectangle=r,this.createImageData(r)}function h(t,e){h._super_.call(this,t,e),this.stroke=null,this.context=this.element.getContext("2d"),this.bufferCache={}}function c(t,e,r){c._super_.call(this,t,e),this.stroke=r}function p(t,e){p._super_.call(this,t,e),this.stroke=null}function d(t,e,r){this.proton=t,this.element=e,this.stroke=r}function f(t,e,r){this.element=r,this.type=Y.Util.initValue(t,"canvas"),this.proton=e,this.renderer=this.getRenderer()}function g(e,r,n){this.mouseTarget=Y.Util.initValue(e,t),this.ease=Y.Util.initValue(r,.7),this._allowEmitting=!1,this.initEventHandler(),g._super_.call(this,n)}function v(t){this.selfBehaviours=[],v._super_.call(this,t)}function m(t){this.initializes=[],this.particles=[],this.behaviours=[],this.emitTime=0,this.emitTotalTimes=-1,this.damping=.006,this.bindEmitter=!0,this.rate=new Y.Rate(1,.1),m._super_.call(this,t),this.id="emitter_"+m.ID++}function y(t,e,r,n){y._super_.call(this,r,n),this.distanceVec=new Y.Vector2D,this.centerPoint=Y.Util.initValue(t,new Y.Vector2D),this.force=Y.Util.initValue(this.normalizeValue(e),100),this.name="GravityWell"}function x(t,e,r,n){x._super_.call(this,r,n),this.reset(t,e),this.name="Color"}function b(t,e,r,n,i){b._super_.call(this,n,i),this.reset(t,e,r),this.name="Rotate"}function _(t,e,r,n){_._super_.call(this,r,n),this.reset(t,e),this.name="Scale"}function T(t,e,r,n){T._super_.call(this,r,n),this.reset(t,e),this.name="Alpha"}function w(t,e,r,n){w._super_.call(this,r,n),this.reset(t,e),this.name="CrossZone"}function E(t,e,r,n,i){E._super_.call(this,n,i),this.reset(t,e,r),this.name="Collision"}function S(t,e,r){S._super_.call(this,0,t,e,r),this.name="Gravity"}function A(t,e,r,n,i){A._super_.call(this,t,e,r,n,i),this.force*=-1,this.name="Repulsion"}function C(t,e,r,n,i){C._super_.call(this,n,i),this.reset(t,e,r),this.time=0,this.name="RandomDrift"}function M(t,e,r,n,i){M._super_.call(this,n,i),this.targetPosition=Y.Util.initValue(t,new Y.Vector2D),this.radius=Y.Util.initValue(r,1e3),this.force=Y.Util.initValue(this.normalizeValue(e),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new Y.Vector2D,this.lengthSq=0,this.name="Attraction"}function R(t,e,r,n){R._super_.call(this,r,n),this.force=this.normalizeForce(new Y.Vector2D(t,e)),this.name="Force"}function O(t,e,r){O._super_.call(this),this.image=this.setSpanValue(t),this.w=Y.Util.initValue(e,20),this.h=Y.Util.initValue(r,this.w)}function P(t,e,r){P._super_.call(this),this.radius=Y.Util.setSpanValue(t,e,r)}function D(t,e,r){D._super_.call(this),this.massPan=Y.Util.setSpanValue(t,e,r)}function I(t,e,r){I._super_.call(this),this.rPan=Y.Util.setSpanValue(t),this.thaPan=Y.Util.setSpanValue(e),this.type=Y.Util.initValue(r,"vector")}function L(t){L._super_.call(this),this.zone=Y.Util.initValue(t,new Y.PointZone)}function F(t,e,r){F._super_.call(this),this.lifePan=Y.Util.setSpanValue(t,e,r)}function B(){}function k(t,e){this.numPan=Y.Util.initValue(t,1),this.timePan=Y.Util.initValue(e,1),this.numPan=Y.Util.setSpanValue(this.numPan),this.timePan=Y.Util.setSpanValue(this.timePan),this.startTime=0,this.nextTime=0,this.init()}function N(t,e){this.id="Behaviour_"+N.id++,this.life=Y.Util.initValue(t,1/0),this.easing=Y.ease.setEasingByName(e),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.name="Behaviour"}function $(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n,this.bottom=this.y+this.height,this.right=this.x+this.width}function U(t){Y.Util.isArray(t)?this.colorArr=t:this.colorArr=[t]}function j(t,e,r){this.isArray=!1,Y.Util.isArray(t)?(this.isArray=!0,this.a=t):(this.a=Y.Util.initValue(t,1),this.b=Y.Util.initValue(e,this.a),this.center=Y.Util.initValue(r,!1))}function G(t,e){this.proParticleCount=Y.Util.initValue(t,0),this.releaseTime=Y.Util.initValue(e,-1),this.poolList=[],this.timeoutID=0;for(var r=0;r<this.proParticleCount;r++)this.add();this.releaseTime>0&&(this.timeoutID=setTimeout(this.release,this.releaseTime/1e3))}function W(t){this.id="particle_"+W.ID++,this.reset(!0),Y.Util.setPrototypeByObject(this,t)}function V(){this.mats=[],this.size=0;for(var t=0;t<20;t++)this.mats.push(Y.Mat3.create([0,0,0,0,0,0,0,0,0]))}function z(){this.initialize()}function Y(t,e){this.proParticleCount=Y.Util.initValue(t,Y.POOL_MAX),this.integrationType=Y.Util.initValue(e,Y.EULER),this.emitters=[],this.renderers=[],this.time=0,this.oldTime=0,Y.pool=new Y.ParticlePool(this.proParticleCount),Y.integrator=new Y.NumericalIntegration(this.integrationType)}Y.POOL_MAX=1e3,Y.TIME_STEP=60,Y.MEASURE=100,Y.EULER="euler",Y.RK2="runge-kutta2",Y.RK4="runge-kutta4",Y.VERLET="verlet",Y.PARTICLE_CREATED="partilcleCreated",Y.PARTICLE_UPDATE="partilcleUpdate",Y.PARTICLE_SLEEP="particleSleep",Y.PARTICLE_DEAD="partilcleDead",Y.PROTON_UPDATE="protonUpdate",Y.PROTON_UPDATE_AFTER="protonUpdateAfter",Y.EMITTER_ADDED="emitterAdded",Y.EMITTER_REMOVED="emitterRemoved",Y.amendChangeTabsBug=!0,Y.TextureBuffer={},Y.TextureCanvasBuffer={},Y.prototype={addRender:function(t){t.proton=this,this.renderers.push(t.proton)},addEmitter:function(t){this.emitters.push(t),t.parent=this,this.dispatchEvent(new Y.Event({type:Y.EMITTER_ADDED,emitter:t}))},removeEmitter:function(t){var e=this.emitters.indexOf(t);this.emitters.splice(e,1),t.parent=null,this.dispatchEvent(new Y.Event({type:Y.EMITTER_REMOVED,emitter:t}))},update:function(){this.dispatchEvent(new Y.Event({type:Y.PROTON_UPDATE})),this.oldTime||(this.oldTime=(new Date).getTime());var t=(new Date).getTime();if(this.elapsed=(t-this.oldTime)/1e3,Y.amendChangeTabsBug&&this.amendChangeTabsBug(),this.oldTime=t,this.elapsed>0)for(var e=0;e<this.emitters.length;e++)this.emitters[e].update(this.elapsed);this.dispatchEvent(new Y.Event({type:Y.PROTON_UPDATE_AFTER}))},amendChangeTabsBug:function(){this.elapsed>.5&&(this.oldTime=(new Date).getTime(),this.elapsed=0)},getCount:function(){for(var t=0,e=this.emitters.length,r=0;r<e;r++)t+=this.emitters[r].particles.length;return t},destory:function(){for(var t=this.emitters.length,e=0;e<t;e++)this.emitters[e].destory(),delete this.emitters[e];this.emitters=[],this.time=0,this.oldTime=0,Y.pool.release()}},t.Proton=Y;var X=z.prototype;z.initialize=function(t){t.addEventListener=X.addEventListener,t.removeEventListener=X.removeEventListener,t.removeAllEventListeners=X.removeAllEventListeners,t.hasEventListener=X.hasEventListener,t.dispatchEvent=X.dispatchEvent},X._listeners=null,X.initialize=function(){},X.addEventListener=function(t,e){var r=this._listeners;r?this.removeEventListener(t,e):r=this._listeners={};var n=r[t];return n||(n=r[t]=[]),n.push(e),e},X.removeEventListener=function(t,e){var r=this._listeners;if(r){var n=r[t];if(!n)return;for(var i=0,o=n.length;i<o;i++)if(n[i]==e){1==o?delete r[t]:n.splice(i,1);break}}},X.removeAllEventListeners=function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null},X.dispatchEvent=function(t){var e=!1,r=this._listeners;if(t&&r){var n=r[t.type];if(!n)return e;for(var i=0,o=(n=n.slice()).length;i<o;i++){var s=n[i];e=e||s(t)}}return!!e},X.hasEventListener=function(t){var e=this._listeners;return!!e&&!!e[t]},Y.EventDispatcher=z,Y.EventDispatcher.initialize(Y.prototype),Y.Event=function(t){this.type=t.type,this.particle=t.particle,this.emitter=t.emitter};var H=H||{initValue:function(t,r){return t=null!=t&&t!=e?t:r},isArray:function(t){return"object"==typeof t&&t.hasOwnProperty("length")},destroyArray:function(t){t.length=0},destroyObject:function(t){for(var e in t)delete t[e]},getVector2D:function(t,e){return"object"==typeof t?t:new Y.Vector2D(t,e)},judgeVector2D:function(t){var e="";return(t.hasOwnProperty("x")||t.hasOwnProperty("y")||t.hasOwnProperty("p")||t.hasOwnProperty("position"))&&(e+="p"),(t.hasOwnProperty("vx")||t.hasOwnProperty("vx")||t.hasOwnProperty("v")||t.hasOwnProperty("velocity"))&&(e+="v"),(t.hasOwnProperty("ax")||t.hasOwnProperty("ax")||t.hasOwnProperty("a")||t.hasOwnProperty("accelerate"))&&(e+="a"),e},setVector2DByObject:function(t,e){e.hasOwnProperty("x")&&(t.p.x=e.x),e.hasOwnProperty("y")&&(t.p.y=e.y),e.hasOwnProperty("vx")&&(t.v.x=e.vx),e.hasOwnProperty("vy")&&(t.v.y=e.vy),e.hasOwnProperty("ax")&&(t.a.x=e.ax),e.hasOwnProperty("ay")&&(t.a.y=e.ay),e.hasOwnProperty("p")&&particle.p.copy(e.p),e.hasOwnProperty("v")&&particle.v.copy(e.v),e.hasOwnProperty("a")&&particle.a.copy(e.a),e.hasOwnProperty("position")&&particle.p.copy(e.position),e.hasOwnProperty("velocity")&&particle.v.copy(e.velocity),e.hasOwnProperty("accelerate")&&particle.a.copy(e.accelerate)},addPrototypeByObject:function(t,e,r){for(var n in e)r?r.indexOf(n)<0&&(t[n]=Y.Util.getSpanValue(e[n])):t[n]=Y.Util.getSpanValue(e[n]);return t},setPrototypeByObject:function(t,e,r){for(var n in e)t.hasOwnProperty(n)&&(r?r.indexOf(n)<0&&(t[n]=Y.Util.getSpanValue(e[n])):t[n]=Y.Util.getSpanValue(e[n]));return t},setSpanValue:function(t,e,r){return t instanceof Y.Span?t:e?r?new Y.Span(t,e,r):new Y.Span(t,e):new Y.Span(t)},getSpanValue:function(t){return t instanceof Y.Span?t.getValue():t},inherits:function(t,e){if(t._super_=e,Object.create)t.prototype=Object.create(e.prototype,{constructor:{value:e}});else{var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},getImageData:function(t,e,r){t.drawImage(e,r.x,r.y);var n=t.getImageData(r.x,r.y,r.width,r.height);return t.clearRect(r.x,r.y,r.width,r.height),n},getImage:function(t,e,r,n){"string"==typeof t?this.loadAndSetImage(t,e,r,n):"object"==typeof t?this.loadAndSetImage(t.src,e,r,n):t instanceof Image&&this.loadedImage(t.src,e,r,n,t)},loadedImage:function(t,e,r,n,i){if(e.target=i,e.transform.src=t,Y.TextureBuffer[t]||(Y.TextureBuffer[t]=e.target),r)if(Y.TextureCanvasBuffer[t])e.transform.canvas=Y.TextureCanvasBuffer[t];else{var o=Y.WebGLUtil.nhpot(e.target.width),s=Y.WebGLUtil.nhpot(e.target.height);e.transform.canvas=Y.DomUtil.createCanvas("canvas"+t,o,s),e.transform.canvas.getContext("2d").drawImage(e.target,0,0,e.target.width,e.target.height),Y.TextureCanvasBuffer[t]=e.transform.canvas}n&&n(e)},loadAndSetImage:function(t,e,r,n){if(Y.TextureBuffer[t])this.loadedImage(t,e,r,n,Y.TextureBuffer[t]);else{var i=this,o=new Image;o.onload=function(o){i.loadedImage(t,e,r,n,o.target)},o.src=t}},hexToRGB:function(t){var e="#"==t.charAt(0)?t.substring(1,7):t;return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},rgbToHex:function(t){return"rgb("+t.r+", "+t.g+", "+t.b+")"}};Y.Util=H;var q=q||{ipot:function(t){return 0==(t&t-1)},nhpot:function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},makeTranslation:function(t,e){return[1,0,0,0,1,0,t,e,1]},makeRotation:function(t){var e=Math.cos(t),r=Math.sin(t);return[e,-r,0,r,e,0,0,0,1]},makeScale:function(t,e){return[t,0,0,0,e,0,0,0,1]},matrixMultiply:function(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],h=t[8],c=e[0],p=e[1],d=e[2],f=e[3],g=e[4],v=e[5],m=e[6],y=e[7],x=e[8];return[r*c+n*f+i*m,r*p+n*g+i*y,r*d+n*v+i*x,o*c+s*f+a*m,o*p+s*g+a*y,o*d+s*v+a*x,l*c+u*f+h*m,l*p+u*g+h*y,l*d+u*v+h*x]}};Y.WebGLUtil=q;var Z=Z||{createCanvas:function(t,e,r,n){var i=document.createElement("canvas"),o=n||"absolute";return i.id=t,i.width=e,i.height=r,i.style.position=o,i.style.opacity=0,this.transformDom(i,-500,-500,0,0),i},transformDom:function(t,e,r,n,i){t.style.WebkitTransform="translate("+e+"px, "+r+"px) scale("+n+") rotate("+i+"deg)",t.style.MozTransform="translate("+e+"px, "+r+"px) scale("+n+") rotate("+i+"deg)",t.style.OTransform="translate("+e+"px, "+r+"px) scale("+n+") rotate("+i+"deg)",t.style.msTransform="translate("+e+"px, "+r+"px) scale("+n+") rotate("+i+"deg)",t.style.transform="translate("+e+"px, "+r+"px) scale("+n+") rotate("+i+"deg)"}};Y.DomUtil=Z,V.prototype.set=function(t,e){0==e?Y.Mat3.set(t,this.mats[0]):Y.Mat3.multiply(this.mats[e-1],t,this.mats[e]),this.size=Math.max(this.size,e+1)},V.prototype.push=function(t){0==this.size?Y.Mat3.set(t,this.mats[0]):Y.Mat3.multiply(this.mats[this.size-1],t,this.mats[this.size]),this.size++},V.prototype.pop=function(){this.size>0&&this.size--},V.prototype.top=function(){return this.mats[this.size-1]},Y.MStack=V,W.ID=0,W.prototype={getDirection:function(){return Math.atan2(this.v.x,-this.v.y)*(180/Math.PI)},reset:function(t){return this.life=1/0,this.age=0,this.energy=1,this.dead=!1,this.sleep=!1,this.target=null,this.sprite=null,this.parent=null,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.easing=Y.ease.setEasingByName(Y.easeLinear),t?(this.transform={},this.p=new Y.Vector2D,this.v=new Y.Vector2D,this.a=new Y.Vector2D,this.old={p:new Y.Vector2D,v:new Y.Vector2D,a:new Y.Vector2D},this.behaviours=[]):(Y.Util.destroyObject(this.transform),this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.removeAllBehaviours()),this.transform.rgb={r:255,g:255,b:255},this},update:function(t,e){if(!this.sleep){this.age+=t;var r,n=this.behaviours.length;for(r=0;r<n;r++)this.behaviours[r]&&this.behaviours[r].applyBehaviour(this,t,e)}if(this.age>=this.life)this.destory();else{var i=this.easing(this.age/this.life);this.energy=Math.max(1-i,0)}},addBehaviour:function(t){this.behaviours.push(t),t.hasOwnProperty("parents")&&t.parents.push(this),t.initialize(this)},addBehaviours:function(t){var e,r=t.length;for(e=0;e<r;e++)this.addBehaviour(t[e])},removeBehaviour:function(t){var e=this.behaviours.indexOf(t);e>-1&&((t=this.behaviours.splice(e,1)).parents=null)},removeAllBehaviours:function(){Y.Util.destroyArray(this.behaviours)},destory:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}},Y.Particle=W,G.prototype={create:function(t){return t?new newTypeParticle:new Y.Particle},getCount:function(){return this.poolList.length},add:function(){return this.poolList.push(this.create())},get:function(){return 0===this.poolList.length?this.create():this.poolList.pop().reset()},set:function(t){if(this.poolList.length<Y.POOL_MAX)return this.poolList.push(t)},release:function(){for(var t=0;t<this.poolList.length;t++)this.poolList[t].destory&&this.poolList[t].destory(),delete this.poolList[t];this.poolList=[]}},Y.ParticlePool=G;var Q={randomAToB:function(t,e,r){return r?Math.floor(Math.random()*(e-t))+t:t+Math.random()*(e-t)},randomFloating:function(t,e,r){return Q.randomAToB(t-e,t+e,r)},randomZone:function(t){},degreeTransform:function(t){return t*Math.PI/180},toColor16:function(t){return"#"+t.toString(16)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)}};Y.MathUtils=Q;var J=function(t){this.type=Y.Util.initValue(t,Y.EULER)};J.prototype={integrate:function(t,e,r){this.eulerIntegrate(t,e,r)},eulerIntegrate:function(t,e,r){t.sleep||(t.old.p.copy(t.p),t.old.v.copy(t.v),t.a.multiplyScalar(1/t.mass),t.v.add(t.a.multiplyScalar(e)),t.p.add(t.old.v.multiplyScalar(e)),r&&t.v.multiplyScalar(r),t.a.clear())}},Y.NumericalIntegration=J;var K=function(t,e){this.x=t||0,this.y=e||0};K.prototype={set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getGradient:function(){return 0!=this.x?Math.atan2(this.y,this.x):this.y>0?Math.PI/2:this.y<0?-Math.PI/2:void 0},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,r){return r!==e?this.addVectors(t,r):(this.x+=t.x,this.y+=t.y,this)},addXY:function(t,e){return this.x+=t,this.y+=e,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,r){return r!==e?this.subVectors(t,r):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return 0!==t?(this.x/=t,this.y/=t):this.set(0,0),this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},rotate:function(t){var e=this.x,r=this.y;return this.x=e*Math.cos(t)+r*Math.sin(t),this.y=-e*Math.sin(t)+r*Math.cos(t),this},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y},toArray:function(){return[this.x,this.y]},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new Y.Vector2D(this.x,this.y)}},Y.Vector2D=K;var tt=function(t,e){this.r=Math.abs(t)||0,this.tha=e||0};tt.prototype={set:function(t,e){return this.r=t,this.tha=e,this},setR:function(t){return this.r=t,this},setTha:function(t){return this.tha=t,this},copy:function(t){return this.r=t.r,this.tha=t.tha,this},toVector:function(){return new Y.Vector2D(this.getX(),this.getY())},getX:function(){return this.r*Math.sin(this.tha)},getY:function(){return-this.r*Math.cos(this.tha)},normalize:function(){return this.r=1,this},equals:function(t){return t.r===this.r&&t.tha===this.tha},toArray:function(){return[this.r,this.tha]},clear:function(){return this.r=0,this.tha=0,this},clone:function(){return new Y.Polar2D(this.r,this.tha)}},Y.Polar2D=tt,j.prototype={getValue:function(t){return this.isArray?this.a[Math.floor(this.a.length*Math.random())]:this.center?Y.MathUtils.randomFloating(this.a,this.b,t):Y.MathUtils.randomAToB(this.a,this.b,t)}},Y.Span=j,Y.getSpan=function(t,e,r){return new Y.Span(t,e,r)},Y.Util.inherits(U,Y.Span),U.prototype.getValue=function(){var t=this.colorArr[Math.floor(this.colorArr.length*Math.random())];return"random"==t||"Random"==t?Y.MathUtils.randomColor():t},Y.ColorSpan=U,$.prototype={contains:function(t,e){return t<=this.right&&t>=this.x&&e<=this.bottom&&e>=this.y}},Y.Rectangle=$;var et=et||{create:function(t){var e=new Float32Array(9);return t&&this.set(t,e),e},set:function(t,e){for(var r=0;r<9;r++)e[r]=t[r];return e},multiply:function(t,e,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[6],u=t[7],h=e[0],c=e[1],p=e[2],d=e[3],f=e[4],g=e[6],v=e[7];return r[0]=h*n+c*s,r[1]=h*i+c*a,r[2]=o*p,r[3]=d*n+f*s,r[4]=d*i+f*a,r[6]=g*n+v*s+l,r[7]=g*i+v*a+u,r},inverse:function(t,e){var r,n=t[0],i=t[1],o=t[3],s=t[4],a=t[6],l=t[7],u=s,h=-o,c=l*o-s*a;return r=1/(n*u+i*h),e[0]=u*r,e[1]=-i*r,e[3]=h*r,e[4]=n*r,e[6]=c*r,e[7]=(-l*n+i*a)*r,e},multiplyVec2:function(t,e,r){var n=e[0],i=e[1];return r[0]=n*t[0]+i*t[3]+t[6],r[1]=n*t[1]+i*t[4]+t[7],r}};Y.Mat3=et,N.id=0,N.prototype={reset:function(t,e){this.life=Y.Util.initValue(t,1/0),this.easing=Y.Util.initValue(e,Y.ease.setEasingByName(Y.easeLinear))},normalizeForce:function(t){return t.multiplyScalar(Y.MEASURE)},normalizeValue:function(t){return t*Y.MEASURE},initialize:function(t){},applyBehaviour:function(t,e,r){if(this.age+=e,this.age>=this.life||this.dead)this.energy=0,this.dead=!0,this.destory();else{var n=this.easing(t.age/t.life);this.energy=Math.max(1-n,0)}},destory:function(){var t,e=this.parents.length;for(t=0;t<e;t++)this.parents[t].removeBehaviour(this);this.parents=[]}},Y.Behaviour=N,k.prototype={init:function(){this.startTime=0,this.nextTime=this.timePan.getValue()},getValue:function(t){return this.startTime+=t,this.startTime>=this.nextTime?(this.startTime=0,this.nextTime=this.timePan.getValue(),1==this.numPan.b?this.numPan.getValue(!1)>.5?1:0:this.numPan.getValue(!0)):0}},Y.Rate=k,B.prototype.reset=function(){},B.prototype.init=function(t,e){e?this.initialize(e):this.initialize(t)},B.prototype.initialize=function(t){},Y.Initialize=B;var rt={initialize:function(t,e,r){var n,i=r.length;for(n=0;n<i;n++)r[n]instanceof Y.Initialize?r[n].init(t,e):Y.InitializeUtil.init(t,e,r[n]);Y.InitializeUtil.bindEmitter(t,e)},init:function(t,e,r){Y.Util.setPrototypeByObject(e,r),Y.Util.setVector2DByObject(e,r)},bindEmitter:function(t,e){t.bindEmitter&&(e.p.add(t.p),e.v.add(t.v),e.a.add(t.a),e.v.rotate(Y.MathUtils.degreeTransform(t.rotation)))}};Y.InitializeUtil=rt,Y.Util.inherits(F,Y.Initialize),F.prototype.initialize=function(t){this.lifePan.a==1/0?t.life=1/0:t.life=this.lifePan.getValue()},Y.Life=F,Y.Util.inherits(L,Y.Initialize),L.prototype.reset=function(t){this.zone=Y.Util.initValue(t,new Y.PointZone)},L.prototype.initialize=function(t){this.zone.getPosition(),t.p.x=this.zone.vector.x,t.p.y=this.zone.vector.y},Y.Position=L,Y.P=L,Y.Util.inherits(I,Y.Initialize),I.prototype.reset=function(t,e,r){this.rPan=Y.Util.setSpanValue(t),this.thaPan=Y.Util.setSpanValue(e),this.type=Y.Util.initValue(r,"vector")},I.prototype.normalizeVelocity=function(t){return t*Y.MEASURE},I.prototype.initialize=function(t){if("p"==this.type||"P"==this.type||"polar"==this.type){var e=new Y.Polar2D(this.normalizeVelocity(this.rPan.getValue()),this.thaPan.getValue()*Math.PI/180);t.v.x=e.getX(),t.v.y=e.getY()}else t.v.x=this.normalizeVelocity(this.rPan.getValue()),t.v.y=this.normalizeVelocity(this.thaPan.getValue())},Y.Velocity=I,Y.V=I,Y.Util.inherits(D,Y.Initialize),D.prototype.initialize=function(t){t.mass=this.massPan.getValue()},Y.Mass=D,Y.Util.inherits(P,Y.Initialize),P.prototype.reset=function(t,e,r){this.radius=Y.Util.setSpanValue(t,e,r)},P.prototype.initialize=function(t){t.radius=this.radius.getValue(),t.transform.oldRadius=t.radius},Y.Radius=P,Y.Util.inherits(O,Y.Initialize),O.prototype.initialize=function(t){var e=this.image.getValue();t.target="string"==typeof e?{width:this.w,height:this.h,src:e}:e},O.prototype.setSpanValue=function(t){return t instanceof Y.ColorSpan?t:new Y.ColorSpan(t)},Y.ImageTarget=O,Y.Util.inherits(R,Y.Behaviour),R.prototype.reset=function(t,e,r,n){this.force=this.normalizeForce(new Y.Vector2D(t,e)),r&&R._super_.prototype.reset.call(this,r,n)},R.prototype.applyBehaviour=function(t,e,r){R._super_.prototype.applyBehaviour.call(this,t,e,r),t.a.add(this.force)},Y.Force=R,Y.F=R,Y.Util.inherits(M,Y.Behaviour),M.prototype.reset=function(t,e,r,n,i){this.targetPosition=Y.Util.initValue(t,new Y.Vector2D),this.radius=Y.Util.initValue(r,1e3),this.force=Y.Util.initValue(this.normalizeValue(e),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new Y.Vector2D,this.lengthSq=0,n&&M._super_.prototype.reset.call(this,n,i)},M.prototype.applyBehaviour=function(t,e,r){M._super_.prototype.applyBehaviour.call(this,t,e,r),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.p),this.lengthSq=this.attractionForce.lengthSq(),this.lengthSq>4e-6&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),t.a.add(this.attractionForce))},Y.Attraction=M,Y.Util.inherits(C,Y.Behaviour),C.prototype.reset=function(t,e,r,n,i){this.panFoce=new Y.Vector2D(t,e),this.panFoce=this.normalizeForce(this.panFoce),this.delay=r,n&&C._super_.prototype.reset.call(this,n,i)},C.prototype.applyBehaviour=function(t,e,r){C._super_.prototype.applyBehaviour.call(this,t,e,r),this.time+=e,this.time>=this.delay&&(t.a.addXY(Y.MathUtils.randomAToB(-this.panFoce.x,this.panFoce.x),Y.MathUtils.randomAToB(-this.panFoce.y,this.panFoce.y)),this.time=0)},Y.RandomDrift=C,Y.Util.inherits(A,Y.Attraction),A.prototype.reset=function(t,e,r,n,i){A._super_.prototype.reset.call(this,t,e,r,n,i),this.force*=-1},Y.Repulsion=A,Y.Util.inherits(S,Y.Force),S.prototype.reset=function(t,e,r){S._super_.prototype.reset.call(this,0,t,e,r)},Y.Gravity=S,Y.G=S,Y.Util.inherits(E,Y.Behaviour),E.prototype.reset=function(t,e,r,n,i){this.emitter=Y.Util.initValue(t,null),this.mass=Y.Util.initValue(e,!0),this.callback=Y.Util.initValue(r,null),this.collisionPool=[],this.delta=new Y.Vector2D,n&&E._super_.prototype.reset.call(this,n,i)},E.prototype.applyBehaviour=function(t,e,r){for(var n,i,o,s,a,l=this.emitter?this.emitter.particles.slice(r):this.pool.slice(r),u=l.length,h=0;h<u;h++)(n=l[h])!==t&&(this.delta.copy(n.p),this.delta.sub(t.p),i=this.delta.lengthSq(),distance=t.radius+n.radius,i<=distance*distance&&(o=distance-Math.sqrt(i),o+=.5,totalMass=t.mass+n.mass,s=this.mass?n.mass/totalMass:.5,a=this.mass?t.mass/totalMass:.5,t.p.add(this.delta.clone().normalize().multiplyScalar(o*-s)),n.p.add(this.delta.normalize().multiplyScalar(o*a)),this.callback&&this.callback(t,n)))},Y.Collision=E,Y.Util.inherits(w,Y.Behaviour),w.prototype.reset=function(t,e,r,n){this.zone=t,this.zone.crossType=Y.Util.initValue(e,"dead"),r&&w._super_.prototype.reset.call(this,r,n)},w.prototype.applyBehaviour=function(t,e,r){w._super_.prototype.applyBehaviour.call(this,t,e,r),this.zone.crossing(t)},Y.CrossZone=w,Y.Util.inherits(T,Y.Behaviour),T.prototype.reset=function(t,r,n,i){this.same=null==r||r==e,this.a=Y.Util.setSpanValue(Y.Util.initValue(t,1)),this.b=Y.Util.setSpanValue(r),n&&T._super_.prototype.reset.call(this,n,i)},T.prototype.initialize=function(t){t.transform.alphaA=this.a.getValue(),this.same?t.transform.alphaB=t.transform.alphaA:t.transform.alphaB=this.b.getValue()},T.prototype.applyBehaviour=function(t,e,r){T._super_.prototype.applyBehaviour.call(this,t,e,r),t.alpha=t.transform.alphaB+(t.transform.alphaA-t.transform.alphaB)*this.energy,t.alpha<.001&&(t.alpha=0)},Y.Alpha=T,Y.Util.inherits(_,Y.Behaviour),_.prototype.reset=function(t,r,n,i){this.same=null==r||r==e,this.a=Y.Util.setSpanValue(Y.Util.initValue(t,1)),this.b=Y.Util.setSpanValue(r),n&&_._super_.prototype.reset.call(this,n,i)},_.prototype.initialize=function(t){t.transform.scaleA=this.a.getValue(),t.transform.oldRadius=t.radius,this.same?t.transform.scaleB=t.transform.scaleA:t.transform.scaleB=this.b.getValue()},_.prototype.applyBehaviour=function(t,e,r){_._super_.prototype.applyBehaviour.call(this,t,e,r),t.scale=t.transform.scaleB+(t.transform.scaleA-t.transform.scaleB)*this.energy,t.scale<1e-4&&(t.scale=0),t.radius=t.transform.oldRadius*t.scale},Y.Scale=_,Y.Util.inherits(b,Y.Behaviour),b.prototype.reset=function(t,r,n,i,o){this.same=null==r||r==e,this.a=Y.Util.setSpanValue(Y.Util.initValue(t,"Velocity")),this.b=Y.Util.setSpanValue(Y.Util.initValue(r,0)),this.style=Y.Util.initValue(n,"to"),i&&b._super_.prototype.reset.call(this,i,o)},b.prototype.initialize=function(t){t.rotation=this.a.getValue(),t.transform.rotationA=this.a.getValue(),this.same||(t.transform.rotationB=this.b.getValue())},b.prototype.applyBehaviour=function(t,e,r){b._super_.prototype.applyBehaviour.call(this,t,e,r),this.same?"V"!=this.a.a&&"Velocity"!=this.a.a&&"v"!=this.a.a||(t.rotation=t.getDirection()):"to"==this.style||"TO"==this.style||"_"==this.style?t.rotation+=t.transform.rotationB+(t.transform.rotationA-t.transform.rotationB)*this.energy:t.rotation+=t.transform.rotationB},Y.Rotate=b,Y.Util.inherits(x,Y.Behaviour),x.prototype.reset=function(t,e,r,n){this.color1=this.setSpanValue(t),this.color2=this.setSpanValue(e),r&&x._super_.prototype.reset.call(this,r,n)},x.prototype.initialize=function(t){t.color=this.color1.getValue(),t.transform.beginRGB=Y.Util.hexToRGB(t.color),this.color2&&(t.transform.endRGB=Y.Util.hexToRGB(this.color2.getValue()))},x.prototype.applyBehaviour=function(t,e,r){this.color2?(x._super_.prototype.applyBehaviour.call(this,t,e,r),t.transform.rgb.r=t.transform.endRGB.r+(t.transform.beginRGB.r-t.transform.endRGB.r)*this.energy,t.transform.rgb.g=t.transform.endRGB.g+(t.transform.beginRGB.g-t.transform.endRGB.g)*this.energy,t.transform.rgb.b=t.transform.endRGB.b+(t.transform.beginRGB.b-t.transform.endRGB.b)*this.energy,t.transform.rgb.r=parseInt(t.transform.rgb.r,10),t.transform.rgb.g=parseInt(t.transform.rgb.g,10),t.transform.rgb.b=parseInt(t.transform.rgb.b,10)):(t.transform.rgb.r=t.transform.beginRGB.r,t.transform.rgb.g=t.transform.beginRGB.g,t.transform.rgb.b=t.transform.beginRGB.b)},x.prototype.setSpanValue=function(t){return t?t instanceof Y.ColorSpan?t:new Y.ColorSpan(t):null},Y.Color=x,Y.Util.inherits(y,Y.Behaviour),y.prototype.reset=function(t,e,r,n){this.distanceVec=new Y.Vector2D,this.centerPoint=Y.Util.initValue(t,new Y.Vector2D),this.force=Y.Util.initValue(this.normalizeValue(e),100),r&&y._super_.prototype.reset.call(this,r,n)},y.prototype.initialize=function(t){},y.prototype.applyBehaviour=function(t,e,r){this.distanceVec.set(this.centerPoint.x-t.p.x,this.centerPoint.y-t.p.y);var n=this.distanceVec.lengthSq();if(0!=n){var i=this.distanceVec.length(),o=this.force*e/(n*i);t.v.x+=o*this.distanceVec.x,t.v.y+=o*this.distanceVec.y}},Y.GravityWell=y,m.ID=0,Y.Util.inherits(m,Y.Particle),Y.EventDispatcher.initialize(m.prototype),m.prototype.emit=function(t,e){this.emitTime=0,this.emitTotalTimes=Y.Util.initValue(t,1/0),1==e||"life"==e||"destroy"==e?this.life="once"==t?1:this.emitTotalTimes:isNaN(e)||(this.life=e),this.rate.init()},m.prototype.stopEmit=function(){this.emitTotalTimes=-1,this.emitTime=0},m.prototype.removeAllParticles=function(){for(var t=0;t<this.particles.length;t++)this.particles[t].dead=!0},m.prototype.createParticle=function(t,e){var r=Y.pool.get();return this.setupParticle(r,t,e),this.dispatchEvent(new Y.Event({type:Y.PARTICLE_CREATED,particle:r})),r},m.prototype.addSelfInitialize=function(t){t.init?t.init(this):this.initAll()},m.prototype.addInitialize=function(){var t,e=arguments.length;for(t=0;t<e;t++)this.initializes.push(arguments[t])},m.prototype.removeInitialize=function(t){var e=this.initializes.indexOf(t);e>-1&&this.initializes.splice(e,1)},m.prototype.removeInitializers=function(){Y.Util.destroyArray(this.initializes)},m.prototype.addBehaviour=function(){var t,e=arguments.length;for(t=0;t<e;t++)this.behaviours.push(arguments[t]),arguments[t].hasOwnProperty("parents")&&arguments[t].parents.push(this)},m.prototype.removeBehaviour=function(t){var e=this.behaviours.indexOf(t);e>-1&&this.behaviours.splice(e,1)},m.prototype.removeAllBehaviours=function(){Y.Util.destroyArray(this.behaviours)},m.prototype.integrate=function(t){var e=1-this.damping;Y.integrator.integrate(this,t,e);var r,n=this.particles.length;for(r=0;r<n;r++){var i=this.particles[r];i.update(t,r),Y.integrator.integrate(i,t,e),this.dispatchEvent(new Y.Event({type:Y.PARTICLE_UPDATE,particle:i}))}},m.prototype.emitting=function(t){if("once"==this.emitTotalTimes){var e=this.rate.getValue(99999);for(r=0;r<e;r++)this.createParticle();this.emitTotalTimes="none"}else if(!isNaN(this.emitTotalTimes)&&(this.emitTime+=t,this.emitTime<this.emitTotalTimes)){var r;e=this.rate.getValue(t);for(r=0;r<e;r++)this.createParticle()}},m.prototype.update=function(t){var e,r;for(this.age+=t,(this.age>=this.life||this.dead)&&this.destroy(),this.emitting(t),this.integrate(t),r=this.particles.length-1;r>=0;r--)(e=this.particles[r]).dead&&(Y.pool.set(e),this.particles.splice(r,1),this.dispatchEvent(new Y.Event({type:Y.PARTICLE_DEAD,particle:e})))},m.prototype.setupParticle=function(t,e,r){var n=this.initializes,i=this.behaviours;e&&(n=e instanceof Array?e:[e]),r&&(i=r instanceof Array?r:[r]),Y.InitializeUtil.initialize(this,t,n),t.addBehaviours(i),t.parent=this,this.particles.push(t)},m.prototype.destroy=function(){this.dead=!0,this.emitTotalTimes=-1,0==this.particles.length&&(this.removeInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this))},Y.Emitter=m,Y.Util.inherits(v,Y.Emitter),v.prototype.addSelfBehaviour=function(){var t,e=arguments.length;for(t=0;t<e;t++)this.selfBehaviours.push(arguments[t])},v.prototype.removeSelfBehaviour=function(t){var e=this.selfBehaviours.indexOf(t);e>-1&&this.selfBehaviours.splice(e,1)},v.prototype.update=function(t){if(v._super_.prototype.update.call(this,t),!this.sleep){var e,r=this.selfBehaviours.length;for(e=0;e<r;e++)this.selfBehaviours[e].applyBehaviour(this,t,e)}},Y.BehaviourEmitter=v,Y.Util.inherits(g,Y.Emitter),g.prototype.initEventHandler=function(){var t=this;this.mousemoveHandler=function(e){t.mousemove.call(t,e)},this.mousedownHandler=function(e){t.mousedown.call(t,e)},this.mouseupHandler=function(e){t.mouseup.call(t,e)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)},g.prototype.emit=function(){this._allowEmitting=!0},g.prototype.stopEmit=function(){this._allowEmitting=!1},g.prototype.mousemove=function(t){t.layerX||0==t.layerX?(this.p.x+=(t.layerX-this.p.x)*this.ease,this.p.y+=(t.layerY-this.p.y)*this.ease):(t.offsetX||0==t.offsetX)&&(this.p.x+=(t.offsetX-this.p.x)*this.ease,this.p.y+=(t.offsetY-this.p.y)*this.ease),this._allowEmitting&&g._super_.prototype.emit.call(this,"once")},g.prototype.destroy=function(){g._super_.prototype.destroy.call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)},Y.FollowEmitter=g;var nt=nt||{easeLinear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*((1+(e*=1.525))*t-e):.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},setEasingByName:function(t){switch(t){case"easeLinear":return Y.ease.easeLinear;case"easeInQuad":return Y.ease.easeInQuad;case"easeOutQuad":return Y.ease.easeOutQuad;case"easeInOutQuad":return Y.ease.easeInOutQuad;case"easeInCubic":return Y.ease.easeInCubic;case"easeOutCubic":return Y.ease.easeOutCubic;case"easeInOutCubic":return Y.ease.easeInOutCubic;case"easeInQuart":return Y.ease.easeInQuart;case"easeOutQuart":return Y.ease.easeOutQuart;case"easeInOutQuart":return Y.ease.easeInOutQuart;case"easeInSine":return Y.ease.easeInSine;case"easeOutSine":return Y.ease.easeOutSine;case"easeInOutSine":return Y.ease.easeInOutSine;case"easeInExpo":return Y.ease.easeInExpo;case"easeOutExpo":return Y.ease.easeOutExpo;case"easeInOutExpo":return Y.ease.easeInOutExpo;case"easeInCirc":return Y.ease.easeInCirc;case"easeOutCirc":return Y.ease.easeOutCirc;case"easeInOutCirc":return Y.ease.easeInOutCirc;case"easeInBack":return Y.ease.easeInBack;case"easeOutBack":return Y.ease.easeOutBack;case"easeInOutBack":return Y.ease.easeInOutBack;default:return Y.ease.easeLinear}}};Y.ease=nt,Y.easeLinear="easeLinear",Y.easeInQuad="easeInQuad",Y.easeOutQuad="easeOutQuad",Y.easeInOutQuad="easeInOutQuad",Y.easeInCubic="easeInCubic",Y.easeOutCubic="easeOutCubic",Y.easeInOutCubic="easeInOutCubic",Y.easeInQuart="easeInQuart",Y.easeOutQuart="easeOutQuart",Y.easeInOutQuart="easeInOutQuart",Y.easeInSine="easeInSine",Y.easeOutSine="easeOutSine",Y.easeInOutSine="easeInOutSine",Y.easeInExpo="easeInExpo",Y.easeOutExpo="easeOutExpo",Y.easeInOutExpo="easeInOutExpo",Y.easeInCirc="easeInCirc",Y.easeOutCirc="easeOutCirc",Y.easeInOutCirc="easeInOutCirc",Y.easeInBack="easeInBack",Y.easeOutBack="easeOutBack",Y.easeInOutBack="easeInOutBack",f.prototype={start:function(){this.addEventHandler(),this.renderer.start()},stop:function(){this.renderer.stop()},resize:function(t,e){this.renderer.resize(t,e)},setStroke:function(t,e){this.renderer.hasOwnProperty("stroke")?this.renderer.setStroke(t,e):alert("Sorry this renderer do not suppest stroke method!")},createImageData:function(t){this.renderer instanceof Y.PixelRender&&this.renderer.createImageData(t)},setMaxRadius:function(t){this.renderer instanceof Y.WebGLRender&&this.renderer.setMaxRadius(t)},blendEquation:function(t){this.renderer instanceof Y.WebGLRender&&this.renderer.blendEquation(t)},blendFunc:function(t,e){this.renderer instanceof Y.WebGLRender&&this.renderer.blendFunc(t,e)},setType:function(t){this.type=t,this.renderer=this.getRenderer()},getRenderer:function(){switch(this.type){case"dom":return new Y.DomRender(this.proton,this.element);case"canvas":return new Y.CanvasRender(this.proton,this.element);case"webgl":return new Y.WebGLRender(this.proton,this.element);case"easel":case"easeljs":return new Y.EaselRender(this.proton,this.element);case"pixel":return new Y.PixelRender(this.proton,this.element);default:return new Y.BaseRender(this.proton,this.element)}},render:function(t){this.renderer.render(t)},addEventHandler:function(){this.onProtonUpdate&&(this.renderer.onProtonUpdate=this.onProtonUpdate),this.onParticleCreated&&(this.renderer.onParticleCreated=this.onParticleCreated),this.onParticleUpdate&&(this.renderer.onParticleUpdate=this.onParticleUpdate),this.onParticleDead&&(this.renderer.onParticleDead=this.onParticleDead)}},Y.Renderer=f,d.prototype={start:function(){var t=this;this.proton.addEventListener(Y.PROTON_UPDATE,function(e){t.onProtonUpdate.call(t)}),this.proton.addEventListener(Y.PROTON_UPDATE_AFTER,function(e){t.onProtonUpdateAfter.call(t)}),this.proton.addEventListener(Y.EMITTER_ADDED,function(e){t.onEmitterAdded.call(t,e.emitter)}),this.proton.addEventListener(Y.EMITTER_REMOVED,function(e){t.onEmitterRemoved.call(t,e.emitter)});var e,r=this.proton.emitters.length;for(e=0;e<r;e++){var n=this.proton.emitters[e];this.addEmitterListener(n)}},resize:function(t,e){},addEmitterListener:function(t){var e=this;t.addEventListener(Y.PARTICLE_CREATED,function(t){e.onParticleCreated.call(e,t.particle)}),t.addEventListener(Y.PARTICLE_UPDATE,function(t){e.onParticleUpdate.call(e,t.particle)}),t.addEventListener(Y.PARTICLE_DEAD,function(t){e.onParticleDead.call(e,t.particle)})},stop:function(){var t,e=this.proton.emitters.length;for(this.proton.removeAllEventListeners(),t=0;t<e;t++){this.proton.emitters[t].removeAllEventListeners()}},onEmitterAdded:function(t){this.addEmitterListener(t)},onEmitterRemoved:function(t){t.removeAllEventListeners()},onProtonUpdate:function(){},onProtonUpdateAfter:function(){},onParticleCreated:function(t){},onParticleUpdate:function(t){},onParticleDead:function(t){}},Y.BaseRender=d,Y.Util.inherits(p,Y.BaseRender),p.prototype.start=function(){p._super_.prototype.start.call(this)},p.prototype.setStroke=function(t,e){t=Y.Util.initValue(t,"#000000"),e=Y.Util.initValue(e,1),this.stroke={color:t,thinkness:e}},p.prototype.onProtonUpdate=function(){},p.prototype.onParticleCreated=function(t){if(t.target){var e=this;Y.Util.getImage(t.target,t,!1,function(t){e.setImgInDIV.call(e,t)})}else t.transform.canvas=Y.DomUtil.createCanvas(t.id+"_canvas",t.radius+1,t.radius+1,"absolute"),t.transform.bakOldRadius=t.radius,this.stroke?(t.transform.canvas.width=2*t.radius+2*this.stroke.thinkness,t.transform.canvas.height=2*t.radius+2*this.stroke.thinkness):(t.transform.canvas.width=2*t.radius+1,t.transform.canvas.height=2*t.radius+1),t.transform.context=t.transform.canvas.getContext("2d"),t.transform.context.fillStyle=t.color,t.transform.context.beginPath(),t.transform.context.arc(t.radius,t.radius,t.radius,0,2*Math.PI,!0),this.stroke&&(t.transform.context.strokeStyle=this.stroke.color,t.transform.context.lineWidth=this.stroke.thinkness,t.transform.context.stroke()),t.transform.context.closePath(),t.transform.context.fill(),this.element.appendChild(t.transform.canvas)},p.prototype.onParticleUpdate=function(t){t.target?t.target instanceof Image&&(t.transform.canvas.style.opacity=t.alpha,Y.DomUtil.transformDom(t.transform.canvas,t.p.x-t.target.width/2,t.p.y-t.target.height/2,t.scale,t.rotation)):(t.transform.canvas.style.opacity=t.alpha,t.transform.oldRadius?Y.DomUtil.transformDom(t.transform.canvas,t.p.x-t.transform.oldRadius,t.p.y-t.transform.oldRadius,t.scale,t.rotation):Y.DomUtil.transformDom(t.transform.canvas,t.p.x-t.transform.bakOldRadius,t.p.y-t.transform.bakOldRadius,t.scale,t.rotation))},p.prototype.onParticleDead=function(t){t.transform.canvas&&this.element.removeChild(t.transform.canvas)},p.prototype.setImgInDIV=function(t){t.transform.canvas=Y.DomUtil.createCanvas(t.id+"_canvas",t.target.width+1,t.target.height+1,"absolute",t.p.x-t.radius,t.p.y-t.radius),t.transform.context=t.transform.canvas.getContext("2d"),t.transform.context.drawImage(t.target,0,0,t.target.width,t.target.height),this.element.appendChild(t.transform.canvas)},Y.DomRender=p,Y.Util.inherits(c,Y.BaseRender),c.prototype.resize=function(t,e){},c.prototype.start=function(){c._super_.prototype.start.call(this)},c.prototype.onProtonUpdate=function(){},c.prototype.onParticleCreated=function(t){if(t.target)t.target=t.target.clone(),t.target.parent||(!t.target.image||(t.target.regX=t.target.image.width/2,t.target.regY=t.target.image.height/2),this.element.addChild(t.target));else{var e=new createjs.Graphics;this.stroke&&(1==this.stroke?e.beginStroke("#000000"):this.stroke instanceof String&&e.beginStroke(this.stroke)),e.beginFill(t.color).drawCircle(0,0,t.radius);var r=new createjs.Shape(e);t.target=r,this.element.addChild(t.target)}},c.prototype.onParticleUpdate=function(t){t.target&&(t.target.x=t.p.x,t.target.y=t.p.y,t.target.alpha=t.alpha,t.target.scaleX=t.target.scaleY=t.scale,t.target.rotation=t.rotation)},c.prototype.onParticleDead=function(t){t.target&&t.target.parent&&t.target.parent.removeChild(t.target)},Y.EaselRender=c,Y.Util.inherits(h,Y.BaseRender),h.prototype.resize=function(t,e){this.element.width=t,this.element.height=e},h.prototype.start=function(){h._super_.prototype.start.call(this)},h.prototype.setStroke=function(t,e){t=Y.Util.initValue(t,"#000000"),e=Y.Util.initValue(e,1),this.stroke={color:t,thinkness:e}},h.prototype.onProtonUpdate=function(){this.context.clearRect(0,0,this.element.width,this.element.height)},h.prototype.onParticleCreated=function(t){t.target?Y.Util.getImage(t.target,t,!1):t.color=t.color?t.color:"#ff0000"},h.prototype.onParticleUpdate=function(t){if(t.target){if(t.target instanceof Image){var e=t.target.width*t.scale|0,r=t.target.height*t.scale|0,n=t.p.x-e/2,i=t.p.y-r/2;if(t.color){t.transform.buffer||(t.transform.buffer=this.getBuffer(t.target));var o=t.transform.buffer.getContext("2d");o.clearRect(0,0,t.transform.buffer.width,t.transform.buffer.height),o.globalAlpha=t.alpha,o.drawImage(t.target,0,0),o.globalCompositeOperation="source-atop",o.fillStyle=Y.Util.rgbToHex(t.transform.rgb),o.fillRect(0,0,t.transform.buffer.width,t.transform.buffer.height),o.globalCompositeOperation="source-over",o.globalAlpha=1,this.context.drawImage(t.transform.buffer,0,0,t.transform.buffer.width,t.transform.buffer.height,n,i,e,r)}else this.context.save(),this.context.globalAlpha=t.alpha,this.context.translate(t.p.x,t.p.y),this.context.rotate(Y.MathUtils.degreeTransform(t.rotation)),this.context.translate(-t.p.x,-t.p.y),this.context.drawImage(t.target,0,0,t.target.width,t.target.height,n,i,e,r),this.context.globalAlpha=1,this.context.restore()}}else t.transform.rgb?this.context.fillStyle="rgba("+t.transform.rgb.r+","+t.transform.rgb.g+","+t.transform.rgb.b+","+t.alpha+")":this.context.fillStyle=t.color,this.context.beginPath(),this.context.arc(t.p.x,t.p.y,t.radius,0,2*Math.PI,!0),this.stroke&&(this.context.strokeStyle=this.stroke.color,this.context.lineWidth=this.stroke.thinkness,this.context.stroke()),this.context.closePath(),this.context.fill()},h.prototype.onParticleDead=function(t){},h.prototype.getBuffer=function(t){if(t instanceof Image){var e=t.width+"_"+t.height,r=this.bufferCache[e];return r||((r=document.createElement("canvas")).width=t.width,r.height=t.height,this.bufferCache[e]=r),r}},Y.CanvasRender=h,Y.Util.inherits(u,Y.BaseRender),u.prototype.resize=function(t,e){this.element.width=t,this.element.height=e},u.prototype.createImageData=function(t){this.rectangle=t||new Y.Rectangle(0,0,this.element.width,this.element.height),this.imageData=this.context.createImageData(this.rectangle.width,this.rectangle.height),this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)},u.prototype.start=function(){u._super_.prototype.start.call(this)},u.prototype.onProtonUpdate=function(){this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.imageData=this.context.getImageData(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)},u.prototype.onProtonUpdateAfter=function(){this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)},u.prototype.onParticleCreated=function(t){},u.prototype.onParticleUpdate=function(t){this.imageData&&this.setPixel(this.imageData,Math.floor(t.p.x-this.rectangle.x),Math.floor(t.p.y-this.rectangle.y),t)},u.prototype.setPixel=function(t,e,r,n){var i=n.transform.rgb;if(!(e<0||e>this.element.width||r<0||r>this.elementwidth)){var o=4*((r>>0)*t.width+(e>>0));t.data[o]=i.r,t.data[o+1]=i.g,t.data[o+2]=i.b,t.data[o+3]=255*n.alpha}},u.prototype.onParticleDead=function(t){},Y.PixelRender=u,Y.Util.inherits(l,Y.BaseRender),l.prototype.resize=function(t,e){this.umat[4]=-2,this.umat[7]=1,this.smat[0]=1/t,this.smat[4]=1/e,this.mstack.set(this.umat,0),this.mstack.set(this.smat,1),this.gl.viewport(0,0,t,e),this.element.width=t,this.element.height=e},l.prototype.setMaxRadius=function(t){this.circleCanvasURL=this.createCircle(t)},l.prototype.getVertexShader=function(){return["uniform vec2 viewport;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 tMat;","varying vec2 vTextureCoord;","varying float alpha;","void main() {","vec3 v = tMat * vec3(aVertexPosition, 1.0);","gl_Position = vec4(v.x, v.y, 0, 1);","vTextureCoord = aTextureCoord;","alpha = tMat[0][2];","}"].join("\n")},l.prototype.getFragmentShader=function(){return["precision mediump float;","varying vec2 vTextureCoord;","varying float alpha;","uniform sampler2D uSampler;","uniform vec4 color;","uniform bool useTexture;","uniform vec3 uColor;","void main() {","vec4 textureColor = texture2D(uSampler, vTextureCoord);","gl_FragColor = textureColor * vec4(uColor, 1.0);","gl_FragColor.w *= alpha;","}"].join("\n")},l.prototype.initVar=function(){this.mstack=new Y.MStack,this.umat=Y.Mat3.create([2,0,1,0,-2,0,-1,1,1]),this.smat=Y.Mat3.create([.01,0,1,0,.01,0,0,0,1]),this.texturebuffers={}},l.prototype.start=function(){l._super_.prototype.start.call(this),this.resize(this.element.width,this.element.height)},l.prototype.blendEquation=function(t){this.gl.blendEquation(this.gl[t])},l.prototype.blendFunc=function(t,e){this.gl.blendFunc(this.gl[t],this.gl[e])},l.prototype.getShader=function(t,e,r){var n;return n=r?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER),t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(alert(t.getShaderInfoLog(n)),null)},l.prototype.initShaders=function(){var t=this.getShader(this.gl,this.getFragmentShader(),!0),e=this.getShader(this.gl,this.getVertexShader(),!1);this.sprogram=this.gl.createProgram(),this.gl.attachShader(this.sprogram,e),this.gl.attachShader(this.sprogram,t),this.gl.linkProgram(this.sprogram),this.gl.getProgramParameter(this.sprogram,this.gl.LINK_STATUS)||alert("Could not initialise shaders"),this.gl.useProgram(this.sprogram),this.sprogram.vpa=this.gl.getAttribLocation(this.sprogram,"aVertexPosition"),this.sprogram.tca=this.gl.getAttribLocation(this.sprogram,"aTextureCoord"),this.gl.enableVertexAttribArray(this.sprogram.tca),this.gl.enableVertexAttribArray(this.sprogram.vpa),this.sprogram.tMatUniform=this.gl.getUniformLocation(this.sprogram,"tMat"),this.sprogram.samplerUniform=this.gl.getUniformLocation(this.sprogram,"uSampler"),this.sprogram.useTex=this.gl.getUniformLocation(this.sprogram,"useTexture"),this.sprogram.color=this.gl.getUniformLocation(this.sprogram,"uColor"),this.gl.uniform1i(this.sprogram.useTex,1)},l.prototype.initBuffers=function(){this.unitIBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer);this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,3,1,0,2,3]),this.gl.STATIC_DRAW);for(var t=[],e=0;e<100;e++)t.push(e);for(idx=new Uint16Array(t),this.unitI33=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitI33),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,idx,this.gl.STATIC_DRAW),t=[],e=0;e<100;e++)t.push(e,e+1,e+2);idx=new Uint16Array(t),this.stripBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.stripBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,idx,this.gl.STATIC_DRAW)},l.prototype.createCircle=function(t){this.circleCanvasRadius=Y.WebGLUtil.nhpot(Y.Util.initValue(t,32));var e=Y.DomUtil.createCanvas("circle_canvas",2*this.circleCanvasRadius,2*this.circleCanvasRadius),r=e.getContext("2d");return r.beginPath(),r.arc(this.circleCanvasRadius,this.circleCanvasRadius,this.circleCanvasRadius,0,2*Math.PI,!0),r.closePath(),r.fillStyle="#FFF",r.fill(),e.toDataURL()},l.prototype.setImgInCanvas=function(t){var e=t.target.width,r=t.target.height,n=Y.WebGLUtil.nhpot(t.target.width),i=Y.WebGLUtil.nhpot(t.target.height),o=t.target.width/n,s=t.target.height/i;this.texturebuffers[t.transform.src]||(this.texturebuffers[t.transform.src]=[this.gl.createTexture(),this.gl.createBuffer(),this.gl.createBuffer()]),t.transform.texture=this.texturebuffers[t.transform.src][0],t.transform.vcBuffer=this.texturebuffers[t.transform.src][1],t.transform.tcBuffer=this.texturebuffers[t.transform.src][2],this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.tcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,o,0,0,s,s,s]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.vcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,e,0,0,r,e,r]),this.gl.STATIC_DRAW);var a=t.transform.canvas.getContext("2d").getImageData(0,0,n,i);this.gl.bindTexture(this.gl.TEXTURE_2D,t.transform.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,a),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST),this.gl.generateMipmap(this.gl.TEXTURE_2D),t.transform.textureLoaded=!0,t.transform.textureWidth=e,t.transform.textureHeight=r},l.prototype.setStroke=function(t,e){},l.prototype.onProtonUpdate=function(){},l.prototype.onParticleCreated=function(t){var e=this;t.transform.textureLoaded=!1,t.transform.tmat=Y.Mat3.create(),t.transform.tmat[8]=1,t.transform.imat=Y.Mat3.create(),t.transform.imat[8]=1,t.target?Y.Util.getImage(t.target,t,!0,function(t){e.setImgInCanvas.call(e,t),t.transform.oldScale=1}):Y.Util.getImage(this.circleCanvasURL,t,!0,function(t){e.setImgInCanvas.call(e,t),t.transform.oldScale=t.radius/e.circleCanvasRadius})},l.prototype.onParticleUpdate=function(t){t.transform.textureLoaded&&(this.updateMatrix(t),this.gl.uniform3f(this.sprogram.color,t.transform.rgb.r/255,t.transform.rgb.g/255,t.transform.rgb.b/255),this.gl.uniformMatrix3fv(this.sprogram.tMatUniform,!1,this.mstack.top()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.vcBuffer),this.gl.vertexAttribPointer(this.sprogram.vpa,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.tcBuffer),this.gl.vertexAttribPointer(this.sprogram.tca,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,t.transform.texture),this.gl.uniform1i(this.sprogram.samplerUniform,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.mstack.pop())},l.prototype.onParticleDead=function(t){},l.prototype.updateMatrix=function(t){var e=Y.WebGLUtil.makeTranslation(-t.transform.textureWidth/2,-t.transform.textureHeight/2),r=Y.WebGLUtil.makeTranslation(t.p.x,t.p.y),n=t.rotation*(Math.PI/180),i=Y.WebGLUtil.makeRotation(n),o=t.scale*t.transform.oldScale,s=Y.WebGLUtil.makeScale(o,o),a=Y.WebGLUtil.matrixMultiply(e,s);a=Y.WebGLUtil.matrixMultiply(a,i),a=Y.WebGLUtil.matrixMultiply(a,r),Y.Mat3.inverse(a,t.transform.imat),a[2]=t.alpha,this.mstack.push(a)},Y.WebGLRender=l,a.prototype={getPosition:function(){},crossing:function(t){}},Y.Zone=a,Y.Util.inherits(s,Y.Zone),s.prototype.getPosition=function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector},s.prototype.getDirection=function(t,e){var r=this.dy,n=-this.dx;return(r*t+n*e+this.dot)*(0==n?1:n)>0},s.prototype.getDistance=function(t,e){return(this.dy*t+-this.dx*e+this.dot)/Math.sqrt(this.xxyy)},s.prototype.getSymmetric=function(t){var e=t.getGradient(),r=2*(this.getGradient()-e),n=t.x,i=t.y;return t.x=n*Math.cos(r)-i*Math.sin(r),t.y=n*Math.sin(r)+i*Math.cos(r),t},s.prototype.getGradient=function(){return Math.atan2(this.dy,this.dx)},s.prototype.getRange=function(t,e){Math.abs(this.getGradient())<=Math.PI/4?t.p.x<this.maxx&&t.p.x>this.minx&&e():t.p.y<this.maxy&&t.p.y>this.miny&&e()},s.prototype.getLength=function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)},s.prototype.crossing=function(t){var e=this;"dead"==this.crossType?">"==this.direction||"R"==this.direction||"right"==this.direction||"down"==this.direction?this.getRange(t,function(){e.getDirection(t.p.x,t.p.y)&&(t.dead=!0)}):this.getRange(t,function(){e.getDirection(t.p.x,t.p.y)||(t.dead=!0)}):"bound"==this.crossType?this.getRange(t,function(){e.getDistance(t.p.x,t.p.y)<=t.radius&&(0==e.dx?t.v.x*=-1:0==e.dy?t.v.y*=-1:e.getSymmetric(t.v))}):"cross"==this.crossType&&this.alert&&(alert("Sorry lineZone does not support cross method"),this.alert=!1)},Y.LineZone=s,Y.Util.inherits(o,Y.Zone),o.prototype.getPosition=function(){return this.random=Math.random(),this.angle=2*Math.PI*Math.random(),this.vector.x=this.x+this.random*this.radius*Math.cos(this.angle),this.vector.y=this.y+this.random*this.radius*Math.sin(this.angle),this.vector},o.prototype.setCenter=function(t,e){this.center.x=t,this.center.y=e},o.prototype.crossing=function(t){var e=t.p.distanceTo(this.center);"dead"==this.crossType?e-t.radius>this.radius&&(t.dead=!0):"bound"==this.crossType?e+t.radius>=this.radius&&this.getSymmetric(t):"cross"==this.crossType&&this.alert&&(alert("Sorry CircleZone does not support cross method"),this.alert=!1)},o.prototype.getSymmetric=function(t){var e=t.v.getGradient(),r=2*(this.getGradient(t)-e),n=t.v.x,i=t.v.y;t.v.x=n*Math.cos(r)-i*Math.sin(r),t.v.y=n*Math.sin(r)+i*Math.cos(r)},o.prototype.getGradient=function(t){return-Math.PI/2+Math.atan2(t.p.y-this.center.y,t.p.x-this.center.x)},Y.CircleZone=o,Y.Util.inherits(i,Y.Zone),i.prototype.getPosition=function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector},i.prototype.crossing=function(t){this.alert&&(alert("Sorry PointZone does not support crossing method"),this.alert=!1)},Y.PointZone=i,Y.Util.inherits(n,Y.Zone),n.prototype.getPosition=function(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector},n.prototype.crossing=function(t){"dead"==this.crossType?(t.p.x+t.radius<this.x?t.dead=!0:t.p.x-t.radius>this.x+this.width&&(t.dead=!0),t.p.y+t.radius<this.y?t.dead=!0:t.p.y-t.radius>this.y+this.height&&(t.dead=!0)):"bound"==this.crossType?(t.p.x-t.radius<this.x?(t.p.x=this.x+t.radius,t.v.x*=-1):t.p.x+t.radius>this.x+this.width&&(t.p.x=this.x+this.width-t.radius,t.v.x*=-1),t.p.y-t.radius<this.y?(t.p.y=this.y+t.radius,t.v.y*=-1):t.p.y+t.radius>this.y+this.height&&(t.p.y=this.y+this.height-t.radius,t.v.y*=-1)):"cross"==this.crossType&&(t.p.x+t.radius<this.x&&t.v.x<=0?t.p.x=this.x+this.width+t.radius:t.p.x-t.radius>this.x+this.width&&t.v.x>=0&&(t.p.x=this.x-t.radius),t.p.y+t.radius<this.y&&t.v.y<=0?t.p.y=this.y+this.height+t.radius:t.p.y-t.radius>this.y+this.height&&t.v.y>=0&&(t.p.y=this.y-t.radius))},Y.RectZone=n,Y.Util.inherits(r,Y.Zone),r.prototype.reset=function(t,e,r,n){this.imageData=t,this.x=Y.Util.initValue(e,0),this.y=Y.Util.initValue(r,0),this.d=Y.Util.initValue(n,2),this.vectors=[],this.setVectors()},r.prototype.setVectors=function(){var t,e,r=this.imageData.width,n=this.imageData.height;for(t=0;t<r;t+=this.d)for(e=0;e<n;e+=this.d){var i=4*((e>>0)*r+(t>>0));this.imageData.data[i+3]>0&&this.vectors.push({x:t+this.x,y:e+this.y})}return this.vector},r.prototype.getBound=function(t,e){var r=4*((e>>0)*this.imageData.width+(t>>0));return this.imageData.data[r+3]>0},r.prototype.getPosition=function(){return this.vector.copy(this.vectors[Math.floor(Math.random()*this.vectors.length)])},r.prototype.getColor=function(t,e){t-=this.x;var r=4*(((e-=this.y)>>0)*this.imageData.width+(t>>0));return{r:this.imageData.data[r],g:this.imageData.data[r+1],b:this.imageData.data[r+2],a:this.imageData.data[r+3]}},r.prototype.crossing=function(t){"dead"==this.crossType?this.getBound(t.p.x-this.x,t.p.y-this.y)?t.dead=!0:t.dead=!1:"bound"==this.crossType&&(this.getBound(t.p.x-this.x,t.p.y-this.y)||t.v.negate())},Y.ImageZone=r;var it=function(){if(t.console&&t.console.log){var e=arguments;if("string"==typeof arguments[0])if(0==arguments[0].indexOf("+")){var r=parseInt(arguments[0]);it.once<r&&(delete e[0],console.log(e),it.once++)}else console.log(e);else console.log(e)}};it.once=0,Y.log=it;var ot=ot||{addEventListener:function(t,e){t.addEventListener(Y.PROTON_UPDATE,function(t){e()})},setStyle:function(t){var e=t||"#ff0000",r=Y.Util.hexToRGB(e);return"rgba("+r.r+","+r.g+","+r.b+",0.5)"},drawZone:function(t,e,r,n){var i=e.getContext("2d"),o=this.setStyle();this.addEventListener(t,function(){n&&i.clearRect(0,0,e.width,e.height),r instanceof Y.PointZone?(i.beginPath(),i.fillStyle=o,i.arc(r.x,r.y,10,0,2*Math.PI,!0),i.fill(),i.closePath()):r instanceof Y.LineZone?(i.beginPath(),i.strokeStyle=o,i.moveTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.stroke(),i.closePath()):r instanceof Y.RectZone?(i.beginPath(),i.strokeStyle=o,i.drawRect(r.x,r.y,r.width,r.height),i.stroke(),i.closePath()):r instanceof Y.CircleZone&&(i.beginPath(),i.strokeStyle=o,i.arc(r.x,r.y,r.radius,0,2*Math.PI,!0),i.stroke(),i.closePath())})},drawEmitter:function(t,e,r,n){var i=e.getContext("2d"),o=this.setStyle();this.addEventListener(t,function(){n&&i.clearRect(0,0,e.width,e.height),i.beginPath(),i.fillStyle=o,i.arc(r.p.x,r.p.y,10,0,2*Math.PI,!0),i.fill(),i.closePath()})},test:{},setTest:function(t,e){this.test[t]=e},getTest:function(t){return!!this.test.hasOwnProperty(t)&&this.test[t]}};Y.Debug=ot})(window),function(){for(var t=0,e=["ms","moz","webkit","o"],r=0;r<e.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[e[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[r]+"CancelAnimationFrame"]||window[e[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,r){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),o=window.setTimeout(function(){e(n+i)},i);return t=n+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},"6FAO":function(t,e,r){(function(e){var r;(function(){
/*!
 * pixi.js - v4.8.5
 * Compiled Mon, 07 Jan 2019 15:50:34 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
t.exports=function t(e,n,i){function o(a,l){if(!n[a]){if(!e[a]){var u="function"==typeof r&&r;if(!l&&u)return r(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r||t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof r&&r,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,r){"use strict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>31;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(i),r.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},r.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},r.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},r.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},r.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],2:[function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n,o,a,l,u,h,p,d=e&&e.length,f=d?e[0]*r:t.length,g=i(t,0,f,r,!0),v=[];if(!g||g.next===g.prev)return v;if(d&&(g=c(t,e,g,r)),t.length>80*r){n=a=t[0],o=l=t[1];for(var m=r;m<f;m+=r)u=t[m],h=t[m+1],u<n&&(n=u),h<o&&(o=h),u>a&&(a=u),h>l&&(l=h);p=0!==(p=Math.max(a-n,l-o))?1/p:0}return s(g,v,r,n,o,p),v}function i(t,e,r,n,i){var o,s;if(i===A(t,e,r,n)>0)for(o=e;o<r;o+=n)s=w(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=w(o,t[o],t[o+1],s);return s&&x(s,s.next)&&(E(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!x(n,n.next)&&0!==y(n.prev,n,n.next))n=n.next;else{if(E(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function s(t,e,r,n,i,c,p){if(t){!p&&c&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=f(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,l,u=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<u&&(a++,n=n.nextZ);e++);for(l=u;a>0||l>0&&n;)0!==a&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(s>1)}(i)}(t,n,i,c);for(var d,g,v=t;t.prev!==t.next;)if(d=t.prev,g=t.next,c?l(t,n,i,c):a(t))e.push(d.i/r),e.push(t.i/r),e.push(g.i/r),E(t),t=g.next,v=g.next;else if((t=g)===v){p?1===p?s(t=u(t,e,r),e,r,n,i,c,2):2===p&&h(t,e,r,n,i,c):s(o(t),e,r,n,i,c,1);break}}}function a(t){var e=t.prev,r=t,n=t.next;if(y(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(v(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(t,e,r,n){var i=t.prev,o=t,s=t.next;if(y(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,u=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=f(a,l,e,r,n),p=f(u,h,e,r,n),d=t.prevZ,g=t.nextZ;d&&d.z>=c&&g&&g.z<=p;){if(d!==t.prev&&d!==t.next&&v(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,g!==t.prev&&g!==t.next&&v(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&v(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;g&&g.z<=p;){if(g!==t.prev&&g!==t.next&&v(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function u(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!x(i,o)&&b(i,n,n.next,o)&&_(i,o)&&_(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),E(n),E(n.next),n=t=o),n=n.next}while(n!==t);return n}function h(t,e,r,n,i,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&m(l,u)){var h=T(l,u);return l=o(l,l.next),h=o(h,h.next),s(l,e,r,n,i,a),void s(h,e,r,n,i,a)}u=u.next}l=l.next}while(l!==t)}function c(t,e,r,n){var s,a,l,u,h,c=[];for(s=0,a=e.length;s<a;s++)l=e[s]*n,u=s<a-1?e[s+1]*n:t.length,(h=i(t,l,u,n,!1))===h.next&&(h.steiner=!0),c.push(g(h));for(c.sort(p),s=0;s<c.length;s++)d(c[s],r),r=o(r,r.next);return r}function p(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var l,u=r,h=r.x,c=r.y,p=1/0;for(n=r.next;n!==u;)i>=n.x&&n.x>=h&&i!==n.x&&v(o<c?i:s,o,h,c,o<c?s:i,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(i-n.x))<p||l===p&&n.x>r.x)&&_(n,t)&&(r=n,p=l),n=n.next;return r}(t,e)){var r=T(e,t);o(r,r.next)}}function f(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function v(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&b(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&_(t,e)&&_(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function y(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,r,n){return!!(x(t,e)&&x(r,n)||x(t,n)&&x(r,e))||y(t,e,r)>0!=y(t,e,n)>0&&y(r,n,t)>0!=y(r,n,e)>0}function _(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function T(t,e){var r=new S(t.i,t.x,t.y),n=new S(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function w(t,e,r,n){var i=new S(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}e.exports=n,e.exports.default=n,n.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(A(t,0,o,r));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*r,h=a<l-1?e[a+1]*r:t.length;s-=Math.abs(A(t,u,h,r))}var c=0;for(a=0;a<n.length;a+=3){var p=n[a]*r,d=n[a+1]*r,f=n[a+2]*r;c+=Math.abs((t[p]-t[f])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[f+1]-t[p+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},{}],3:[function(t,e,r){"use strict";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(){this._events=new n,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)s.call(t,e)&&r.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t,e){var r=a?a+t:t,n=this._events[r];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},o.prototype.emit=function(t,e,r,n,i,o){var s=a?a+t:t;if(!this._events[s])return!1;var l,u,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,i),!0;case 6:return h.fn.call(h.context,e,r,n,i,o),!0}for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var p,d=h.length;for(u=0;u<d;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),c){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,r);break;case 4:h[u].fn.call(h[u].context,e,r,n);break;default:if(!l)for(p=1,l=new Array(c-1);p<c;p++)l[p-1]=arguments[p];h[u].fn.apply(h[u].context,l)}}return!0},o.prototype.on=function(t,e,r){var n=new i(e,r||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.once=function(t,e,r){var n=new i(e,r||this,!0),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.removeListener=function(t,e,r,i){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||(0==--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var l=0,u=[],h=s.length;l<h;l++)(s[l].fn!==e||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new n:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,void 0!==e&&(e.exports=o)},{}],4:[function(t,e,r){!function(t){function r(t,e){return t.test(e)}function n(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),n=e.split("[FBAN");void 0!==n[1]&&(e=n[0]),void 0!==(n=e.split("Twitter"))[1]&&(e=n[0]);var y={apple:{phone:r(i,e)&&!r(c,e),ipod:r(o,e),tablet:!r(i,e)&&r(s,e)&&!r(c,e),device:(r(i,e)||r(o,e)||r(s,e))&&!r(c,e)},amazon:{phone:r(u,e),tablet:!r(u,e)&&r(h,e),device:r(u,e)||r(h,e)},android:{phone:!r(c,e)&&r(u,e)||!r(c,e)&&r(a,e),tablet:!r(c,e)&&!r(u,e)&&!r(a,e)&&(r(h,e)||r(l,e)),device:!r(c,e)&&(r(u,e)||r(h,e)||r(a,e)||r(l,e))},windows:{phone:r(c,e),tablet:r(p,e),device:r(c,e)||r(p,e)},other:{blackberry:r(d,e),blackberry10:r(f,e),opera:r(g,e),firefox:r(m,e),chrome:r(v,e),device:r(d,e)||r(f,e)||r(g,e)||r(m,e)||r(v,e)}};return y.any=y.apple.device||y.android.device||y.windows.device||y.other.device,y.phone=y.apple.phone||y.android.phone||y.windows.phone,y.tablet=y.apple.tablet||y.android.tablet||y.windows.tablet,y}var i=/iPhone/i,o=/iPod/i,s=/iPad/i,a=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,u=/\bAndroid(?:.+)SD4930UR\b/i,h=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,c=/Windows Phone/i,p=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,f=/BB10/i,g=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/\Mobile(?:.+)Firefox\b/i;void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=n:void 0!==e&&e.exports&&"undefined"!=typeof window?e.exports=n():t.isMobile=n()}(this)},{}],5:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(e,r,i){void 0===r&&(r=!1),n(this,t),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return o(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),a=function(){function t(){n(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return i(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return i(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=s,r.default=a,e.exports=r.default},{}],6:[function(t,e,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var u in r=Object(arguments[l]))i.call(r,u)&&(a[u]=r[u]);if(n){s=n(r);for(var h=0;h<s.length;h++)o.call(r,s[h])&&(a[s[h]]=r[s[h]])}}return a}},{}],7:[function(t,e,r){"use strict";e.exports=function(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(t,e,n){e&&(i[r.q.name][e]=n)}),i}},{}],8:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,i="/"===s.charAt(0))}return r=e(n(r.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(t){var i=r.isAbsolute(t),o="/"===s(t,-1);return(t=e(n(t.split("/"),function(t){return!!t}),!i).join("/"))||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var i=n(t.split("/")),o=n(e.split("/")),s=Math.min(i.length,o.length),a=s,l=0;l<s;l++)if(i[l]!==o[l]){a=l;break}for(var u=[],l=a;l<i.length;l++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:26}],9:[function(t,e,r){var n=new ArrayBuffer(0),i=function(t,e,r,i){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=i||t.STATIC_DRAW,this.data=n,r&&this.upload(r),this._updateID=0};i.prototype.upload=function(t,e,r){r||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},i.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},i.createVertexBuffer=function(t,e,r){return new i(t,t.ARRAY_BUFFER,e,r)},i.createIndexBuffer=function(t,e,r){return new i(t,t.ELEMENT_ARRAY_BUFFER,e,r)},i.create=function(t,e,r,n){return new i(t,e,r,n)},i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=i},{}],10:[function(t,e,r){var n=t("./GLTexture"),i=function(t,e,r){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=r||100};i.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(t,e,r,n){this.bind();var i=this.gl;i.clearColor(t,e,r,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},i.prototype.resize=function(t,e){var r=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e))},i.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(t,e,r,o){var s=n.fromData(t,null,e,r);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(t,e,r);return a.enableTexture(s),a.unbind(),a},i.createFloat32=function(t,e,r,o){var s=new n.fromData(t,o,e,r);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(t,e,r);return a.enableTexture(s),a.unbind(),a},e.exports=i},{"./GLTexture":12}],11:[function(t,e,r){var n=t("./shader/compileProgram"),i=t("./shader/extractAttributes"),o=t("./shader/extractUniforms"),s=t("./shader/setPrecision"),a=t("./shader/generateUniformAccessObject"),l=function(t,e,r,l,u){this.gl=t,l&&(e=s(e,l),r=s(r,l)),this.program=n(t,e,r,u),this.attributes=i(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData)};l.prototype.bind=function(){return this.gl.useProgram(this.program),this},l.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=l},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(t,e,r){var n=function(t,e,r,n,i){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=r||-1,this.format=n||t.RGBA,this.type=i||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||r!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=r,this.height=n};var i=!1;n.prototype.uploadData=function(t,e,r){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!i){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");i=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,r,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,r,this.format,this.type,t||null),this.width=e,this.height=r},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},n.fromSource=function(t,e,r){var i=new n(t);return i.premultiplyAlpha=r||!1,i.upload(e),i},n.fromData=function(t,e,r,i){var o=new n(t);return o.uploadData(e,r,i),o},e.exports=n},{}],13:[function(t,e,r){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=t("./setVertexAttribArrays");n.prototype.constructor=n,e.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,r,n,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,r){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(r||0)):n.drawArrays(t,r,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(t,e,r){e.exports=function(t,e){var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r}},{}],15:[function(t,e,r){var n={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(t,e,r){e.exports=function(t,e,r){var n;if(r){var i=r.tempAttribState,o=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<e.length;n++)i[e[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==i[n]&&(o[n]=i[n],r.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var s=e[n];t.enableVertexAttribArray(s.attribute.location)}}},{}],17:[function(t,e,r){var n=function(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};e.exports=function(t,e,r,i){var o=n(t,t.VERTEX_SHADER,e),s=n(t,t.FRAGMENT_SHADER,r),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),i)for(var l in i)t.bindAttribLocation(a,i[l],l);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a}},{}],18:[function(t,e,r){var n=function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e};e.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return n(2*e);case"bvec3":return n(3*e);case"bvec4":return n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],19:[function(t,e,r){var n=t("./mapType"),i=t("./mapSize"),o=function(t,e,r,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,r||0,n||0)};e.exports=function(t,e){for(var r={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var l=t.getActiveAttrib(e,a),u=n(t,l.type);r[l.name]={type:u,size:i(u),location:t.getAttribLocation(e,l.name),pointer:o}}return r}},{"./mapSize":23,"./mapType":24}],20:[function(t,e,r){var n=t("./mapType"),i=t("./defaultValue");e.exports=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),l=a.name.replace(/\[.*?\]/,""),u=n(t,a.type);r[l]={type:u,size:a.size,location:t.getUniformLocation(e,l),value:i(u,a.size)}}return r}},{"./defaultValue":18,"./mapType":24}],21:[function(t,e,r){function n(t,e){return function(r){this.data[t].value=r;var n=this.data[t].location;1===e.size?s[e.type](this.gl,n,r):a[e.type](this.gl,n,r)}}function i(t,e){for(var r=e,n=0;n<t.length-1;n++){var i=r[t[n]]||{data:{}};r[t[n]]=i,r=i}return r}var o=function(t){return function(){return this.data[t].value}},s={float:function(t,e,r){t.uniform1f(e,r)},vec2:function(t,e,r){t.uniform2f(e,r[0],r[1])},vec3:function(t,e,r){t.uniform3f(e,r[0],r[1],r[2])},vec4:function(t,e,r){t.uniform4f(e,r[0],r[1],r[2],r[3])},int:function(t,e,r){t.uniform1i(e,r)},ivec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},ivec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},ivec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},bool:function(t,e,r){t.uniform1i(e,r)},bvec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},bvec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},bvec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},mat2:function(t,e,r){t.uniformMatrix2fv(e,!1,r)},mat3:function(t,e,r){t.uniformMatrix3fv(e,!1,r)},mat4:function(t,e,r){t.uniformMatrix4fv(e,!1,r)},sampler2D:function(t,e,r){t.uniform1i(e,r)}},a={float:function(t,e,r){t.uniform1fv(e,r)},vec2:function(t,e,r){t.uniform2fv(e,r)},vec3:function(t,e,r){t.uniform3fv(e,r)},vec4:function(t,e,r){t.uniform4fv(e,r)},int:function(t,e,r){t.uniform1iv(e,r)},ivec2:function(t,e,r){t.uniform2iv(e,r)},ivec3:function(t,e,r){t.uniform3iv(e,r)},ivec4:function(t,e,r){t.uniform4iv(e,r)},bool:function(t,e,r){t.uniform1iv(e,r)},bvec2:function(t,e,r){t.uniform2iv(e,r)},bvec3:function(t,e,r){t.uniform3iv(e,r)},bvec4:function(t,e,r){t.uniform4iv(e,r)},sampler2D:function(t,e,r){t.uniform1iv(e,r)}};e.exports=function(t,e){var r={data:{}};r.gl=t;for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a],u=l.split("."),h=u[u.length-1],c=i(u,r),p=e[l];c.data[h]=p,c.gl=t,Object.defineProperty(c,h,{get:o(h),set:n(h,p)})}return r}},{}],22:[function(t,e,r){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(t,e,r){var n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(t){return n[t]}},{}],24:[function(t,e,r){var n=null,i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(t,e){if(!n){var r=Object.keys(i);n={};for(var o=0;o<r.length;++o){var s=r[o];n[t[s]]=i[s]}}return n[e]}},{}],25:[function(t,e,r){e.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},{}],26:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function s(){g&&d&&(g=!1,d.length?f=d.concat(f):v=-1,f.length&&a())}function a(){if(!g){var t=o(s);g=!0;for(var e=f.length;e;){for(d=f,f=[];++v<e;)d&&d[v].run();v=-1,e=f.length}d=null,g=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var h,c,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(t){c=i}}();var d,f=[],g=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new l(t,e)),1!==f.length||g||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],27:[function(t,r,n){(function(t){!function(e){function i(t){throw new RangeError(P[t])}function o(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function s(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(O,"."),n+o(t.split("."),e).join(".")}function a(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function l(t){return o(t,function(t){var e="";return t>65535&&(e+=L((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=L(t)}).join("")}function u(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:b}function h(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function c(t,e,r){var n=0;for(t=r?I(t/E):t>>1,t+=I(t/e);t>D*T>>1;n+=b)t=I(t/D);return I(n+(D+1)*t/(t+w))}function p(t){var e,r,n,o,s,a,h,p,d,f,g=[],v=t.length,m=0,y=A,w=S;for((r=t.lastIndexOf(C))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&i("not-basic"),g.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<v;){for(s=m,a=1,h=b;o>=v&&i("invalid-input"),((p=u(t.charCodeAt(o++)))>=b||p>I((x-m)/a))&&i("overflow"),m+=p*a,!(p<(d=h<=w?_:h>=w+T?T:h-w));h+=b)a>I(x/(f=b-d))&&i("overflow"),a*=f;e=g.length+1,w=c(m-s,e,0==s),I(m/e)>x-y&&i("overflow"),y+=I(m/e),m%=e,g.splice(m++,0,y)}return l(g)}function d(t){var e,r,n,o,s,l,u,p,d,f,g,v,m,y,w,E=[];for(t=a(t),v=t.length,e=A,r=0,s=S,l=0;l<v;++l)(g=t[l])<128&&E.push(L(g));for(n=o=E.length,o&&E.push(C);n<v;){for(u=x,l=0;l<v;++l)(g=t[l])>=e&&g<u&&(u=g);for(u-e>I((x-r)/(m=n+1))&&i("overflow"),r+=(u-e)*m,e=u,l=0;l<v;++l)if((g=t[l])<e&&++r>x&&i("overflow"),g==e){for(p=r,d=b;!(p<(f=d<=s?_:d>=s+T?T:d-s));d+=b)w=p-f,y=b-f,E.push(L(h(f+w%y,0))),p=I(w/y);E.push(L(h(p,0))),s=c(r,m,n==o),r=0,++n}++r,++e}return E.join("")}var f="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof r&&r&&!r.nodeType&&r,v="object"==typeof t&&t;v.global!==v&&v.window!==v&&v.self!==v||(e=v);var m,y,x=2147483647,b=36,_=1,T=26,w=38,E=700,S=72,A=128,C="-",M=/^xn--/,R=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=b-_,I=Math.floor,L=String.fromCharCode;if(m={version:"1.4.1",ucs2:{decode:a,encode:l},decode:p,encode:d,toASCII:function(t){return s(t,function(t){return R.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return s(t,function(t){return M.test(t)?p(t.slice(4).toLowerCase()):t})}},f&&g)if(r.exports==f)g.exports=m;else for(y in m)m.hasOwnProperty(y)&&(f[y]=m[y]);else e.punycode=m}(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=t.length;l>0&&u>l&&(u=l);for(var h=0;h<u;++h){var c,p,d,f,g=t[h].replace(a,"%20"),v=g.indexOf(r);v>=0?(c=g.substr(0,v),p=g.substr(v+1)):(c=g,p=""),d=decodeURIComponent(c),f=decodeURIComponent(p),n(s,d)?i(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],29:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(i(s))+r;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],30:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":28,"./encode":29}],31:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n,i=t.length;if(!(e>=i||0===r)){var o=i-(r=e+r>i?i-e:r);for(n=e;n<o;++n)t[n]=t[n+r];t.length=o}}},{}],32:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.Loader=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("mini-signals"),a=n(s),l=t("parse-uri"),u=n(l),h=t("./async"),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(h),p=t("./Resource"),d=/(#[\w-]+)?$/,f=r.Loader=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.baseUrl=r,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,r){return e._loadResource(t,r)},this._queue=c.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new a.default,this.onError=new a.default,this.onLoad=new a.default,this.onStart=new a.default,this.onComplete=new a.default;for(var i=0;i<t._defaultBeforeMiddleware.length;++i)this.pre(t._defaultBeforeMiddleware[i]);for(var o=0;o<t._defaultAfterMiddleware.length;++o)this.use(t._defaultAfterMiddleware[o])}return t.prototype.add=function(t,e,r,n){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if("object"===(void 0===t?"undefined":i(t))&&(n=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new p.Resource(t,e,r),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=r.parentResource,a=[],l=0;l<s.children.length;++l)s.children[l].isComplete||a.push(s.children[l]);var u=s.progressChunk*(a.length+1),h=u/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var c=0;c<a.length;++c)a[c].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,r=100/e,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,u.default)(t,{strictMode:!0}),r=void 0;if(r=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=d.exec(r)[0];-1!==(r=r.substr(0,r.length-n.length)).indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=n}return r},t.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,c.eachSeries(this._beforeMiddleware,function(e,n){e.call(r,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),c.eachSeries(this._afterMiddleware,function(r,n){r.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},o(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();f._defaultBeforeMiddleware=[],f._defaultAfterMiddleware=[],f.pre=function(t){return f._defaultBeforeMiddleware.push(t),f},f.use=function(t){return f._defaultAfterMiddleware.push(t),f}},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){}function o(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function s(t){return t.toString().replace("object ","")}r.__esModule=!0,r.Resource=void 0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("parse-uri"),u=n(l),h=t("mini-signals"),c=n(h),p=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),d=null,f=r.Resource=function(){function t(e,r,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"!=typeof e||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=i,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new c.default,this.onProgress=new c.default,this.onComplete=new c.default,this.onAfterMiddleware=new c.default}return t.setExtensionLoadType=function(e,r){o(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){o(t._xhrTypeMap,e,r)},t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(r)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:p&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,r){r||(r=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=r,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(s(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(s(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(s(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(r=e.responseText),0===n&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||r;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,d||(d=document.createElement("a")),d.href=t;var r=!(t=(0,u.default)(d.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var n=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(n>-1?n:t.length,i>-1?i:t.length);t=t.substring(0,o),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},a(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();f.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},f.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},f.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},f.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},f._loadTypeMap={gif:f.LOAD_TYPE.IMAGE,png:f.LOAD_TYPE.IMAGE,bmp:f.LOAD_TYPE.IMAGE,jpg:f.LOAD_TYPE.IMAGE,jpeg:f.LOAD_TYPE.IMAGE,tif:f.LOAD_TYPE.IMAGE,tiff:f.LOAD_TYPE.IMAGE,webp:f.LOAD_TYPE.IMAGE,tga:f.LOAD_TYPE.IMAGE,svg:f.LOAD_TYPE.IMAGE,"svg+xml":f.LOAD_TYPE.IMAGE,mp3:f.LOAD_TYPE.AUDIO,ogg:f.LOAD_TYPE.AUDIO,wav:f.LOAD_TYPE.AUDIO,mp4:f.LOAD_TYPE.VIDEO,webm:f.LOAD_TYPE.VIDEO},f._xhrTypeMap={xhtml:f.XHR_RESPONSE_TYPE.DOCUMENT,html:f.XHR_RESPONSE_TYPE.DOCUMENT,htm:f.XHR_RESPONSE_TYPE.DOCUMENT,xml:f.XHR_RESPONSE_TYPE.DOCUMENT,tmx:f.XHR_RESPONSE_TYPE.DOCUMENT,svg:f.XHR_RESPONSE_TYPE.DOCUMENT,tsx:f.XHR_RESPONSE_TYPE.DOCUMENT,gif:f.XHR_RESPONSE_TYPE.BLOB,png:f.XHR_RESPONSE_TYPE.BLOB,bmp:f.XHR_RESPONSE_TYPE.BLOB,jpg:f.XHR_RESPONSE_TYPE.BLOB,jpeg:f.XHR_RESPONSE_TYPE.BLOB,tif:f.XHR_RESPONSE_TYPE.BLOB,tiff:f.XHR_RESPONSE_TYPE.BLOB,webp:f.XHR_RESPONSE_TYPE.BLOB,tga:f.XHR_RESPONSE_TYPE.BLOB,json:f.XHR_RESPONSE_TYPE.JSON,text:f.XHR_RESPONSE_TYPE.TEXT,txt:f.XHR_RESPONSE_TYPE.TEXT,ttf:f.XHR_RESPONSE_TYPE.BUFFER,otf:f.XHR_RESPONSE_TYPE.BUFFER},f.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",void 0!==e&&(e.exports.default=f)},{"mini-signals":5,"parse-uri":7}],34:[function(t,e,r){"use strict";function n(){}function i(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}r.__esModule=!0,r.eachSeries=function(t,e,r,n){var i=0,o=t.length;!function s(a){a||i===o?r&&r(a):n?setTimeout(function(){e(t[i++],s)},1):e(t[i++],s)}()},r.queue=function(t,e){function r(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())setTimeout(function(){return a.drain()},1);else{var i={data:t,callback:"function"==typeof r?r:n};e?a._tasks.unshift(i):a._tasks.push(i),setTimeout(function(){return a.process()},1)}}function o(t){return function(){s-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){s=0,a.drain=n,a.started=!1,a._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),(s+=1)===a.concurrency&&a.saturated(),t(e.data,i(o(e)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){!0!==a.paused&&(a.paused=!0)},resume:function(){if(!1!==a.paused){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}},{}],35:[function(t,e,r){"use strict";function n(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],o=[0,0,0,0],s=0;s<n.length;++s)r<t.length?n[s]=255&t.charCodeAt(r++):n[s]=0;switch(o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2],r-(t.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var a=0;a<o.length;++a)e+=i.charAt(o[a])}return e}r.__esModule=!0,r.encodeBinary=n;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0!==e&&(e.exports.default=n)},{}],36:[function(t,e,r){"use strict";var n=t("./Loader").Loader,i=t("./Resource").Resource,o=t("./async"),s=t("./b64");n.Resource=i,n.async=o,n.encodeBinary=s,n.base64=s,e.exports=n,e.exports.Loader=n,e.exports.default=n},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(t,e,r){"use strict";r.__esModule=!0,r.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===n.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=n.Resource.TYPE.IMAGE,void(t.data.onload=function(){o.revokeObjectURL(r),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return t.data=new Image,t.data.src="data:"+s+";base64,"+(0,i.encodeBinary)(t.xhr.responseText),t.type=n.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}};var n=t("../../Resource"),i=t("../../b64"),o=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&s.isObject(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}var o=t("punycode"),s=t("./util");r.parse=i,r.resolve=function(t,e){return i(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},r.format=function(t){return s.isString(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)},r.Url=n;var a=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(h),p=["%","/","?",";","#"].concat(c),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=t("querystring");n.prototype.parse=function(t,e,r){if(!s.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",l=t.split(i);l[0]=l[0].replace(/\\/g,"/");var h=t=l.join(i);if(h=h.trim(),!r&&1===t.split("#").length){var b=u.exec(h);if(b)return this.path=h,this.href=h,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?x.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var _=a.exec(h);if(_){var T=(_=_[0]).toLowerCase();this.protocol=T,h=h.substr(_.length)}if(r||_||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===h.substr(0,2);!w||_&&m[_]||(h=h.substr(2),this.slashes=!0)}if(!m[_]&&(w||_&&!y[_])){for(var E=-1,S=0;S<d.length;S++){var A=h.indexOf(d[S]);-1!==A&&(-1===E||A<E)&&(E=A)}var C,M;-1!==(M=-1===E?h.lastIndexOf("@"):h.lastIndexOf("@",E))&&(C=h.slice(0,M),h=h.slice(M+1),this.auth=decodeURIComponent(C)),E=-1;for(var S=0;S<p.length;S++){var A=h.indexOf(p[S]);-1!==A&&(-1===E||A<E)&&(E=A)}-1===E&&(E=h.length),this.host=h.slice(0,E),h=h.slice(E),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var O=this.hostname.split(/\./),S=0,P=O.length;S<P;S++){var D=O[S];if(D&&!D.match(f)){for(var I="",L=0,F=D.length;L<F;L++)D.charCodeAt(L)>127?I+="x":I+=D[L];if(!I.match(f)){var B=O.slice(0,S),k=O.slice(S+1),N=D.match(g);N&&(B.push(N[1]),k.unshift(N[2])),k.length&&(h="/"+k.join(".")+h),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=o.toASCII(this.hostname));var $=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+$,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[T])for(var S=0,P=c.length;S<P;S++){var j=c[S];if(-1!==h.indexOf(j)){var G=encodeURIComponent(j);G===j&&(G=escape(j)),h=h.split(j).join(G)}}var W=h.indexOf("#");-1!==W&&(this.hash=h.substr(W),h=h.slice(0,W));var V=h.indexOf("?");if(-1!==V?(this.search=h.substr(V),this.query=h.substr(V+1),e&&(this.query=x.parse(this.query)),h=h.slice(0,V)):e&&(this.search="",this.query={}),h&&(this.pathname=h),y[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var $=this.pathname||"",z=this.search||"";this.path=$+z}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=x.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(s.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),u=0;u<l.length;u++){var h=l[u];"protocol"!==h&&(r[h]=t[h])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!y[t.protocol]){for(var c=Object.keys(t),p=0;p<c.length;p++){var d=c[p];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||m[t.protocol])r.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var g=r.pathname||"",v=r.search||"";r.path=g+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var x=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=b||x||r.host&&t.pathname,T=_,w=r.pathname&&r.pathname.split("/")||[],f=t.pathname&&t.pathname.split("/")||[],E=r.protocol&&!y[r.protocol];if(E&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),_=_&&(""===f[0]||""===w[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),r.search=t.search,r.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(E){r.hostname=r.host=w.shift();var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=t.search,r.query=t.query,s.isNull(r.pathname)&&s.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=w.slice(-1)[0],C=(r.host||t.host||w.length>1)&&("."===A||".."===A)||""===A,M=0,R=w.length;R>=0;R--)"."===(A=w[R])?w.splice(R,1):".."===A?(w.splice(R,1),M++):M&&(w.splice(R,1),M--);if(!_&&!T)for(;M--;M)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),C&&"/"!==w.join("/").substr(-1)&&w.push("");var O=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(E){r.hostname=r.host=O?"":w.length?w.shift():"";var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return(_=_||r.host&&w.length)&&!O&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),s.isNull(r.pathname)&&s.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=l.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":39,punycode:27,querystring:30}],39:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],40:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("ismobilejs"),a=n(s),l=t("./accessibleTarget"),u=n(l);o.utils.mixins.delayMixin(o.DisplayObject.prototype,u.default);var h=100,c=0,p=0,d=2,f=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),!a.default.tablet&&!a.default.phone||navigator.isCocoonJS||this.createTouchHook();var r=document.createElement("div");r.style.width=h+"px",r.style.height=h+"px",r.style.position="absolute",r.style.top=c+"px",r.style.left=p+"px",r.style.zIndex=d,this.div=r,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var s=this.children[i];if(s.renderId!==this.renderId)s._accessibleActive=!1,o.utils.removeItems(this.children,i,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,i--,0===this.children.length&&this.deactivate();else{n=s._accessibleDiv;var a=s.hitArea,l=s.worldTransform;s.hitArea?(n.style.left=(l.tx+a.x*l.a)*e+"px",n.style.top=(l.ty+a.y*l.d)*r+"px",n.style.width=a.width*l.a*e+"px",n.style.height=a.height*l.d*r+"px"):(a=s.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*r+"px",n.style.width=a.width*e+"px",n.style.height=a.height*r+"px",n.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(n.title=s.accessibleTitle),n.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&n.setAttribute("aria-label",s.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=h+"px",e.style.height=h+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=d,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();r.default=f,o.WebGLRenderer.registerPlugin("accessibility",f),o.CanvasRenderer.registerPlugin("accessibility",f)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(t,e,r){"use strict";r.__esModule=!0,r.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./accessibleTarget");Object.defineProperty(r,"accessibleTarget",{enumerable:!0,get:function(){return n(i).default}});var o=t("./AccessibilityManager");Object.defineProperty(r,"AccessibilityManager",{enumerable:!0,get:function(){return n(o).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("./autoDetectRenderer"),s=t("./display/Container"),a=n(s),l=t("./ticker"),u=t("./settings"),h=n(u),c=t("./const"),p=function(){function t(e,r,n,i,s){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:r||h.default.RENDER_OPTIONS.height,forceCanvas:!!i,sharedTicker:!!s},n)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,o.autoDetectRenderer)(e),this.stage=new a.default,this._ticker=null,this.ticker=e.sharedTicker?l.shared:new l.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},i(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,c.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();r.default=p},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(t,e,r){"use strict";function n(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var r=t.slice(0);return r.unshift("precision "+e+" float;"),r}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}r.__esModule=!0;var i=t("pixi-gl-core"),o=t("./settings"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(t){function e(r,i,o,a,l){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n(i,l||s.default.PRECISION_VERTEX),n(o,l||s.default.PRECISION_FRAGMENT),void 0,a))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(i.GLShader);r.default=a},{"./settings":101,"pixi-gl-core":15}],45:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.autoDetectRenderer=function(t,e,r,n){var i=t&&t.forceCanvas;return void 0!==n&&(i=n),!i&&o.isWebGLSupported()?new u.default(t,e,r):new a.default(t,e,r)};var i=t("./utils"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("./renderers/canvas/CanvasRenderer"),a=n(s),l=t("./renderers/webgl/WebGLRenderer"),u=n(l)},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(t,e,r){"use strict";r.__esModule=!0,r.VERSION="4.8.5",r.PI_2=2*Math.PI,r.RAD_TO_DEG=180/Math.PI,r.DEG_TO_RAD=Math.PI/180,r.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},r.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},r.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},r.SCALE_MODES={LINEAR:0,NEAREST:1},r.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},r.GC_MODES={AUTO:0,MANUAL:1},r.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,r.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},r.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},r.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},r.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},r.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../math"),i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((t=t||new n.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[2],s=t[3],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[4],s=t[5],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[6],s=t[7],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},t.prototype.addFrame=function(t,e,r,n,i){var o=t.worldTransform,s=o.a,a=o.b,l=o.c,u=o.d,h=o.tx,c=o.ty,p=this.minX,d=this.minY,f=this.maxX,g=this.maxY,v=s*e+l*r+h,m=a*e+u*r+c;p=v<p?v:p,d=m<d?m:d,f=v>f?v:f,g=m>g?m:g,p=(v=s*n+l*r+h)<p?v:p,d=(m=a*n+u*r+c)<d?m:d,f=v>f?v:f,g=m>g?m:g,p=(v=s*e+l*i+h)<p?v:p,d=(m=a*e+u*i+c)<d?m:d,f=v>f?v:f,g=m>g?m:g,p=(v=s*n+l*i+h)<p?v:p,d=(m=a*n+u*i+c)<d?m:d,f=v>f?v:f,g=m>g?m:g,this.minX=p,this.minY=d,this.maxX=f,this.maxY=g},t.prototype.addVertices=function(t,e,r,n){for(var i=t.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,h=i.ty,c=this.minX,p=this.minY,d=this.maxX,f=this.maxY,g=r;g<n;g+=2){var v=e[g],m=e[g+1],y=o*v+a*m+u,x=l*m+s*v+h;c=y<c?y:c,p=x<p?x:p,d=y>d?y:d,f=x>f?x:f}this.minX=c,this.minY=p,this.maxX=d,this.maxY=f},t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},t.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},t}();r.default=i},{"../math":70}],48:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../utils"),o=t("./DisplayObject"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r.children=[],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var r=0;r<e;r++)this.addChild(arguments[r]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);(0,i.removeItems)(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var r=0;r<e;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,(0,i.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,i.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=t,n="number"==typeof e?e:this.children.length,i=n-r,o=void 0;if(i>0&&i<=n){o=this.children.splice(r,i);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}r&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(t);t.flush(),r&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var r="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(e)},n(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(s.default);r.default=a,a.prototype.containerUpdateTransform=a.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("eventemitter3"),s=n(o),a=t("../const"),l=t("../settings"),u=n(l),h=t("./TransformStatic"),c=n(h),p=t("./Transform"),d=n(p),f=t("./Bounds"),g=n(f),v=t("../math"),m=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),n=u.default.TRANSFORM_MODE===a.TRANSFORM_MODE.STATIC?c.default:d.default;return r.tempDisplayObjectParent=null,r.transform=new n,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new g.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new v.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new v.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=r,this.transform=e,n},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(s.default);r.default=m,m.prototype.displayObjectUpdateTransform=m.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../math"),o=t("./TransformBase"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r.position=new i.Point(0,0),r.scale=new i.Point(1,1),r.skew=new i.ObservablePoint(r.updateSkew,r,0,0),r.pivot=new i.Point(0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(s.default);r.default=a},{"../math":70,"./TransformBase":51}],51:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../math"),i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,r=this.worldTransform,n=this.localTransform;r.a=n.a*e.a+n.b*e.c,r.b=n.a*e.b+n.b*e.d,r.c=n.c*e.a+n.d*e.c,r.d=n.c*e.b+n.d*e.d,r.tx=n.tx*e.a+n.ty*e.c+e.tx,r.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();r.default=i,i.prototype.updateWorldTransform=i.prototype.updateTransform,i.IDENTITY=new i},{"../math":70}],52:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../math"),o=t("./TransformBase"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r.position=new i.ObservablePoint(r.onChange,r,0,0),r.scale=new i.ObservablePoint(r.onChange,r,1,1),r.pivot=new i.ObservablePoint(r.onChange,r,0,0),r.skew=new i.ObservablePoint(r.updateSkew,r,0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r._localID=0,r._currentLocalID=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),e}(s.default);r.default=a},{"../math":70,"./TransformBase":51}],53:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../display/Container"),o=n(i),s=t("../textures/RenderTexture"),a=n(s),l=t("../textures/Texture"),u=n(l),h=t("./GraphicsData"),c=n(h),p=t("../sprites/Sprite"),d=n(p),f=t("../math"),g=t("../utils"),v=t("../const"),m=t("../display/Bounds"),y=n(m),x=t("./utils/bezierCurveTo"),b=n(x),_=t("../renderers/canvas/CanvasRenderer"),T=n(_),w=void 0,E=new f.Matrix,S=new f.Point,A=new Float32Array(4),C=new Float32Array(4),M=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=r,n.lineColor=0,n.lineAlignment=.5,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=v.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new y.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n._prevRectTint=null,n._prevRectFillColor=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var r=0;r<this.graphicsData.length;++r)t.graphicsData.push(this.graphicsData[r].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,r,n,i,o){var s=t-(2*r+i),a=e-(2*n+o),l=(r-2)*t*2,u=(n-2)*e*2,h=4*(s*s+a*a),c=4*(s*l+a*u),p=l*l+u*u,d=2*Math.sqrt(h+c+p),f=Math.sqrt(h),g=2*h*f,v=2*Math.sqrt(p),m=c/f;return(g*d+f*c*(d-v)+(4*p*h-c*c)*Math.log((2*f+m+d)/(m+v)))/(4*g)},e.prototype._bezierCurveLength=function(t,e,r,n,i,o,s,a){for(var l=0,u=0,h=0,c=0,p=0,d=0,f=0,g=0,v=0,m=0,y=0,x=t,b=e,_=1;_<=10;++_)m=x-(g=(f=(d=(p=1-(u=_/10))*p)*p)*t+3*d*u*r+3*p*(h=u*u)*i+(c=h*u)*s),y=b-(v=f*e+3*d*u*n+3*p*h*o+c*a),x=g,b=v,l+=Math.sqrt(m*m+y*y);return l},e.prototype._segmentsCount=function(t){var r=Math.ceil(t/e.CURVES.maxLength);return r<e.CURVES.minSegments?r=e.CURVES.minSegments:r>e.CURVES.maxSegments&&(r=e.CURVES.maxSegments),r},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this.lineAlignment=n,this.currentPath)if(this.currentPath.shape.points.length){var i=new f.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var r=new f.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},e.prototype.lineTo=function(t,e){var r=this.currentPath.shape.points,n=r[r.length-2],i=r[r.length-1];return n===t&&i===e||(r.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var l=o[o.length-2],u=o[o.length-1],h=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(l,u,t,r,n,i)):20,c=1;c<=h;++c){var p=c/h;s=l+(t-l)*p,a=u+(r-u)*p,o.push(s+(t+(n-t)*p-s)*p,a+(r+(i-r)*p-a)*p)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,r,n,i,o,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,l=a[a.length-2],u=a[a.length-1];a.length-=2;var h=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(l,u,t,r,n,i,o,s)):20;return(0,b.default)(l,u,t,r,n,i,o,s,h,a),this.dirty++,this},e.prototype.arcTo=function(t,e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],l=a-e,u=s-t,h=n-e,c=r-t,p=Math.abs(l*c-u*h);if(p<1e-8||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=l*l+u*u,f=h*h+c*c,g=l*h+u*c,v=i*Math.sqrt(d)/p,m=i*Math.sqrt(f)/p,y=v*g/d,x=m*g/f,b=v*c+m*u,_=v*h+m*l,T=u*(m+y),w=l*(m+y),E=c*(v+x),S=h*(v+x),A=Math.atan2(w-_,T-b),C=Math.atan2(S-_,E-b);this.arc(b+t,_+e,i,A,C,u*h>c*l)}return this.dirty++,this},e.prototype.arc=function(t,r,n,i,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i===o)return this;!s&&o<=i?o+=v.PI_2:s&&i<=o&&(i+=v.PI_2);var a=o-i,l=e.CURVES.adaptive?this._segmentsCount(Math.abs(a)*n):40*Math.ceil(Math.abs(a)/v.PI_2);if(0===a)return this;var u=t+Math.cos(i)*n,h=r+Math.sin(i)*n,c=this.currentPath?this.currentPath.shape.points:null;if(c){var p=Math.abs(c[c.length-2]-u),d=Math.abs(c[c.length-1]-h);p<.001&&d<.001||c.push(u,h)}else this.moveTo(u,h),c=this.currentPath.shape.points;for(var f=a/(2*l),g=2*f,m=Math.cos(f),y=Math.sin(f),x=l-1,b=x%1/x,_=0;_<=x;++_){var T=_+b*_,w=f+i+g*T,E=Math.cos(w),S=-Math.sin(w);c.push((m*E+y*S)*n+t,(m*-S+y*E)*n+r)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,r,n){return this.drawShape(new f.Rectangle(t,e,r,n)),this},e.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new f.RoundedRectangle(t,e,r,n,i)),this},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new f.Circle(t,e,r)),this},e.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new f.Ellipse(t,e,r,n)),this},e.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof f.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var i=new f.Polygon(e);return i.closed=r,this.drawShape(i),this},e.prototype.drawStar=function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i=i||n/2;for(var s=-1*Math.PI/2+o,a=2*r,l=v.PI_2/a,u=[],h=0;h<a;h++){var c=h%2?i:n,p=h*l+s;u.push(t+c*Math.cos(p),e+c*Math.sin(p))}return this.drawPolygon(u)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===v.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new d.default(new u.default(u.default.WHITE)));var r=this._spriteRect,n=this.graphicsData[0].fillColor;if(16777215===this.tint)r.tint=n;else if(this.tint!==this._prevRectTint||n!==this._prevRectFillColor){var i=A,o=C;(0,g.hex2rgb)(n,i),(0,g.hex2rgb)(this.tint,o),i[0]*=o[0],i[1]*=o[1],i[2]*=o[2],r.tint=(0,g.rgb2hex)(i),this._prevRectTint=this.tint,this._prevRectFillColor=n}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=e.width,r._texture._frame.height=e.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-e.x/e.width,-e.y/e.height),r._onAnchorUpdate(),r._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,S);for(var e=this.graphicsData,r=0;r<e.length;++r){var n=e[r];if(n.fill&&n.shape&&n.shape.contains(S.x,S.y)){if(n.holes)for(var i=0;i<n.holes.length;i++){var o=n.holes[i];if(o.contains(S.x,S.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,n=-1/0;if(this.graphicsData.length)for(var i=0,o=0,s=0,a=0,l=0,u=0;u<this.graphicsData.length;u++){var h=this.graphicsData[u],c=h.type,p=h.lineWidth,d=h.lineAlignment,f=p*d;if(i=h.shape,c===v.SHAPES.RECT||c===v.SHAPES.RREC)o=i.x-f,s=i.y-f,a=i.width+2*f,l=i.height+2*f,t=o<t?o:t,e=o+a>e?o+a:e,r=s<r?s:r,n=s+l>n?s+l:n;else if(c===v.SHAPES.CIRC)o=i.x,s=i.y,a=i.radius+f,l=i.radius+f,t=o-a<t?o-a:t,e=o+a>e?o+a:e,r=s-l<r?s-l:r,n=s+l>n?s+l:n;else if(c===v.SHAPES.ELIP)o=i.x,s=i.y,a=i.width+f,l=i.height+f,t=o-a<t?o-a:t,e=o+a>e?o+a:e,r=s-l<r?s-l:r,n=s+l>n?s+l:n;else for(var g=i.points,m=0,y=0,x=0,b=0,_=0,T=0,w=0,E=0,S=0;S+2<g.length;S+=2)o=g[S],s=g[S+1],m=g[S+2],y=g[S+3],x=Math.abs(m-o),b=Math.abs(y-s),l=2*f,(a=Math.sqrt(x*x+b*b))<1e-9||(t=(w=(m+o)/2)-(_=(l/a*b+x)/2)<t?w-_:t,e=w+_>e?w+_:e,r=(E=(y+s)/2)-(T=(l/a*x+b)/2)<r?E-T:r,n=E+T>n?E+T:n)}else t=0,e=0,r=0,n=0;var A=this.boundsPadding;this._localBounds.minX=t-A,this._localBounds.maxX=e+A,this._localBounds.minY=r-A,this._localBounds.maxY=n+A},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new c.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===v.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),n=a.default.create(r.width,r.height,t,e);w||(w=new T.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(E),E.invert(),E.tx-=r.x,E.ty-=r.y,w.render(this,n,!0,E);var i=u.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");return i.baseTexture.resolution=e,i.baseTexture.update(),i},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var n in this._webGL)for(var i=0;i<this._webGL[n].data.length;++i)this._webGL[n].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(o.default);r.default=M,M._SPRITE_TEXTURE=null,M.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(e,r,n,i,o,s,a,l,u){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.lineWidth=e,this.lineAlignment=u,this.nativeLines=a,this.lineColor=r,this.lineAlpha=n,this._lineTint=r,this.fillColor=i,this.fillAlpha=o,this._fillTint=i,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();r.default=n},{}],55:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../renderers/canvas/CanvasRenderer"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("../../const"),s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldAlpha,i=t.transform.worldTransform,s=e.resolution;r.setTransform(i.a*s,i.b*s,i.c*s,i.d*s,i.tx*s,i.ty*s),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var l=t.graphicsData[a],u=l.shape,h=l._fillTint,c=l._lineTint;if(r.lineWidth=l.lineWidth,l.type===o.SHAPES.POLY){r.beginPath();var p=u.points,d=l.holes,f=void 0,g=void 0;r.moveTo(p[0],p[1]);for(var v=2;v<p.length;v+=2)r.lineTo(p[v],p[v+1]);if(u.closed&&r.closePath(),d.length>0){f=0;for(var m=0;m<p.length;m+=2)f+=p[m]*p[m+3]-p[m+1]*p[m+2];for(var y=0;y<d.length;y++){p=d[y].points,g=0;for(var x=0;x<p.length;x+=2)g+=p[x]*p[x+3]-p[x+1]*p[x+2];if(r.moveTo(p[0],p[1]),g*f<0)for(var b=2;b<p.length;b+=2)r.lineTo(p[b],p[b+1]);else for(var _=p.length-2;_>=2;_-=2)r.lineTo(p[_],p[_+1]);d[y].closed&&r.closePath()}}l.fill&&(r.globalAlpha=l.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),l.lineWidth&&(r.globalAlpha=l.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(l.type===o.SHAPES.RECT)(l.fillColor||0===l.fillColor)&&(r.globalAlpha=l.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fillRect(u.x,u.y,u.width,u.height)),l.lineWidth&&(r.globalAlpha=l.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.strokeRect(u.x,u.y,u.width,u.height));else if(l.type===o.SHAPES.CIRC)r.beginPath(),r.arc(u.x,u.y,u.radius,0,2*Math.PI),r.closePath(),l.fill&&(r.globalAlpha=l.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),l.lineWidth&&(r.globalAlpha=l.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke());else if(l.type===o.SHAPES.ELIP){var T=2*u.width,w=2*u.height,E=u.x-T/2,S=u.y-w/2;r.beginPath();var A=T/2*.5522848,C=w/2*.5522848,M=E+T,R=S+w,O=E+T/2,P=S+w/2;r.moveTo(E,P),r.bezierCurveTo(E,P-C,O-A,S,O,S),r.bezierCurveTo(O+A,S,M,P-C,M,P),r.bezierCurveTo(M,P+C,O+A,R,O,R),r.bezierCurveTo(O-A,R,E,P+C,E,P),r.closePath(),l.fill&&(r.globalAlpha=l.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),l.lineWidth&&(r.globalAlpha=l.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(l.type===o.SHAPES.RREC){var D=u.x,I=u.y,L=u.width,F=u.height,B=u.radius,k=Math.min(L,F)/2|0;B=B>k?k:B,r.beginPath(),r.moveTo(D,I+B),r.lineTo(D,I+F-B),r.quadraticCurveTo(D,I+F,D+B,I+F),r.lineTo(D+L-B,I+F),r.quadraticCurveTo(D+L,I+F,D+L,I+F-B),r.lineTo(D+L,I+B),r.quadraticCurveTo(D+L,I,D+L-B,I),r.lineTo(D+B,I),r.quadraticCurveTo(D,I,D,I+B),r.closePath(),(l.fillColor||0===l.fillColor)&&(r.globalAlpha=l.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),l.lineWidth&&(r.globalAlpha=l.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,n=(255&t.tint)/255,i=0;i<t.graphicsData.length;++i){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255}},t.prototype.renderPolygon=function(t,e,r){r.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)r.lineTo(t[2*n],t[2*n+1]);e&&r.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=s,i.default.registerPlugin("graphics",s)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r,n,i,o,s,a,l){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],h=0,c=0,p=0,d=0,f=0;u.push(t,e);for(var g=1,v=0;g<=l;++g)p=(c=(h=1-(v=g/l))*h)*h,f=(d=v*v)*v,u.push(p*t+3*c*v*r+3*h*d*i+f*s,p*e+3*c*v*n+3*h*d*o+f*a);return u}},{}],57:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../../utils"),o=t("../../const"),s=t("../../renderers/webgl/utils/ObjectRenderer"),a=n(s),l=t("../../renderers/webgl/WebGLRenderer"),u=n(l),h=t("./WebGLGraphicsData"),c=n(h),p=t("./shaders/PrimitiveShader"),d=n(p),f=t("./utils/buildPoly"),g=n(f),v=t("./utils/buildRectangle"),m=n(v),y=t("./utils/buildRoundedRectangle"),x=n(y),b=t("./utils/buildCircle"),_=n(b),T=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=r.gl,n.CONTEXT_UID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new d.default(this.gl)},e.prototype.destroy=function(){a.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=void 0,o=t._webGL[this.CONTEXT_UID];o&&t.dirty===o.dirty||(this.updateGraphics(t),o=t._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;e.bindShader(s),e.state.setBlendMode(t.blendMode);for(var a=0,l=o.data.length;a<l;a++){var u=(n=o.data[a]).shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,i.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?r.drawArrays(r.LINES,0,n.points.length/6):n.vao.draw(r.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[this.CONTEXT_UID];if(r||(r=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),r.dirty=t.dirty,t.clearDirty!==r.clearDirty){r.clearDirty=t.clearDirty;for(var n=0;n<r.data.length;n++)this.graphicsDataPool.push(r.data[n]);r.data.length=0,r.lastIndex=0}for(var i=void 0,s=void 0,a=r.lastIndex;a<t.graphicsData.length;a++){var l=t.graphicsData[a];i=this.getWebGLData(r,0),l.nativeLines&&l.lineWidth&&(s=this.getWebGLData(r,0,!0),r.lastIndex++),l.type===o.SHAPES.POLY&&(0,g.default)(l,i,s),l.type===o.SHAPES.RECT?(0,m.default)(l,i,s):l.type===o.SHAPES.CIRC||l.type===o.SHAPES.ELIP?(0,_.default)(l,i,s):l.type===o.SHAPES.RREC&&(0,x.default)(l,i,s),r.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<r.data.length;u++)(i=r.data[u]).dirty&&i.upload()},e.prototype.getWebGLData=function(t,e,r){var n=t.data[t.data.length-1];return(!n||n.nativeLines!==r||n.points.length>32e4)&&((n=this.graphicsDataPool.pop()||new c.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=r,n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(a.default);r.default=T,u.default.registerPlugin("graphics",T)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("pixi-gl-core"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(){function t(e,r,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=i.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=r,this.vao=new i.default.VertexArrayObject(e,n).addIndex(this.indexBuffer).addAttribute(this.buffer,r.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,r.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();r.default=o},{"pixi-gl-core":15}],59:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../../Shader"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t){function e(r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(i.default);r.default=o},{"../../../Shader":44}],60:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r){var n=t.shape,a=n.x,l=n.y,u=void 0,h=void 0;if(t.type===o.SHAPES.CIRC?(u=n.radius,h=n.radius):(u=n.width,h=n.height),0!==u&&0!==h){var c=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),p=2*Math.PI/c;if(t.fill){var d=(0,s.hex2rgb)(t.fillColor),f=t.fillAlpha,g=d[0]*f,v=d[1]*f,m=d[2]*f,y=e.points,x=e.indices,b=y.length/6;x.push(b);for(var _=0;_<c+1;_++)y.push(a,l,g,v,m,f),y.push(a+Math.sin(p*_)*u,l+Math.cos(p*_)*h,g,v,m,f),x.push(b++,b++);x.push(b-1)}if(t.lineWidth){var T=t.points;t.points=[];for(var w=0;w<c;w++)t.points.push(a+Math.sin(p*-w)*u,l+Math.cos(p*-w)*h);t.points.push(t.points[0],t.points[1]),(0,i.default)(t,e,r),t.points=T}}};var n=t("./buildLine"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("../../../const"),s=t("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r){t.nativeLines?function(t,e){var r=0,n=t.points;if(0!==n.length){var o=e.points,s=n.length/2,a=(0,i.hex2rgb)(t.lineColor),l=t.lineAlpha,u=a[0]*l,h=a[1]*l,c=a[2]*l;for(r=1;r<s;r++){var p=n[2*(r-1)],d=n[2*(r-1)+1],f=n[2*r],g=n[2*r+1];o.push(p,d),o.push(u,h,c,l),o.push(f,g),o.push(u,h,c,l)}}}(t,r):function(t,e){var r=t.points;if(0!==r.length){var o=new n.Point(r[0],r[1]),s=new n.Point(r[r.length-2],r[r.length-1]);if(o.x===s.x&&o.y===s.y){(r=r.slice()).pop(),r.pop();var a=(s=new n.Point(r[r.length-2],r[r.length-1])).x+.5*(o.x-s.x),l=s.y+.5*(o.y-s.y);r.unshift(a,l),r.push(a,l)}var u=e.points,h=e.indices,c=r.length/2,p=r.length,d=u.length/6,f=t.lineWidth/2,g=(0,i.hex2rgb)(t.lineColor),v=t.lineAlpha,m=g[0]*v,y=g[1]*v,x=g[2]*v,b=r[0],_=r[1],T=r[2],w=r[3],E=0,S=0,A=-(_-w),C=b-T,M=0,R=0,O=0,P=0,D=Math.sqrt(A*A+C*C);A/=D,C/=D,A*=f,C*=f;var I=t.lineAlignment,L=2*(1-I),F=2*I;u.push(b-A*L,_-C*L,m,y,x,v),u.push(b+A*F,_+C*F,m,y,x,v);for(var B=1;B<c-1;++B){b=r[2*(B-1)],_=r[2*(B-1)+1],T=r[2*B],w=r[2*B+1],E=r[2*(B+1)],S=r[2*(B+1)+1],A=-(_-w),C=b-T,D=Math.sqrt(A*A+C*C),A/=D,C/=D,A*=f,C*=f,M=-(w-S),R=T-E,D=Math.sqrt(M*M+R*R),M/=D,R/=D;var k=-C+_-(-C+w),N=-A+T-(-A+b),$=(-A+b)*(-C+w)-(-A+T)*(-C+_),U=-(R*=f)+S-(-R+w),j=-(M*=f)+T-(-M+E),G=(-M+E)*(-R+w)-(-M+T)*(-R+S),W=k*j-U*N;if(Math.abs(W)<.1)W+=10.1,u.push(T-A*L,w-C*L,m,y,x,v),u.push(T+A*F,w+C*F,m,y,x,v);else{var V=(N*G-j*$)/W,z=(U*$-k*G)/W;(V-T)*(V-T)+(z-w)*(z-w)>196*f*f?(O=A-M,P=C-R,D=Math.sqrt(O*O+P*P),O/=D,P/=D,O*=f,P*=f,u.push(T-O*L,w-P*L),u.push(m,y,x,v),u.push(T+O*F,w+P*F),u.push(m,y,x,v),u.push(T-O*F*L,w-P*L),u.push(m,y,x,v),p++):(u.push(T+(V-T)*L,w+(z-w)*L),u.push(m,y,x,v),u.push(T-(V-T)*F,w-(z-w)*F),u.push(m,y,x,v))}}b=r[2*(c-2)],_=r[2*(c-2)+1],T=r[2*(c-1)],w=r[2*(c-1)+1],A=-(_-w),C=b-T,D=Math.sqrt(A*A+C*C),A/=D,C/=D,A*=f,C*=f,u.push(T-A*L,w-C*L),u.push(m,y,x,v),u.push(T+A*F,w+C*F),u.push(m,y,x,v),h.push(d);for(var Y=0;Y<p;++Y)h.push(d++);h.push(d-1)}}(t,e)};var n=t("../../../math"),i=t("../../../utils")},{"../../../math":70,"../../../utils":125}],62:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.default=function(t,e,r){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&n.length>=6){for(var i=[],a=t.holes,u=0;u<a.length;u++){var h=a[u];i.push(n.length/2),n=n.concat(h.points)}var c=e.points,p=e.indices,d=n.length/2,f=(0,s.hex2rgb)(t.fillColor),g=t.fillAlpha,v=f[0]*g,m=f[1]*g,y=f[2]*g,x=(0,l.default)(n,i,2);if(!x)return;for(var b=c.length/6,_=0;_<x.length;_+=3)p.push(x[_]+b),p.push(x[_]+b),p.push(x[_+1]+b),p.push(x[_+2]+b),p.push(x[_+2]+b);for(var T=0;T<d;T++)c.push(n[2*T],n[2*T+1],v,m,y,g)}t.lineWidth>0&&(0,o.default)(t,e,r)};var i=t("./buildLine"),o=n(i),s=t("../../../utils"),a=t("earcut"),l=n(a)},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r){var n=t.shape,s=n.x,a=n.y,l=n.width,u=n.height;if(t.fill){var h=(0,o.hex2rgb)(t.fillColor),c=t.fillAlpha,p=h[0]*c,d=h[1]*c,f=h[2]*c,g=e.points,v=e.indices,m=g.length/6;g.push(s,a),g.push(p,d,f,c),g.push(s+l,a),g.push(p,d,f,c),g.push(s,a+u),g.push(p,d,f,c),g.push(s+l,a+u),g.push(p,d,f,c),v.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var y=t.points;t.points=[s,a,s+l,a,s+l,a+u,s,a+u,s,a],(0,i.default)(t,e,r),t.points=y}};var n=t("./buildLine"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){return t+(e-t)*r}function o(t,e,r,n,o,s){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=a,u=0,h=0,c=0,p=0,d=0,f=0,g=0,v=0;g<=20;++g)u=i(t,r,v=g/20),h=i(e,n,v),c=i(r,o,v),p=i(n,s,v),d=i(u,c,v),f=i(h,p,v),l.push(d,f);return l}r.__esModule=!0,r.default=function(t,e,r){var n=t.shape,i=n.x,s=n.y,l=n.width,c=n.height,p=n.radius,d=[];if(d.push(i+p,s),o(i+l-p,s,i+l,s,i+l,s+p,d),o(i+l,s+c-p,i+l,s+c,i+l-p,s+c,d),o(i+p,s+c,i,s+c,i,s+c-p,d),o(i,s+p,i,s,i+p+1e-10,s,d),t.fill){for(var f=(0,h.hex2rgb)(t.fillColor),g=t.fillAlpha,v=f[0]*g,m=f[1]*g,y=f[2]*g,x=e.points,b=e.indices,_=x.length/6,T=(0,a.default)(d,null,2),w=0,E=T.length;w<E;w+=3)b.push(T[w]+_),b.push(T[w]+_),b.push(T[w+1]+_),b.push(T[w+2]+_),b.push(T[w+2]+_);for(var S=0,A=d.length;S<A;S++)x.push(d[S],d[++S],v,m,y,g)}if(t.lineWidth){var C=t.points;t.points=d,(0,u.default)(t,e,r),t.points=C}};var s=t("earcut"),a=n(s),l=t("./buildLine"),u=n(l),h=t("../../../utils")},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.autoDetectRenderer=r.Application=r.Filter=r.SpriteMaskFilter=r.Quad=r.RenderTarget=r.ObjectRenderer=r.WebGLManager=r.Shader=r.CanvasRenderTarget=r.TextureUvs=r.VideoBaseTexture=r.BaseRenderTexture=r.RenderTexture=r.BaseTexture=r.TextureMatrix=r.Texture=r.Spritesheet=r.CanvasGraphicsRenderer=r.GraphicsRenderer=r.GraphicsData=r.Graphics=r.TextMetrics=r.TextStyle=r.Text=r.SpriteRenderer=r.CanvasTinter=r.CanvasSpriteRenderer=r.Sprite=r.TransformBase=r.TransformStatic=r.Transform=r.Container=r.DisplayObject=r.Bounds=r.glCore=r.WebGLRenderer=r.CanvasRenderer=r.ticker=r.utils=r.settings=void 0;var o=t("./const");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./math");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return s[t]}})});var a=t("pixi-gl-core");Object.defineProperty(r,"glCore",{enumerable:!0,get:function(){return i(a).default}});var l=t("./display/Bounds");Object.defineProperty(r,"Bounds",{enumerable:!0,get:function(){return i(l).default}});var u=t("./display/DisplayObject");Object.defineProperty(r,"DisplayObject",{enumerable:!0,get:function(){return i(u).default}});var h=t("./display/Container");Object.defineProperty(r,"Container",{enumerable:!0,get:function(){return i(h).default}});var c=t("./display/Transform");Object.defineProperty(r,"Transform",{enumerable:!0,get:function(){return i(c).default}});var p=t("./display/TransformStatic");Object.defineProperty(r,"TransformStatic",{enumerable:!0,get:function(){return i(p).default}});var d=t("./display/TransformBase");Object.defineProperty(r,"TransformBase",{enumerable:!0,get:function(){return i(d).default}});var f=t("./sprites/Sprite");Object.defineProperty(r,"Sprite",{enumerable:!0,get:function(){return i(f).default}});var g=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(r,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return i(g).default}});var v=t("./sprites/canvas/CanvasTinter");Object.defineProperty(r,"CanvasTinter",{enumerable:!0,get:function(){return i(v).default}});var m=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(r,"SpriteRenderer",{enumerable:!0,get:function(){return i(m).default}});var y=t("./text/Text");Object.defineProperty(r,"Text",{enumerable:!0,get:function(){return i(y).default}});var x=t("./text/TextStyle");Object.defineProperty(r,"TextStyle",{enumerable:!0,get:function(){return i(x).default}});var b=t("./text/TextMetrics");Object.defineProperty(r,"TextMetrics",{enumerable:!0,get:function(){return i(b).default}});var _=t("./graphics/Graphics");Object.defineProperty(r,"Graphics",{enumerable:!0,get:function(){return i(_).default}});var T=t("./graphics/GraphicsData");Object.defineProperty(r,"GraphicsData",{enumerable:!0,get:function(){return i(T).default}});var w=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(r,"GraphicsRenderer",{enumerable:!0,get:function(){return i(w).default}});var E=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(r,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return i(E).default}});var S=t("./textures/Spritesheet");Object.defineProperty(r,"Spritesheet",{enumerable:!0,get:function(){return i(S).default}});var A=t("./textures/Texture");Object.defineProperty(r,"Texture",{enumerable:!0,get:function(){return i(A).default}});var C=t("./textures/TextureMatrix");Object.defineProperty(r,"TextureMatrix",{enumerable:!0,get:function(){return i(C).default}});var M=t("./textures/BaseTexture");Object.defineProperty(r,"BaseTexture",{enumerable:!0,get:function(){return i(M).default}});var R=t("./textures/RenderTexture");Object.defineProperty(r,"RenderTexture",{enumerable:!0,get:function(){return i(R).default}});var O=t("./textures/BaseRenderTexture");Object.defineProperty(r,"BaseRenderTexture",{enumerable:!0,get:function(){return i(O).default}});var P=t("./textures/VideoBaseTexture");Object.defineProperty(r,"VideoBaseTexture",{enumerable:!0,get:function(){return i(P).default}});var D=t("./textures/TextureUvs");Object.defineProperty(r,"TextureUvs",{enumerable:!0,get:function(){return i(D).default}});var I=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(r,"CanvasRenderTarget",{enumerable:!0,get:function(){return i(I).default}});var L=t("./Shader");Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return i(L).default}});var F=t("./renderers/webgl/managers/WebGLManager");Object.defineProperty(r,"WebGLManager",{enumerable:!0,get:function(){return i(F).default}});var B=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(r,"ObjectRenderer",{enumerable:!0,get:function(){return i(B).default}});var k=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(r,"RenderTarget",{enumerable:!0,get:function(){return i(k).default}});var N=t("./renderers/webgl/utils/Quad");Object.defineProperty(r,"Quad",{enumerable:!0,get:function(){return i(N).default}});var $=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(r,"SpriteMaskFilter",{enumerable:!0,get:function(){return i($).default}});var U=t("./renderers/webgl/filters/Filter");Object.defineProperty(r,"Filter",{enumerable:!0,get:function(){return i(U).default}});var j=t("./Application");Object.defineProperty(r,"Application",{enumerable:!0,get:function(){return i(j).default}});var G=t("./autoDetectRenderer");Object.defineProperty(r,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var W=t("./utils"),V=n(W),z=t("./ticker"),Y=n(z),X=t("./settings"),H=i(X),q=t("./renderers/canvas/CanvasRenderer"),Z=i(q),Q=t("./renderers/webgl/WebGLRenderer"),J=i(Q);r.settings=H.default,r.utils=V,r.ticker=Y,r.CanvasRenderer=Z.default,r.WebGLRenderer=J.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],66:[function(t,e,r){"use strict";function n(t){return t<0?-1:t>0?1:0}r.__esModule=!0;var i=t("./Matrix"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],h=[],c=[];!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var r=0;r<16;r++)for(var i=n(s[t]*s[r]+l[t]*a[r]),p=n(a[t]*s[r]+u[t]*a[r]),d=n(s[t]*l[r]+l[t]*u[r]),f=n(a[t]*l[r]+u[t]*u[r]),g=0;g<16;g++)if(s[g]===i&&a[g]===p&&l[g]===d&&u[g]===f){e.push(g);break}}for(var v=0;v<16;v++){var m=new o.default;m.set(s[v],a[v],l[v],u[v],0,0),h.push(m)}}();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return s[t]},uY:function(t){return a[t]},vX:function(t){return l[t]},vY:function(t){return u[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][p.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=h[p.inv(e)];i.tx=r,i.ty=n,t.append(i)}};r.default=p},{"./Matrix":67}],67:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("./Point"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=t("../const"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.a=e,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},t.prototype.apply=function(t,e){e=e||new o.default;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new o.default;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},t.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,r,n,i,o,s,a,l){return this.a=Math.cos(s+l)*i,this.b=Math.sin(s+l)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=-Math.atan2(-n,i),a=Math.atan2(r,e),l=Math.abs(o+a);return l<1e-5||Math.abs(s.PI_2-l)<1e-5?(t.rotation=a,e<0&&i>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();r.default=a},{"../const":46,"./Point":69}],68:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._x=n,this._y=i,this.cb=e,this.scope=r}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e||this.cb,r||this.scope,this._x,this._y)},t.prototype.set=function(t,e){var r=t||0,n=e||(0!==e?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},n(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();r.default=i},{}],69:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();r.default=n},{}],70:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./Point");Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return n(i).default}});var o=t("./ObservablePoint");Object.defineProperty(r,"ObservablePoint",{enumerable:!0,get:function(){return n(o).default}});var s=t("./Matrix");Object.defineProperty(r,"Matrix",{enumerable:!0,get:function(){return n(s).default}});var a=t("./GroupD8");Object.defineProperty(r,"GroupD8",{enumerable:!0,get:function(){return n(a).default}});var l=t("./shapes/Circle");Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return n(l).default}});var u=t("./shapes/Ellipse");Object.defineProperty(r,"Ellipse",{enumerable:!0,get:function(){return n(u).default}});var h=t("./shapes/Polygon");Object.defineProperty(r,"Polygon",{enumerable:!0,get:function(){return n(h).default}});var c=t("./shapes/Rectangle");Object.defineProperty(r,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var p=t("./shapes/RoundedRectangle");Object.defineProperty(r,"RoundedRectangle",{enumerable:!0,get:function(){return n(p).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./Rectangle"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("../../const"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=r,this.radius=n,this.type=o.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,i=this.y-e;return(n*=n)+(i*=i)<=r},t.prototype.getBounds=function(){return new i.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();r.default=s},{"../../const":46,"./Rectangle":74}],72:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./Rectangle"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("../../const"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=r,this.width=n,this.height=i,this.type=o.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return(r*=r)+(n*=n)<=1},t.prototype.getBounds=function(){return new i.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();r.default=s},{"../../const":46,"./Rectangle":74}],73:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../Point"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("../../const"),s=function(){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.isArray(r[0])&&(r=r[0]),r[0]instanceof i.default){for(var s=[],a=0,l=r.length;a<l;a++)s.push(r[a].x,r[a].y);r=s}this.closed=!0,this.points=r,this.type=o.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var s=this.points[2*i],a=this.points[2*i+1],l=this.points[2*o],u=this.points[2*o+1];a>e!=u>e&&t<(e-a)/(u-a)*(l-s)+s&&(r=!r)}return r},t}();r.default=s},{"../../const":46,"../Point":69}],74:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../../const"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(o),this.type=i.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=r-e,this.y=n,this.height=i-n},t.prototype.ceil=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y},n(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();r.default=o},{"../../const":46}],75:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../const"),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=r,this.width=i,this.height=o,this.radius=s,this.type=n.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),n=e-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if((r=t-(this.x+this.width-this.radius))*r+n*n<=i)return!0;if(n=e-(this.y+this.height-this.radius),r*r+n*n<=i)return!0;if((r=t-(this.x+this.radius))*r+n*n<=i)return!0}return!1},t}();r.default=i},{"../../const":46}],76:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../utils"),s=t("../math"),a=t("../const"),l=t("../settings"),u=n(l),h=t("../display/Container"),c=n(h),p=t("../textures/RenderTexture"),d=n(p),f=t("eventemitter3"),g=n(f),v=new s.Matrix,m=function(t){function e(r,n,i,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return(0,o.sayHello)(r),"number"==typeof n&&(n=Object.assign({width:n,height:i||u.default.RENDER_OPTIONS.height},l)),n=Object.assign({},u.default.RENDER_OPTIONS,n),h.options=n,h.type=a.RENDERER_TYPE.UNKNOWN,h.screen=new s.Rectangle(0,0,n.width,n.height),h.view=n.view||document.createElement("canvas"),h.resolution=n.resolution||u.default.RESOLUTION,h.transparent=n.transparent,h.autoResize=n.autoResize||!1,h.blendModes=null,h.preserveDrawingBuffer=n.preserveDrawingBuffer,h.clearBeforeRender=n.clearBeforeRender,h.roundPixels=n.roundPixels,h._backgroundColor=0,h._backgroundColorRgba=[0,0,0,0],h._backgroundColorString="#000000",h.backgroundColor=n.backgroundColor||h._backgroundColor,h._tempDisplayObjectParent=new c.default,h._lastObjectRendered=h._tempDisplayObjectParent,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,r,n){n=n||t.getLocalBounds();var i=d.default.create(0|n.width,0|n.height,e,r);return v.tx=-n.x,v.ty=-n.y,this.render(t,i,!1,v,!!t.parent),i},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},i(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,o.hex2string)(t),(0,o.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(g.default);r.default=m},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../SystemRenderer"),o=n(i),s=t("./utils/CanvasMaskManager"),a=n(s),l=t("./utils/CanvasRenderTarget"),u=n(l),h=t("./utils/mapCanvasBlendModesToPixi"),c=n(h),p=t("../../utils"),d=t("../../const"),f=t("../../settings"),g=n(f),v=function(t){function e(r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"Canvas",r,n,i));return o.type=d.RENDERER_TYPE.CANVAS,o.rootContext=o.view.getContext("2d",{alpha:o.transparent}),o.context=o.rootContext,o.refresh=!0,o.maskManager=new a.default(o),o.smoothProperty="imageSmoothingEnabled",o.rootContext.imageSmoothingEnabled||(o.rootContext.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":o.rootContext.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":o.rootContext.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":o.rootContext.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")),o.initPlugins(),o.blendModes=(0,c.default)(),o._activeBlendMode=null,o.renderingToScreen=!1,o.resize(o.options.width,o.options.height),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t,e,r,n,i){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new u.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(e||(this._lastObjectRendered=t),!i){var a=t.parent,l=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=d.BLEND_MODES.NORMAL,s.globalCompositeOperation=this.blendModes[d.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=s,t.renderCanvas(this),this.context=h,s.restore(),this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.smoothProperty&&(this.rootContext[this.smoothProperty]=g.default.SCALE_MODE===d.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(o.default);r.default=v,p.pluginTarget.mixin(v)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../../const"),i=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var r=t.alpha,n=t.transform.worldTransform,i=e.resolution;e.context.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=r},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,r=t.graphicsData.length;if(0!==r){e.beginPath();for(var i=0;i<r;i++){var o=t.graphicsData[i],s=o.shape;if(o.type===n.SHAPES.POLY){var a=s.points,l=o.holes,u=void 0,h=void 0;e.moveTo(a[0],a[1]);for(var c=2;c<a.length;c+=2)e.lineTo(a[c],a[c+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),l.length>0){u=0;for(var p=0;p<a.length;p+=2)u+=a[p]*a[p+3]-a[p+1]*a[p+2];for(var d=0;d<l.length;d++){a=l[d].points,h=0;for(var f=0;f<a.length;f+=2)h+=a[f]*a[f+3]-a[f+1]*a[f+2];if(e.moveTo(a[0],a[1]),h*u<0)for(var g=2;g<a.length;g+=2)e.lineTo(a[g],a[g+1]);else for(var v=a.length-2;v>=2;v-=2)e.lineTo(a[v],a[v+1])}}}else if(o.type===n.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===n.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===n.SHAPES.ELIP){var m=2*s.width,y=2*s.height,x=s.x-m/2,b=s.y-y/2,_=m/2*.5522848,T=y/2*.5522848,w=x+m,E=b+y,S=x+m/2,A=b+y/2;e.moveTo(x,A),e.bezierCurveTo(x,A-T,S-_,b,S,b),e.bezierCurveTo(S+_,b,w,A-T,w,A),e.bezierCurveTo(w,A+T,S+_,E,S,E),e.bezierCurveTo(S-_,E,x,A+T,x,A),e.closePath()}else if(o.type===n.SHAPES.RREC){var C=s.x,M=s.y,R=s.width,O=s.height,P=s.radius,D=Math.min(R,O)/2|0;P=P>D?D:P,e.moveTo(C,M+P),e.lineTo(C,M+O-P),e.quadraticCurveTo(C,M+O,C+P,M+O),e.lineTo(C+R-P,M+O),e.quadraticCurveTo(C+R,M+O,C+R,M+O-P),e.lineTo(C+R,M+P),e.quadraticCurveTo(C+R,M,C+R-P,M),e.lineTo(C+P,M),e.quadraticCurveTo(C,M,C,M+P),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();r.default=i},{"../../../const":46}],79:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../../../settings"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=function(){function t(e,r,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||o.default.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},n(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();r.default=s},{"../../../settings":101}],80:[function(t,e,r){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var r=e.getContext("2d");return r.fillStyle=t,r.fillRect(0,0,6,1),e}r.__esModule=!0,r.default=function(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var i=r.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(t,0,0),i.drawImage(e,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}},{}],81:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)()?(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="multiply",t[n.BLEND_MODES.SCREEN]="screen",t[n.BLEND_MODES.OVERLAY]="overlay",t[n.BLEND_MODES.DARKEN]="darken",t[n.BLEND_MODES.LIGHTEN]="lighten",t[n.BLEND_MODES.COLOR_DODGE]="color-dodge",t[n.BLEND_MODES.COLOR_BURN]="color-burn",t[n.BLEND_MODES.HARD_LIGHT]="hard-light",t[n.BLEND_MODES.SOFT_LIGHT]="soft-light",t[n.BLEND_MODES.DIFFERENCE]="difference",t[n.BLEND_MODES.EXCLUSION]="exclusion",t[n.BLEND_MODES.HUE]="hue",t[n.BLEND_MODES.SATURATION]="saturate",t[n.BLEND_MODES.COLOR]="color",t[n.BLEND_MODES.LUMINOSITY]="luminosity"):(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="source-over",t[n.BLEND_MODES.SCREEN]="source-over",t[n.BLEND_MODES.OVERLAY]="source-over",t[n.BLEND_MODES.DARKEN]="source-over",t[n.BLEND_MODES.LIGHTEN]="source-over",t[n.BLEND_MODES.COLOR_DODGE]="source-over",t[n.BLEND_MODES.COLOR_BURN]="source-over",t[n.BLEND_MODES.HARD_LIGHT]="source-over",t[n.BLEND_MODES.SOFT_LIGHT]="source-over",t[n.BLEND_MODES.DIFFERENCE]="source-over",t[n.BLEND_MODES.EXCLUSION]="source-over",t[n.BLEND_MODES.HUE]="source-over",t[n.BLEND_MODES.SATURATION]="source-over",t[n.BLEND_MODES.COLOR]="source-over",t[n.BLEND_MODES.LUMINOSITY]="source-over"),t[n.BLEND_MODES.NORMAL_NPM]=t[n.BLEND_MODES.NORMAL],t[n.BLEND_MODES.ADD_NPM]=t[n.BLEND_MODES.ADD],t[n.BLEND_MODES.SCREEN_NPM]=t[n.BLEND_MODES.SCREEN],t};var n=t("../../../const"),i=t("./canUseNewCanvasBlendModes"),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../const"),i=t("../../settings"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=o.default.GC_MAX_IDLE,this.checkCountMax=o.default.GC_MAX_CHECK_COUNT,this.mode=o.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t}();r.default=s},{"../../const":46,"../../settings":101}],83:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("pixi-gl-core"),i=t("../../const"),o=t("./utils/RenderTarget"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=t("../../utils"),l=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var r=this.gl,o=!!t._glRenderTargets;if(!t.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===e){e=0;for(var l=0;l<a.length;++l)if(a[l]===t){e=l;break}}a[e]=t,r.activeTexture(r.TEXTURE0+e);var u=t._glTextures[this.renderer.CONTEXT_UID];if(u)o?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):u.upload(t.source);else{if(o){var h=new s.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);h.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=h,u=h.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(u=new n.GLTexture(this.gl,null,null,null,null)).bind(e),u.premultiplyAlpha=!0,u.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=u,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&u.enableMipmap(),t.wrapMode===i.WRAP_MODES.CLAMP?u.enableWrapClamp():t.wrapMode===i.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),t.scaleMode===i.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var r=this.renderer,n=r.CONTEXT_UID,i=t._glTextures,o=t._glRenderTargets;if(i[n]&&(r.unbindTexture(t),i[n].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete i[n],!e)){var s=this._managedTextures.indexOf(t);-1!==s&&(0,a.removeItems)(this._managedTextures,s,1)}o&&o[n]&&(r._activeRenderTarget===o[n]&&r.bindRenderTarget(r.rootRenderTarget),o[n].destroy(),delete o[n])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();r.default=l},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../SystemRenderer"),o=n(i),s=t("./managers/MaskManager"),a=n(s),l=t("./managers/StencilManager"),u=n(l),h=t("./managers/FilterManager"),c=n(h),p=t("./utils/RenderTarget"),d=n(p),f=t("./utils/ObjectRenderer"),g=n(f),v=t("./TextureManager"),m=n(v),y=t("../../textures/BaseTexture"),x=n(y),b=t("./TextureGarbageCollector"),_=n(b),T=t("./WebGLState"),w=n(T),E=t("./utils/mapWebGLDrawModesToPixi"),S=n(E),A=t("./utils/validateContext"),C=n(A),M=t("../../utils"),R=t("pixi-gl-core"),O=n(R),P=t("../../const"),D=0,I=function(t){function e(r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"WebGL",r,n,i));return o.legacy=o.options.legacy,o.legacy&&(O.default.VertexArrayObject.FORCE_NATIVE=!0),o.type=P.RENDERER_TYPE.WEBGL,o.handleContextLost=o.handleContextLost.bind(o),o.handleContextRestored=o.handleContextRestored.bind(o),o.view.addEventListener("webglcontextlost",o.handleContextLost,!1),o.view.addEventListener("webglcontextrestored",o.handleContextRestored,!1),o._contextOptions={alpha:o.transparent,antialias:o.options.antialias,premultipliedAlpha:o.transparent&&"notMultiplied"!==o.transparent,stencil:!0,preserveDrawingBuffer:o.options.preserveDrawingBuffer,powerPreference:o.options.powerPreference},o._backgroundColorRgba[3]=o.transparent?0:1,o.maskManager=new a.default(o),o.stencilManager=new u.default(o),o.emptyRenderer=new g.default(o),o.currentRenderer=o.emptyRenderer,o.textureManager=null,o.filterManager=null,o.initPlugins(),o.options.context&&(0,C.default)(o.options.context),o.gl=o.options.context||O.default.createContext(o.view,o._contextOptions),o.CONTEXT_UID=D++,o.state=new w.default(o.gl),o.renderingToScreen=!0,o.boundTextures=null,o._activeShader=null,o._activeVao=null,o._activeRenderTarget=null,o._initContext(),o.drawModes=(0,S.default)(o.gl),o._nextTextureLocation=0,o.setBlendMode(0),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new m.default(this),this.filterManager=new c.default(this),this.textureGC=new _.default(this),this.state.resetToDefault(),this.rootRenderTarget=new d.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new O.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<e;i++){var o=new x.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,r,n,i){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!i){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){o.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var r=t.baseTexture,n=r._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var r=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(r=n._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else r=this.rootRenderTarget;return r.transform=e,this.bindRenderTarget(r),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,r){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,r)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===t&&(this.boundTextures[r]=this.emptyTextures[r],e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new O.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(o.default);r.default=I,M.pluginTarget.mixin(I)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./utils/mapWebGLBlendModesToPixi"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,i.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();r.default=o},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("./extractUniformsFromSrc"),s=n(o),a=t("../../../utils"),l=t("../../../const"),u=t("../../../settings"),h=n(u),c={},p=function(){function t(e,r,n){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this._blendMode=l.BLEND_MODES.NORMAL,this.uniformData=n||(0,s.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[i]=this.uniformData[i].value,this.uniformData[i].type&&(this.uniformData[i].type=this.uniformData[i].type.toLowerCase());this.glShaders={},c[this.vertexSrc+this.fragmentSrc]||(c[this.vertexSrc+this.fragmentSrc]=(0,a.uid)()),this.glShaderKey=c[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=h.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,r,n,i){t.applyFilter(this,e,r,n)},i(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();r.default=p},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(t,e,r){"use strict";function n(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},n=void 0,i=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var a=i[o].trim();if(a.indexOf("uniform")>-1){var l=a.split(" "),u=l[1],h=l[2],c=1;h.indexOf("[")>-1&&(n=h.split(/\[|]/),h=n[0],c*=Number(n[1])),h.match(e)||(r[h]={value:s(u,c),name:h,type:u})}}return r}r.__esModule=!0,r.default=function(t,e,r){var i=n(t),o=n(e);return Object.assign(i,o)};var i=t("pixi-gl-core"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=o.default.shader.defaultValue},{"pixi-gl-core":15}],88:[function(t,e,r){"use strict";r.__esModule=!0,r.calculateScreenSpaceMatrix=function(t,e,r){var n=t.identity();return n.translate(e.x/r.width,e.y/r.height),n.scale(r.width,r.height),n},r.calculateNormalizedScreenSpaceMatrix=function(t,e,r){var n=t.identity();n.translate(e.x/r.width,e.y/r.height);var i=r.width/e.width,o=r.height/e.height;return n.scale(i,o),n},r.calculateSpriteMatrix=function(t,e,r,i){var o=i._texture.orig,s=t.set(r.width,0,0,r.height,e.x,e.y),a=i.worldTransform.copy(n.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(i.anchor.x,i.anchor.y),s};var n=t("../../../math")},{"../../../math":70}],89:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../Filter"),o=n(i),s=t("../../../../math"),a=(t("path"),t("../../../../textures/TextureMatrix")),l=n(a),u=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new s.Matrix,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return r.renderable=!1,i.maskSprite=r,i.maskMatrix=n,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,r){var n=this.maskSprite,i=this.maskSprite.texture;i.valid&&(i.transform||(i.transform=new l.default(i,0)),i.transform.update(),this.uniforms.mask=i,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(i.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=i.transform.uClampFrame,t.applyFilter(this,e,r))},e}(o.default);r.default=u},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("./WebGLManager"),s=n(o),a=t("../utils/RenderTarget"),l=n(a),u=t("../utils/Quad"),h=n(u),c=t("../../../math"),p=t("../../../Shader"),d=n(p),f=t("../filters/filterTransforms"),g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(f),v=t("bit-twiddle"),m=n(v),y=function(){function t(){i(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new c.Rectangle,this.destinationFrame=new c.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),x=function(t){function e(r){i(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return n.gl=n.renderer.gl,n.quad=new h.default(n.gl,r.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n.managedFilters=[],n.renderer.on("prerender",n.onPrerender,n),n._screenWidth=r.view.width,n._screenHeight=r.view.height,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushFilter=function(t,e){var r=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var i=new y;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[i]},this.filterData=n}var o=n.stack[++n.index],s=n.stack[0].destinationFrame;o||(o=n.stack[n.index]=new y);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===r.screen.width&&t.filterArea.height===r.screen.height,l=e[0].resolution,u=0|e[0].padding,h=a?r.screen:t.filterArea||t.getBounds(!0),c=o.sourceFrame,p=o.destinationFrame;c.x=(h.x*l|0)/l,c.y=(h.y*l|0)/l,c.width=(h.width*l|0)/l,c.height=(h.height*l|0)/l,a||(n.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(s),c.pad(u)),p.width=c.width,p.height=c.height;var d=this.getPotRenderTarget(r.gl,c.width,c.height,l);o.target=t,o.filters=e,o.resolution=l,o.renderTarget=d,d.setFrame(p,c),r.bindRenderTarget(d),d.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],r=t.stack[t.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.renderTarget,e.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var i=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,i,o,!0,r);var a=i;i=o,o=a}n[s].apply(this,i,e.renderTarget,!1,r),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}r.clear(),0==--t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,r,n){var i=this.renderer,o=i.gl,s=t.glShaders[i.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new d.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[i.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[i.CONTEXT_UID]=new d.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),i.bindVao(null),this.quad.initVao(s)),i.bindVao(this.quad.vao),i.bindRenderTarget(r),n&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),r===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(s);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(s,t),i.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var r=e.uniformData,n=e.uniforms,i=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var l in r)if(t.uniforms.data[l]){var u=r[l].type;if("sampler2d"===u&&0!==n[l]){if(n[l].baseTexture)t.uniforms[l]=this.renderer.bindTexture(n[l].baseTexture,i);else{t.uniforms[l]=i;var h=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],h.activeTexture(h.TEXTURE0+i),n[l].texture.bind()}i++}else if("mat3"===u)void 0!==n[l].a?t.uniforms[l]=n[l].toArray(!0):t.uniforms[l]=n[l];else if("vec2"===u)if(void 0!==n[l].x){var c=t.uniforms[l]||new Float32Array(2);c[0]=n[l].x,c[1]=n[l].y,t.uniforms[l]=c}else t.uniforms[l]=n[l];else"float"===u?t.uniforms.data[l].value!==r[l]&&(t.uniforms[l]=n[l]):t.uniforms[l]=n[l]}},e.prototype.getRenderTarget=function(t,e){var r=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,e||r.resolution);return n.setFrame(r.destinationFrame,r.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return g.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return g.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var r=this.filterData.stack[this.filterData.index];return g.calculateSpriteMatrix(t,r.sourceFrame,r.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,r=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var n=0;n<r.length;n++)t||r[n].glShaders[e.CONTEXT_UID].destroy(),delete r[n].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,r,n){var i="screen";r*=n,(e*=n)===this._screenWidth&&r===this._screenHeight||(e=m.default.nextPow2(e),r=m.default.nextPow2(r),i=(65535&e)<<16|65535&r),this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var s=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new l.default(t,e,r,null,1),t.bindTexture(t.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=n,o.defaultFrame.width=o.size.width=e/n,o.defaultFrame.height=o.size.height=r/n,o.filterPoolKey=i,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(s.default);r.default=x},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./WebGLManager"),o=n(i),s=t("../filters/spriteMask/SpriteMaskFilter"),a=n(s),l=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var r=e.worldTransform,n=Math.atan2(r.b,r.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new a.default(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,r),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(o.default);r.default=l},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./WebGLManager"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return n.stencilMaskStack=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,r,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){i.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(i.default);r.default=o},{"./WebGLManager":93}],93:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();r.default=n},{}],94:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../managers/WebGLManager"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(i.default);r.default=o},{"../managers/WebGLManager":93}],95:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("pixi-gl-core"),o=n(i),s=t("../../../utils/createIndicesForQuads"),a=n(s),l=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,a.default)(1),this.vertexBuffer=o.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new o.default.VertexArrayObject(e,r)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();r.default=l},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../../math"),i=t("../../../const"),o=t("../../../settings"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=t("pixi-gl-core"),l=function(){function t(e,r,o,l,u,h){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=u||s.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==l?l:s.default.SCALE_MODE,this.root=h||!1,this.root?(this.frameBuffer=new a.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=a.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===i.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(r,o)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var r=this.projectionMatrix;e=e||t,r.identity(),this.root?(r.a=1/t.width*2,r.d=-1/t.height*2,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2,r.d=1/t.height*2,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},t.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();r.default=l},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(t,e,r){"use strict";function n(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}r.__esModule=!0,r.default=function(t,e){var r=!e;if(r){var i=document.createElement("canvas");i.width=1,i.height=1,e=o.default.createContext(i)}for(var a=e.createShader(e.FRAGMENT_SHADER);;){var l=s.replace(/%forloop%/gi,n(t));if(e.shaderSource(a,l),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))break;t=t/2|0}return r&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t};var i=t("pixi-gl-core"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":15}],98:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[n.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[n.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e};var n=t("../../../const")},{"../../../const":46}],99:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[n.DRAW_MODES.POINTS]=t.POINTS,e[n.DRAW_MODES.LINES]=t.LINES,e[n.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[n.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[n.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[n.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[n.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var n=t("../../../const")},{"../../../const":46}],100:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./utils/maxRecommendedTextures"),o=n(i),s=t("./utils/canUploadSameBuffer"),a=n(s);r.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,o.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../math"),s=t("../utils"),a=t("../const"),l=t("../textures/Texture"),u=n(l),h=t("../display/Container"),c=n(h),p=new o.Point,d=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._anchor=new o.ObservablePoint(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=a.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=r||u.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,s.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,s.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,l=this.vertexData,u=t.trim,h=t.orig,c=this._anchor,p=0,d=0,f=0,g=0;u?(d=u.x-c._x*h.width,p=d+u.width,g=u.y-c._y*h.height,f=g+u.height):(d=-c._x*h.width,p=d+h.width,g=-c._y*h.height,f=g+h.height),l[0]=r*d+i*g+s,l[1]=o*g+n*d+a,l[2]=r*p+i*g+s,l[3]=o*g+n*p+a,l[4]=r*p+i*f+s,l[5]=o*f+n*p+a,l[6]=r*d+i*f+s,l[7]=o*f+n*d+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,h=i.ty,c=-n._x*r.width,p=c+r.width,d=-n._y*r.height,f=d+r.height;e[0]=o*c+a*d+u,e[1]=l*d+s*c+h,e[2]=o*p+a*d+u,e[3]=l*d+s*p+h,e[4]=o*p+a*f+u,e[5]=l*f+s*p+h,e[6]=o*c+a*f+u,e[7]=l*f+s*c+h},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,p);var e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x,i=0;return p.x>=n&&p.x<n+e&&(i=-r*this.anchor.y,p.y>=i&&p.y<i+r)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var r="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null,this.shader=null},e.from=function(t){return new e(u.default.from(t))},e.fromFrame=function(t){var r=s.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(r)},e.fromImage=function(t,r,n){return new e(u.default.fromImage(t,r,n))},i(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,s.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,s.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||u.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(c.default);r.default=d},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../../renderers/canvas/CanvasRenderer"),o=n(i),s=t("../../const"),a=t("../../math"),l=t("./CanvasTinter"),u=n(l),h=new a.Matrix,c=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,r=this.renderer,n=e._frame.width,i=e._frame.height,o=t.transform.worldTransform,l=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(r.setBlendMode(t.blendMode),e.valid)){r.context.globalAlpha=t.worldAlpha;var p=e.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==p&&(r.context[r.smoothProperty]=p),e.trim?(l=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,c=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(l=(.5-t.anchor.x)*e.orig.width,c=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(h),o=h,a.GroupD8.matrixAppendRotationInv(o,e.rotate,l,c),l=0,c=0),l-=n/2,c-=i/2,r.roundPixels?(r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution|0,o.ty*r.resolution|0),l|=0,c|=0):r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution,o.ty*r.resolution);var d=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=u.default.getTintedTexture(t,t.tint)),r.context.drawImage(t.tintedTexture,0,0,n*d,i*d,l*r.resolution,c*r.resolution,n*r.resolution,i*r.resolution)):r.context.drawImage(e.baseTexture.source,e._frame.x*d,e._frame.y*d,n*d,i*d,l*r.resolution,c*r.resolution,n*r.resolution,i*r.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();r.default=c,o.default.registerPlugin("sprite",c)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../utils"),i=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s={getTintedTexture:function(t,e){var r=t._texture,n="#"+("00000"+(0|(e=s.roundColor(e))).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var i=r.tintCache[n],o=void 0;if(i){if(i.tintId===r._updateID)return r.tintCache[n];o=r.tintCache[n]}else o=s.canvas||document.createElement("canvas");if(s.tintMethod(r,e,o),o.tintId=r._updateID,s.convertTintToImage){var a=new Image;a.src=o.toDataURL(),r.tintCache[n]=a}else r.tintCache[n]=o,s.canvas=null;return o},tintWithMultiply:function(t,e,r){var n=r.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithOverlay:function(t,e,r){var n=r.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithPerPixel:function(t,e,r){var i=r.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,r.width=Math.ceil(o.width),r.height=Math.ceil(o.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),i.restore();for(var a=(0,n.hex2rgb)(e),l=a[0],u=a[1],h=a[2],c=i.getImageData(0,0,o.width,o.height),p=c.data,d=0;d<p.length;d+=4)p[d+0]*=l,p[d+1]*=u,p[d+2]*=h;i.putImageData(c,0,0)},roundColor:function(t){var e=s.cacheStepsPerColorChannel,r=(0,n.hex2rgb)(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),(0,n.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,o.default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,r.default=s},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();r.default=n},{}],106:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../../renderers/webgl/utils/ObjectRenderer"),o=n(i),s=t("../../renderers/webgl/WebGLRenderer"),a=n(s),l=t("../../utils/createIndicesForQuads"),u=n(l),h=t("./generateMultiTextureShader"),c=n(h),p=t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),d=n(p),f=t("./BatchBuffer"),g=n(f),v=t("../../settings"),m=n(v),y=t("../../utils"),x=t("pixi-gl-core"),b=n(x),_=t("bit-twiddle"),T=n(_),w=0,E=0,S=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=m.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var i=1;i<=T.default.nextPow2(n.size);i*=2)n.buffers.push(new g.default(4*i*n.vertByteSize));n.indices=(0,u.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var o=0;o<n.size;o++)n.groups[o]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,d.default)(this.MAX_TEXTURES,t)),this.shader=(0,c.default)(t,this.MAX_TEXTURES),this.indexBuffer=b.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,r=0;r<this.vaoMax;r++){var n=this.vertexBuffers[r]=b.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&i.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,r=T.default.nextPow2(this.currentIndex),n=T.default.log2(r),i=this.buffers[n],o=this.sprites,s=this.groups,a=i.float32View,l=i.uint32View,u=this.boundTextures,h=this.renderer.boundTextures,c=this.renderer.textureGC.count,p=0,d=void 0,f=void 0,g=1,v=0,x=s[0],_=void 0,S=void 0,A=y.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];x.textureCount=0,x.start=0,x.blend=A,w++;var C=void 0;for(C=0;C<e;++C){var M=h[C];M._enabled!==w?(u[C]=M,M._virtalBoundId=C,M._enabled=w):u[C]=this.renderer.emptyTextures[C]}for(w++,C=0;C<this.currentIndex;++C){var R=o[C];o[C]=null,d=R._texture.baseTexture;var O=y.premultiplyBlendMode[Number(d.premultipliedAlpha)][R.blendMode];if(A!==O&&(A=O,f=null,v=e,w++),f!==d&&(f=d,d._enabled!==w)){if(v===e&&(w++,x.size=C-x.start,v=0,(x=s[g++]).blend=A,x.textureCount=0,x.start=C),d.touched=c,-1===d._virtalBoundId)for(var P=0;P<e;++P){var D=(P+E)%e,I=u[D];if(I._enabled!==w){E++,I._virtalBoundId=-1,d._virtalBoundId=D,u[D]=d;break}}d._enabled=w,x.textureCount++,x.ids[v]=d._virtalBoundId,x.textures[v++]=d}if(_=R.vertexData,S=R._texture._uvs.uvsUint32,this.renderer.roundPixels){var L=this.renderer.resolution;a[p]=(_[0]*L|0)/L,a[p+1]=(_[1]*L|0)/L,a[p+5]=(_[2]*L|0)/L,a[p+6]=(_[3]*L|0)/L,a[p+10]=(_[4]*L|0)/L,a[p+11]=(_[5]*L|0)/L,a[p+15]=(_[6]*L|0)/L,a[p+16]=(_[7]*L|0)/L}else a[p]=_[0],a[p+1]=_[1],a[p+5]=_[2],a[p+6]=_[3],a[p+10]=_[4],a[p+11]=_[5],a[p+15]=_[6],a[p+16]=_[7];l[p+2]=S[0],l[p+7]=S[1],l[p+12]=S[2],l[p+17]=S[3];var F=Math.min(R.worldAlpha,1),B=F<1&&d.premultipliedAlpha?(0,y.premultiplyTint)(R._tintRGB,F):R._tintRGB+(255*F<<24);l[p+3]=l[p+8]=l[p+13]=l[p+18]=B,a[p+4]=a[p+9]=a[p+14]=a[p+19]=d._virtalBoundId,p+=20}if(x.size=C-x.start,m.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var k=this.shader.attributes,N=this.vertexBuffers[this.vertexCount]=b.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),$=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(N,k.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(N,k.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(N,k.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);k.aTextureId&&$.addAttribute(N,k.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=$}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(C=0;C<e;++C)h[C]._virtalBoundId=-1;for(C=0;C<g;++C){for(var U=s[C],j=U.textureCount,G=0;G<j;G++)f=U.textures[G],h[U.ids[G]]!==f&&this.renderer.bindTexture(f,U.ids[G],!0),f._virtalBoundId=-1;this.renderer.state.setBlendMode(U.blend),t.drawElements(t.TRIANGLES,6*U.size,t.UNSIGNED_SHORT,6*U.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),m.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},e}(o.default);r.default=S,a.default.registerPlugin("sprite",S)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e){var r=o;r=(r=r.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(textureId == "+r+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var n=new i.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r),s=[],a=0;a<e;a++)s[a]=a;return n.bind(),n.uniforms.uSamplers=s,n};var n=t("../../Shader"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=(t("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":44,path:8}],108:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../sprites/Sprite"),s=n(o),a=t("../textures/Texture"),l=n(a),u=t("../math"),h=t("../utils"),c=t("../const"),p=t("../settings"),d=n(p),f=t("./TextStyle"),g=n(f),v=t("./TextMetrics"),m=n(v),y=t("../utils/trimCanvas"),x=n(y),b={texture:!0,children:!1,baseTexture:!0},_=function(t){function e(r,n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),(i=i||document.createElement("canvas")).width=3,i.height=3;var o=l.default.fromCanvas(i,d.default.SCALE_MODE,"text");o.orig=new u.Rectangle,o.trim=new u.Rectangle;var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return l.default.addToCache(s._texture,s._texture.baseTexture.textureCacheIds[0]),s.canvas=i,s.context=s.canvas.getContext("2d"),s.resolution=d.default.RESOLUTION,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=r,s.style=n,s.localStyleID=-1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r=this.context,n=m.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=n.width,o=n.height,s=n.lines,a=n.lineHeight,l=n.lineWidths,u=n.maxLineWidth,h=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,i)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=e.stroke,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;var c=void 0,p=void 0;if(e.dropShadow){r.fillStyle=e.dropShadowColor,r.globalAlpha=e.dropShadowAlpha,r.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(r.shadowColor=e.dropShadowColor);for(var d=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,f=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,g=0;g<s.length;g++)c=e.strokeThickness/2,p=e.strokeThickness/2+g*a+h.ascent,"right"===e.align?c+=u-l[g]:"center"===e.align&&(c+=(u-l[g])/2),e.fill&&(this.drawLetterSpacing(s[g],c+d+e.padding,p+f+e.padding),e.stroke&&e.strokeThickness&&(r.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[g],c+d+e.padding,p+f+e.padding,!0),r.strokeStyle=e.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(e,s);for(var v=0;v<s.length;v++)c=e.strokeThickness/2,p=e.strokeThickness/2+v*a+h.ascent,"right"===e.align?c+=u-l[v]:"center"===e.align&&(c+=(u-l[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[v],c+e.padding,p+e.padding,!0),e.fill&&this.drawLetterSpacing(s[v],c+e.padding,p+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style,o=i.letterSpacing;if(0!==o)for(var s=String.prototype.split.call(t,""),a=e,l=0,u="";l<t.length;)u=s[l++],n?this.context.strokeText(u,a,r):this.context.fillText(u,a,r),a+=this.context.measureText(u).width+o;else n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,x.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,n=this._style,i=n.trim?0:n.padding,o=r.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,r.trim.width=r._frame.width=t.width/this.resolution,r.trim.height=r._frame.height=t.height/this.resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-2*i,r.orig.height=r._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var r=void 0,n=void 0,i=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,l=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var h=l.length+1,p=1;p<h;++p)u.push(p/h);if(l.unshift(t.fill[0]),u.unshift(0),l.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===c.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,0,s/2,a),n=(l.length+1)*e.length,i=0;for(var d=0;d<e.length;d++){i+=1;for(var f=0;f<l.length;f++)o="number"==typeof u[f]?u[f]/e.length+d/e.length:i/n,r.addColorStop(o,l[f]),i++}}else{r=this.context.createLinearGradient(0,a/2,s,a/2),n=l.length+1,i=1;for(var g=0;g<l.length;g++)o="number"==typeof u[g]?u[g]:i/n,r.addColorStop(o,l[g]),i++}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},b,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},i(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof g.default?this._style=t:this._style=new g.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null==t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(s.default);r.default=_},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(e,r,n,i,o,s,a,l,u){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.text=e,this.style=r,this.width=n,this.height=i,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}return t.measureText=function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;n=null==n?r.wordWrap:n;var o=r.toFontString(),s=t.measureFont(o),a=i.getContext("2d");a.font=o;for(var l=n?t.wordWrap(e,r,i):e,u=l.split(/(?:\r\n|\r|\n)/),h=new Array(u.length),c=0,p=0;p<u.length;p++){var d=a.measureText(u[p]).width+(u[p].length-1)*r.letterSpacing;h[p]=d,c=Math.max(c,d)}var f=c+r.strokeThickness;r.dropShadow&&(f+=r.dropShadowDistance);var g=r.lineHeight||s.fontSize+r.strokeThickness,v=Math.max(g,s.fontSize+r.strokeThickness)+(u.length-1)*(g+r.leading);return r.dropShadow&&(v+=r.dropShadowDistance),new t(e,r,f,v,u,h,g+r.leading,c,s)},t.wordWrap=function(e,r){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,i=n.getContext("2d"),o=0,s="",a="",l={},u=r.letterSpacing,h=r.whiteSpace,c=t.collapseSpaces(h),p=t.collapseNewlines(h),d=!c,f=r.wordWrapWidth+u,g=t.tokenize(e),v=0;v<g.length;v++){var m=g[v];if(t.isNewline(m)){if(!p){a+=t.addLine(s),d=!c,s="",o=0;continue}m=" "}if(c){var y=t.isBreakingSpace(m),x=t.isBreakingSpace(s[s.length-1]);if(y&&x)continue}var b=t.getFromCache(m,u,l,i);if(b>f)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(m,r.breakWords))for(var _=m.split(""),T=0;T<_.length;T++){for(var w=_[T],E=1;_[T+E];){var S=_[T+E],A=w[w.length-1];if(t.canBreakChars(A,S,m,T,r.breakWords))break;w+=S,E++}T+=w.length-1;var C=t.getFromCache(w,u,l,i);C+o>f&&(a+=t.addLine(s),d=!1,s="",o=0),s+=w,o+=C}else{s.length>0&&(a+=t.addLine(s),s="",o=0);var M=v===g.length-1;a+=t.addLine(m,!M),d=!1,s="",o=0}else b+o>f&&(d=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(m)||d)&&(s+=m,o+=b)}return a+=t.addLine(s,!1)},t.addLine=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t.trimRight(e),e=r?e+"\n":e},t.getFromCache=function(t,e,r,n){var i=r[t];if(void 0===i){var o=t.length*e;i=n.measureText(t).width+o,r[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var r=e.length-1;r>=0;r--){var n=e[r];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],n="";if("string"!=typeof e)return r;for(var i=0;i<e.length;i++){var o=e[i];t.isBreakingSpace(o)||t.isNewline(o)?(""!==n&&(r.push(n),n=""),r.push(o)):n+=o}return""!==n&&r.push(n),r},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,r,n,i){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={},n=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),l=2*a;a=a*t.BASELINE_MULTIPLIER|0,n.width=s,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,s,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var u=i.getImageData(0,0,s,l).data,h=u.length,c=4*s,p=0,d=0,f=!1;for(p=0;p<a;++p){for(var g=0;g<c;g+=4)if(255!==u[d+g]){f=!0;break}if(f)break;d+=c}for(r.ascent=a-p,d=h-c,f=!1,p=l;p>a;--p){for(var v=0;v<c;v+=4)if(255!==u[d+v]){f=!0;break}if(f)break;d-=c}return r.descent=p-a,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();r.default=n;var i=document.createElement("canvas");i.width=i.height=10,n._canvas=i,n._context=i.getContext("2d"),n._fonts={},n.METRICS_STRING="|Éq",n.BASELINE_SYMBOL="M",n.BASELINE_MULTIPLIER=1.4,n._newlines=[10,13],n._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],110:[function(t,e,r){"use strict";function n(t){return"number"==typeof t?(0,l.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function i(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=n(t[e]);return t}return n(t)}function o(t,e,r){for(var n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../const"),l=t("../utils"),u={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:a.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},h=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],c=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.styleID=0,this.reset(),o(this,e,e)}return t.prototype.clone=function(){var e={};return o(e,this,u),new t(e)},t.prototype.reset=function(){o(this,u,u)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&h.indexOf(n)<0&&(n='"'+n+'"'),e[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},s(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=i(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=i(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=i(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();r.default=c},{"../const":46,"../utils":125}],111:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./BaseTexture"),o=n(i),s=t("../settings"),a=n(s),l=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments[2],o=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,null,i));return s.resolution=o||a.default.RESOLUTION,s.width=Math.ceil(r),s.height=Math.ceil(n),s.realWidth=s.width*s.resolution,s.realHeight=s.height*s.resolution,s.scaleMode=void 0!==i?i:a.default.SCALE_MODE,s.hasLoaded=!0,s._glRenderTargets={},s._canvasRenderTarget=null,s.valid=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(o.default);r.default=l},{"../settings":101,"./BaseTexture":112}],112:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../utils"),o=t("../settings"),s=n(o),a=t("eventemitter3"),l=n(a),u=t("../utils/determineCrossOrigin"),h=n(u),c=t("bit-twiddle"),p=n(c),d=function(t){function e(r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return a.uid=(0,i.uid)(),a.touched=0,a.resolution=o||s.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=void 0!==n?n:s.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=s.default.MIPMAP_TEXTURES,a.wrapMode=s.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],r&&a.loadSource(r),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=p.default.isPow2(this.realWidth)&&p.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading){if(n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType)return void n._loadSvgSource();n.emit("loaded",n)}},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,i.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var r=t.subType.split("+")[0];if(!(e=(0,i.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else(e=(0,i.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,i.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var r=(0,i.getSvgSize)(t),n=r.width,o=r.height;if(!n||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(o*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,i.uid)(),s.getContext("2d").drawImage(this.source,0,0,n,o,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,e.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,r,n,o){var s=i.BaseTextureCache[t];if(!s){var a=new Image;void 0===r&&0!==t.indexOf("data:")?a.crossOrigin=(0,h.default)(t):r&&(a.crossOrigin="string"==typeof r?r:"anonymous"),(s=new e(a,n)).imageUrl=t,o&&(s.sourceScale=o),s.resolution=(0,i.getResolutionOfUrl)(t),a.src=t,e.addToCache(s,t)}return s},e.fromCanvas=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,i.uid)());var o=i.BaseTextureCache[t._pixiId];return o||(o=new e(t,r),e.addToCache(o,t._pixiId)),o},e.from=function(t,r,n){if("string"==typeof t)return e.fromImage(t,void 0,r,n);if(t instanceof HTMLImageElement){var o=t.src,s=i.BaseTextureCache[o];return s||((s=new e(t,r)).imageUrl=o,n&&(s.sourceScale=n),s.resolution=(0,i.getResolutionOfUrl)(o),e.addToCache(s,o)),s}return t instanceof HTMLCanvasElement?e.fromCanvas(t,r):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),i.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=i.BaseTextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete i.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete i.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(l.default);r.default=d},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./BaseRenderTexture"),o=n(i),s=t("./Texture"),a=n(s),l=function(t){function e(r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=null;if(!(r instanceof o.default)){var s=arguments[1],a=arguments[2],l=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+a+") instead of the ctor directly."),i=arguments[0],n=null,r=new o.default(s,a,l,u)}var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n));return h.legacyRenderer=i,h.valid=!0,h._updateUvs(),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e,r){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,r,n,i){return new e(new o.default(t,r,n,i))},e}(a.default);r.default=l},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../"),o=t("../utils"),s=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=r,this.resolution=this._updateResolution(n||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,r=(0,o.getResolutionOfUrl)(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var r=e,n=t.BATCH_SIZE,o=this.baseTexture.sourceScale;r-e<n&&r<this._frameKeys.length;){var s=this._frameKeys[r],a=this._frames[s],l=a.frame;if(l){var u=null,h=null,c=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,p=new i.Rectangle(0,0,Math.floor(c.w*o)/this.resolution,Math.floor(c.h*o)/this.resolution);u=a.rotated?new i.Rectangle(Math.floor(l.x*o)/this.resolution,Math.floor(l.y*o)/this.resolution,Math.floor(l.h*o)/this.resolution,Math.floor(l.w*o)/this.resolution):new i.Rectangle(Math.floor(l.x*o)/this.resolution,Math.floor(l.y*o)/this.resolution,Math.floor(l.w*o)/this.resolution,Math.floor(l.h*o)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(h=new i.Rectangle(Math.floor(a.spriteSourceSize.x*o)/this.resolution,Math.floor(a.spriteSourceSize.y*o)/this.resolution,Math.floor(l.w*o)/this.resolution,Math.floor(l.h*o)/this.resolution)),this.textures[s]=new i.Texture(this.baseTexture,u,p,h,a.rotated?2:0,a.anchor),i.Texture.addToCache(this.textures[s],s)}r++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=t[e],n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if((i=r.next()).done)break;o=i.value}var s=o;this.animations[e].push(this.textures[s])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();r.default=s},{"../":65,"../utils":125}],115:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("./BaseTexture"),a=n(s),l=t("./VideoBaseTexture"),u=n(l),h=t("./TextureUvs"),c=n(h),p=t("eventemitter3"),d=n(p),f=t("../math"),g=t("../utils"),v=t("../settings"),m=n(v),y=function(t){function e(r,n,i,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(l.noFrame=!1,n||(l.noFrame=!0,n=new f.Rectangle(0,0,1,1)),r instanceof e&&(r=r.baseTexture),l.baseTexture=r,l._frame=n,l.trim=o,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=i||n,l._rotate=Number(s||0),!0===s)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return r.hasLoaded?(l.noFrame&&(n=new f.Rectangle(0,0,r.width,r.height),r.on("update",l.onBaseTextureUpdated,l)),l.frame=n):r.once("loaded",l.onBaseTextureLoaded,l),l.defaultAnchor=a?new f.Point(a.x,a.y):new f.Point(0,0),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new f.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(g.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new c.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,r,n,i){var o=g.TextureCache[t];return o||(o=new e(a.default.fromImage(t,r,n,i)),e.addToCache(o,t)),o},e.fromFrame=function(t){var e=g.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(a.default.fromCanvas(t,r,n))},e.fromVideo=function(t,r,n,i){return"string"==typeof t?e.fromVideoUrl(t,r,n,i):new e(u.default.fromVideo(t,r,i))},e.fromVideoUrl=function(t,r,n,i){return new e(u.default.fromUrl(t,r,n,i))},e.from=function(t){if("string"==typeof t){var r=g.TextureCache[t];return r||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t))}return t instanceof HTMLImageElement?new e(a.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,m.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof a.default?new e(t):t},e.fromLoader=function(t,r,n){var i=new a.default(t,void 0,(0,g.getResolutionOfUrl)(r)),o=new e(i);return i.imageUrl=r,n||(n=r),a.default.addToCache(o.baseTexture,n),e.addToCache(o,n),n!==r&&(a.default.addToCache(o.baseTexture,r),e.addToCache(o,r)),o},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),g.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=g.TextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete g.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)g.TextureCache[t.textureCacheIds[n]]===t&&delete g.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},o(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,n=t.width,i=t.height,o=e+n>this.baseTexture.width,s=r+i>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",l="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,u="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+a+" "+u)}this.valid=n&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(d.default);r.default=y,y.EMPTY=new y(new a.default),i(y.EMPTY),i(y.EMPTY.baseTexture),y.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new y(new a.default(t))}(),i(y.WHITE),i(y.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../math/Matrix"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=new o.default,a=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._texture=e,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===r?.5:r}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,i=e.trim;i&&(s.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(s));var o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+l+u)/o.width,a[1]=(e._frame.y+l+u)/o.height,a[2]=(e._frame.x+e._frame.width-l+u)/o.width,a[3]=(e._frame.y+e._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,!0},n(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();r.default=a},{"../math/Matrix":67}],117:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../math/GroupD8"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,r){var n=e.width,o=e.height;if(r){var s=t.width/2/n,a=t.height/2/o,l=t.x/n+s,u=t.y/o+a;r=i.default.add(r,i.default.NW),this.x0=l+s*i.default.uX(r),this.y0=u+a*i.default.uY(r),r=i.default.add(r,2),this.x1=l+s*i.default.uX(r),this.y1=u+a*i.default.uY(r),r=i.default.add(r,2),this.x2=l+s*i.default.uX(r),this.y2=u+a*i.default.uY(r),r=i.default.add(r,2),this.x3=l+s*i.default.uX(r),this.y3=u+a*i.default.uY(r)}else this.x0=t.x/n,this.y0=t.y/o,this.x1=(t.x+t.width)/n,this.y1=t.y/o,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/o,this.x3=t.x/n,this.y3=(t.y+t.height)/o;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},t}();r.default=o},{"../math/GroupD8":66}],118:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!e){var r=t.split("?").shift().toLowerCase();e="video/"+r.substr(r.lastIndexOf(".")+1)}var n=document.createElement("source");return n.src=t,n.type=e,n}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("./BaseTexture"),a=n(s),l=t("../utils"),u=t("../ticker"),h=t("../const"),c=t("../utils/determineCrossOrigin"),p=n(c),d=function(t){function e(r,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw new Error("No video source element specified.");(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n));return o.width=r.videoWidth,o.height=r.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=i,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),r.addEventListener("play",o._onPlayStart.bind(o)),r.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(r.addEventListener("canplay",o._onCanPlay),r.addEventListener("canplaythrough",o._onCanPlay)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(u.shared.add(this.update,this,h.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(u.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&u.shared.remove(this.update,this),this.source&&this.source._pixiId&&(a.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,r,n){t._pixiId||(t._pixiId="video_"+(0,l.uid)());var i=l.BaseTextureCache[t._pixiId];return i||(i=new e(t,r,n),a.default.addToCache(i,t._pixiId)),i},e.fromUrl=function(t,r,n,o){var s=document.createElement("video");s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline","");var a=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===n&&0!==a.indexOf("data:")?s.crossOrigin=(0,p.default)(a):n&&(s.crossOrigin="string"==typeof n?n:"anonymous"),Array.isArray(t))for(var l=0;l<t.length;++l)s.appendChild(i(t[l].src||t[l],t[l].mime));else s.appendChild(i(a,t.mime));return s.load(),e.fromVideo(s,r,o)},o(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(u.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(u.shared.add(this.update,this,h.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(a.default);r.default=d,d.fromUrls=d.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../settings"),s=n(o),a=t("../const"),l=t("./TickerListener"),u=n(l),h=function(){function t(){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._head=new u.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(t,e,r))},t.prototype.addOnce=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(t,e,r,!0))},t.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*s.default.TARGET_FPMS*this.speed;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},i(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();r.default=h},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.fn=e,this.context=r,this.priority=n,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();r.default=n},{}],121:[function(t,e,r){"use strict";r.__esModule=!0,r.Ticker=r.shared=void 0;var n=t("./Ticker"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=new i.default;o.autoStart=!0,o.destroy=function(){},r.shared=o,r.Ticker=i.default},{"./Ticker":119}],122:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],123:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){for(var e=6*t,r=new Uint16Array(e),n=0,i=0;n<e;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}},{}],124:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,o||(o=document.createElement("a")),o.href=t;var r=!(t=i.default.parse(o.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"};var n=t("url"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=void 0},{url:38}],125:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.premultiplyBlendMode=r.BaseTextureCache=r.TextureCache=r.earcut=r.mixins=r.pluginTarget=r.EventEmitter=r.removeItems=r.isMobile=void 0,r.uid=function(){return++T},r.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},r.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},r.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},r.getResolutionOfUrl=function(t,e){var r=a.default.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1},r.decomposeDataUri=function(t){var e=o.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}},r.getUrlFileExtension=function(t){var e=o.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()},r.getSvgSize=function(t){var e=o.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r},r.skipHello=function(){w=!0},r.sayHello=function(t){if(!w){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+o.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+o.VERSION+" - "+t+" - http://www.pixijs.com/");w=!0}},r.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(t){return!1}},r.sign=function(t){return 0===t?0:t<0?-1:1},r.destroyTextureCache=function(){var t=void 0;for(t in E)E[t].destroy();for(t in S)S[t].destroy()},r.clearTextureCache=function(){var t=void 0;for(t in E)delete E[t];for(t in S)delete S[t]},r.correctBlendMode=function(t,e){return A[e?1:0][t]},r.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,n=t>>8&255,i=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(i=i*e+.5|0)},r.premultiplyRgba=function(t,e,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r},r.premultiplyTintToRgba=function(t,e,r,n){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(n||void 0===n)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r};var o=t("../const"),s=t("../settings"),a=i(s),l=t("eventemitter3"),u=i(l),h=t("./pluginTarget"),c=i(h),p=t("./mixin"),d=n(p),f=t("ismobilejs"),g=n(f),v=t("remove-array-items"),m=i(v),y=t("./mapPremultipliedBlendModes"),x=i(y),b=t("earcut"),_=i(b),T=0,w=!1;r.isMobile=g,r.removeItems=m.default,r.EventEmitter=u.default,r.pluginTarget=c.default,r.mixins=d,r.earcut=_.default;var E=r.TextureCache=Object.create(null),S=r.BaseTextureCache=Object.create(null),A=r.premultiplyBlendMode=(0,x.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,earcut:2,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[n.BLEND_MODES.NORMAL_NPM]=n.BLEND_MODES.NORMAL,t[n.BLEND_MODES.ADD_NPM]=n.BLEND_MODES.ADD,t[n.BLEND_MODES.SCREEN_NPM]=n.BLEND_MODES.SCREEN,e[n.BLEND_MODES.NORMAL]=n.BLEND_MODES.NORMAL_NPM,e[n.BLEND_MODES.ADD]=n.BLEND_MODES.ADD_NPM,e[n.BLEND_MODES.SCREEN]=n.BLEND_MODES.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i};var n=t("../const")},{"../const":46}],127:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){return i.default.tablet||i.default.phone?4:t};var n=t("ismobilejs"),i=function(t){return t&&t.__esModule?t:{default:t}}(n)},{ismobilejs:4}],128:[function(t,e,r){"use strict";function n(t,e){if(t&&e)for(var r=Object.keys(e),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}}r.__esModule=!0,r.mixin=n,r.delayMixin=function(t,e){i.push(t,e)},r.performMixins=function(){for(var t=0;t<i.length;t+=2)n(i[t],i[t+1]);i.length=0};var i=[]},{}],129:[function(t,e,r){"use strict";r.__esModule=!0,r.default={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,r){t.__plugins[e]=r},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},{}],130:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=t.width,r=t.height,n=t.getContext("2d"),i=n.getImageData(0,0,e,r).data,o=i.length,s={top:null,left:null,right:null,bottom:null},a=null,l=void 0,u=void 0,h=void 0;for(l=0;l<o;l+=4)0!==i[l+3]&&(u=l/4%e,h=~~(l/4/e),null===s.top&&(s.top=h),null===s.left?s.left=u:u<s.left&&(s.left=u),null===s.right?s.right=u+1:s.right<u&&(s.right=u+1),null===s.bottom?s.bottom=h:s.bottom<h&&(s.bottom=h));return null!==s.top&&(e=s.right-s.left,r=s.bottom-s.top+1,a=n.getImageData(s.left,s.top,e,r)),{height:r,width:e,data:a}}},{}],131:[function(t,e,r){"use strict";function n(t){if(!i[t]){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),i[t]=!0}}r.__esModule=!0,r.default=function(t){var e=t.mesh,r=t.particles,i=t.extras,o=t.filters,s=t.prepare,a=t.loaders,l=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),i.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),i.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),i.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],h=0;h<u.length;h++)!function(e){var r=u[e];Object.defineProperty(t[r.parent],"DEFAULT",{get:function(){return n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),t.settings[r.target]},set:function(e){n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),t.settings[r.target]=e}})}(h);Object.defineProperties(t.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),i.AnimatedSprite&&Object.defineProperties(i,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),i.AnimatedSprite}}}),i&&Object.defineProperties(i,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}}),t.DisplayObject.prototype.generateTexture=function(t,e,r){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,r)},t.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,r,i){this.legacyRenderer.render(t,this,r,e,!i),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},i.BitmapText&&(i.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),r=-1;this._fontSize=26;for(var i=0;i<e.length;++i)if(e[i].match(/(px|pt|em|%)/)){r=i,this._fontSize=e[i];break}this._fontWeight="normal";for(var o=0;o<r;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(r>-1&&r<e.length-1){this._fontFamily="";for(var s=r+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,r){t.Texture.addToCache(e,r),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var c=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=t},get:function(){return c}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var p=a.Resource,d=a.Loader;Object.defineProperties(p.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===p.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===p.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===p.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===p.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===p.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}l.interactiveTarget&&Object.defineProperty(l.interactiveTarget,"defaultCursor",{set:function(t){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),l.InteractionManager&&(Object.defineProperty(l.InteractionManager,"defaultCursorStyle",{set:function(t){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(l.InteractionManager,"currentCursorStyle",{set:function(t){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var i={}},{}],132:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../core"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n),o=new i.Rectangle,s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,s=void 0,a=void 0;t&&(a=t instanceof i.RenderTexture?t:e.generateTexture(t)),a?(r=a.baseTexture._canvasRenderTarget.context,n=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(r=e.rootContext,(s=o).width=this.renderer.width,s.height=this.renderer.height);var l=s.width*n,u=s.height*n,h=new i.CanvasRenderTarget(l,u,1),c=r.getImageData(s.x*n,s.y*n,l,u);return h.context.putImageData(c,0,0),h.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,s=void 0,a=void 0;return t&&(a=t instanceof i.RenderTexture?t:e.generateTexture(t)),a?(r=a.baseTexture._canvasRenderTarget.context,n=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(r=e.rootContext,(s=o).width=e.width,s.height=e.height),r.getImageData(0,0,s.width*n,s.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=s,i.CanvasRenderer.registerPlugin("extract",s)},{"../../core":65}],133:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./webgl/WebGLExtract");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/CanvasExtract");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../core"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n),o=new i.Rectangle,s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,s=void 0,a=!1,l=void 0,u=!1;t&&(t instanceof i.RenderTexture?l=t:(l=this.renderer.generateTexture(t),u=!0)),l?(r=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,s=l.frame,a=!1):(r=this.renderer.rootRenderTarget,n=r.resolution,a=!0,(s=o).width=r.size.width,s.height=r.size.height);var h=s.width*n,c=s.height*n,p=new i.CanvasRenderTarget(h,c,1);if(r){e.bindRenderTarget(r);var d=new Uint8Array(4*h*c),f=e.gl;f.readPixels(s.x*n,s.y*n,h,c,f.RGBA,f.UNSIGNED_BYTE,d);var g=p.context.getImageData(0,0,h,c);g.data.set(d),p.context.putImageData(g,0,0),a&&(p.context.scale(1,-1),p.context.drawImage(p.canvas,0,-c))}return u&&l.destroy(!0),p.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,s=void 0,a=void 0,l=!1;t&&(t instanceof i.RenderTexture?a=t:(a=this.renderer.generateTexture(t),l=!0)),a?(r=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,s=a.frame):(r=this.renderer.rootRenderTarget,n=r.resolution,(s=o).width=r.size.width,s.height=r.size.height);var u=s.width*n,h=s.height*n,c=new Uint8Array(4*u*h);if(r){e.bindRenderTarget(r);var p=e.gl;p.readPixels(s.x*n,s.y*n,u,h,p.RGBA,p.UNSIGNED_BYTE,c)}return l&&a.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=s,i.WebGLRenderer.registerPlugin("extract",s)},{"../../core":65}],135:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=function(t){function e(r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r[0]instanceof o.Texture?r[0]:r[0].texture));return i._textures=null,i._durations=null,i.textures=r,i._autoUpdate=!1!==n,i.animationSpeed=1,i.loop=!0,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i.playing=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&o.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var r=[],n=0;n<t.length;++n)r.push(o.Texture.fromFrame(t[n]));return new e(r)},e.fromImages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(o.Texture.fromImage(t[n]));return new e(r)},n(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof o.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(o.Sprite);r.default=s},{"../core":65}],136:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),a=t("../core/math/ObservablePoint"),l=n(a),u=t("../core/utils"),h=t("../core/settings"),c=n(h),p=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},i.font=n.font,i._text=r,i._maxWidth=0,i._maxLineHeight=0,i._letterSpacing=0,i._anchor=new l.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],r=this._font.size/t.size,n=new s.Point,i=[],o=[],a=this.text.replace(/(?:\r\n|\r)/g,"\n"),l=a.length,u=this._maxWidth*t.size/this._font.size,h=null,c=0,p=0,d=0,f=-1,g=0,v=0,m=0,y=0;y<l;y++){var x=a.charCodeAt(y),b=a.charAt(y);if(/(?:\s)/.test(b)&&(f=y,g=c),"\r"!==b&&"\n"!==b){var _=t.chars[x];_&&(h&&_.kerning[h]&&(n.x+=_.kerning[h]),i.push({texture:_.texture,line:d,charCode:x,position:new s.Point(n.x+_.xOffset+this._letterSpacing/2,n.y+_.yOffset)}),n.x+=_.xAdvance+this._letterSpacing,c=n.x,m=Math.max(m,_.yOffset+_.texture.height),h=x,-1!==f&&u>0&&n.x>u&&(++v,s.utils.removeItems(i,1+f-v,1+y-f),y=f,f=-1,o.push(g),p=Math.max(p,g),d++,n.x=0,n.y+=t.lineHeight,h=null))}else o.push(c),p=Math.max(p,c),++d,++v,n.x=0,n.y+=t.lineHeight,h=null}var T=a.charAt(a.length-1);"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(c=g),o.push(c),p=Math.max(p,c));for(var w=[],E=0;E<=d;E++){var S=0;"right"===this._font.align?S=p-o[E]:"center"===this._font.align&&(S=(p-o[E])/2),w.push(S)}for(var A=i.length,C=this.tint,M=0;M<A;M++){var R=this._glyphs[M];R?R.texture=i[M].texture:(R=new s.Sprite(i[M].texture),this._glyphs.push(R)),R.position.x=(i[M].position.x+w[i[M].line])*r,R.position.y=i[M].position.y*r,R.scale.x=R.scale.y=r,R.tint=C,R.parent||this.addChild(R)}for(var O=A;O<this._glyphs.length;++O)this.removeChild(this._glyphs[O]);if(this._textWidth=p*r,this._textHeight=(n.y+t.lineHeight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var P=0;P<A;P++)this._glyphs[P].x-=this._textWidth*this.anchor.x,this._glyphs[P].y-=this._textHeight*this.anchor.y;this._maxLineHeight=m*r},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,r){var n={},i=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],a=t.getElementsByTagName("page"),l=(0,u.getResolutionOfUrl)(a[0].getAttribute("file"),c.default.RESOLUTION),h={};n.font=i.getAttribute("face"),n.size=parseInt(i.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/l,n.chars={},r instanceof s.Texture&&(r=[r]);for(var p=0;p<a.length;p++){var d=a[p].getAttribute("id"),f=a[p].getAttribute("file");h[d]=r instanceof Array?r[p]:r[f]}for(var g=t.getElementsByTagName("char"),v=0;v<g.length;v++){var m=g[v],y=parseInt(m.getAttribute("id"),10),x=m.getAttribute("page")||0,b=new s.Rectangle(parseInt(m.getAttribute("x"),10)/l+h[x].frame.x/l,parseInt(m.getAttribute("y"),10)/l+h[x].frame.y/l,parseInt(m.getAttribute("width"),10)/l,parseInt(m.getAttribute("height"),10)/l);n.chars[y]={xOffset:parseInt(m.getAttribute("xoffset"),10)/l,yOffset:parseInt(m.getAttribute("yoffset"),10)/l,xAdvance:parseInt(m.getAttribute("xadvance"),10)/l,kerning:{},texture:new s.Texture(h[x].baseTexture,b),page:x}}for(var _=t.getElementsByTagName("kerning"),T=0;T<_.length;T++){var w=_[T],E=parseInt(w.getAttribute("first"),10)/l,S=parseInt(w.getAttribute("second"),10)/l,A=parseInt(w.getAttribute("amount"),10)/l;n.chars[S]&&(n.chars[S].kerning[E]=A)}return e.fonts[n.font]=n,n},i(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(s.Container);r.default=p,p.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("../core/sprites/canvas/CanvasTinter"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=new o.Point,u=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return s.tileTransform=new o.TransformStatic,s._width=n,s._height=i,s._canvasPattern=null,s.uvTransform=r.transform||new o.TextureMatrix(r),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,n=this.worldTransform,i=t.resolution,s=2===e.rotate,l=e.baseTexture,u=l.resolution,h=this.tilePosition.x/this.tileScale.x%e.orig.width*u,c=this.tilePosition.y/this.tileScale.y%e.orig.height*u;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var p=new o.CanvasRenderTarget(e.orig.width,e.orig.height,u);if(16777215!==this.tint)this.tintedTexture=a.default.getTintedTexture(this,this.tint),p.context.drawImage(this.tintedTexture,0,0);else{var d=e._frame.x*u,f=e._frame.y*u,g=e._frame.width*u,v=e._frame.height*u,m=(e.trim?e.trim.width:e.orig.width)*u,y=(e.trim?e.trim.height:e.orig.height)*u,x=(e.trim?e.trim.x:0)*u,b=(e.trim?e.trim.y:0)*u;s?(p.context.rotate(-Math.PI/2),p.context.translate(-y,0),p.context.drawImage(l.source,d,f,g,v,-b,x,y,m)):p.context.drawImage(l.source,d,f,g,v,x,b,m,y)}this.cachedTint=this.tint,this._canvasPattern=p.context.createPattern(p.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/u,this.tileScale.y/u);var _=this.anchor.x*-this._width*u,T=this.anchor.y*-this._height*u;this.uvRespectAnchor?(r.translate(h,c),r.fillRect(-h+_,-c+T,this._width/this.tileScale.x*u,this._height/this.tileScale.y*u)):(r.translate(h+_,c+T),r.fillRect(-h,-c,this._width/this.tileScale.x*u,this._height/this.tileScale.y*u))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e=this._width,r=this._height,n=-e*this.anchor._x;if(l.x>=n&&l.x<n+e){var i=-r*this.anchor._y;if(l.y>=i&&l.y<i+r)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,r,n){return new e(o.Texture.from(t),r,n)},e.fromFrame=function(t,r,n){var i=o.utils.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(i,r,n)},e.fromImage=function(t,r,n,i,s){return new e(o.Texture.fromImage(t,i,s),r,n)},n(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(o.Sprite);r.default=u},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("../core/textures/Texture"),a=n(s),l=t("../core/textures/BaseTexture"),u=n(l),h=t("../core/utils"),c=o.DisplayObject,p=new o.Matrix;c.prototype._cacheAsBitmap=!1,c.prototype._cacheData=!1;var d=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(c.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new d),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),c.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},c.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var n=this._filters[0].padding;r.pad(n)}r.ceil(o.settings.RESOLUTION);var i=t._activeRenderTarget,s=t.filterManager.filterStack,l=o.RenderTexture.create(r.width,r.height),c="cacheAsBitmap_"+(0,h.uid)();this._cacheData.textureCacheId=c,u.default.addToCache(l.baseTexture,c),a.default.addToCache(l,c);var d=p;d.tx=-r.x,d.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,l,!0,d,!0),t.bindRenderTarget(i),t.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var f=new o.Sprite(l);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-r.x/r.width,f.anchor.y=-r.y/r.height,f.alpha=e,f._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},c.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},c.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),r=this.alpha;this.alpha=1;var n=t.context;e.ceil(o.settings.RESOLUTION);var i=o.RenderTexture.create(e.width,e.height),s="cacheAsBitmap_"+(0,h.uid)();this._cacheData.textureCacheId=s,u.default.addToCache(i.baseTexture,s),a.default.addToCache(i,s);var l=p;this.transform.localTransform.copy(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,l,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this.calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var c=new o.Sprite(i);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-e.x/e.width,c.anchor.y=-e.y/e.height,c._bounds=this._bounds,c.alpha=r,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=c,this.containsPoint=c.containsPoint.bind(c)}},c.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},c.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},c.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,u.default.removeFromCache(this._cacheData.textureCacheId),a.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},c.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(t,e,r){"use strict";var n=t("../core"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n);i.DisplayObject.prototype.name=null,i.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":65}],140:[function(t,e,r){"use strict";var n=t("../core"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n);i.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":65}],141:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.BitmapText=r.TilingSpriteRenderer=r.TilingSprite=r.AnimatedSprite=void 0;var i=t("./AnimatedSprite");Object.defineProperty(r,"AnimatedSprite",{enumerable:!0,get:function(){return n(i).default}});var o=t("./TilingSprite");Object.defineProperty(r,"TilingSprite",{enumerable:!0,get:function(){return n(o).default}});var s=t("./webgl/TilingSpriteRenderer");Object.defineProperty(r,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(s).default}});var a=t("./BitmapText");Object.defineProperty(r,"BitmapText",{enumerable:!0,get:function(){return n(a).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../core"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n),o=t("../../core/const"),s=(t("path"),new i.Matrix),a=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return n.shader=null,n.simpleShader=null,n.quad=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new i.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new i.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new i.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,r=this.quad;e.bindVao(r.vao);var n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((n=r.uvs)[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),r.upload();var a=t._texture,l=a.baseTexture,u=t.tileTransform.localTransform,h=t.uvTransform,c=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;c&&(l._glTextures[e.CONTEXT_UID]?c=l.wrapMode!==o.WRAP_MODES.CLAMP:l.wrapMode===o.WRAP_MODES.CLAMP&&(l.wrapMode=o.WRAP_MODES.REPEAT));var p=c?this.simpleShader:this.shader;e.bindShader(p);var d=a.width,f=a.height,g=t._width,v=t._height;s.set(u.a*d/g,u.b*d/v,u.c*f/g,u.d*f/v,u.tx/g,u.ty/v),s.invert(),c?s.prepend(h.mapCoord):(p.uniforms.uMapCoord=h.mapCoord.toArray(!0),p.uniforms.uClampFrame=h.uClampFrame,p.uniforms.uClampOffset=h.uClampOffset),p.uniforms.uTransform=s.toArray(!0),p.uniforms.uColor=i.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,p.uniforms.uColor,l.premultipliedAlpha),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=e.bindTexture(a),e.setBlendMode(i.utils.correctBlendMode(t.blendMode,l.premultipliedAlpha)),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(i.ObjectRenderer);r.default=a,i.WebGLRenderer.registerPlugin("tilingSprite",a)},{"../../core":65,"../../core/const":46,path:8}],143:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=(t("path"),function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return n.alpha=r,n.glShaderKey="alpha",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(o.Filter));r.default=s},{"../../core":65,path:8}],144:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),a=t("./BlurXFilter"),l=n(a),u=t("./BlurYFilter"),h=n(u),c=function(t){function e(r,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return a.blurXFilter=new l.default(r,n,i,o),a.blurYFilter=new h.default(r,n,i,o),a.padding=0,a.resolution=i||s.settings.RESOLUTION,a.quality=n||4,a.blur=r||8,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,r){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,r,!1),t.returnRenderTarget(n)},i(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(s.Filter);r.default=c},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),a=t("./generateBlurVertSource"),l=n(a),u=t("./generateBlurFragSource"),h=n(u),c=t("./getMaxBlurKernelSize"),p=n(c),d=function(t){function e(r,n,i,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),o=o||5;var a=(0,l.default)(o,!0),u=(0,h.default)(o),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,a,u));return c.resolution=i||s.settings.RESOLUTION,c._quality=0,c.quality=n||4,c.strength=r||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,p.default)(i);this.vertexSrc=(0,l.default)(o,!0),this.fragmentSrc=(0,h.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var s=t.getRenderTarget(!0),a=e,u=s,c=0;c<this.passes-1;c++){t.applyFilter(this,a,u,!0);var d=u;u=a,a=d}t.applyFilter(this,a,r,n),t.returnRenderTarget(s)}},i(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(s.Filter);r.default=d},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),a=t("./generateBlurVertSource"),l=n(a),u=t("./generateBlurFragSource"),h=n(u),c=t("./getMaxBlurKernelSize"),p=n(c),d=function(t){function e(r,n,i,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),o=o||5;var a=(0,l.default)(o,!1),u=(0,h.default)(o),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,a,u));return c.resolution=i||s.settings.RESOLUTION,c._quality=0,c.quality=n||4,c.strength=r||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,p.default)(i);this.vertexSrc=(0,l.default)(o,!1),this.fragmentSrc=(0,h.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var s=t.getRenderTarget(!0),a=e,u=s,c=0;c<this.passes-1;c++){t.applyFilter(this,a,u,!0);var d=u;u=a,a=d}t.applyFilter(this,a,r,n),t.returnRenderTarget(s)}},i(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(s.Filter);r.default=d},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){for(var e=n[t],r=e.length,o=i,s="",a=void 0,l=0;l<t;l++){var u="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",l);a=l,l>=r&&(a=t-l-1),u=u.replace("%value%",e[a]),s+=u,s+="\n"}return o=(o=o.replace("%blur%",s)).replace("%size%",t)};var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},i=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],148:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e){var r=Math.ceil(t/2),i=n,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var l=s.replace("%index%",a);l=l.replace("%sampleIndex%",a-(r-1)+".0"),o+=l,o+="\n"}return i=(i=i.replace("%blur%",o)).replace("%size%",t)};var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],149:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),r=15;r>e;)r-=2;return r}},{}],150:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=(t("path"),function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return r.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r.alpha=1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=Math.sqrt,o=1/3,s=i(o),a=r+(1-r)*o,l=o*(1-r)-s*n,u=o*(1-r)+s*n,h=o*(1-r)+s*n,c=r+o*(1-r),p=o*(1-r)-s*n,d=o*(1-r)-s*n,f=o*(1-r)+s*n,g=r+o*(1-r),v=[a,l,u,0,0,h,c,p,0,0,d,f,g,0,0,0,0,0,1,0];this._loadMatrix(v,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,r,n,i){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,l=((n=n||3375104)>>16&255)/255,u=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,l,u,h,e=e||.15,0,o-l,s-u,a-h,0,0];this._loadMatrix(c,i)},e.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},n(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(o.Filter));r.default=s,s.prototype.grayscale=s.prototype.greyscale},{"../../core":65,path:8}],151:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=(t("path"),function(t){function e(r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=new o.Matrix;r.renderable=!1;var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=r,s.maskMatrix=i,s.uniforms.mapSampler=r._texture,s.uniforms.filterMatrix=i,s.uniforms.scale={x:1,y:1},null!=n||(n=20),s.scale=new o.Point(n,n),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,r)},n(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(o.Filter));r.default=s},{"../../core":65,path:8}],152:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../core"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n),o=(t("path"),function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(i.Filter));r.default=o},{"../../core":65,path:8}],153:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./fxaa/FXAAFilter");Object.defineProperty(r,"FXAAFilter",{enumerable:!0,get:function(){return n(i).default}});var o=t("./noise/NoiseFilter");Object.defineProperty(r,"NoiseFilter",{enumerable:!0,get:function(){return n(o).default}});var s=t("./displacement/DisplacementFilter");Object.defineProperty(r,"DisplacementFilter",{enumerable:!0,get:function(){return n(s).default}});var a=t("./blur/BlurFilter");Object.defineProperty(r,"BlurFilter",{enumerable:!0,get:function(){return n(a).default}});var l=t("./blur/BlurXFilter");Object.defineProperty(r,"BlurXFilter",{enumerable:!0,get:function(){return n(l).default}});var u=t("./blur/BlurYFilter");Object.defineProperty(r,"BlurYFilter",{enumerable:!0,get:function(){return n(u).default}});var h=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(r,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(h).default}});var c=t("./alpha/AlphaFilter");Object.defineProperty(r,"AlphaFilter",{enumerable:!0,get:function(){return n(c).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=(t("path"),function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return i.noise=r,i.seed=n,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(o.Filter));r.default=s},{"../../core":65,path:8}],155:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.global=new o.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},n(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();r.default=s},{"../core":65}],156:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();r.default=n},{}],157:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),a=t("./InteractionData"),l=n(a),u=t("./InteractionEvent"),h=n(u),c=t("./InteractionTrackingData"),p=n(c),d=t("eventemitter3"),f=n(d),g=t("./interactiveTarget"),v=n(g);s.utils.mixins.delayMixin(s.DisplayObject.prototype,v.default);var m=1,y={target:null,data:{global:null}},x=function(t){function e(r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n=n||{},i.renderer=r,i.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new l.default,i.mouse.identifier=m,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[m]=i.mouse,i.interactionDataPool=[],i.eventData=new h.default,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i._tempPoint=new s.Point,i.resolution=1,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.hitTest=function(t,e){return y.target=null,y.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(y,e,null,!0),y.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(s.ticker.shared.add(this.update,this,s.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(s.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var r=this.activeInteractionData[e];if(r.originalEvent&&"touch"!==r.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":i(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,r){r.stopped||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},e.prototype.mapPositionToPoint=function(t,e,r){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*i,t.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*i},e.prototype.processInteractive=function(t,e,r,n,i){if(!e||!e.visible)return!1;var o=t.data.global;i=e.interactive||i;var s=!1,a=i,l=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(n=!1,l=!1)),a=!1):e._mask&&n&&(e._mask.containsPoint(o)||(n=!1,l=!1)),l&&e.interactiveChildren&&e.children)for(var u=e.children,h=u.length-1;h>=0;h--){var c=u[h],p=this.processInteractive(t,c,r,n,a);if(p){if(!c.parent)continue;a=!1,p&&(t.target&&(n=!1),s=!0)}}return i&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),r&&r(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType)this.emit("touchstart",s);else if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,r){var n=t.data,i=t.data.identifier;if(r)if(e.trackedPointers[i]||(e.trackedPointers[i]=new p.default(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,r){for(var n=this.normalizeToPointerData(t),i=n.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<i;s++){var a=n[s],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,r,e||!o),this.emit(e?"pointercancel":"pointerup"+o,u),"mouse"===a.pointerType||"pen"===a.pointerType){var h=2===a.button;this.emit(h?"rightup"+o:"mouseup"+o,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(a.pointerId,l))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var r=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,r){var n=t.data,i=t.data.identifier,o=e.trackedPointers[i],s="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,l=!1;if(a){var u=2===n.button,h=p.default.FLAGS,c=u?h.RIGHT_DOWN:h.LEFT_DOWN,d=void 0!==o&&o.flags&c;r?(this.dispatchEvent(e,u?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,u?"rightclick":"click",t),l=!0)):d&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!l||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=t;var a="touch"!==i.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,r){var n=t.data,i="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t),r=e[0];"mouse"===r.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===r.pointerType||"pen"===r.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,r){var n=t.data,i=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[i];r&&!s&&(s=e.trackedPointers[i]=new p.default(i)),void 0!==s&&(r&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),r=e[0],n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,"mouse"===r.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,r=void 0;return e===m||"mouse"===t.pointerType?r=this.mouse:this.activeInteractionData[e]?r=this.activeInteractionData[e]:((r=this.interactionDataPool.pop()||new l.default).identifier=e,this.activeInteractionData[e]=r),r.copyEvent(t),r},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,n=t.changedTouches.length;r<n;r++){var i=t.changedTouches[r];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=m),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(f.default);r.default=x,s.WebGLRenderer.registerPlugin("interaction",x),s.CanvasRenderer.registerPlugin("interaction",x)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},n(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();r.default=i,i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./InteractionData");Object.defineProperty(r,"InteractionData",{enumerable:!0,get:function(){return n(i).default}});var o=t("./InteractionManager");Object.defineProperty(r,"InteractionManager",{enumerable:!0,get:function(){return n(o).default}});var s=t("./interactiveTarget");Object.defineProperty(r,"interactiveTarget",{enumerable:!0,get:function(){return n(s).default}});var a=t("./InteractionTrackingData");Object.defineProperty(r,"InteractionTrackingData",{enumerable:!0,get:function(){return n(a).default}});var l=t("./InteractionEvent");Object.defineProperty(r,"InteractionEvent",{enumerable:!0,get:function(){return n(l).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(t,e,r){"use strict";r.__esModule=!0,r.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(t,e,r){"use strict";function n(t,e){t.bitmapFont=a.BitmapText.registerFont(t.data,e)}r.__esModule=!0,r.parse=n,r.default=function(){return function(t,e){if(t.data&&t.type===s.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var r=t.isDataUrl?"":o.dirname(t.url);t.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/")),(r=r.replace(this.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/");for(var i=t.data.getElementsByTagName("page"),a={},l=function(r){a[r.metadata.pageFile]=r.texture,Object.keys(a).length===i.length&&(n(t,a),e())},u=0;u<i.length;++u){var h=i[u].getAttribute("file"),c=r+h,p=!1;for(var d in this.resources){var f=this.resources[d];if(f.url===c){f.metadata.pageFile=h,f.texture?l(f):f.onAfterMiddleware.add(l),p=!0;break}}if(!p){var g={crossOrigin:t.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:h},t.metadata.imageMetadata),parentResource:t};this.add(c,g,l)}}}else e();else e()}};var i=t("path"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("resource-loader"),a=t("../extras")},{"../extras":141,path:8,"resource-loader":36}],162:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.shared=r.Resource=r.textureParser=r.getResourcePath=r.spritesheetParser=r.parseBitmapFontData=r.bitmapFontParser=r.Loader=void 0;var i=t("./bitmapFontParser");Object.defineProperty(r,"bitmapFontParser",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(r,"parseBitmapFontData",{enumerable:!0,get:function(){return i.parse}});var o=t("./spritesheetParser");Object.defineProperty(r,"spritesheetParser",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(r,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var s=t("./textureParser");Object.defineProperty(r,"textureParser",{enumerable:!0,get:function(){return n(s).default}});var a=t("resource-loader");Object.defineProperty(r,"Resource",{enumerable:!0,get:function(){return a.Resource}});var l=t("../core/Application"),u=n(l),h=t("./loader"),c=n(h);r.Loader=c.default;var p=new c.default;p.destroy=function(){},r.shared=p;var d=u.default.prototype;d._loader=null,Object.defineProperty(d,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?p:new c.default}return this._loader}}),d._parentDestroy=d.destroy,d.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("resource-loader"),o=n(i),s=t("resource-loader/lib/middlewares/parsing/blob"),a=t("eventemitter3"),l=n(a),u=t("./textureParser"),h=n(u),c=t("./spritesheetParser"),p=n(c),d=t("./bitmapFontParser"),f=n(d),g=function(t){function e(r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n));l.default.call(i);for(var o=0;o<e._pixiMiddleware.length;++o)i.use(e._pixiMiddleware[o]());return i.onStart.add(function(t){return i.emit("start",t)}),i.onProgress.add(function(t,e){return i.emit("progress",t,e)}),i.onError.add(function(t,e,r){return i.emit("error",t,e,r)}),i.onLoad.add(function(t,e){return i.emit("load",t,e)}),i.onComplete.add(function(t,e){return i.emit("complete",t,e)}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(o.default);for(var v in r.default=g,l.default.prototype)g.prototype[v]=l.default.prototype[v];g._pixiMiddleware=[s.blobMiddlewareFactory,h.default,p.default,f.default];var m=o.default.Resource;m.setExtensionXhrType("fnt",m.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(t,e,r){"use strict";function n(t,e){return t.isDataUrl?t.data.meta.image:s.default.resolve(t.url.replace(e,""),t.data.meta.image)}r.__esModule=!0,r.default=function(){return function(t,e){var r=t.name+"_image";if(t.data&&t.type===i.Resource.TYPE.JSON&&t.data.frames&&!this.resources[r]){var o={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},s=n(t,this.baseUrl);this.add(r,s,o,function(r){if(r.error)e(r.error);else{var n=new a.Spritesheet(r.texture.baseTexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})}})}else e()}},r.getResourcePath=n;var i=t("resource-loader"),o=t("url"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=t("../core")},{"../core":65,"resource-loader":36,url:38}],165:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=o.default.fromLoader(t.data,t.url,t.name)),e()}};var n=t("resource-loader"),i=t("../core/textures/Texture"),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("../core/textures/Texture"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=new o.Point,u=new o.Polygon,h=function(t){function e(r,n,i,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return u._texture=r||a.default.EMPTY,u.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),u.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),u.indices=s||new Uint16Array([0,1,3,2]),u.dirty=0,u.indexDirty=0,u.vertexDirty=0,u.autoUpdate=!0,u.blendMode=o.BLEND_MODES.NORMAL,u.canvasPadding=o.settings.MESH_CANVAS_PADDING,u.drawMode=l||e.DRAW_MODES.TRIANGLE_MESH,u.shader=null,u.tintRgb=new Float32Array([1,1,1]),u._glDatas={},u._uvTransform=new o.TextureMatrix(u._texture),u.uploadUvTransform=!1,u.pluginName="mesh",u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,l);for(var r=this.vertices,n=u.points,i=this.indices,o=this.indices.length,s=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var h=2*i[a],c=2*i[a+1],p=2*i[a+2];if(n[0]=r[h],n[1]=r[h+1],n[2]=r[c],n[3]=r[c+1],n[4]=r[p],n[5]=r[p+1],u.contains(l.x,l.y))return!0}return!1},e.prototype.destroy=function(e){for(var r in this._glDatas){var n=this._glDatas[r];n.destroy?n.destroy():(n.vertexBuffer&&(n.vertexBuffer.destroy(),n.vertexBuffer=null),n.indexBuffer&&(n.indexBuffer.destroy(),n.indexBuffer=null),n.uvBuffer&&(n.uvBuffer.destroy(),n.uvBuffer=null),n.vao&&(n.vao.destroy(),n.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},n(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return o.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=o.utils.hex2rgb(t,this.tintRgb)}}]),e}(o.Container);r.default=h,h.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("./Plane"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=10,a=function(t){function e(r,n,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,4,4));return l._origWidth=r.orig.width,l._origHeight=r.orig.height,l._width=l._origWidth,l._height=l._origHeight,l._leftWidth=void 0!==n?n:s,l._rightWidth=void 0!==o?o:s,l._topHeight=void 0!==i?i:s,l._bottomHeight=void 0!==a?a:s,l.refresh(!0),l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,r=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode);var r=this.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);var i=this._texture.baseTexture,o=i.source,s=i.width*i.resolution,a=i.height*i.resolution;this.drawSegment(e,o,s,a,0,1,10,11),this.drawSegment(e,o,s,a,2,3,12,13),this.drawSegment(e,o,s,a,4,5,14,15),this.drawSegment(e,o,s,a,8,9,18,19),this.drawSegment(e,o,s,a,10,11,20,21),this.drawSegment(e,o,s,a,12,13,22,23),this.drawSegment(e,o,s,a,16,17,26,27),this.drawSegment(e,o,s,a,18,19,28,29),this.drawSegment(e,o,s,a,20,21,30,31)},e.prototype.drawSegment=function(t,e,r,n,i,o,s,a){var l=this.uvs,u=this.vertices,h=(l[s]-l[i])*r,c=(l[a]-l[o])*n,p=u[s]-u[i],d=u[a]-u[o];h<1&&(h=1),c<1&&(c=1),p<1&&(p=1),d<1&&(d=1),t.drawImage(e,l[i]*r,l[o]*n,h,c,u[i],u[o],p,d)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,r=this._texture;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var n=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},n(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(o.default);r.default=a},{"./Plane":168}],168:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./Mesh"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t){function e(r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return s._ready=!0,s.verticesX=n||10,s.verticesY=o||10,s.drawMode=i.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,r=[],n=[],i=[],o=this.verticesX-1,s=this.verticesY-1,a=t.width/o,l=t.height/s,u=0;u<e;u++){var h=u%this.verticesX,c=u/this.verticesX|0;r.push(h*a,c*l),n.push(h/o,c/s)}for(var p=o*s,d=0;d<p;d++){var f=d%o,g=d/o|0,v=g*this.verticesX+f,m=g*this.verticesX+f+1,y=(g+1)*this.verticesX+f,x=(g+1)*this.verticesX+f+1;i.push(v,m,y),i.push(m,x,y)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(i),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){i.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(i.default);r.default=o},{"./Mesh":166}],169:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./Mesh"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t){function e(r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return i.points=n,i.vertices=new Float32Array(4*n.length),i.uvs=new Float32Array(4*n.length),i.colors=new Float32Array(2*n.length),i.indices=new Uint16Array(2*n.length),i.autoUpdate=!0,i.refresh(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,r=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var i=t.length,o=1;o<i;o++){var s=4*o,a=o/(i-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,n[s=2*o]=1,n[s+1]=1,r[s=2*o]=s,r[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],r=void 0,n=0,i=0,o=this.vertices,s=t.length,a=0;a<s;a++){var l=t[a],u=4*a;r=a<t.length-1?t[a+1]:l,i=-(r.x-e.x),n=r.y-e.y;var h=10*(1-a/(s-1));h>1&&(h=1);var c=Math.sqrt(n*n+i*i),p=this._texture.height/2;n/=c,i/=c,n*=p,i*=p,o[u]=l.x+n,o[u+1]=l.y+i,o[u+2]=l.x-n,o[u+3]=l.y-i,e=l}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(i.default);r.default=o},{"./Mesh":166}],170:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../core"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n),o=t("../Mesh"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldTransform,i=e.resolution;e.roundPixels?r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,r=0;r<e-2;r++){var n=2*r;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,r=e.length,n=0;n<r;n+=3){var i=2*e[n],o=2*e[n+1],s=2*e[n+2];this._renderDrawTriangle(t,i,o,s)}},t.prototype._renderDrawTriangle=function(t,e,r,n){var i=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var l=a.baseTexture,u=l.source,h=l.width,c=l.height,p=void 0,d=void 0,f=void 0,g=void 0,v=void 0,m=void 0;if(t.uploadUvTransform){var y=t._uvTransform.mapCoord;p=(o[e]*y.a+o[e+1]*y.c+y.tx)*l.width,d=(o[r]*y.a+o[r+1]*y.c+y.tx)*l.width,f=(o[n]*y.a+o[n+1]*y.c+y.tx)*l.width,g=(o[e]*y.b+o[e+1]*y.d+y.ty)*l.height,v=(o[r]*y.b+o[r+1]*y.d+y.ty)*l.height,m=(o[n]*y.b+o[n+1]*y.d+y.ty)*l.height}else p=o[e]*l.width,d=o[r]*l.width,f=o[n]*l.width,g=o[e+1]*l.height,v=o[r+1]*l.height,m=o[n+1]*l.height;var x=s[e],b=s[r],_=s[n],T=s[e+1],w=s[r+1],E=s[n+1],S=t.canvasPadding/this.renderer.resolution;if(S>0){var A=S/Math.abs(t.worldTransform.a),C=S/Math.abs(t.worldTransform.d),M=(x+b+_)/3,R=(T+w+E)/3,O=x-M,P=T-R,D=Math.sqrt(O*O+P*P);x=M+O/D*(D+A),T=R+P/D*(D+C),O=b-M,P=w-R,D=Math.sqrt(O*O+P*P),b=M+O/D*(D+A),w=R+P/D*(D+C),O=_-M,P=E-R,D=Math.sqrt(O*O+P*P),_=M+O/D*(D+A),E=R+P/D*(D+C)}i.save(),i.beginPath(),i.moveTo(x,T),i.lineTo(b,w),i.lineTo(_,E),i.closePath(),i.clip();var I=p*v+g*f+d*m-v*f-g*d-p*m,L=x*v+g*_+b*m-v*_-g*b-x*m,F=p*b+x*f+d*_-b*f-x*d-p*_,B=p*v*_+g*b*f+x*d*m-x*v*f-g*d*_-p*b*m,k=T*v+g*E+w*m-v*E-g*w-T*m,N=p*w+T*f+d*E-w*f-T*d-p*E,$=p*v*E+g*w*f+T*d*m-T*v*f-g*d*E-p*w*m;i.transform(L/I,k/I,F/I,N/I,B/I,$/I),i.drawImage(u,0,0,h*l.resolution,c*l.resolution,0,0,h,c),i.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,r=t.vertices,n=r.length/2;e.beginPath();for(var i=1;i<n-2;++i){var o=2*i,s=r[o],a=r[o+1],l=r[o+2],u=r[o+3],h=r[o+4],c=r[o+5];e.moveTo(s,a),e.lineTo(l,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=a,i.CanvasRenderer.registerPlugin("mesh",a)},{"../../core":65,"../Mesh":166}],171:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./Mesh");Object.defineProperty(r,"Mesh",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/MeshRenderer");Object.defineProperty(r,"MeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var s=t("./canvas/CanvasMeshRenderer");Object.defineProperty(r,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(s).default}});var a=t("./Plane");Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return n(a).default}});var l=t("./NineSlicePlane");Object.defineProperty(r,"NineSlicePlane",{enumerable:!0,get:function(){return n(l).default}});var u=t("./Rope");Object.defineProperty(r,"Rope",{enumerable:!0,get:function(){return n(u).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("pixi-gl-core"),a=n(s),l=t("../Mesh"),u=n(l),h=(t("path"),o.Matrix.IDENTITY),c=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return n.shader=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new o.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=t._texture;if(n.valid){var i=t._glDatas[e.CONTEXT_UID];i||(e.bindVao(null),(i={shader:this.shader,vertexBuffer:a.default.GLBuffer.createVertexBuffer(r,t.vertices,r.STREAM_DRAW),uvBuffer:a.default.GLBuffer.createVertexBuffer(r,t.uvs,r.STREAM_DRAW),indexBuffer:a.default.GLBuffer.createIndexBuffer(r,t.indices,r.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty}).vao=new a.default.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=i),e.bindVao(i.vao),t.dirty!==i.dirty&&(i.dirty=t.dirty,i.uvBuffer.upload(t.uvs)),t.indexDirty!==i.indexDirty&&(i.indexDirty=t.indexDirty,i.indexBuffer.upload(t.indices)),t.vertexDirty!==i.vertexDirty&&(i.vertexDirty=t.vertexDirty,i.vertexBuffer.upload(t.vertices)),e.bindShader(i.shader),i.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(o.utils.correctBlendMode(t.blendMode,n.baseTexture.premultipliedAlpha)),i.shader.uniforms.uTransform&&(t.uploadUvTransform?i.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):i.shader.uniforms.uTransform=h.toArray(!0)),i.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),i.shader.uniforms.uColor=o.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,i.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var s=t.drawMode===u.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;i.vao.draw(s,t.indices.length,0)}},e}(o.ObjectRenderer);r.default=c,o.WebGLRenderer.registerPlugin("mesh",c)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("../core/utils"),a=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,n=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i>16384&&(i=16384),i>r&&(i=r),a._properties=[!1,!0,!1,!1,!1],a._maxSize=r,a._batchSize=i,a._glBuffers={},a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=o.BLEND_MODES.NORMAL,a.autoResize=s,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,n=!0,i=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var u=this.children[l];if(u.visible){var h=u._texture.frame;if(e.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)n&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution),n=!1),i=u.anchor.x*(-h.width*u.scale.x)+u.position.x+.5,o=u.anchor.y*(-h.height*u.scale.y)+u.position.y+.5,s=h.width*u.scale.x,a=h.height*u.scale.y;else{n||(n=!0),u.displayObjectUpdateTransform();var c=u.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),i=u.anchor.x*-h.width+.5,o=u.anchor.y*-h.height+.5,s=h.width,a=h.height}var p=u._texture.baseTexture.resolution;e.drawImage(u._texture.baseTexture.source,h.x*p,h.y*p,h.width*p,h.height*p,i*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},n(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,s.hex2rgb)(t,this.tintRgb)}}]),e}(o.Container);r.default=a},{"../core":65,"../core/utils":125}],174:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./ParticleContainer");Object.defineProperty(r,"ParticleContainer",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/ParticleRenderer");Object.defineProperty(r,"ParticleRenderer",{enumerable:!0,get:function(){return n(o).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("pixi-gl-core"),o=n(i),s=t("../../core/utils/createIndicesForQuads"),a=n(s),l=function(){function t(e,r,n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.gl=e,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<r.length;++o){var s=r[o];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},n[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,a.default)(this.size),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=o.default.GLBuffer.createVertexBuffer(t,i,t.STREAM_DRAW);var s=0;this.staticStride=0;for(var l=0;l<this.staticProperties.length;++l){var u=this.staticProperties[l];u.offset=s,s+=u.size,this.staticStride+=u.size}var h=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(h),this.staticDataUint32=new Uint32Array(h),this.staticBuffer=o.default.GLBuffer.createVertexBuffer(t,h,t.STATIC_DRAW),this.vao=new o.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var p=this.dynamicProperties[c];p.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,p.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*p.offset):this.vao.addAttribute(this.dynamicBuffer,p.attribute,t.FLOAT,!1,4*this.dynamicStride,4*p.offset)}for(var d=0;d<this.staticProperties.length;++d){var f=this.staticProperties[d];f.unsignedByte?this.vao.addAttribute(this.staticBuffer,f.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*f.offset):this.vao.addAttribute(this.staticBuffer,f.attribute,t.FLOAT,!1,4*this.staticStride,4*f.offset)}},t.prototype.uploadDynamic=function(t,e,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(t,e,r,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(t,e,r,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();r.default=l},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("./ParticleShader"),a=n(s),l=t("./ParticleBuffer"),u=n(l),h=t("../../core/utils"),c=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new o.Matrix,n.CONTEXT_UID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new a.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,r=t._maxSize,n=t._batchSize,i=this.renderer,s=e.length;if(0!==s){s>r&&(s=r);var a=t._glBuffers[i.CONTEXT_UID];a||(a=t._glBuffers[i.CONTEXT_UID]=this.generateBuffers(t));var l=e[0]._texture.baseTexture;this.renderer.setBlendMode(o.utils.correctBlendMode(t.blendMode,l.premultipliedAlpha));var u=i.gl,h=t.worldTransform.copy(this.tempMatrix);h.prepend(i._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=h.toArray(!0),this.shader.uniforms.uColor=o.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,l.premultipliedAlpha),this.shader.uniforms.uSampler=i.bindTexture(l);for(var c=!1,p=0,d=0;p<s;p+=n,d+=1){var f=s-p;if(f>n&&(f=n),d>=a.length){if(!t.autoResize)break;a.push(this._generateOneMoreBuffer(t))}var g=a[d];g.uploadDynamic(e,p,f);var v=t._bufferUpdateIDs[d]||0;(c=c||g._updateID<v)&&(g._updateID=t._updateID,g.uploadStatic(e,p,f)),i.bindVao(g.vao),g.vao.draw(u.TRIANGLES,6*f)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,r=[],n=t._maxSize,i=t._batchSize,o=t._properties,s=0;s<n;s+=i)r.push(new u.default(e,this.properties,o,i));return r},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,r=t._batchSize,n=t._properties;return new u.default(e,this.properties,n,r)},e.prototype.uploadVertices=function(t,e,r,n,i,o){for(var s=0,a=0,l=0,u=0,h=0;h<r;++h){var c=t[e+h],p=c._texture,d=c.scale.x,f=c.scale.y,g=p.trim,v=p.orig;g?(a=g.x-c.anchor.x*v.width,s=a+g.width,u=g.y-c.anchor.y*v.height,l=u+g.height):(s=v.width*(1-c.anchor.x),a=v.width*-c.anchor.x,l=v.height*(1-c.anchor.y),u=v.height*-c.anchor.y),n[o]=a*d,n[o+1]=u*f,n[o+i]=s*d,n[o+i+1]=u*f,n[o+2*i]=s*d,n[o+2*i+1]=l*f,n[o+3*i]=a*d,n[o+3*i+1]=l*f,o+=4*i}},e.prototype.uploadPosition=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+i]=a.x,n[o+i+1]=a.y,n[o+2*i]=a.x,n[o+2*i+1]=a.y,n[o+3*i]=a.x,n[o+3*i+1]=a.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},e.prototype.uploadUvs=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+i]=a.x1,n[o+i+1]=a.y1,n[o+2*i]=a.x2,n[o+2*i+1]=a.y2,n[o+3*i]=a.x3,n[o+3*i+1]=a.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s],l=a._texture.baseTexture.premultipliedAlpha,u=a.alpha,c=u<1&&l?(0,h.premultiplyTint)(a._tintRGB,u):a._tintRGB+(255*u<<24);n[o]=c,n[o+i]=c,n[o+2*i]=c,n[o+3*i]=c,o+=4*i}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(o.ObjectRenderer);r.default=c,o.WebGLRenderer.registerPlugin("particle",c)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../core/Shader"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t){function e(r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(i.default);r.default=o},{"../../core/Shader":44}],178:[function(t,e,r){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1})},{}],179:[function(t,e,r){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},{}],180:[function(t,e,r){"use strict";var n=t("object-assign"),i=function(t){return t&&t.__esModule?t:{default:t}}(n);Object.assign||(Object.assign=i.default)},{"object-assign":6}],181:[function(t,e,r){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),t("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Number.isInteger":179,"./Object.assign":180,"./requestAnimationFrame":182}],182:[function(t,r,n){(function(t){"use strict";if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var r=Date.now(),n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i){var o=n[i];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+r-e;return n<0&&(n=0),r=e,setTimeout(function(){r=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],183:[function(t,e,r){"use strict";function n(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof c.Texture){var i=t._textures[n].baseTexture;-1===e.indexOf(i)&&(e.push(i),r=!0)}return r}function i(t,e){return t instanceof c.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function o(t,e){if(t._texture&&t._texture instanceof c.Texture){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function s(t,e){return e instanceof c.Text&&(e.updateText(!0),!0)}function a(t,e){if(e instanceof c.TextStyle){var r=e.toFontString();return c.TextMetrics.measureFont(r),!0}return!1}function l(t,e){if(t instanceof c.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function u(t,e){return t instanceof c.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}r.__esModule=!0;var h=t("../core"),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(h),p=t("./limiters/CountLimiter"),d=function(t){return t&&t.__esModule?t:{default:t}}(p),f=c.ticker.shared;c.settings.UPLOADS_PER_FRAME=4;var g=function(){function t(e){var r=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.limiter=new d.default(c.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(l),this.registerFindHook(u),this.registerFindHook(n),this.registerFindHook(i),this.registerFindHook(o),this.registerUploadHook(s),this.registerUploadHook(a)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,f.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)f.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var o=0,s=i.length;o<s;o++)i[o]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof c.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&f.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();r.default=g},{"../core":65,"./limiters/CountLimiter":186}],184:[function(t,e,r){"use strict";function n(t,e){if(e instanceof o.BaseTexture){var r=e.source,n=0===r.width?t.canvas.width:Math.min(t.canvas.width,r.width),i=0===r.height?t.canvas.height:Math.min(t.canvas.height,r.height);return t.ctx.drawImage(r,0,0,n,i,0,0,t.canvas.width,t.canvas.height),!0}return!1}r.__esModule=!0;var i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("../BasePrepare"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=16,u=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return i.uploadHookHelper=i,i.canvas=document.createElement("canvas"),i.canvas.width=l,i.canvas.height=l,i.ctx=i.canvas.getContext("2d"),i.registerUploadHook(n),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(a.default);r.default=u,o.CanvasRenderer.registerPlugin("prepare",u)},{"../../core":65,"../BasePrepare":183}],185:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./webgl/WebGLPrepare");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/CanvasPrepare");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}});var s=t("./BasePrepare");Object.defineProperty(r,"BasePrepare",{enumerable:!0,get:function(){return n(s).default}});var a=t("./limiters/CountLimiter");Object.defineProperty(r,"CountLimiter",{enumerable:!0,get:function(){return n(a).default}});var l=t("./limiters/TimeLimiter");Object.defineProperty(r,"TimeLimiter",{enumerable:!0,get:function(){return n(l).default}})},{"./BasePrepare":183,"./canvas/CanvasPrepare":184,"./limiters/CountLimiter":186,"./limiters/TimeLimiter":187,"./webgl/WebGLPrepare":188}],186:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();r.default=n},{}],187:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();r.default=n},{}],188:[function(t,e,r){"use strict";function n(t,e){return e instanceof a.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function i(t,e){return e instanceof a.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function o(t,e){return t instanceof a.Graphics&&(e.push(t),!0)}r.__esModule=!0;var s=t("../../core"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(s),l=t("../BasePrepare"),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return s.uploadHookHelper=s.renderer,s.registerFindHook(o),s.registerUploadHook(n),s.registerUploadHook(i),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(u.default);r.default=h,a.WebGLRenderer.registerPlugin("prepare",h)},{"../../core":65,"../BasePrepare":183}],189:[function(t,r,n){(function(e){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}n.__esModule=!0,n.loader=n.prepare=n.particles=n.mesh=n.loaders=n.interaction=n.filters=n.extras=n.extract=n.accessibility=void 0;var i=t("./polyfill");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./core");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./deprecation"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=t("./accessibility"),u=r(l),h=t("./extract"),c=r(h),p=t("./extras"),d=r(p),f=t("./filters"),g=r(f),v=t("./interaction"),m=r(v),y=t("./loaders"),x=r(y),b=t("./mesh"),_=r(b),T=t("./particles"),w=r(T),E=t("./prepare"),S=r(E);o.utils.mixins.performMixins();var A=x.shared||null;n.accessibility=u,n.extract=c,n.extras=d,n.filters=g,n.interaction=m,n.loaders=x,n.mesh=_,n.particles=w,n.prepare=S,n.loader=A,"function"==typeof a.default&&(0,a.default)(n),e.PIXI=n}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":181,"./prepare":185}]},{},[189])(189)}).call(window)}).call(this,r("yLpj"))},"8kRx":function(t,e,r){var n=r("UB/y");"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,i);n.locals&&(t.exports=n.locals)},"8oxB":function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,u=[],h=!1,c=-1;function p(){h&&l&&(h=!1,l.length?u=l.concat(u):c=-1,u.length&&d())}function d(){if(!h){var t=a(p);h=!0;for(var e=u.length;e;){for(l=u,u=[];++c<e;)l&&l[c].run();c=-1,e=u.length}l=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new f(t,e)),1!==u.length||h||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"9tPo":function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},AhwK:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAMCAYAAABfnvydAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI3QjQ5NEY1NUQxNTExRTU4MTRBRUMxOTgyQjAzQTRDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI3QjQ5NEY2NUQxNTExRTU4MTRBRUMxOTgyQjAzQTRDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjdCNDk0RjM1RDE1MTFFNTgxNEFFQzE5ODJCMDNBNEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjdCNDk0RjQ1RDE1MTFFNTgxNEFFQzE5ODJCMDNBNEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4OvBgYAAAAV0lEQVR42mL4////fCDmAmIGbBhEgMBlINbBpwAEvgJxAjYFCVBJGECxEqZSB2oNDFyHWYlsHBdUN4qVTAz4ASNMtxY+K7A5kockb4LAFXwBhTeoAQIMANSqJvRPPg1/AAAAAElFTkSuQmCC"},"Bzw/":function(t){t.exports={cgPlayer:{gameInformation:"Game information:",outputStream:"Standard output stream:",errorStream:"Standard error stream:",gameParameters:"Game parameters:",speed:"SPEED",quality:"QUALITY",ToolTipIcons:{options:"Settings",replay:"Replay and share",fullscreen:"Fullscreen",extract:"Extract"},share:"Share this replay"}}},CFt4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzU2MDMwOTBEOEYxMUU0ODJBREEyNjQ3QjA4QUIwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzU2MDMwQTBEOEYxMUU0ODJBREEyNjQ3QjA4QUIwNiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI3NTYwMzA3MEQ4RjExRTQ4MkFEQTI2NDdCMDhBQjA2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI3NTYwMzA4MEQ4RjExRTQ4MkFEQTI2NDdCMDhBQjA2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Btk+lAAAAIpJREFUeNqEUosKgCAMnEH9c/bQoD46CmyrG8hQOzhx3t1U1KWUIhENTE9tHMy74+Fkjlhomf3r5R2EY/pwoM65Q5ukzgUPYa+ZbYAgaEjNc+6hwhE0JFis3hUu2FfmH0yHiM4rugu22pFys66tNqRCgBAKd9JQ1EDLbBtGJ4+Gr7H9fI3AvB4BBgCy5Uy3Msd8OAAAAABJRU5ErkJggg=="},EVdn:function(t,e,r){var n;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(e,r){"use strict";"object"==typeof t.exports?t.exports=e.document?r(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return r(t)}:r(e)}("undefined"!=typeof window?window:this,function(r,i){"use strict";var o=[],s=r.document,a=Object.getPrototypeOf,l=o.slice,u=o.concat,h=o.push,c=o.indexOf,p={},d=p.toString,f=p.hasOwnProperty,g=f.toString,v=g.call(Object),m={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},x=function(t){return null!=t&&t===t.window},b={type:!0,src:!0,noModule:!0};function _(t,e,r){var n,i=(e=e||s).createElement("script");if(i.text=t,r)for(n in b)r[n]&&(i[n]=r[n]);e.head.appendChild(i).parentNode.removeChild(i)}function T(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?p[d.call(t)]||"object":typeof t}var w=function(t,e){return new w.fn.init(t,e)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function S(t){var e=!!t&&"length"in t&&t.length,r=T(t);return!y(t)&&!x(t)&&("array"===r||0===e||"number"==typeof e&&e>0&&e-1 in t)}w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return l.call(this)},get:function(t){return null==t?l.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,function(e,r){return t.call(e,r,e)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,r=+t+(t<0?e:0);return this.pushStack(r>=0&&r<e?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:o.sort,splice:o.splice},w.extend=w.fn.extend=function(){var t,e,r,n,i,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)r=s[e],s!==(n=t[e])&&(u&&n&&(w.isPlainObject(n)||(i=Array.isArray(n)))?(i?(i=!1,o=r&&Array.isArray(r)?r:[]):o=r&&w.isPlainObject(r)?r:{},s[e]=w.extend(u,o,n)):void 0!==n&&(s[e]=n));return s},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,r;return!(!t||"[object Object]"!==d.call(t))&&(!(e=a(t))||"function"==typeof(r=f.call(e,"constructor")&&e.constructor)&&g.call(r)===v)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){_(t)},each:function(t,e){var r,n=0;if(S(t))for(r=t.length;n<r&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(E,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(S(Object(t))?w.merge(r,"string"==typeof t?[t]:t):h.call(r,t)),r},inArray:function(t,e,r){return null==e?-1:c.call(e,t,r)},merge:function(t,e){for(var r=+e.length,n=0,i=t.length;n<r;n++)t[i++]=e[n];return t.length=i,t},grep:function(t,e,r){for(var n=[],i=0,o=t.length,s=!r;i<o;i++)!e(t[i],i)!==s&&n.push(t[i]);return n},map:function(t,e,r){var n,i,o=0,s=[];if(S(t))for(n=t.length;o<n;o++)null!=(i=e(t[o],o,r))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,r))&&s.push(i);return u.apply([],s)},guid:1,support:m}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=o[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){p["[object "+e+"]"]=e.toLowerCase()});var A=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){var e,r,n,i,o,s,a,l,u,h,c,p,d,f,g,v,m,y,x,b="sizzle"+1*new Date,_=t.document,T=0,w=0,E=st(),S=st(),A=st(),C=function(t,e){return t===e&&(c=!0),0},M={}.hasOwnProperty,R=[],O=R.pop,P=R.push,D=R.push,I=R.slice,L=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",k="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",N="\\["+B+"*("+k+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+k+"))|)"+B+"*\\]",$=":("+k+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",U=new RegExp(B+"+","g"),j=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),G=new RegExp("^"+B+"*,"+B+"*"),W=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),V=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),z=new RegExp($),Y=new RegExp("^"+k+"$"),X={ID:new RegExp("^#("+k+")"),CLASS:new RegExp("^\\.("+k+")"),TAG:new RegExp("^("+k+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,K=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),tt=function(t,e,r){var n="0x"+e-65536;return n!=n||r?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},nt=function(){p()},it=yt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{D.apply(R=I.call(_.childNodes),_.childNodes),R[_.childNodes.length].nodeType}catch(t){D={apply:R.length?function(t,e){P.apply(t,I.call(e))}:function(t,e){for(var r=t.length,n=0;t[r++]=e[n++];);t.length=r-1}}}function ot(t,e,n,i){var o,a,u,h,c,f,m,y=e&&e.ownerDocument,T=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==T&&9!==T&&11!==T)return n;if(!i&&((e?e.ownerDocument||e:_)!==d&&p(e),e=e||d,g)){if(11!==T&&(c=Q.exec(t)))if(o=c[1]){if(9===T){if(!(u=e.getElementById(o)))return n;if(u.id===o)return n.push(u),n}else if(y&&(u=y.getElementById(o))&&x(e,u)&&u.id===o)return n.push(u),n}else{if(c[2])return D.apply(n,e.getElementsByTagName(t)),n;if((o=c[3])&&r.getElementsByClassName&&e.getElementsByClassName)return D.apply(n,e.getElementsByClassName(o)),n}if(r.qsa&&!A[t+" "]&&(!v||!v.test(t))){if(1!==T)y=e,m=t;else if("object"!==e.nodeName.toLowerCase()){for((h=e.getAttribute("id"))?h=h.replace(et,rt):e.setAttribute("id",h=b),a=(f=s(t)).length;a--;)f[a]="#"+h+" "+mt(f[a]);m=f.join(","),y=J.test(t)&&gt(e.parentNode)||e}if(m)try{return D.apply(n,y.querySelectorAll(m)),n}catch(t){}finally{h===b&&e.removeAttribute("id")}}}return l(t.replace(j,"$1"),e,n,i)}function st(){var t=[];return function e(r,i){return t.push(r+" ")>n.cacheLength&&delete e[t.shift()],e[r+" "]=i}}function at(t){return t[b]=!0,t}function lt(t){var e=d.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var r=t.split("|"),i=r.length;i--;)n.attrHandle[r[i]]=e}function ht(t,e){var r=e&&t,n=r&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===e)return-1;return t?1:-1}function ct(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var r=e.nodeName.toLowerCase();return("input"===r||"button"===r)&&e.type===t}}function dt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ft(t){return at(function(e){return e=+e,at(function(r,n){for(var i,o=t([],r.length,e),s=o.length;s--;)r[i=o[s]]&&(r[i]=!(n[i]=r[i]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in r=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},p=ot.setDocument=function(t){var e,i,s=t?t.ownerDocument||t:_;return s!==d&&9===s.nodeType&&s.documentElement?(f=(d=s).documentElement,g=!o(d),_!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",nt,!1):i.attachEvent&&i.attachEvent("onunload",nt)),r.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),r.getElementsByTagName=lt(function(t){return t.appendChild(d.createComment("")),!t.getElementsByTagName("*").length}),r.getElementsByClassName=Z.test(d.getElementsByClassName),r.getById=lt(function(t){return f.appendChild(t).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),r.getById?(n.filter.ID=function(t){var e=t.replace(K,tt);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var r=e.getElementById(t);return r?[r]:[]}}):(n.filter.ID=function(t){var e=t.replace(K,tt);return function(t){var r=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return r&&r.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var r,n,i,o=e.getElementById(t);if(o){if((r=o.getAttributeNode("id"))&&r.value===t)return[o];for(i=e.getElementsByName(t),n=0;o=i[n++];)if((r=o.getAttributeNode("id"))&&r.value===t)return[o]}return[]}}),n.find.TAG=r.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):r.qsa?e.querySelectorAll(t):void 0}:function(t,e){var r,n=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;r=o[i++];)1===r.nodeType&&n.push(r);return n}return o},n.find.CLASS=r.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},m=[],v=[],(r.qsa=Z.test(d.querySelectorAll))&&(lt(function(t){f.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+B+"*(?:value|"+F+")"),t.querySelectorAll("[id~="+b+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=d.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+B+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=Z.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&lt(function(t){r.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),m.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),e=Z.test(f.compareDocumentPosition),x=e||Z.test(f.contains)?function(t,e){var r=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},C=e?function(t,e){if(t===e)return c=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!r.sortDetached&&e.compareDocumentPosition(t)===n?t===d||t.ownerDocument===_&&x(_,t)?-1:e===d||e.ownerDocument===_&&x(_,e)?1:h?L(h,t)-L(h,e):0:4&n?-1:1)}:function(t,e){if(t===e)return c=!0,0;var r,n=0,i=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!i||!o)return t===d?-1:e===d?1:i?-1:o?1:h?L(h,t)-L(h,e):0;if(i===o)return ht(t,e);for(r=t;r=r.parentNode;)s.unshift(r);for(r=e;r=r.parentNode;)a.unshift(r);for(;s[n]===a[n];)n++;return n?ht(s[n],a[n]):s[n]===_?-1:a[n]===_?1:0},d):d},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d&&p(t),e=e.replace(V,"='$1']"),r.matchesSelector&&g&&!A[e+" "]&&(!m||!m.test(e))&&(!v||!v.test(e)))try{var n=y.call(t,e);if(n||r.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return ot(e,d,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==d&&p(t),x(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==d&&p(t);var i=n.attrHandle[e.toLowerCase()],o=i&&M.call(n.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:r.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,rt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,n=[],i=0,o=0;if(c=!r.detectDuplicates,h=!r.sortStable&&t.slice(0),t.sort(C),c){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return h=null,t},i=ot.getText=function(t){var e,r="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)r+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)r+=i(e);return r},(n=ot.selectors={cacheLength:50,createPseudo:at,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(K,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(K,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,r=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":r&&z.test(r)&&(e=s(r,!0))&&(e=r.indexOf(")",r.length-e)-r.length)&&(t[0]=t[0].slice(0,e),t[2]=r.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(K,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&E(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,r){return function(n){var i=ot.attr(n,t);return null==i?"!="===e:!e||(i+="","="===e?i===r:"!="===e?i!==r:"^="===e?r&&0===i.indexOf(r):"*="===e?r&&i.indexOf(r)>-1:"$="===e?r&&i.slice(-r.length)===r:"~="===e?(" "+i.replace(U," ")+" ").indexOf(r)>-1:"|="===e&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,r,n,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===i?function(t){return!!t.parentNode}:function(e,r,l){var u,h,c,p,d,f,g=o!==s?"nextSibling":"previousSibling",v=e.parentNode,m=a&&e.nodeName.toLowerCase(),y=!l&&!a,x=!1;if(v){if(o){for(;g;){for(p=e;p=p[g];)if(a?p.nodeName.toLowerCase()===m:1===p.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?v.firstChild:v.lastChild],s&&y){for(x=(d=(u=(h=(c=(p=v)[b]||(p[b]={}))[p.uniqueID]||(c[p.uniqueID]={}))[t]||[])[0]===T&&u[1])&&u[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(x=d=0)||f.pop();)if(1===p.nodeType&&++x&&p===e){h[t]=[T,d,x];break}}else if(y&&(x=d=(u=(h=(c=(p=e)[b]||(p[b]={}))[p.uniqueID]||(c[p.uniqueID]={}))[t]||[])[0]===T&&u[1]),!1===x)for(;(p=++d&&p&&p[g]||(x=d=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==m:1!==p.nodeType)||!++x||(y&&((h=(c=p[b]||(p[b]={}))[p.uniqueID]||(c[p.uniqueID]={}))[t]=[T,x]),p!==e)););return(x-=i)===n||x%n==0&&x/n>=0}}},PSEUDO:function(t,e){var r,i=n.pseudos[t]||n.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[b]?i(e):i.length>1?(r=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,r){for(var n,o=i(t,e),s=o.length;s--;)t[n=L(t,o[s])]=!(r[n]=o[s])}):function(t){return i(t,0,r)}):i}},pseudos:{not:at(function(t){var e=[],r=[],n=a(t.replace(j,"$1"));return n[b]?at(function(t,e,r,i){for(var o,s=n(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,n(e,null,o,r),e[0]=null,!r.pop()}}),has:at(function(t){return function(e){return ot(t,e).length>0}}),contains:at(function(t){return t=t.replace(K,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:at(function(t){return Y.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(K,tt).toLowerCase(),function(e){var r;do{if(r=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(r=r.toLowerCase())===t||0===r.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var r=t.location&&t.location.hash;return r&&r.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return q.test(t.nodeName)},input:function(t){return H.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft(function(){return[0]}),last:ft(function(t,e){return[e-1]}),eq:ft(function(t,e,r){return[r<0?r+e:r]}),even:ft(function(t,e){for(var r=0;r<e;r+=2)t.push(r);return t}),odd:ft(function(t,e){for(var r=1;r<e;r+=2)t.push(r);return t}),lt:ft(function(t,e,r){for(var n=r<0?r+e:r;--n>=0;)t.push(n);return t}),gt:ft(function(t,e,r){for(var n=r<0?r+e:r;++n<e;)t.push(n);return t})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=ct(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=pt(e);function vt(){}function mt(t){for(var e=0,r=t.length,n="";e<r;e++)n+=t[e].value;return n}function yt(t,e,r){var n=e.dir,i=e.next,o=i||n,s=r&&"parentNode"===o,a=w++;return e.first?function(e,r,i){for(;e=e[n];)if(1===e.nodeType||s)return t(e,r,i);return!1}:function(e,r,l){var u,h,c,p=[T,a];if(l){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,r,l))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(h=(c=e[b]||(e[b]={}))[e.uniqueID]||(c[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[n]||e;else{if((u=h[o])&&u[0]===T&&u[1]===a)return p[2]=u[2];if(h[o]=p,p[2]=t(e,r,l))return!0}return!1}}function xt(t){return t.length>1?function(e,r,n){for(var i=t.length;i--;)if(!t[i](e,r,n))return!1;return!0}:t[0]}function bt(t,e,r,n,i){for(var o,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(o=t[a])&&(r&&!r(o,n,i)||(s.push(o),u&&e.push(a)));return s}function _t(t,e,r,n,i,o){return n&&!n[b]&&(n=_t(n)),i&&!i[b]&&(i=_t(i,o)),at(function(o,s,a,l){var u,h,c,p=[],d=[],f=s.length,g=o||function(t,e,r){for(var n=0,i=e.length;n<i;n++)ot(t,e[n],r);return r}(e||"*",a.nodeType?[a]:a,[]),v=!t||!o&&e?g:bt(g,p,t,a,l),m=r?i||(o?t:f||n)?[]:s:v;if(r&&r(v,m,a,l),n)for(u=bt(m,d),n(u,[],a,l),h=u.length;h--;)(c=u[h])&&(m[d[h]]=!(v[d[h]]=c));if(o){if(i||t){if(i){for(u=[],h=m.length;h--;)(c=m[h])&&u.push(v[h]=c);i(null,m=[],u,l)}for(h=m.length;h--;)(c=m[h])&&(u=i?L(o,c):p[h])>-1&&(o[u]=!(s[u]=c))}}else m=bt(m===s?m.splice(f,m.length):m),i?i(null,s,m,l):D.apply(s,m)})}function Tt(t){for(var e,r,i,o=t.length,s=n.relative[t[0].type],a=s||n.relative[" "],l=s?1:0,h=yt(function(t){return t===e},a,!0),c=yt(function(t){return L(e,t)>-1},a,!0),p=[function(t,r,n){var i=!s&&(n||r!==u)||((e=r).nodeType?h(t,r,n):c(t,r,n));return e=null,i}];l<o;l++)if(r=n.relative[t[l].type])p=[yt(xt(p),r)];else{if((r=n.filter[t[l].type].apply(null,t[l].matches))[b]){for(i=++l;i<o&&!n.relative[t[i].type];i++);return _t(l>1&&xt(p),l>1&&mt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(j,"$1"),r,l<i&&Tt(t.slice(l,i)),i<o&&Tt(t=t.slice(i)),i<o&&mt(t))}p.push(r)}return xt(p)}return vt.prototype=n.filters=n.pseudos,n.setFilters=new vt,s=ot.tokenize=function(t,e){var r,i,o,s,a,l,u,h=S[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],u=n.preFilter;a;){for(s in r&&!(i=G.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),r=!1,(i=W.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(j," ")}),a=a.slice(r.length)),n.filter)!(i=X[s].exec(a))||u[s]&&!(i=u[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return e?a.length:a?ot.error(t):S(t,l).slice(0)},a=ot.compile=function(t,e){var r,i=[],o=[],a=A[t+" "];if(!a){for(e||(e=s(t)),r=e.length;r--;)(a=Tt(e[r]))[b]?i.push(a):o.push(a);(a=A(t,function(t,e){var r=e.length>0,i=t.length>0,o=function(o,s,a,l,h){var c,f,v,m=0,y="0",x=o&&[],b=[],_=u,w=o||i&&n.find.TAG("*",h),E=T+=null==_?1:Math.random()||.1,S=w.length;for(h&&(u=s===d||s||h);y!==S&&null!=(c=w[y]);y++){if(i&&c){for(f=0,s||c.ownerDocument===d||(p(c),a=!g);v=t[f++];)if(v(c,s||d,a)){l.push(c);break}h&&(T=E)}r&&((c=!v&&c)&&m--,o&&x.push(c))}if(m+=y,r&&y!==m){for(f=0;v=e[f++];)v(x,b,s,a);if(o){if(m>0)for(;y--;)x[y]||b[y]||(b[y]=O.call(l));b=bt(b)}D.apply(l,b),h&&!o&&b.length>0&&m+e.length>1&&ot.uniqueSort(l)}return h&&(T=E,u=_),x};return r?at(o):o}(o,i))).selector=t}return a},l=ot.select=function(t,e,r,i){var o,l,u,h,c,p="function"==typeof t&&t,d=!i&&s(t=p.selector||t);if(r=r||[],1===d.length){if((l=d[0]=d[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===e.nodeType&&g&&n.relative[l[1].type]){if(!(e=(n.find.ID(u.matches[0].replace(K,tt),e)||[])[0]))return r;p&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=X.needsContext.test(t)?0:l.length;o--&&(u=l[o],!n.relative[h=u.type]);)if((c=n.find[h])&&(i=c(u.matches[0].replace(K,tt),J.test(l[0].type)&&gt(e.parentNode)||e))){if(l.splice(o,1),!(t=i.length&&mt(l)))return D.apply(r,i),r;break}}return(p||a(t,d))(i,e,!g,r,!e||J.test(t)&&gt(e.parentNode)||e),r},r.sortStable=b.split("").sort(C).join("")===b,r.detectDuplicates=!!c,p(),r.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(d.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,r){if(!r)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),r.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,r){if(!r&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ut(F,function(t,e,r){var n;if(!r)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),ot}(r);w.find=A,w.expr=A.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=A.uniqueSort,w.text=A.getText,w.isXMLDoc=A.isXML,w.contains=A.contains,w.escapeSelector=A.escape;var C=function(t,e,r){for(var n=[],i=void 0!==r;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&w(t).is(r))break;n.push(t)}return n},M=function(t,e){for(var r=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&r.push(t);return r},R=w.expr.match.needsContext;function O(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var P=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(t,e,r){return y(e)?w.grep(t,function(t,n){return!!e.call(t,n,t)!==r}):e.nodeType?w.grep(t,function(t){return t===e!==r}):"string"!=typeof e?w.grep(t,function(t){return c.call(e,t)>-1!==r}):w.filter(e,t,r)}w.filter=function(t,e,r){var n=e[0];return r&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?w.find.matchesSelector(n,t)?[n]:[]:w.find.matches(t,w.grep(e,function(t){return 1===t.nodeType}))},w.fn.extend({find:function(t){var e,r,n=this.length,i=this;if("string"!=typeof t)return this.pushStack(w(t).filter(function(){for(e=0;e<n;e++)if(w.contains(i[e],this))return!0}));for(r=this.pushStack([]),e=0;e<n;e++)w.find(t,i[e],r);return n>1?w.uniqueSort(r):r},filter:function(t){return this.pushStack(D(this,t||[],!1))},not:function(t){return this.pushStack(D(this,t||[],!0))},is:function(t){return!!D(this,"string"==typeof t&&R.test(t)?w(t):t||[],!1).length}});var I,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,r){var n,i;if(!t)return this;if(r=r||I,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!n[1]&&e)return!e||e.jquery?(e||r).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:s,!0)),P.test(n[1])&&w.isPlainObject(e))for(n in e)y(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(i=s.getElementById(n[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==r.ready?r.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,I=w(s);var F=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function k(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),r=e.length;return this.filter(function(){for(var t=0;t<r;t++)if(w.contains(this,e[t]))return!0})},closest:function(t,e){var r,n=0,i=this.length,o=[],s="string"!=typeof t&&w(t);if(!R.test(t))for(;n<i;n++)for(r=this[n];r&&r!==e;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&w.find.matchesSelector(r,t))){o.push(r);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?c.call(w(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C(t,"parentNode")},parentsUntil:function(t,e,r){return C(t,"parentNode",r)},next:function(t){return k(t,"nextSibling")},prev:function(t){return k(t,"previousSibling")},nextAll:function(t){return C(t,"nextSibling")},prevAll:function(t){return C(t,"previousSibling")},nextUntil:function(t,e,r){return C(t,"nextSibling",r)},prevUntil:function(t,e,r){return C(t,"previousSibling",r)},siblings:function(t){return M((t.parentNode||{}).firstChild,t)},children:function(t){return M(t.firstChild)},contents:function(t){return O(t,"iframe")?t.contentDocument:(O(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},function(t,e){w.fn[t]=function(r,n){var i=w.map(this,e,r);return"Until"!==t.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=w.filter(n,i)),this.length>1&&(B[t]||w.uniqueSort(i),F.test(t)&&i.reverse()),this.pushStack(i)}});var N=/[^\x20\t\r\n\f]+/g;function $(t){return t}function U(t){throw t}function j(t,e,r,n){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(r):t&&y(i=t.then)?i.call(t,e,r):e.apply(void 0,[t].slice(n))}catch(t){r.apply(void 0,[t])}}w.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return w.each(t.match(N)||[],function(t,r){e[r]=!0}),e}(t):w.extend({},t);var e,r,n,i,o=[],s=[],a=-1,l=function(){for(i=i||t.once,n=e=!0;s.length;a=-1)for(r=s.shift();++a<o.length;)!1===o[a].apply(r[0],r[1])&&t.stopOnFalse&&(a=o.length,r=!1);t.memory||(r=!1),e=!1,i&&(o=r?[]:"")},u={add:function(){return o&&(r&&!e&&(a=o.length-1,s.push(r)),function e(r){w.each(r,function(r,n){y(n)?t.unique&&u.has(n)||o.push(n):n&&n.length&&"string"!==T(n)&&e(n)})}(arguments),r&&!e&&l()),this},remove:function(){return w.each(arguments,function(t,e){for(var r;(r=w.inArray(e,o,r))>-1;)o.splice(r,1),r<=a&&a--}),this},has:function(t){return t?w.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=r="",this},disabled:function(){return!o},lock:function(){return i=s=[],r||e||(o=r=""),this},locked:function(){return!!i},fireWith:function(t,r){return i||(r=[t,(r=r||[]).slice?r.slice():r],s.push(r),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},w.extend({Deferred:function(t){var e=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return w.Deferred(function(r){w.each(e,function(e,n){var i=y(t[n[4]])&&t[n[4]];o[n[1]](function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(t,n,i){var o=0;function s(t,e,n,i){return function(){var a=this,l=arguments,u=function(){var r,u;if(!(t<o)){if((r=n.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");u=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(u)?i?u.call(r,s(o,e,$,i),s(o,e,U,i)):(o++,u.call(r,s(o,e,$,i),s(o,e,U,i),s(o,e,$,e.notifyWith))):(n!==$&&(a=void 0,l=[r]),(i||e.resolveWith)(a,l))}},h=i?u:function(){try{u()}catch(r){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(r,h.stackTrace),t+1>=o&&(n!==U&&(a=void 0,l=[r]),e.rejectWith(a,l))}};t?h():(w.Deferred.getStackHook&&(h.stackTrace=w.Deferred.getStackHook()),r.setTimeout(h))}}return w.Deferred(function(r){e[0][3].add(s(0,r,y(i)?i:$,r.notifyWith)),e[1][3].add(s(0,r,y(t)?t:$)),e[2][3].add(s(0,r,y(n)?n:U))}).promise()},promise:function(t){return null!=t?w.extend(t,i):i}},o={};return w.each(e,function(t,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add(function(){n=a},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,r=e,n=Array(r),i=l.call(arguments),o=w.Deferred(),s=function(t){return function(r){n[t]=this,i[t]=arguments.length>1?l.call(arguments):r,--e||o.resolveWith(n,i)}};if(e<=1&&(j(t,o.done(s(r)).resolve,o.reject,!e),"pending"===o.state()||y(i[r]&&i[r].then)))return o.then();for(;r--;)j(i[r],s(r),o.reject);return o.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&G.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},w.readyException=function(t){r.setTimeout(function(){throw t})};var W=w.Deferred();function V(){s.removeEventListener("DOMContentLoaded",V),r.removeEventListener("load",V),w.ready()}w.fn.ready=function(t){return W.then(t).catch(function(t){w.readyException(t)}),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==t&&--w.readyWait>0||W.resolveWith(s,[w]))}}),w.ready.then=W.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?r.setTimeout(w.ready):(s.addEventListener("DOMContentLoaded",V),r.addEventListener("load",V));var z=function(t,e,r,n,i,o,s){var a=0,l=t.length,u=null==r;if("object"===T(r))for(a in i=!0,r)z(t,e,a,r[a],!0,o,s);else if(void 0!==n&&(i=!0,y(n)||(s=!0),u&&(s?(e.call(t,n),e=null):(u=e,e=function(t,e,r){return u.call(w(t),r)})),e))for(;a<l;a++)e(t[a],r,s?n:n.call(t[a],a,e(t[a],r)));return i?t:u?e.call(t):l?e(t[0],r):o},Y=/^-ms-/,X=/-([a-z])/g;function H(t,e){return e.toUpperCase()}function q(t){return t.replace(Y,"ms-").replace(X,H)}var Z=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Z(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,r){var n,i=this.cache(t);if("string"==typeof e)i[q(e)]=r;else for(n in e)i[q(n)]=e[n];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][q(e)]},access:function(t,e,r){return void 0===e||e&&"string"==typeof e&&void 0===r?this.get(t,e):(this.set(t,e,r),void 0!==r?r:e)},remove:function(t,e){var r,n=t[this.expando];if(void 0!==n){if(void 0!==e){r=(e=Array.isArray(e)?e.map(q):(e=q(e))in n?[e]:e.match(N)||[]).length;for(;r--;)delete n[e[r]]}(void 0===e||w.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var J=new Q,K=new Q,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function rt(t,e,r){var n;if(void 0===r&&1===t.nodeType)if(n="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(r=t.getAttribute(n))){try{r=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(r)}catch(t){}K.set(t,e,r)}else r=void 0;return r}w.extend({hasData:function(t){return K.hasData(t)||J.hasData(t)},data:function(t,e,r){return K.access(t,e,r)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,r){return J.access(t,e,r)},_removeData:function(t,e){J.remove(t,e)}}),w.fn.extend({data:function(t,e){var r,n,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(r=s.length;r--;)s[r]&&0===(n=s[r].name).indexOf("data-")&&(n=q(n.slice(5)),rt(o,n,i[n]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){K.set(this,t)}):z(this,function(e){var r;if(o&&void 0===e)return void 0!==(r=K.get(o,t))?r:void 0!==(r=rt(o,t))?r:void 0;this.each(function(){K.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){K.remove(this,t)})}}),w.extend({queue:function(t,e,r){var n;if(t)return e=(e||"fx")+"queue",n=J.get(t,e),r&&(!n||Array.isArray(r)?n=J.access(t,e,w.makeArray(r)):n.push(r)),n||[]},dequeue:function(t,e){e=e||"fx";var r=w.queue(t,e),n=r.length,i=r.shift(),o=w._queueHooks(t,e);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===e&&r.unshift("inprogress"),delete o.stop,i.call(t,function(){w.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var r=e+"queueHooks";return J.get(t,r)||J.access(t,r,{empty:w.Callbacks("once memory").add(function(){J.remove(t,[e+"queue",r])})})}}),w.fn.extend({queue:function(t,e){var r=2;return"string"!=typeof t&&(e=t,t="fx",r--),arguments.length<r?w.queue(this[0],t):void 0===e?this:this.each(function(){var r=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==r[0]&&w.dequeue(this,t)})},dequeue:function(t){return this.each(function(){w.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var r,n=1,i=w.Deferred(),o=this,s=this.length,a=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(r=J.get(o[s],t+"queueHooks"))&&r.empty&&(n++,r.empty.add(a));return a(),i.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],st=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&w.contains(t.ownerDocument,t)&&"none"===w.css(t,"display")},at=function(t,e,r,n){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in i=r.apply(t,n||[]),e)t.style[o]=s[o];return i};function lt(t,e,r,n){var i,o,s=20,a=n?function(){return n.cur()}:function(){return w.css(t,e,"")},l=a(),u=r&&r[3]||(w.cssNumber[e]?"":"px"),h=(w.cssNumber[e]||"px"!==u&&+l)&&it.exec(w.css(t,e));if(h&&h[3]!==u){for(l/=2,u=u||h[3],h=+l||1;s--;)w.style(t,e,h+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),h/=o;h*=2,w.style(t,e,h+u),r=r||[]}return r&&(h=+h||+l||0,i=r[1]?h+(r[1]+1)*r[2]:+r[2],n&&(n.unit=u,n.start=h,n.end=i)),i}var ut={};function ht(t){var e,r=t.ownerDocument,n=t.nodeName,i=ut[n];return i||(e=r.body.appendChild(r.createElement(n)),i=w.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ut[n]=i,i)}function ct(t,e){for(var r,n,i=[],o=0,s=t.length;o<s;o++)(n=t[o]).style&&(r=n.style.display,e?("none"===r&&(i[o]=J.get(n,"display")||null,i[o]||(n.style.display="")),""===n.style.display&&st(n)&&(i[o]=ht(n))):"none"!==r&&(i[o]="none",J.set(n,"display",r)));for(o=0;o<s;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}w.fn.extend({show:function(){return ct(this,!0)},hide:function(){return ct(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){st(this)?w(this).show():w(this).hide()})}});var pt=/^(?:checkbox|radio)$/i,dt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ft=/^$|^module$|\/(?:java|ecma)script/i,gt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){var r;return r=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&O(t,e)?w.merge([t],r):r}function mt(t,e){for(var r=0,n=t.length;r<n;r++)J.set(t[r],"globalEval",!e||J.get(e[r],"globalEval"))}gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td;var yt,xt,bt=/<|&#?\w+;/;function _t(t,e,r,n,i){for(var o,s,a,l,u,h,c=e.createDocumentFragment(),p=[],d=0,f=t.length;d<f;d++)if((o=t[d])||0===o)if("object"===T(o))w.merge(p,o.nodeType?[o]:o);else if(bt.test(o)){for(s=s||c.appendChild(e.createElement("div")),a=(dt.exec(o)||["",""])[1].toLowerCase(),l=gt[a]||gt._default,s.innerHTML=l[1]+w.htmlPrefilter(o)+l[2],h=l[0];h--;)s=s.lastChild;w.merge(p,s.childNodes),(s=c.firstChild).textContent=""}else p.push(e.createTextNode(o));for(c.textContent="",d=0;o=p[d++];)if(n&&w.inArray(o,n)>-1)i&&i.push(o);else if(u=w.contains(o.ownerDocument,o),s=vt(c.appendChild(o),"script"),u&&mt(s),r)for(h=0;o=s[h++];)ft.test(o.type||"")&&r.push(o);return c}yt=s.createDocumentFragment().appendChild(s.createElement("div")),(xt=s.createElement("input")).setAttribute("type","radio"),xt.setAttribute("checked","checked"),xt.setAttribute("name","t"),yt.appendChild(xt),m.checkClone=yt.cloneNode(!0).cloneNode(!0).lastChild.checked,yt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!yt.cloneNode(!0).lastChild.defaultValue;var Tt=s.documentElement,wt=/^key/,Et=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,St=/^([^.]*)(?:\.(.+)|)/;function At(){return!0}function Ct(){return!1}function Mt(){try{return s.activeElement}catch(t){}}function Rt(t,e,r,n,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof r&&(n=n||r,r=void 0),e)Rt(t,a,r,n,e[a],o);return t}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=Ct;else if(!i)return t;return 1===o&&(s=i,(i=function(t){return w().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=w.guid++)),t.each(function(){w.event.add(this,e,i,n,r)})}w.event={global:{},add:function(t,e,r,n,i){var o,s,a,l,u,h,c,p,d,f,g,v=J.get(t);if(v)for(r.handler&&(r=(o=r).handler,i=o.selector),i&&w.find.matchesSelector(Tt,i),r.guid||(r.guid=w.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(N)||[""]).length;u--;)d=g=(a=St.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),d&&(c=w.event.special[d]||{},d=(i?c.delegateType:c.bindType)||d,c=w.event.special[d]||{},h=w.extend({type:d,origType:g,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:f.join(".")},o),(p=l[d])||((p=l[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,f,s)||t.addEventListener&&t.addEventListener(d,s)),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=r.guid)),i?p.splice(p.delegateCount++,0,h):p.push(h),w.event.global[d]=!0)},remove:function(t,e,r,n,i){var o,s,a,l,u,h,c,p,d,f,g,v=J.hasData(t)&&J.get(t);if(v&&(l=v.events)){for(u=(e=(e||"").match(N)||[""]).length;u--;)if(d=g=(a=St.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),d){for(c=w.event.special[d]||{},p=l[d=(n?c.delegateType:c.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)h=p[o],!i&&g!==h.origType||r&&r.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(p.splice(o,1),h.selector&&p.delegateCount--,c.remove&&c.remove.call(t,h));s&&!p.length&&(c.teardown&&!1!==c.teardown.call(t,f,v.handle)||w.removeEvent(t,d,v.handle),delete l[d])}else for(d in l)w.event.remove(t,d+e[u],r,n,!0);w.isEmptyObject(l)&&J.remove(t,"handle events")}},dispatch:function(t){var e,r,n,i,o,s,a=w.event.fix(t),l=new Array(arguments.length),u=(J.get(this,"events")||{})[a.type]||[],h=w.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(s=w.event.handlers.call(this,a,u),e=0;(i=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(n=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(t,e){var r,n,i,o,s,a=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],s={},r=0;r<l;r++)void 0===s[i=(n=e[r]).selector+" "]&&(s[i]=n.needsContext?w(i,this).index(u)>-1:w.find(i,this,null,[u]).length),s[i]&&o.push(n);o.length&&a.push({elem:u,handlers:o})}return u=this,l<e.length&&a.push({elem:u,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Mt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Mt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&O(this,"input"))return this.click(),!1},_default:function(t){return O(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,r){t.removeEventListener&&t.removeEventListener(e,r)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?At:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=At,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=At,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=At,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Et.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var r,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||w.contains(this,n))||(t.type=i.origType,r=i.handler.apply(this,arguments),t.type=e),r}}}),w.fn.extend({on:function(t,e,r,n){return Rt(this,t,e,r,n)},one:function(t,e,r,n){return Rt(this,t,e,r,n,1)},off:function(t,e,r){var n,i;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,w(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(r=e,e=void 0),!1===r&&(r=Ct),this.each(function(){w.event.remove(this,t,r,e)})}});var Ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Pt=/<script|<style|<link/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Lt(t,e){return O(t,"table")&&O(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Ft(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Bt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function kt(t,e){var r,n,i,o,s,a,l,u;if(1===e.nodeType){if(J.hasData(t)&&(o=J.access(t),s=J.set(e,o),u=o.events))for(i in delete s.handle,s.events={},u)for(r=0,n=u[i].length;r<n;r++)w.event.add(e,i,u[i][r]);K.hasData(t)&&(a=K.access(t),l=w.extend({},a),K.set(e,l))}}function Nt(t,e,r,n){e=u.apply([],e);var i,o,s,a,l,h,c=0,p=t.length,d=p-1,f=e[0],g=y(f);if(g||p>1&&"string"==typeof f&&!m.checkClone&&Dt.test(f))return t.each(function(i){var o=t.eq(i);g&&(e[0]=f.call(this,i,o.html())),Nt(o,e,r,n)});if(p&&(o=(i=_t(e,t[0].ownerDocument,!1,t,n)).firstChild,1===i.childNodes.length&&(i=o),o||n)){for(a=(s=w.map(vt(i,"script"),Ft)).length;c<p;c++)l=i,c!==d&&(l=w.clone(l,!0,!0),a&&w.merge(s,vt(l,"script"))),r.call(t[c],l,c);if(a)for(h=s[s.length-1].ownerDocument,w.map(s,Bt),c=0;c<a;c++)l=s[c],ft.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):_(l.textContent.replace(It,""),h,l))}return t}function $t(t,e,r){for(var n,i=e?w.filter(e,t):t,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||w.cleanData(vt(n)),n.parentNode&&(r&&w.contains(n.ownerDocument,n)&&mt(vt(n,"script")),n.parentNode.removeChild(n));return t}w.extend({htmlPrefilter:function(t){return t.replace(Ot,"<$1></$2>")},clone:function(t,e,r){var n,i,o,s,a,l,u,h=t.cloneNode(!0),c=w.contains(t.ownerDocument,t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(s=vt(h),n=0,i=(o=vt(t)).length;n<i;n++)a=o[n],l=s[n],u=void 0,"input"===(u=l.nodeName.toLowerCase())&&pt.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(e)if(r)for(o=o||vt(t),s=s||vt(h),n=0,i=o.length;n<i;n++)kt(o[n],s[n]);else kt(t,h);return(s=vt(h,"script")).length>0&&mt(s,!c&&vt(t,"script")),h},cleanData:function(t){for(var e,r,n,i=w.event.special,o=0;void 0!==(r=t[o]);o++)if(Z(r)){if(e=r[J.expando]){if(e.events)for(n in e.events)i[n]?w.event.remove(r,n):w.removeEvent(r,n,e.handle);r[J.expando]=void 0}r[K.expando]&&(r[K.expando]=void 0)}}}),w.fn.extend({detach:function(t){return $t(this,t,!0)},remove:function(t){return $t(this,t)},text:function(t){return z(this,function(t){return void 0===t?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Nt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Lt(this,t).appendChild(t)})},prepend:function(){return Nt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Lt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(vt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return w.clone(this,t,e)})},html:function(t){return z(this,function(t){var e=this[0]||{},r=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!gt[(dt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;r<n;r++)1===(e=this[r]||{}).nodeType&&(w.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Nt(this,arguments,function(e){var r=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(vt(this)),r&&r.replaceChild(e,this))},t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){w.fn[t]=function(t){for(var r,n=[],i=w(t),o=i.length-1,s=0;s<=o;s++)r=s===o?this:this.clone(!0),w(i[s])[e](r),h.apply(n,r.get());return this.pushStack(n)}});var Ut=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),jt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Gt=new RegExp(ot.join("|"),"i");function Wt(t,e,r){var n,i,o,s,a=t.style;return(r=r||jt(t))&&(""!==(s=r.getPropertyValue(e)||r[e])||w.contains(t.ownerDocument,t)||(s=w.style(t,e)),!m.pixelBoxStyles()&&Ut.test(s)&&Gt.test(e)&&(n=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=r.width,a.width=n,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function Vt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(h){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Tt.appendChild(u).appendChild(h);var t=r.getComputedStyle(h);n="1%"!==t.top,l=12===e(t.marginLeft),h.style.right="60%",a=36===e(t.right),i=36===e(t.width),h.style.position="absolute",o=36===h.offsetWidth||"absolute",Tt.removeChild(u),h=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,a,l,u=s.createElement("div"),h=s.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===h.style.backgroundClip,w.extend(m,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o}}))}();var zt=/^(none|table(?!-c[ea]).+)/,Yt=/^--/,Xt={position:"absolute",visibility:"hidden",display:"block"},Ht={letterSpacing:"0",fontWeight:"400"},qt=["Webkit","Moz","ms"],Zt=s.createElement("div").style;function Qt(t){var e=w.cssProps[t];return e||(e=w.cssProps[t]=function(t){if(t in Zt)return t;for(var e=t[0].toUpperCase()+t.slice(1),r=qt.length;r--;)if((t=qt[r]+e)in Zt)return t}(t)||t),e}function Jt(t,e,r){var n=it.exec(e);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):e}function Kt(t,e,r,n,i,o){var s="width"===e?1:0,a=0,l=0;if(r===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===r&&(l+=w.css(t,r+ot[s],!0,i)),n?("content"===r&&(l-=w.css(t,"padding"+ot[s],!0,i)),"margin"!==r&&(l-=w.css(t,"border"+ot[s]+"Width",!0,i))):(l+=w.css(t,"padding"+ot[s],!0,i),"padding"!==r?l+=w.css(t,"border"+ot[s]+"Width",!0,i):a+=w.css(t,"border"+ot[s]+"Width",!0,i));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))),l}function te(t,e,r){var n=jt(t),i=Wt(t,e,n),o="border-box"===w.css(t,"boxSizing",!1,n),s=o;if(Ut.test(i)){if(!r)return i;i="auto"}return s=s&&(m.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===w.css(t,"display",!1,n))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(i=parseFloat(i)||0)+Kt(t,e,r||(o?"border":"content"),s,n,i)+"px"}function ee(t,e,r,n,i){return new ee.prototype.init(t,e,r,n,i)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var r=Wt(t,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,r,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=q(e),l=Yt.test(e),u=t.style;if(l||(e=Qt(a)),s=w.cssHooks[e]||w.cssHooks[a],void 0===r)return s&&"get"in s&&void 0!==(i=s.get(t,!1,n))?i:u[e];"string"===(o=typeof r)&&(i=it.exec(r))&&i[1]&&(r=lt(t,e,i),o="number"),null!=r&&r==r&&("number"===o&&(r+=i&&i[3]||(w.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==r||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(r=s.set(t,r,n))||(l?u.setProperty(e,r):u[e]=r))}},css:function(t,e,r,n){var i,o,s,a=q(e);return Yt.test(e)||(e=Qt(a)),(s=w.cssHooks[e]||w.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,r)),void 0===i&&(i=Wt(t,e,n)),"normal"===i&&e in Ht&&(i=Ht[e]),""===r||r?(o=parseFloat(i),!0===r||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(t,e){w.cssHooks[e]={get:function(t,r,n){if(r)return!zt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?te(t,e,n):at(t,Xt,function(){return te(t,e,n)})},set:function(t,r,n){var i,o=jt(t),s="border-box"===w.css(t,"boxSizing",!1,o),a=n&&Kt(t,e,n,s,o);return s&&m.scrollboxSize()===o.position&&(a-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Kt(t,e,"border",!1,o)-.5)),a&&(i=it.exec(r))&&"px"!==(i[3]||"px")&&(t.style[e]=r,r=w.css(t,e)),Jt(0,r,a)}}}),w.cssHooks.marginLeft=Vt(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-at(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(t,e){w.cssHooks[t+e]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];n<4;n++)i[t+ot[n]+e]=o[n]||o[n-2]||o[0];return i}},"margin"!==t&&(w.cssHooks[t+e].set=Jt)}),w.fn.extend({css:function(t,e){return z(this,function(t,e,r){var n,i,o={},s=0;if(Array.isArray(e)){for(n=jt(t),i=e.length;s<i;s++)o[e[s]]=w.css(t,e[s],!1,n);return o}return void 0!==r?w.style(t,e,r):w.css(t,e)},t,e,arguments.length>1)}}),w.Tween=ee,ee.prototype={constructor:ee,init:function(t,e,r,n,i,o){this.elem=t,this.prop=r,this.easing=i||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(w.cssNumber[r]?"":"px")},cur:function(){var t=ee.propHooks[this.prop];return t&&t.get?t.get(this):ee.propHooks._default.get(this)},run:function(t){var e,r=ee.propHooks[this.prop];return this.options.duration?this.pos=e=w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):ee.propHooks._default.set(this),this}},ee.prototype.init.prototype=ee.prototype,ee.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[w.cssProps[t.prop]]&&!w.cssHooks[t.prop]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}},ee.propHooks.scrollTop=ee.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=ee.prototype.init,w.fx.step={};var re,ne,ie=/^(?:toggle|show|hide)$/,oe=/queueHooks$/;function se(){ne&&(!1===s.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(se):r.setTimeout(se,w.fx.interval),w.fx.tick())}function ae(){return r.setTimeout(function(){re=void 0}),re=Date.now()}function le(t,e){var r,n=0,i={height:t};for(e=e?1:0;n<4;n+=2-e)i["margin"+(r=ot[n])]=i["padding"+r]=t;return e&&(i.opacity=i.width=t),i}function ue(t,e,r){for(var n,i=(he.tweeners[e]||[]).concat(he.tweeners["*"]),o=0,s=i.length;o<s;o++)if(n=i[o].call(r,e,t))return n}function he(t,e,r){var n,i,o=0,s=he.prefilters.length,a=w.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=re||ae(),r=Math.max(0,u.startTime+u.duration-e),n=1-(r/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(n);return a.notifyWith(t,[u,n,r]),n<1&&s?r:(s||a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},r),originalProperties:e,originalOptions:r,startTime:re||ae(),duration:r.duration,tweens:[],createTween:function(e,r){var n=w.Tween(t,u.opts,e,r,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var r=0,n=e?u.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)u.tweens[r].run(1);return e?(a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u,e])):a.rejectWith(t,[u,e]),this}}),h=u.props;for(!function(t,e){var r,n,i,o,s;for(r in t)if(i=e[n=q(r)],o=t[r],Array.isArray(o)&&(i=o[1],o=t[r]=o[0]),r!==n&&(t[n]=o,delete t[r]),(s=w.cssHooks[n])&&"expand"in s)for(r in o=s.expand(o),delete t[n],o)r in t||(t[r]=o[r],e[r]=i);else e[n]=i}(h,u.opts.specialEasing);o<s;o++)if(n=he.prefilters[o].call(u,t,h,u.opts))return y(n.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return w.map(h,ue,u),y(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(he,{tweeners:{"*":[function(t,e){var r=this.createTween(t,e);return lt(r.elem,t,it.exec(e),r),r}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(N);for(var r,n=0,i=t.length;n<i;n++)r=t[n],he.tweeners[r]=he.tweeners[r]||[],he.tweeners[r].unshift(e)},prefilters:[function(t,e,r){var n,i,o,s,a,l,u,h,c="width"in e||"height"in e,p=this,d={},f=t.style,g=t.nodeType&&st(t),v=J.get(t,"fxshow");for(n in r.queue||(null==(s=w._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,w.queue(t,"fx").length||s.empty.fire()})})),e)if(i=e[n],ie.test(i)){if(delete e[n],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[n])continue;g=!0}d[n]=v&&v[n]||w.style(t,n)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(d))for(n in c&&1===t.nodeType&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=v&&v.display)&&(u=J.get(t,"display")),"none"===(h=w.css(t,"display"))&&(u?h=u:(ct([t],!0),u=t.style.display||u,h=w.css(t,"display"),ct([t]))),("inline"===h||"inline-block"===h&&null!=u)&&"none"===w.css(t,"float")&&(l||(p.done(function(){f.display=u}),null==u&&(h=f.display,u="none"===h?"":h)),f.display="inline-block")),r.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]})),l=!1,d)l||(v?"hidden"in v&&(g=v.hidden):v=J.access(t,"fxshow",{display:u}),o&&(v.hidden=!g),g&&ct([t],!0),p.done(function(){for(n in g||ct([t]),J.remove(t,"fxshow"),d)w.style(t,n,d[n])})),l=ue(g?v[n]:0,n,p),n in v||(v[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?he.prefilters.unshift(t):he.prefilters.push(t)}}),w.speed=function(t,e,r){var n=t&&"object"==typeof t?w.extend({},t):{complete:r||!r&&e||y(t)&&t,duration:t,easing:r&&e||e&&!y(e)&&e};return w.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in w.fx.speeds?n.duration=w.fx.speeds[n.duration]:n.duration=w.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.fn.extend({fadeTo:function(t,e,r,n){return this.filter(st).css("opacity",0).show().end().animate({opacity:e},t,r,n)},animate:function(t,e,r,n){var i=w.isEmptyObject(t),o=w.speed(e,r,n),s=function(){var e=he(this,w.extend({},t),o);(i||J.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,r){var n=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof t&&(r=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=w.timers,s=J.get(this);if(i)s[i]&&s[i].stop&&n(s[i]);else for(i in s)s[i]&&s[i].stop&&oe.test(i)&&n(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(r),e=!1,o.splice(i,1));!e&&r||w.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,r=J.get(this),n=r[t+"queue"],i=r[t+"queueHooks"],o=w.timers,s=n?n.length:0;for(r.finish=!0,w.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete r.finish})}}),w.each(["toggle","show","hide"],function(t,e){var r=w.fn[e];w.fn[e]=function(t,n,i){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(le(e,!0),t,n,i)}}),w.each({slideDown:le("show"),slideUp:le("hide"),slideToggle:le("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){w.fn[t]=function(t,r,n){return this.animate(e,t,r,n)}}),w.timers=[],w.fx.tick=function(){var t,e=0,r=w.timers;for(re=Date.now();e<r.length;e++)(t=r[e])()||r[e]!==t||r.splice(e--,1);r.length||w.fx.stop(),re=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ne||(ne=!0,se())},w.fx.stop=function(){ne=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,e){return t=w.fx&&w.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}})},function(){var t=s.createElement("input"),e=s.createElement("select").appendChild(s.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=s.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var ce,pe=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return z(this,w.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){w.removeAttr(this,t)})}}),w.extend({attr:function(t,e,r){var n,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?w.prop(t,e,r):(1===o&&w.isXMLDoc(t)||(i=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?ce:void 0)),void 0!==r?null===r?void w.removeAttr(t,e):i&&"set"in i&&void 0!==(n=i.set(t,r,e))?n:(t.setAttribute(e,r+""),r):i&&"get"in i&&null!==(n=i.get(t,e))?n:null==(n=w.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&O(t,"input")){var r=t.value;return t.setAttribute("type",e),r&&(t.value=r),e}}}},removeAttr:function(t,e){var r,n=0,i=e&&e.match(N);if(i&&1===t.nodeType)for(;r=i[n++];)t.removeAttribute(r)}}),ce={set:function(t,e,r){return!1===e?w.removeAttr(t,r):t.setAttribute(r,r),r}},w.each(w.expr.match.bool.source.match(/\w+/g),function(t,e){var r=pe[e]||w.find.attr;pe[e]=function(t,e,n){var i,o,s=e.toLowerCase();return n||(o=pe[s],pe[s]=i,i=null!=r(t,e,n)?s:null,pe[s]=o),i}});var de=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;function ge(t){return(t.match(N)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(N)||[]}w.fn.extend({prop:function(t,e){return z(this,w.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[w.propFix[t]||t]})}}),w.extend({prop:function(t,e,r){var n,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(t)||(e=w.propFix[e]||e,i=w.propHooks[e]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(t,r,e))?n:t[e]=r:i&&"get"in i&&null!==(n=i.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(w.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(t){var e,r,n,i,o,s,a,l=0;if(y(t))return this.each(function(e){w(this).addClass(t.call(this,e,ve(this)))});if((e=me(t)).length)for(;r=this[l++];)if(i=ve(r),n=1===r.nodeType&&" "+ge(i)+" "){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i!==(a=ge(n))&&r.setAttribute("class",a)}return this},removeClass:function(t){var e,r,n,i,o,s,a,l=0;if(y(t))return this.each(function(e){w(this).removeClass(t.call(this,e,ve(this)))});if(!arguments.length)return this.attr("class","");if((e=me(t)).length)for(;r=this[l++];)if(i=ve(r),n=1===r.nodeType&&" "+ge(i)+" "){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");i!==(a=ge(n))&&r.setAttribute("class",a)}return this},toggleClass:function(t,e){var r=typeof t,n="string"===r||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):y(t)?this.each(function(r){w(this).toggleClass(t.call(this,r,ve(this),e),e)}):this.each(function(){var e,i,o,s;if(n)for(i=0,o=w(this),s=me(t);e=s[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==r||((e=ve(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))})},hasClass:function(t){var e,r,n=0;for(e=" "+t+" ";r=this[n++];)if(1===r.nodeType&&(" "+ge(ve(r))+" ").indexOf(e)>-1)return!0;return!1}});var ye=/\r/g;w.fn.extend({val:function(t){var e,r,n,i=this[0];return arguments.length?(n=y(t),this.each(function(r){var i;1===this.nodeType&&(null==(i=n?t.call(this,r,w(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(t){return null==t?"":t+""})),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(r=e.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(ye,""):null==r?"":r:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ge(w.text(t))}},select:{get:function(t){var e,r,n,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?o+1:i.length;for(n=o<0?l:s?o:0;n<l;n++)if(((r=i[n]).selected||n===o)&&!r.disabled&&(!r.parentNode.disabled||!O(r.parentNode,"optgroup"))){if(e=w(r).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var r,n,i=t.options,o=w.makeArray(e),s=i.length;s--;)((n=i[s]).selected=w.inArray(w.valHooks.option.get(n),o)>-1)&&(r=!0);return r||(t.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=w.inArray(w(t).val(),e)>-1}},m.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),m.focusin="onfocusin"in r;var xe=/^(?:focusinfocus|focusoutblur)$/,be=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(t,e,n,i){var o,a,l,u,h,c,p,d,g=[n||s],v=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(a=d=l=n=n||s,3!==n.nodeType&&8!==n.nodeType&&!xe.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(m=v.split("."),v=m.shift(),m.sort()),h=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:w.makeArray(e,[t]),p=w.event.special[v]||{},i||!p.trigger||!1!==p.trigger.apply(n,e))){if(!i&&!p.noBubble&&!x(n)){for(u=p.delegateType||v,xe.test(u+v)||(a=a.parentNode);a;a=a.parentNode)g.push(a),l=a;l===(n.ownerDocument||s)&&g.push(l.defaultView||l.parentWindow||r)}for(o=0;(a=g[o++])&&!t.isPropagationStopped();)d=a,t.type=o>1?u:p.bindType||v,(c=(J.get(a,"events")||{})[t.type]&&J.get(a,"handle"))&&c.apply(a,e),(c=h&&a[h])&&c.apply&&Z(a)&&(t.result=c.apply(a,e),!1===t.result&&t.preventDefault());return t.type=v,i||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),e)||!Z(n)||h&&y(n[v])&&!x(n)&&((l=n[h])&&(n[h]=null),w.event.triggered=v,t.isPropagationStopped()&&d.addEventListener(v,be),n[v](),t.isPropagationStopped()&&d.removeEventListener(v,be),w.event.triggered=void 0,l&&(n[h]=l)),t.result}},simulate:function(t,e,r){var n=w.extend(new w.Event,r,{type:t,isSimulated:!0});w.event.trigger(n,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each(function(){w.event.trigger(t,e,this)})},triggerHandler:function(t,e){var r=this[0];if(r)return w.event.trigger(t,e,r,!0)}}),m.focusin||w.each({focus:"focusin",blur:"focusout"},function(t,e){var r=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var n=this.ownerDocument||this,i=J.access(n,e);i||n.addEventListener(t,r,!0),J.access(n,e,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=J.access(n,e)-1;i?J.access(n,e,i):(n.removeEventListener(t,r,!0),J.remove(n,e))}}});var _e=r.location,Te=Date.now(),we=/\?/;w.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),e};var Ee=/\[\]$/,Se=/\r?\n/g,Ae=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function Me(t,e,r,n){var i;if(Array.isArray(e))w.each(e,function(e,i){r||Ee.test(t)?n(t,i):Me(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,r,n)});else if(r||"object"!==T(e))n(t,e);else for(i in e)Me(t+"["+i+"]",e[i],r,n)}w.param=function(t,e){var r,n=[],i=function(t,e){var r=y(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==r?"":r)};if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,function(){i(this.name,this.value)});else for(r in t)Me(r,t[r],e,i);return n.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Ce.test(this.nodeName)&&!Ae.test(t)&&(this.checked||!pt.test(t))}).map(function(t,e){var r=w(this).val();return null==r?null:Array.isArray(r)?w.map(r,function(t){return{name:e.name,value:t.replace(Se,"\r\n")}}):{name:e.name,value:r.replace(Se,"\r\n")}}).get()}});var Re=/%20/g,Oe=/#.*$/,Pe=/([?&])_=[^&]*/,De=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ie=/^(?:GET|HEAD)$/,Le=/^\/\//,Fe={},Be={},ke="*/".concat("*"),Ne=s.createElement("a");function $e(t){return function(e,r){"string"!=typeof e&&(r=e,e="*");var n,i=0,o=e.toLowerCase().match(N)||[];if(y(r))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(r)):(t[n]=t[n]||[]).push(r)}}function Ue(t,e,r,n){var i={},o=t===Be;function s(a){var l;return i[a]=!0,w.each(t[a]||[],function(t,a){var u=a(e,r,n);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),s(u),!1)}),l}return s(e.dataTypes[0])||!i["*"]&&s("*")}function je(t,e){var r,n,i=w.ajaxSettings.flatOptions||{};for(r in e)void 0!==e[r]&&((i[r]?t:n||(n={}))[r]=e[r]);return n&&w.extend(!0,t,n),t}Ne.href=_e.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_e.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?je(je(t,w.ajaxSettings),e):je(w.ajaxSettings,t)},ajaxPrefilter:$e(Fe),ajaxTransport:$e(Be),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,a,l,u,h,c,p,d,f=w.ajaxSetup({},e),g=f.context||f,v=f.context&&(g.nodeType||g.jquery)?w(g):w.event,m=w.Deferred(),y=w.Callbacks("once memory"),x=f.statusCode||{},b={},_={},T="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(h){if(!a)for(a={};e=De.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return h?o:null},setRequestHeader:function(t,e){return null==h&&(t=_[t.toLowerCase()]=_[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==h&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(h)E.always(t[E.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||T;return n&&n.abort(e),S(0,e),this}};if(m.promise(E),f.url=((t||f.url||_e.href)+"").replace(Le,_e.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(N)||[""],null==f.crossDomain){u=s.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Ne.protocol+"//"+Ne.host!=u.protocol+"//"+u.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),Ue(Fe,f,e,E),h)return E;for(p in(c=w.event&&f.global)&&0==w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ie.test(f.type),i=f.url.replace(Oe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Re,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(we.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Pe,"$1"),d=(we.test(i)?"&":"?")+"_="+Te+++d),f.url=i+d),f.ifModified&&(w.lastModified[i]&&E.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&E.setRequestHeader("If-None-Match",w.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&E.setRequestHeader("Content-Type",f.contentType),E.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+ke+"; q=0.01":""):f.accepts["*"]),f.headers)E.setRequestHeader(p,f.headers[p]);if(f.beforeSend&&(!1===f.beforeSend.call(g,E,f)||h))return E.abort();if(T="abort",y.add(f.complete),E.done(f.success),E.fail(f.error),n=Ue(Be,f,e,E)){if(E.readyState=1,c&&v.trigger("ajaxSend",[E,f]),h)return E;f.async&&f.timeout>0&&(l=r.setTimeout(function(){E.abort("timeout")},f.timeout));try{h=!1,n.send(b,S)}catch(t){if(h)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,s,a){var u,p,d,b,_,T=e;h||(h=!0,l&&r.clearTimeout(l),n=void 0,o=a||"",E.readyState=t>0?4:0,u=t>=200&&t<300||304===t,s&&(b=function(t,e,r){for(var n,i,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(i in a)if(a[i]&&a[i].test(n)){l.unshift(i);break}if(l[0]in r)o=l[0];else{for(i in r){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),r[o]}(f,E,s)),b=function(t,e,r,n){var i,o,s,a,l,u={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=h.shift();o;)if(t.responseFields[o]&&(r[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(f,b,E,u),u?(f.ifModified&&((_=E.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=_),(_=E.getResponseHeader("etag"))&&(w.etag[i]=_)),204===t||"HEAD"===f.type?T="nocontent":304===t?T="notmodified":(T=b.state,p=b.data,u=!(d=b.error))):(d=T,!t&&T||(T="error",t<0&&(t=0))),E.status=t,E.statusText=(e||T)+"",u?m.resolveWith(g,[p,T,E]):m.rejectWith(g,[E,T,d]),E.statusCode(x),x=void 0,c&&v.trigger(u?"ajaxSuccess":"ajaxError",[E,f,u?p:d]),y.fireWith(g,[E,T]),c&&(v.trigger("ajaxComplete",[E,f]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,r){return w.get(t,e,r,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],function(t,e){w[e]=function(t,r,n,i){return y(r)&&(i=i||n,n=r,r=void 0),w.ajax(w.extend({url:t,type:e,dataType:i,data:r,success:n},w.isPlainObject(t)&&t))}}),w._evalUrl=function(t){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return y(t)?this.each(function(e){w(this).wrapInner(t.call(this,e))}):this.each(function(){var e=w(this),r=e.contents();r.length?r.wrapAll(t):e.append(t)})},wrap:function(t){var e=y(t);return this.each(function(r){w(this).wrapAll(e?t.call(this,r):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Ge={0:200,1223:204},We=w.ajaxSettings.xhr();m.cors=!!We&&"withCredentials"in We,m.ajax=We=!!We,w.ajaxTransport(function(t){var e,n;if(m.cors||We&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ge[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout(function(){e&&n()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),w.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),w.ajaxTransport("script",function(t){var e,r;if(t.crossDomain)return{send:function(n,i){e=w("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",r=function(t){e.remove(),r=null,t&&i("error"===t.type?404:200,t.type)}),s.head.appendChild(e[0])},abort:function(){r&&r()}}});var Ve,ze=[],Ye=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ze.pop()||w.expando+"_"+Te++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,s,a=!1!==t.jsonp&&(Ye.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ye,"$1"+i):!1!==t.jsonp&&(t.url+=(we.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||w.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always(function(){void 0===o?w(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,ze.push(i)),s&&y(o)&&o(s[0]),s=o=void 0}),"script"}),m.createHTMLDocument=((Ve=s.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ve.childNodes.length),w.parseHTML=function(t,e,r){return"string"!=typeof t?[]:("boolean"==typeof e&&(r=e,e=!1),e||(m.createHTMLDocument?((n=(e=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,e.head.appendChild(n)):e=s),o=!r&&[],(i=P.exec(t))?[e.createElement(i[1])]:(i=_t([t],e,o),o&&o.length&&w(o).remove(),w.merge([],i.childNodes)));var n,i,o},w.fn.load=function(t,e,r){var n,i,o,s=this,a=t.indexOf(" ");return a>-1&&(n=ge(t.slice(a)),t=t.slice(0,a)),y(e)?(r=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&w.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(n?w("<div>").append(w.parseHTML(t)).find(n):t)}).always(r&&function(t,e){s.each(function(){r.apply(this,o||[t.responseText,e,t])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){w.fn[e]=function(t){return this.on(e,t)}}),w.expr.pseudos.animated=function(t){return w.grep(w.timers,function(e){return t===e.elem}).length},w.offset={setOffset:function(t,e,r){var n,i,o,s,a,l,u=w.css(t,"position"),h=w(t),c={};"static"===u&&(t.style.position="relative"),a=h.offset(),o=w.css(t,"top"),l=w.css(t,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(s=(n=h.position()).top,i=n.left):(s=parseFloat(o)||0,i=parseFloat(l)||0),y(e)&&(e=e.call(t,r,w.extend({},a))),null!=e.top&&(c.top=e.top-a.top+s),null!=e.left&&(c.left=e.left-a.left+i),"using"in e?e.using.call(t,c):h.css(c)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){w.offset.setOffset(this,t,e)});var e,r,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,r,n=this[0],i={top:0,left:0};if("fixed"===w.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),r=n.ownerDocument,t=n.offsetParent||r.documentElement;t&&(t===r.body||t===r.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((i=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),i.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-w.css(n,"marginTop",!0),left:e.left-i.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||Tt})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var r="pageYOffset"===e;w.fn[t]=function(n){return z(this,function(t,n,i){var o;if(x(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[n];o?o.scrollTo(r?o.pageXOffset:i,r?i:o.pageYOffset):t[n]=i},t,n,arguments.length)}}),w.each(["top","left"],function(t,e){w.cssHooks[e]=Vt(m.pixelPosition,function(t,r){if(r)return r=Wt(t,e),Ut.test(r)?w(t).position()[e]+"px":r})}),w.each({Height:"height",Width:"width"},function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},function(r,n){w.fn[n]=function(i,o){var s=arguments.length&&(r||"boolean"!=typeof i),a=r||(!0===i||!0===o?"margin":"border");return z(this,function(e,r,i){var o;return x(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?w.css(e,r,a):w.style(e,r,i,a)},e,s?i:void 0,s)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){w.fn[e]=function(t,r){return arguments.length>0?this.on(e,null,t,r):this.trigger(e)}}),w.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.fn.extend({bind:function(t,e,r){return this.on(t,null,e,r)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,r,n){return this.on(e,t,r,n)},undelegate:function(t,e,r){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",r)}}),w.proxy=function(t,e){var r,n,i;if("string"==typeof e&&(r=t[e],e=t,t=r),y(t))return n=l.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(l.call(arguments)))}).guid=t.guid=t.guid||w.guid++,i},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=O,w.isFunction=y,w.isWindow=x,w.camelCase=q,w.type=T,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(n=function(){return w}.apply(e,[]))||(t.exports=n);var Xe=r.jQuery,He=r.$;return w.noConflict=function(t){return r.$===w&&(r.$=He),t&&r.jQuery===w&&(r.jQuery=Xe),w},i||(r.jQuery=r.$=w),w})},I1BE:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=(s=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[r].concat(o).concat([i]).join("\n")}var s;return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),e.push(s))}},e}},"IbG+":function(t,e,r){(function(t){
/**
 * @license AngularJS v1.7.5
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e){"use strict";var r={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(t){if(!j(t))return r;U(t.objectMaxDepth)&&(r.objectMaxDepth=i(t.objectMaxDepth)?t.objectMaxDepth:NaN),U(t.urlErrorParamsEnabled)&&J(t.urlErrorParamsEnabled)&&(r.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function i(t){return V(t)&&t>0}function o(t,e){e=e||Error;var n="https://errors.angularjs.org/1.7.5/",i=n.replace(".","\\.")+"[\\s\\S]*",o=new RegExp(i,"g");return function(){var i,s,a=arguments[0],l=arguments[1],u="["+(t?t+":":"")+a+"] ",h=dt(arguments,2).map(function(t){return Ht(t,r.objectMaxDepth)});if(u+=l.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e<h.length?h[e].replace(o,""):t}),u+="\n"+n+(t?t+"/":"")+a,r.urlErrorParamsEnabled)for(s=0,i="?";s<h.length;s++,i="&")u+=i+"p"+s+"="+encodeURIComponent(h[s]);return new e(u)}}var s,a,l,u,h=/^\/(.+)\/([a-z]*)$/,c="validity",p=Object.prototype.hasOwnProperty,d=function(t){return W(t)?t.toLowerCase():t},f=function(t){return W(t)?t.toUpperCase():t},g=[].slice,v=[].splice,m=[].push,y=Object.prototype.toString,x=Object.getPrototypeOf,b=o("ng"),_=e.angular||(e.angular={}),T=0;function w(t){if(null==t||Z(t))return!1;if(Y(t)||W(t)||a&&t instanceof a)return!0;var e="length"in Object(t)&&t.length;return V(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function E(t,e,r){var n,i;if(t)if(H(t))for(n in t)"prototype"!==n&&"length"!==n&&"name"!==n&&t.hasOwnProperty(n)&&e.call(r,t[n],n,t);else if(Y(t)||w(t)){var o="object"!=typeof t;for(n=0,i=t.length;n<i;n++)(o||n in t)&&e.call(r,t[n],n,t)}else if(t.forEach&&t.forEach!==E)t.forEach(e,r,t);else if(G(t))for(n in t)e.call(r,t[n],n,t);else if("function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t);else for(n in t)p.call(t,n)&&e.call(r,t[n],n,t);return t}function S(t,e,r){for(var n=Object.keys(t).sort(),i=0;i<n.length;i++)e.call(r,t[n[i]],n[i]);return n}function A(t){return function(e,r){t(r,e)}}function C(){return++T}function M(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function R(t,e,r){for(var n=t.$$hashKey,i=0,o=e.length;i<o;++i){var s=e[i];if(j(s)||H(s))for(var a=Object.keys(s),l=0,u=a.length;l<u;l++){var h=a[l],c=s[h];r&&j(c)?z(c)?t[h]=new Date(c.valueOf()):q(c)?t[h]=new RegExp(c):c.nodeName?t[h]=c.cloneNode(!0):nt(c)?t[h]=c.clone():(j(t[h])||(t[h]=Y(c)?[]:{}),R(t[h],[c],!0)):t[h]=c}}return M(t,n),t}function O(t){return R(t,g.call(arguments,1),!1)}function P(t){return R(t,g.call(arguments,1),!0)}function D(t){return parseInt(t,10)}s=e.document.documentMode;var I=Number.isNaN||function(t){return t!=t};function L(t,e){return O(Object.create(t),e)}function F(){}function B(t){return t}function k(t){return function(){return t}}function N(t){return H(t.toString)&&t.toString!==y}function $(t){return void 0===t}function U(t){return void 0!==t}function j(t){return null!==t&&"object"==typeof t}function G(t){return null!==t&&"object"==typeof t&&!x(t)}function W(t){return"string"==typeof t}function V(t){return"number"==typeof t}function z(t){return"[object Date]"===y.call(t)}function Y(t){return Array.isArray(t)||t instanceof Array}function X(t){switch(y.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function H(t){return"function"==typeof t}function q(t){return"[object RegExp]"===y.call(t)}function Z(t){return t&&t.window===t}function Q(t){return t&&t.$evalAsync&&t.$watch}function J(t){return"boolean"==typeof t}function K(t){return t&&H(t.then)}F.$inject=[],B.$inject=[];var tt=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var et=function(t){return W(t)?t.trim():t},rt=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function it(t){return d(t.nodeName||t[0]&&t[0].nodeName)}function ot(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function st(t,e){var r=t.indexOf(e);return r>=0&&t.splice(r,1),r}function at(t,e,r){var n,o,s=[],a=[];if(r=i(r)?r:NaN,e){if((o=e)&&V(o.length)&&tt.test(y.call(o))||(n=e,"[object ArrayBuffer]"===y.call(n)))throw b("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw b("cpi","Can't copy! Source and destination are identical.");return Y(e)?e.length=0:E(e,function(t,r){"$$hashKey"!==r&&delete e[r]}),s.push(t),a.push(e),l(t,e,r)}return u(t,r);function l(t,e,r){if(--r<0)return"...";var n,i=e.$$hashKey;if(Y(t))for(var o=0,s=t.length;o<s;o++)e.push(u(t[o],r));else if(G(t))for(n in t)e[n]=u(t[n],r);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=u(t[n],r));else for(n in t)p.call(t,n)&&(e[n]=u(t[n],r));return M(e,i),e}function u(t,e){if(!j(t))return t;var r=s.indexOf(t);if(-1!==r)return a[r];if(Z(t)||Q(t))throw b("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var n=!1,i=function(t){switch(y.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(u(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var r=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return r.lastIndex=t.lastIndex,r;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(H(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=Y(t)?[]:Object.create(x(t)),n=!0),s.push(t),a.push(i),n?l(t,i,e):i}}function lt(t,e){return t===e||t!=t&&e!=e}function ut(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var r,n,i,o=typeof t;if(o===typeof e&&"object"===o){if(!Y(t)){if(z(t))return!!z(e)&&lt(t.getTime(),e.getTime());if(q(t))return!!q(e)&&t.toString()===e.toString();if(Q(t)||Q(e)||Z(t)||Z(e)||Y(e)||z(e)||q(e))return!1;for(n in i=Ut(),t)if("$"!==n.charAt(0)&&!H(t[n])){if(!ut(t[n],e[n]))return!1;i[n]=!0}for(n in e)if(!(n in i)&&"$"!==n.charAt(0)&&U(e[n])&&!H(e[n]))return!1;return!0}if(!Y(e))return!1;if((r=t.length)===e.length){for(n=0;n<r;n++)if(!ut(t[n],e[n]))return!1;return!0}}return!1}var ht=function(){if(!U(ht.rules)){var t=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(t){var r=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp");ht.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else ht.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ht.rules},ct=function(){if(U(ct.name_))return ct.name_;var t,r,n,i,o=Ct.length;for(r=0;r<o;++r)if(n=Ct[r],t=e.document.querySelector("["+n.replace(":","\\:")+"jq]")){i=t.getAttribute(n+"jq");break}return ct.name_=i};function pt(t,e,r){return t.concat(g.call(e,r))}function dt(t,e){return g.call(t,e||0)}function ft(t,e){var r=arguments.length>2?dt(arguments,2):[];return!H(e)||e instanceof RegExp?e:r.length?function(){return arguments.length?e.apply(t,pt(r,arguments,0)):e.apply(t,r)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function gt(t,r){var n=r;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?n=void 0:Z(r)?n="$WINDOW":r&&e.document===r?n="$DOCUMENT":Q(r)&&(n="$SCOPE"),n}function vt(t,e){if(!$(t))return V(e)||(e=e?2:null),JSON.stringify(t,gt,e)}function mt(t){return W(t)?JSON.parse(t):t}var yt=/:/g;function xt(t,e){t=t.replace(yt,"");var r=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return I(r)?e:r}function bt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function _t(t,e,r){r=r?-1:1;var n=t.getTimezoneOffset();return bt(t,r*(xt(e,n)-n))}function Tt(t){t=a(t).clone().empty();var e=a("<div></div>").append(t).html();try{return t[0].nodeType===Wt?d(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+d(e)})}catch(t){return d(e)}}function wt(t){try{return decodeURIComponent(t)}catch(t){}}function Et(t){var e={};return E((t||"").split("&"),function(t){var r,n,i;t&&(n=t=t.replace(/\+/g,"%20"),-1!==(r=t.indexOf("="))&&(n=t.substring(0,r),i=t.substring(r+1)),U(n=wt(n))&&(i=!U(i)||wt(i),p.call(e,n)?Y(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i))}),e}function St(t){return At(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function At(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var Ct=["ng-","data-ng-","ng:","x-ng-"];var Mt=function(t){var r=t.currentScript;if(!r)return!0;if(!(r instanceof e.HTMLScriptElement||r instanceof e.SVGScriptElement))return!1;var n=r.attributes;return[n.getNamedItem("src"),n.getNamedItem("href"),n.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var r=t.createElement("a");if(r.href=e.value,t.location.origin===r.origin)return!0;switch(r.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(e.document);function Rt(t,r){var n,i,o={};if(E(Ct,function(e){var r=e+"app";!n&&t.hasAttribute&&t.hasAttribute(r)&&(n=t,i=t.getAttribute(r))}),E(Ct,function(e){var r,o=e+"app";!n&&(r=t.querySelector("["+o.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(o))}),n){if(!Mt){try{e.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.")}catch(t){}return}o.strictDi=null!==function(t,e){var r,n,i=Ct.length;for(n=0;n<i;++n)if(r=Ct[n]+e,W(r=t.getAttribute(r)))return r;return null}(n,"strict-di"),r(n,i?[i]:[],o)}}function Ot(t,r,n){j(n)||(n={});n=O({strictDi:!1},n);var i=function(){if((t=a(t)).injector()){var i=t[0]===e.document?"document":Tt(t);throw b("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(r=r||[]).unshift(["$provide",function(e){e.value("$rootElement",t)}]),n.debugInfoEnabled&&r.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),r.unshift("ng");var o=Je(r,n.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,r,n){t.$apply(function(){e.data("$injector",n),r(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(e&&o.test(e.name)&&(n.debugInfoEnabled=!0,e.name=e.name.replace(o,"")),e&&!s.test(e.name))return i();e.name=e.name.replace(s,""),_.resumeBootstrap=function(t){return E(t,function(t){r.push(t)}),i()},H(_.resumeDeferredBootstrap)&&_.resumeDeferredBootstrap()}function Pt(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function Dt(t){var e=_.element(t).injector();if(!e)throw b("test","no injector found for element argument to getTestability");return e.get("$$testability")}var It=/[A-Z]/g;function Lt(t,e){return e=e||"_",t.replace(It,function(t,r){return(r?e:"")+t.toLowerCase()})}var Ft=!1;function Bt(t,e,r){if(!t)throw b("areq","Argument '{0}' is {1}",e||"?",r||"required");return t}function kt(t,e,r){return r&&Y(t)&&(t=t[t.length-1]),Bt(H(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Nt(t,e){if("hasOwnProperty"===t)throw b("badname","hasOwnProperty is not a valid {0} name",e)}function $t(t){for(var e,r=t[0],n=t[t.length-1],i=1;r!==n&&(r=r.nextSibling);i++)(e||t[i]!==r)&&(e||(e=a(g.call(t,0,i))),e.push(r));return e||t}function Ut(){return Object.create(null)}function jt(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!N(t)||Y(t)||z(t)?vt(t):t.toString()}return t}var Gt=1,Wt=3,Vt=8,zt=9,Yt=11;function Xt(t,e){if(Y(t)){e=e||[];for(var r=0,n=t.length;r<n;r++)e[r]=t[r]}else if(j(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function Ht(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):$(t)?"undefined":"string"!=typeof t?function(t,e){var r=[];return i(e)&&(t=_.copy(t,null,e)),JSON.stringify(t,function(t,e){if(j(e=gt(t,e))){if(r.indexOf(e)>=0)return"...";r.push(e)}return e})}(t,e):t}var qt={full:"1.7.5",major:1,minor:7,dot:5,codeName:"anti-prettification"};de.expando="ng339";var Zt=de.cache={},Qt=1;de._data=function(t){return this.cache[t[this.expando]]||{}};var Jt=/-([a-z])/g,Kt=/^-ms-/,te={mouseleave:"mouseout",mouseenter:"mouseover"},ee=o("jqLite");function re(t,e){return e.toUpperCase()}function ne(t){return t.replace(Jt,re)}var ie=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,oe=/<|&#?\w+;/,se=/<([\w:-]+)/,ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,le={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ue(t){return!oe.test(t)}function he(t){var e=t.nodeType;return e===Gt||!e||e===zt}function ce(t,e){var r,n,i,o,s=e.createDocumentFragment(),a=[];if(ue(t))a.push(e.createTextNode(t));else{for(r=s.appendChild(e.createElement("div")),n=(se.exec(t)||["",""])[1].toLowerCase(),i=le[n]||le._default,r.innerHTML=i[1]+t.replace(ae,"<$1></$2>")+i[2],o=i[0];o--;)r=r.lastChild;a=pt(a,r.childNodes),(r=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",E(a,function(t){s.appendChild(t)}),s}le.optgroup=le.option,le.tbody=le.tfoot=le.colgroup=le.caption=le.thead,le.th=le.td;var pe=e.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function de(t){if(t instanceof de)return t;var r,n,i,o;if(W(t)&&(t=et(t),r=!0),!(this instanceof de)){if(r&&"<"!==t.charAt(0))throw ee("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new de(t)}r?Se(this,(n=t,i=i||e.document,(o=ie.exec(n))?[i.createElement(o[1])]:(o=ce(n,i))?o.childNodes:[])):H(t)?Oe(t):Se(this,t)}function fe(t){return t.cloneNode(!0)}function ge(t,e){!e&&he(t)&&a.cleanData([t]),t.querySelectorAll&&a.cleanData(t.querySelectorAll("*"))}function ve(t){var e;for(e in t)return!1;return!0}function me(t){var e=t.ng339,r=e&&Zt[e],n=r&&r.events,i=r&&r.data;i&&!ve(i)||n&&!ve(n)||(delete Zt[e],t.ng339=void 0)}function ye(t,e,r,n){if(U(n))throw ee("offargs","jqLite#off() does not support the `selector` argument");var i=be(t),o=i&&i.events,s=i&&i.handle;if(s){if(e){var a=function(e){var n=o[e];U(r)&&st(n||[],r),U(r)&&n&&n.length>0||(t.removeEventListener(e,s),delete o[e])};E(e.split(" "),function(t){a(t),te[t]&&a(te[t])})}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,s),delete o[e];me(t)}}function xe(t,e){var r=t.ng339,n=r&&Zt[r];n&&(e?delete n.data[e]:n.data={},me(t))}function be(t,e){var r=t.ng339,n=r&&Zt[r];return e&&!n&&(t.ng339=r=++Qt,n=Zt[r]={events:{},data:{},handle:void 0}),n}function _e(t,e,r){if(he(t)){var n,i=U(r),o=!i&&e&&!j(e),s=!e,a=be(t,!o),l=a&&a.data;if(i)l[ne(e)]=r;else{if(s)return l;if(o)return l&&l[ne(e)];for(n in e)l[ne(n)]=e[n]}}}function Te(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function we(t,e){if(e&&t.setAttribute){var r=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),n=r;E(e.split(" "),function(t){t=et(t),n=n.replace(" "+t+" "," ")}),n!==r&&t.setAttribute("class",et(n))}}function Ee(t,e){if(e&&t.setAttribute){var r=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),n=r;E(e.split(" "),function(t){t=et(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),n!==r&&t.setAttribute("class",et(n))}}function Se(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var r=e.length;if("number"==typeof r&&e.window!==e){if(r)for(var n=0;n<r;n++)t[t.length++]=e[n]}else t[t.length++]=e}}function Ae(t,e){return Ce(t,"$"+(e||"ngController")+"Controller")}function Ce(t,e,r){t.nodeType===zt&&(t=t.documentElement);for(var n=Y(e)?e:[e];t;){for(var i=0,o=n.length;i<o;i++)if(U(r=a.data(t,n[i])))return r;t=t.parentNode||t.nodeType===Yt&&t.host}}function Me(t){for(ge(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Re(t,e){e||ge(t);var r=t.parentNode;r&&r.removeChild(t)}function Oe(t){function r(){e.document.removeEventListener("DOMContentLoaded",r),e.removeEventListener("load",r),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",r),e.addEventListener("load",r))}var Pe=de.prototype={ready:Oe,toString:function(){var t=[];return E(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return a(t>=0?this[t]:this[this.length+t])},length:0,push:m,sort:[].sort,splice:[].splice},De={};E("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){De[d(t)]=t});var Ie={};E("input,select,option,textarea,button,form,details".split(","),function(t){Ie[t]=!0});var Le={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Fe(t,e){var r=De[e.toLowerCase()];return r&&Ie[it(t)]&&r}function Be(t,e,r){r.call(t,e)}function ke(t,e,r){var n=e.relatedTarget;n&&(n===t||pe.call(t,n))||r.call(t,e)}function Ne(){this.$get=function(){return O(de,{hasClass:function(t,e){return t.attr&&(t=t[0]),Te(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Ee(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),we(t,e)}})}}function $e(t,e){var r=t&&t.$$hashKey;if(r)return"function"==typeof r&&(r=t.$$hashKey()),r;var n=typeof t;return r="function"===n||"object"===n&&null!==t?t.$$hashKey=n+":"+(e||C)():n+":"+t}E({data:_e,removeData:xe,hasData:function(t){for(var e in Zt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,r=t.length;e<r;e++)xe(t[e]),ye(t[e])}},function(t,e){de[e]=t}),E({data:_e,inheritedData:Ce,scope:function(t){return a.data(t,"$scope")||Ce(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return a.data(t,"$isolateScope")||a.data(t,"$isolateScopeNoTemplate")},controller:Ae,injector:function(t){return Ce(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Te,css:function(t,e,r){if(e=function(t){return ne(t.replace(Kt,"ms-"))}(e),!U(r))return t.style[e];t.style[e]=r},attr:function(t,e,r){var n,i=t.nodeType;if(i!==Wt&&2!==i&&i!==Vt&&t.getAttribute){var o=d(e),s=De[o];if(!U(r))return n=t.getAttribute(e),s&&null!==n&&(n=o),null===n?void 0:n;null===r||!1===r&&s?t.removeAttribute(e):t.setAttribute(e,s?o:r)}},prop:function(t,e,r){if(!U(r))return t[e];t[e]=r},text:function(){return t.$dv="",t;function t(t,e){if($(e)){var r=t.nodeType;return r===Gt||r===Wt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if($(e)){if(t.multiple&&"select"===it(t)){var r=[];return E(t.options,function(t){t.selected&&r.push(t.value||t.text)}),r}return t.value}t.value=e},html:function(t,e){if($(e))return t.innerHTML;ge(t,!0),t.innerHTML=e},empty:Me},function(t,e){de.prototype[e]=function(e,r){var n,i,o=this.length;if(t!==Me&&$(2===t.length&&t!==Te&&t!==Ae?e:r)){if(j(e)){for(n=0;n<o;n++)if(t===_e)t(this[n],e);else for(i in e)t(this[n],i,e[i]);return this}for(var s=t.$dv,a=$(s)?Math.min(o,1):o,l=0;l<a;l++){var u=t(this[l],e,r);s=s?s+u:u}return s}for(n=0;n<o;n++)t(this[n],e,r);return this}}),E({removeData:xe,on:function(t,e,r,n){if(U(n))throw ee("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(he(t)){var i=be(t,!0),o=i.events,s=i.handle;s||(s=i.handle=function(t,e){var r=function(r,n){r.isDefaultPrevented=function(){return r.defaultPrevented};var i=e[n||r.type],o=i?i.length:0;if(o){if($(r.immediatePropagationStopped)){var s=r.stopImmediatePropagation;r.stopImmediatePropagation=function(){r.immediatePropagationStopped=!0,r.stopPropagation&&r.stopPropagation(),s&&s.call(r)}}r.isImmediatePropagationStopped=function(){return!0===r.immediatePropagationStopped};var a=i.specialHandlerWrapper||Be;o>1&&(i=Xt(i));for(var l=0;l<o;l++)r.isImmediatePropagationStopped()||a(t,r,i[l])}};return r.elem=t,r}(t,o));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],l=a.length,u=function(e,n,i){var a=o[e];a||((a=o[e]=[]).specialHandlerWrapper=n,"$destroy"===e||i||t.addEventListener(e,s)),a.push(r)};l--;)e=a[l],te[e]?(u(te[e],ke),u(e,void 0,!0)):u(e)}},off:ye,one:function(t,e,r){(t=a(t)).on(e,function n(){t.off(e,r),t.off(e,n)}),t.on(e,r)},replaceWith:function(t,e){var r,n=t.parentNode;ge(t),E(new de(e),function(e){r?n.insertBefore(e,r.nextSibling):n.replaceChild(e,t),r=e})},children:function(t){var e=[];return E(t.childNodes,function(t){t.nodeType===Gt&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var r=t.nodeType;if(r===Gt||r===Yt)for(var n=0,i=(e=new de(e)).length;n<i;n++){var o=e[n];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===Gt){var r=t.firstChild;E(new de(e),function(e){t.insertBefore(e,r)})}},wrap:function(t,e){var r,n,i;r=t,n=a(e).eq(0).clone()[0],(i=r.parentNode)&&i.replaceChild(n,r),n.appendChild(r)},remove:Re,detach:function(t){Re(t,!0)},after:function(t,e){var r=t,n=t.parentNode;if(n)for(var i=0,o=(e=new de(e)).length;i<o;i++){var s=e[i];n.insertBefore(s,r.nextSibling),r=s}},addClass:Ee,removeClass:we,toggleClass:function(t,e,r){e&&E(e.split(" "),function(e){var n=r;$(n)&&(n=!Te(t,e)),(n?Ee:we)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Yt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:fe,triggerHandler:function(t,e,r){var n,i,o,s=e.type||e,a=be(t),l=a&&a.events,u=l&&l[s];u&&(n={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:F,type:s,target:t},e.type&&(n=O(n,e)),i=Xt(u),o=r?[n].concat(r):[n],E(i,function(e){n.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){de.prototype[e]=function(e,r,n){for(var i,o=0,s=this.length;o<s;o++)$(i)?U(i=t(this[o],e,r,n))&&(i=a(i)):Se(i,t(this[o],e,r,n));return U(i)?i:this}}),de.prototype.bind=de.prototype.on,de.prototype.unbind=de.prototype.off;var Ue=Object.create(null);function je(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}je.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return I(t)?Ue:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var r=this._idx(t);-1===r&&(r=this._lastIndex=this._keys.length),this._keys[r]=t,this._values[r]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Ge=je,We=[function(){this.$get=[function(){return Ge}]}],Ve=/^([^(]+?)=>/,ze=/^[^(]*\(\s*([^)]*)\)/m,Ye=/,/,Xe=/^\s*(_?)(\S+?)\1\s*$/,He=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,qe=o("$injector");function Ze(t){return Function.prototype.toString.call(t)}function Qe(t){var e=Ze(t).replace(He,"");return e.match(Ve)||e.match(ze)}function Je(t,e){e=!0===e;var r={},n="Provider",i=[],o=new Ge,a={$provide:{provider:f(g),factory:f(m),service:f(function(t,e){return m(t,["$injector",function(t){return t.instantiate(e)}])}),value:f(function(t,e){return m(t,k(e),!1)}),constant:f(function(t,e){Nt(t,"constant"),a[t]=e,h[t]=e}),decorator:function(t,e){var r=l.get(t+n),i=r.$get;r.$get=function(){var t=p.invoke(i,r);return p.invoke(e,null,{$delegate:t})}}}},l=a.$injector=x(a,function(t,e){throw _.isString(e)&&i.push(e),qe("unpr","Unknown provider: {0}",i.join(" <- "))}),h={},c=x(h,function(t,e){var r=l.get(t+n,e);return p.invoke(r.$get,r,void 0,t)}),p=c;a["$injector"+n]={$get:k(c)},p.modules=l.modules=Ut();var d=y(t);return(p=c.get("$injector")).strictDi=e,E(d,function(t){t&&p.invoke(t)}),p.loadNewModules=function(t){E(y(t),function(t){t&&p.invoke(t)})},p;function f(t){return function(e,r){if(!j(e))return t(e,r);E(e,A(t))}}function g(t,e){if(Nt(t,"service"),(H(e)||Y(e))&&(e=l.instantiate(e)),!e.$get)throw qe("pget","Provider '{0}' must define $get factory method.",t);return a[t+n]=e}function v(t,e){return function(){var r=p.invoke(e,this);if($(r))throw qe("undef","Provider '{0}' must return a value from $get factory method.",t);return r}}function m(t,e,r){return g(t,{$get:!1!==r?v(t,e):e})}function y(t){Bt($(t)||Y(t),"modulesToLoad","not an array");var e,r=[];return E(t,function(t){if(!o.get(t)){o.set(t,!0);try{W(t)?(e=u(t),p.modules[t]=e,r=r.concat(y(e.requires)).concat(e._runBlocks),n(e._invokeQueue),n(e._configBlocks)):H(t)?r.push(l.invoke(t)):Y(t)?r.push(l.invoke(t)):kt(t,"module")}catch(e){throw Y(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),qe("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function n(t){var e,r;for(e=0,r=t.length;e<r;e++){var n=t[e],i=l.get(n[0]);i[n[1]].apply(i,n[2])}}}),r}function x(t,o){function l(e,n){if(t.hasOwnProperty(e)){if(t[e]===r)throw qe("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=r,t[e]=o(e,n),t[e]}catch(n){throw t[e]===r&&delete t[e],n}finally{i.shift()}}function u(t,r,n){for(var i=[],o=Je.$$annotate(t,e,n),s=0,a=o.length;s<a;s++){var u=o[s];if("string"!=typeof u)throw qe("itkn","Incorrect injection token! Expected service name as string, got {0}",u);i.push(r&&r.hasOwnProperty(u)?r[u]:l(u,n))}return i}return{invoke:function(t,e,r,n){"string"==typeof r&&(n=r,r=null);var i=u(t,r,n);return Y(t)&&(t=t[t.length-1]),function(t){if(s||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return J(e)||(e=t.$$ngIsClass=/^class\b/.test(Ze(t))),e}(t)?(i.unshift(null),new(Function.prototype.bind.apply(t,i))):t.apply(e,i)},instantiate:function(t,e,r){var n=Y(t)?t[t.length-1]:t,i=u(t,e,r);return i.unshift(null),new(Function.prototype.bind.apply(n,i))},get:l,annotate:Je.$$annotate,has:function(e){return a.hasOwnProperty(e+n)||t.hasOwnProperty(e)}}}}function Ke(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(r,n,i){var o=r.document;function s(t){if(t){t.scrollIntoView();var e=function(){var t=l.yOffset;if(H(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==r.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else V(t)||(t=0);return t}();if(e){var n=t.getBoundingClientRect().top;r.scrollBy(0,n-e)}}else r.scrollTo(0,0)}function l(t){var e,r,i;(t=W(t)?t:V(t)?t.toString():n.hash())?(e=o.getElementById(t))?s(e):(r=o.getElementsByName(t),i=null,Array.prototype.some.call(r,function(t){if("a"===it(t))return i=t,!0}),(e=i)?s(e):"top"===t&&s(null)):s(null)}return t&&i.$watch(function(){return n.hash()},function(t,r){var n,o;t===r&&""===t||(n=function(){i.$evalAsync(l)},"complete"===(o=o||e).document.readyState?o.setTimeout(n):a(o).on("load",n))}),l}]}Je.$$annotate=function(t,e,r){var n,i;if("function"==typeof t){if(!(n=t.$inject)){if(n=[],t.length){if(e)throw W(r)&&r||(r=t.name||function(t){var e=Qe(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),qe("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",r);E(Qe(t)[1].split(Ye),function(t){t.replace(Xe,function(t,e,r){n.push(r)})})}t.$inject=n}}else Y(t)?(kt(t[i=t.length-1],"fn"),n=t.slice(0,i)):kt(t,"fn",!0);return n};var tr=o("$animate"),er=1;function rr(t,e){return t||e?t?e?(Y(t)&&(t=t.join(" ")),Y(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function nr(t){return j(t)?t:{}}var ir=function(){this.$get=F},or=function(){var t=new Ge,e=[];this.$get=["$$AnimateRunner","$rootScope",function(r,n){return{enabled:F,on:F,off:F,pin:F,push:function(s,a,l,u){u&&u(),(l=l||{}).from&&s.css(l.from),l.to&&s.css(l.to),(l.addClass||l.removeClass)&&function(r,s,a){var l=t.get(r)||{},u=i(l,s,!0),h=i(l,a,!1);(u||h)&&(t.set(r,l),e.push(r),1===e.length&&n.$$postDigest(o))}(s,l.addClass,l.removeClass);var h=new r;return h.complete(),h}};function i(t,e,r){var n=!1;return e&&E(e=W(e)?e.split(" "):Y(e)?e:[],function(e){e&&(n=!0,t[e]=r)}),n}function o(){E(e,function(e){var r=t.get(e);if(r){var n=function(t){W(t)&&(t=t.split(" "));var e=Ut();return E(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),i="",o="";E(r,function(t,e){t!==!!n[e]&&(t?i+=(i.length?" ":"")+e:o+=(o.length?" ":"")+e)}),E(e,function(t){i&&Ee(t,i),o&&we(t,o)}),t.delete(e)}}),e.length=0}}]},sr=["$provide",function(t){var e=this,r=null,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(r,n){if(r&&"."!==r.charAt(0))throw tr("notcsel","Expecting class selector starting with '.' got '{0}'.",r);var i=r+"-animation";e.$$registeredAnimations[r.substr(1)]=i,t.factory(i,n)},this.customFilter=function(t){return 1===arguments.length&&(n=H(t)?t:null),n},this.classNameFilter=function(t){if(1===arguments.length&&((r=t instanceof RegExp?t:null)&&new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(r.toString())))throw r=null,tr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return r},this.$get=["$$animateQueue",function(t){function e(t,e,r){if(r){var n=function(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.nodeType===er)return r}}(r);!n||n.parentNode||n.previousElementSibling||(r=null)}r?r.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(r,n,i,o){return n=n&&a(n),i=i&&a(i),e(r,n=n||i.parent(),i),t.push(r,"enter",nr(o))},move:function(r,n,i,o){return n=n&&a(n),i=i&&a(i),e(r,n=n||i.parent(),i),t.push(r,"move",nr(o))},leave:function(e,r){return t.push(e,"leave",nr(r),function(){e.remove()})},addClass:function(e,r,n){return(n=nr(n)).addClass=rr(n.addclass,r),t.push(e,"addClass",n)},removeClass:function(e,r,n){return(n=nr(n)).removeClass=rr(n.removeClass,r),t.push(e,"removeClass",n)},setClass:function(e,r,n,i){return(i=nr(i)).addClass=rr(i.addClass,r),i.removeClass=rr(i.removeClass,n),t.push(e,"setClass",i)},animate:function(e,r,n,i,o){return(o=nr(o)).from=o.from?O(o.from,r):r,o.to=o.to?O(o.to,n):n,i=i||"ng-inline-animate",o.tempClasses=rr(o.tempClasses,i),t.push(e,"animate",o)}}}]}],ar=function(){this.$get=["$$rAF",function(t){var e=[];function r(r){e.push(r),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return r(function(){t=!0}),function(e){t?e():r(e)}}}]},lr=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,r,n,i){function o(t){this.setHost(t);var e=r();this._doneCallbacks=[],this._tick=function(t){n()?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var r=0;!function n(){if(r===t.length)return void e(!0);t[r](function(t){!1!==t?(r++,n()):e(!1)})}()},o.all=function(t,e){var r=0,n=!0;function i(i){n=n&&i,++r===t.length&&e(n)}E(t,function(t){t.done(i)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:F,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,r){e.done(function(e){!1===e?r():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(E(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},ur=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,r){return function(e,n){var i=n||{};i.$$prepared||(i=at(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var o,s=new r;return{start:a,end:a};function a(){return t(function(){!function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null);i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null);i.to&&(e.css(i.to),i.to=null)}(),o||s.complete(),o=!0}),s}}}]};function hr(t,e,r,n,i){var o=this,s=t.location,l=t.history,u=t.setTimeout,h=t.clearTimeout,c={},p=i(r);o.isMock=!1,o.$$completeOutstandingRequest=p.completeTask,o.$$incOutstandingRequestCount=p.incTaskCount,o.notifyWhenNoOutstandingRequests=p.notifyWhenNoPendingTasks;var d,f,g=s.href,v=e.find("base"),m=null,y=n.history?function(){try{return l.state}catch(t){}}:F;w(),o.url=function(e,r,i){if($(i)&&(i=null),s!==t.location&&(s=t.location),l!==t.history&&(l=t.history),e){var a=f===i;if(g===e&&(!n.history||a))return o;var u=g&&hn(g)===hn(e);return g=e,f=i,!n.history||u&&a?(u||(m=e),r?s.replace(e):u?s.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):s.href=e,s.href!==e&&(m=e)):(l[r?"replaceState":"pushState"](i,"",e),w()),m&&(m=e),o}return function(t){return t.replace(/#$/,"")}(m||s.href)},o.state=function(){return d};var x=[],b=!1;function _(){m=null,S()}var T=null;function w(){ut(d=$(d=y())?null:d,T)&&(d=T),T=d,f=d}function S(){var t=f;w(),g===o.url()&&t===d||(g=o.url(),f=d,E(x,function(t){t(o.url(),d)}))}o.onUrlChange=function(e){return b||(n.history&&a(t).on("popstate",_),a(t).on("hashchange",_),b=!0),x.push(e),e},o.$$applicationDestroyed=function(){a(t).off("hashchange popstate",_)},o.$$checkUrlChange=S,o.baseHref=function(){var t=v.attr("href");return t?t.replace(/^(https?:)?\/\/[^\/]*/,""):""},o.defer=function(t,e,r){var n;return e=e||0,r=r||p.DEFAULT_TASK_TYPE,p.incTaskCount(r),n=u(function(){delete c[n],p.completeTask(t,r)},e),c[n]=r,n},o.defer.cancel=function(t){if(c.hasOwnProperty(t)){var e=c[t];return delete c[t],h(t),p.completeTask(F,e),!0}return!1}}function cr(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,r,n,i){return new hr(t,n,e,r,i)}]}function pr(){this.$get=function(){var t={};function e(e,r){if(e in t)throw o("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var n=0,i=O({},r,{id:e}),s=Ut(),a=r&&r.capacity||Number.MAX_VALUE,l=Ut(),u=null,h=null;return t[e]={put:function(t,e){if(!$(e)){if(a<Number.MAX_VALUE)c(l[t]||(l[t]={key:t}));return t in s||n++,s[t]=e,n>a&&this.remove(h.key),e}},get:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;c(e)}return s[t]},remove:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;e===u&&(u=e.p),e===h&&(h=e.n),p(e.n,e.p),delete l[t]}t in s&&(delete s[t],n--)},removeAll:function(){s=Ut(),n=0,l=Ut(),u=h=null},destroy:function(){s=null,i=null,l=null,delete t[e]},info:function(){return O({},i,{size:n})}};function c(t){t!==u&&(h?h===t&&(h=t.n):h=t,p(t.n,t.p),p(t,u),(u=t).n=null)}function p(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return E(t,function(t,r){e[r]=t.info()}),e},e.get=function(e){return t[e]},e}}function dr(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var fr=o("$compile");var gr=new function(){};function vr(t,r){var n={},i="Directive",o=/^\s*directive:\s*([\w-]+)\s+(.*)$/,l=/(([\w-]+)(?::([^;]+))?;?)/,u=function(t){var e,r={},n=t.split(",");for(e=0;e<n.length;e++)r[n[e]]=!0;return r}("ngSrc,ngSrcset,src,srcset"),h=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,c=/^(on[a-z]+|formaction)$/,f=Ut();function g(t,e,r){var n=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,i=Ut();return E(t,function(t,o){if((t=t.trim())in f)i[o]=f[t];else{var s=t.match(n);if(!s)throw fr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,r?"controller bindings definition":"isolate scope definition");i[o]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||o},s[4]&&(f[t]=i[o])}}),i}function v(t,e){var r={isolateScope:null,bindToController:null};if(j(t.scope)&&(!0===t.bindToController?(r.bindToController=g(t.scope,e,!0),r.isolateScope={}):r.isolateScope=g(t.scope,e,!1)),j(t.bindToController)&&(r.bindToController=g(t.bindToController,e,!0)),r.bindToController&&!t.controller)throw fr("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return r}this.directive=function e(r,o){return Bt(r,"name"),Nt(r,"directive"),W(r)?(!function(t){var e=t.charAt(0);if(!e||e!==d(e))throw fr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw fr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(r),Bt(o,"directiveFactory"),n.hasOwnProperty(r)||(n[r]=[],t.factory(r+i,["$injector","$exceptionHandler",function(t,e){var i=[];return E(n[r],function(n,o){try{var s=t.invoke(n);H(s)?s={compile:k(s)}:!s.compile&&s.link&&(s.compile=k(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||r,s.require=function(t){var e=t.require||t.controller&&t.name;return!Y(e)&&j(e)&&E(e,function(t,r){var n=t.match(h);t.substring(n[0].length)||(e[r]=n[0]+r)}),e}(s),s.restrict=function(t,e){if(t&&(!W(t)||!/[EACM]/.test(t)))throw fr("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(s.restrict,r),s.$$moduleName=n.$$moduleName,i.push(s)}catch(t){e(t)}}),i}])),n[r].push(o)):E(r,A(e)),this},this.component=function t(e,r){if(!W(e))return E(e,A(ft(this,t))),this;var n=r.controller||function(){};function i(t){function e(e){return H(e)||Y(e)?function(r,n){return t.invoke(e,this,{$element:r,$attrs:n})}:e}var i=r.template||r.templateUrl?r.template:"",o={controller:n,controllerAs:Sr(r.controller)||r.controllerAs||"$ctrl",template:e(i),templateUrl:e(r.templateUrl),transclude:r.transclude,scope:{},bindToController:r.bindings||{},restrict:"E",require:r.require};return E(r,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return E(r,function(t,e){"$"===e.charAt(0)&&(i[e]=t,H(n)&&(n[e]=t))}),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationWhitelist=function(t){return U(t)?(r.aHrefSanitizationWhitelist(t),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return U(t)?(r.imgSrcSanitizationWhitelist(t),this):r.imgSrcSanitizationWhitelist()};var m=!0;this.debugInfoEnabled=function(t){return U(t)?(m=t,this):m};var x=!1;this.strictComponentBindingsEnabled=function(t){return U(t)?(x=t,this):x};var b=10;this.onChangesTtl=function(t){return arguments.length?(b=t,this):b};var _=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(_=t,this):_};var T=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(T=t,this):T};var w=Ut();this.addPropertySecurityContext=function(t,e,r){var n=t.toLowerCase()+"|"+e.toLowerCase();if(n in w&&w[n]!==r)throw fr("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,w[n],r);return w[n]=r,this},function(){function t(t,e){E(e,function(e){w[e.toLowerCase()]=t})}t(qn.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(qn.CSS,["*|style"]),t(qn.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(qn.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(qn.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(t,r,f,g,S,A,C,M,R){var P,D=/^\w/,I=e.document.createElement("div"),k=_,N=T,U=b;function G(){try{if(!--U)throw P=void 0,fr("infchng","{0} $onChanges() iterations reached. Aborting!\n",b);C.$apply(function(){for(var t=0,e=P.length;t<e;++t)try{P[t]()}catch(t){f(t)}P=void 0})}finally{U++}}function V(t,e){if(!t)return t;if(!W(t))throw fr("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var r="",n=et(t),i=/\s/.test(n)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,o=n.split(i),s=Math.floor(o.length/2),a=0;a<s;a++){var l=2*a;r+=M.getTrustedMediaUrl(et(o[l])),r+=" "+et(o[l+1])}var u=et(o[2*a]).split(/\s/);return r+=M.getTrustedMediaUrl(et(u[0])),2===u.length&&(r+=" "+et(u[1])),r}function z(t,e){if(e){var r,n,i,o=Object.keys(e);for(r=0,n=o.length;r<n;r++)this[i=o[r]]=e[i]}else this.$attr={};this.$$element=t}function q(t,e){try{t.addClass(e)}catch(t){}}z.prototype={$normalize:br,$addClass:function(t){t&&t.length>0&&R.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&R.removeClass(this.$$element,t)},$updateClass:function(t,e){var r=_r(t,e);r&&r.length&&R.addClass(this.$$element,r);var n=_r(e,t);n&&n.length&&R.removeClass(this.$$element,n)},$set:function(t,e,r,n){var i=Fe(this.$$element[0],t),o=Le[t],s=t;i?(this.$$element.prop(t,e),n=i):o&&(this[o]=e,s=o),this[t]=e,n?this.$attr[t]=n:(n=this.$attr[t])||(this.$attr[t]=n=Lt(t,"-")),"img"===it(this.$$element)&&"srcset"===t&&(this[t]=e=V(e,"$set('srcset', value)")),!1!==r&&(null===e||$(e)?this.$$element.removeAttr(n):D.test(n)?this.$$element.attr(n,e):function(t,e,r){I.innerHTML="<span "+e+">";var n=I.firstChild.attributes,i=n[0];n.removeNamedItem(i.name),i.value=r,t.attributes.setNamedItem(i)}(this.$$element[0],n,e));var a=this.$$observers;a&&E(a[s],function(t){try{t(e)}catch(t){f(t)}})},$observe:function(t,e){var r=this,n=r.$$observers||(r.$$observers=Ut()),i=n[t]||(n[t]=[]);return i.push(e),C.$evalAsync(function(){i.$$inter||!r.hasOwnProperty(t)||$(r[t])||e(r[t])}),function(){st(i,e)}}};var Z=r.startSymbol(),K=r.endSymbol(),tt="{{"===Z&&"}}"===K?B:function(t){return t.replace(/\{\{/g,Z).replace(/}}/g,K)},rt=/^ng(Attr|Prop|On)([A-Z].*)$/,nt=/^(.+)Start$/;return ot.$$addBindingInfo=m?function(t,e){var r=t.data("$binding")||[];Y(e)?r=r.concat(e):r.push(e),t.data("$binding",r)}:F,ot.$$addBindingClass=m?function(t){q(t,"ng-binding")}:F,ot.$$addScopeInfo=m?function(t,e,r,n){var i=r?n?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:F,ot.$$addScopeClass=m?function(t,e){q(t,e?"ng-isolate-scope":"ng-scope")}:F,ot.$$createComment=function(t,r){var n="";return m&&(n=" "+(t||"")+": ",r&&(n+=r+" ")),e.document.createComment(n)},ot;function ot(t,e,r,n,i){t instanceof a||(t=a(t));var o=at(t,e,t,r,n,i);ot.$$addScopeClass(t);var s=null;return function(e,r,n){if(!t)throw fr("multilink","This element has already been linked.");Bt(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var l,u,h,c=(n=n||{}).parentBoundTranscludeFn,p=n.transcludeControllers,d=n.futureParentElement;if(c&&c.$$boundTransclude&&(c=c.$$boundTransclude),s||(u=(l=d)&&l[0],s=u&&"foreignobject"!==it(u)&&y.call(u).match(/SVG/)?"svg":"html"),h="html"!==s?a(Mt(s,a("<div></div>").append(t).html())):r?Pe.clone.call(t):t,p)for(var f in p)h.data("$"+f+"Controller",p[f].instance);return ot.$$addScopeInfo(h,e),r&&r(h,e),o&&o(e,h,h,c),r||(t=o=null),h}}function at(t,e,r,n,i,o){for(var l,u,h,c,p,d,f,g=[],v=Y(t)||t instanceof a,m=0;m<t.length;m++)l=new z,11===s&&ht(t,m,v),(h=(u=pt(t[m],[],l,0===m?n:void 0,i)).length?yt(u,t[m],l,e,r,null,[],[],o):null)&&h.scope&&ot.$$addScopeClass(l.$$element),p=h&&h.terminal||!(c=t[m].childNodes)||!c.length?null:at(c,h?(h.transcludeOnThisElement||!h.templateOnThisElement)&&h.transclude:e),(h||p)&&(g.push(m,h,p),d=!0,f=f||h),o=null;return d?function(t,r,n,i){var o,s,l,u,h,c,p,d,v;if(f){var m=r.length;for(v=new Array(m),h=0;h<g.length;h+=3)p=g[h],v[p]=r[p]}else v=r;for(h=0,c=g.length;h<c;)l=v[g[h++]],o=g[h++],s=g[h++],o?(o.scope?(u=t.$new(),ot.$$addScopeInfo(a(l),u)):u=t,d=o.transcludeOnThisElement?ct(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?ct(t,e):null,o(s,u,l,n,d)):s&&s(t,l.childNodes,void 0,i)}:null}function ht(t,e,r){var n,i=t[e],o=i.parentNode;if(i.nodeType===Wt)for(;(n=o?i.nextSibling:t[e+1])&&n.nodeType===Wt;)i.nodeValue=i.nodeValue+n.nodeValue,n.parentNode&&n.parentNode.removeChild(n),r&&n===t[e+1]&&t.splice(e+1,1)}function ct(t,e,r){function n(n,i,o,s,a){return n||((n=t.$new(!1,a)).$$transcluded=!0),e(n,i,{parentBoundTranscludeFn:r,transcludeControllers:o,futureParentElement:s})}var i=n.$$slots=Ut();for(var o in e.$$slots)e.$$slots[o]?i[o]=ct(t,e.$$slots[o],r):i[o]=null;return n}function pt(t,e,n,i,s){var a,u,h,c=t.nodeType,p=n.$attr;switch(c){case Gt:_t(e,br(u=it(t)),"E",i,s);for(var d,f,g,v,m,y=t.attributes,x=0,b=y&&y.length;x<b;x++){var _,T=!1,w=!1,E=!1,S=!1,A=!1;f=(d=y[x]).name,v=d.value,(m=(g=br(f.toLowerCase())).match(rt))?(E="Attr"===m[1],S="Prop"===m[1],A="On"===m[1],f=f.replace(yr,"").toLowerCase().substr(4+m[1].length).replace(/_(.)/g,function(t,e){return e.toUpperCase()})):(_=g.match(nt))&&wt(_[1])&&(T=f,w=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),S||A?(n[g]=v,p[g]=d.name,S?Ot(t,e,g,f):Pt(e,g,f)):(p[g=br(f.toLowerCase())]=f,!E&&n.hasOwnProperty(g)||(n[g]=v,Fe(t,g)&&(n[g]=!0)),Dt(t,e,v,g,E),_t(e,g,"A",i,s,T,w))}if("input"===u&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!N)break;if(j(h=t.className)&&(h=h.animVal),W(h)&&""!==h)for(;a=l.exec(h);)_t(e,g=br(a[2]),"C",i,s)&&(n[g]=et(a[3])),h=h.substr(a.index+a[0].length);break;case Wt:!function(t,e){var n=r(e,!0);n&&t.push({priority:0,compile:function(t){var e=t.parent(),r=!!e.length;return r&&ot.$$addBindingClass(e),function(t,e){var i=e.parent();r||ot.$$addBindingClass(i),ot.$$addBindingInfo(i,n.expressions),t.$watch(n,function(t){e[0].nodeValue=t})}}})}(e,t.nodeValue);break;case Vt:if(!k)break;!function(t,e,r,n,i){try{var s=o.exec(t.nodeValue);if(s){var a=br(s[1]);_t(e,a,"M",n,i)&&(r[a]=et(s[2]))}}catch(t){}}(t,e,n,i,s)}return e.sort(At),e}function gt(t,e,r){var n=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw fr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,r);t.nodeType===Gt&&(t.hasAttribute(e)&&i++,t.hasAttribute(r)&&i--),n.push(t),t=t.nextSibling}while(i>0);else n.push(t);return a(n)}function vt(t,e,r){return function(n,i,o,s,a){return i=gt(i[0],e,r),t(n,i,o,s,a)}}function mt(t,e,r,n,i,o){var s;return t?ot(e,r,n,i,o):function(){return s||(s=ot(e,r,n,i,o),e=r=o=null),s.apply(this,arguments)}}function yt(t,r,n,i,o,s,l,u,h){h=h||{};for(var c,p,d,g,v,m=-Number.MAX_VALUE,y=h.newScopeDirective,x=h.controllerDirectives,b=h.newIsolateScopeDirective,_=h.templateDirective,T=h.nonTlbTranscludeDirective,w=!1,S=!1,C=h.hasElementTranscludeDirective,M=n.$$element=a(r),R=s,P=i,D=!1,I=!1,L=0,F=t.length;L<F;L++){var B=(c=t[L]).$$start,k=c.$$end;if(B&&(M=gt(r,B,k)),d=void 0,m>c.priority)break;if((v=c.scope)&&(c.templateUrl||(j(v)?(Ct("new/isolated scope",b||y,c,M),b=c):Ct("new/isolated scope",b,c,M)),y=y||c),p=c.name,!D&&(c.replace&&(c.templateUrl||c.template)||c.transclude&&!c.$$tlb)){for(var N,U=L+1;N=t[U++];)if(N.transclude&&!N.$$tlb||N.replace&&(N.templateUrl||N.template)){I=!0;break}D=!0}if(!c.templateUrl&&c.controller&&(x=x||Ut(),Ct("'"+p+"' controller",x[p],c,M),x[p]=c),v=c.transclude)if(w=!0,c.$$tlb||(Ct("transclusion",T,c,M),T=c),"element"===v)C=!0,m=c.priority,d=M,M=n.$$element=a(ot.$$createComment(p,n[p])),r=M[0],It(o,dt(d),r),P=mt(I,d,i,m,R&&R.name,{nonTlbTranscludeDirective:T});else{var G=Ut();if(j(v)){d=e.document.createDocumentFragment();var W=Ut(),V=Ut();for(var X in E(v,function(t,e){var r="?"===t.charAt(0);t=r?t.substring(1):t,W[t]=e,G[e]=null,V[e]=r}),E(M.contents(),function(t){var r=W[br(it(t))];r?(V[r]=!0,G[r]=G[r]||e.document.createDocumentFragment(),G[r].appendChild(t)):d.appendChild(t)}),E(V,function(t,e){if(!t)throw fr("reqslot","Required transclusion slot `{0}` was not filled.",e)}),G)if(G[X]){var q=a(G[X].childNodes);G[X]=mt(I,q,i)}d=a(d.childNodes)}else d=a(fe(r)).contents();M.empty(),(P=mt(I,d,i,void 0,void 0,{needsNewScope:c.$$isolateScope||c.$$newScope})).$$slots=G}if(c.template)if(S=!0,Ct("template",_,c,M),_=c,v=H(c.template)?c.template(M,n):c.template,v=tt(v),c.replace){if(R=c,d=ue(v)?[]:Tr(Mt(c.templateNamespace,et(v))),r=d[0],1!==d.length||r.nodeType!==Gt)throw fr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");It(o,M,r);var Z={$attr:{}},J=pt(r,[],Z),K=t.splice(L+1,t.length-(L+1));(b||y)&&bt(J,b,y),t=t.concat(J).concat(K),Et(n,Z),F=t.length}else M.html(v);if(c.templateUrl)S=!0,Ct("template",_,c,M),_=c,c.replace&&(R=c),st=St(t.splice(L,t.length-L),M,n,o,w&&P,l,u,{controllerDirectives:x,newScopeDirective:y!==c&&y,newIsolateScopeDirective:b,templateDirective:_,nonTlbTranscludeDirective:T}),F=t.length;else if(c.compile)try{g=c.compile(M,n,P);var rt=c.$$originalDirective||c;H(g)?nt(null,ft(rt,g),B,k):g&&nt(ft(rt,g.pre),ft(rt,g.post),B,k)}catch(t){f(t,Tt(M))}c.terminal&&(st.terminal=!0,m=Math.max(m,c.priority))}return st.scope=y&&!0===y.scope,st.transcludeOnThisElement=w,st.templateOnThisElement=S,st.transclude=P,h.hasElementTranscludeDirective=C,st;function nt(t,e,r,n){t&&(r&&(t=vt(t,r,n)),t.require=c.require,t.directiveName=p,(b===c||c.$$isolateScope)&&(t=Ft(t,{isolateScope:!0})),l.push(t)),e&&(r&&(e=vt(e,r,n)),e.require=c.require,e.directiveName=p,(b===c||c.$$isolateScope)&&(e=Ft(e,{isolateScope:!0})),u.push(e))}function st(t,e,i,o,s){var h,c,p,d,g,v,m,T,w,S;for(var M in r===i?(w=n,T=n.$$element):w=new z(T=a(i),n),g=e,b?d=e.$new(!0):y&&(g=e.$parent),s&&((m=function(t,e,r,n){var i;Q(t)||(n=r,r=e,e=t,t=void 0);C&&(i=v);r||(r=C?T.parent():T);if(!n)return s(t,e,i,r,I);var o=s.$$slots[n];if(o)return o(t,e,i,r,I);if($(o))throw fr("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',n,Tt(T))}).$$boundTransclude=s,m.isSlotFilled=function(t){return!!s.$$slots[t]}),x&&(v=function(t,e,r,n,i,o,s){var a=Ut();for(var l in n){var u=n[l],h={$scope:u===s||u.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:r},c=u.controller;"@"===c&&(c=e[u.name]);var p=A(c,h,!0,u.controllerAs);a[u.name]=p,t.data("$"+u.name+"Controller",p.instance)}return a}(T,w,m,x,d,e,b)),b&&(ot.$$addScopeInfo(T,d,!0,!(_&&(_===b||_===b.$$originalDirective))),ot.$$addScopeClass(T,!0),d.$$isolateBindings=b.$$isolateBindings,(S=$t(e,w,d,d.$$isolateBindings,b)).removeWatches&&d.$on("$destroy",S.removeWatches)),v){var R=x[M],P=v[M],D=R.$$bindings.bindToController;P.instance=P(),T.data("$"+R.name+"Controller",P.instance),P.bindingInfo=$t(g,w,P.instance,D,R)}for(E(x,function(t,e){var r=t.require;t.bindToController&&!Y(r)&&j(r)&&O(v[e].instance,xt(e,r,T,v))}),E(v,function(t){var e=t.instance;if(H(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){f(t)}if(H(e.$onInit))try{e.$onInit()}catch(t){f(t)}H(e.$doCheck)&&(g.$watch(function(){e.$doCheck()}),e.$doCheck()),H(e.$onDestroy)&&g.$on("$destroy",function(){e.$onDestroy()})}),h=0,c=l.length;h<c;h++)kt(p=l[h],p.isolateScope?d:e,T,w,p.require&&xt(p.directiveName,p.require,T,v),m);var I=e;for(b&&(b.template||null===b.templateUrl)&&(I=d),t&&t(I,i.childNodes,void 0,s),h=u.length-1;h>=0;h--)kt(p=u[h],p.isolateScope?d:e,T,w,p.require&&xt(p.directiveName,p.require,T,v),m);E(v,function(t){var e=t.instance;H(e.$postLink)&&e.$postLink()})}}function xt(t,e,r,n){var i;if(W(e)){var o=e.match(h),s=e.substring(o[0].length),a=o[1]||o[3],l="?"===o[2];if("^^"===a?r=r.parent():i=(i=n&&n[s])&&i.instance,!i){var u="$"+s+"Controller";i="^^"===a&&r[0]&&r[0].nodeType===zt?null:a?r.inheritedData(u):r.data(u)}if(!i&&!l)throw fr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,t)}else if(Y(e)){i=[];for(var c=0,p=e.length;c<p;c++)i[c]=xt(t,e[c],r,n)}else j(e)&&(i={},E(e,function(e,o){i[o]=xt(t,e,r,n)}));return i||null}function bt(t,e,r){for(var n=0,i=t.length;n<i;n++)t[n]=L(t[n],{$$isolateScope:e,$$newScope:r})}function _t(e,r,o,s,a,l,u){if(r===a)return null;var h=null;if(n.hasOwnProperty(r))for(var c,p=t.get(r+i),d=0,f=p.length;d<f;d++)if(c=p[d],($(s)||s>c.priority)&&-1!==c.restrict.indexOf(o)){if(l&&(c=L(c,{$$start:l,$$end:u})),!c.$$bindings){var g=c.$$bindings=v(c,c.name);j(g.isolateScope)&&(c.$$isolateBindings=g.isolateScope)}e.push(c),h=c}return h}function wt(e){if(n.hasOwnProperty(e))for(var r=t.get(e+i),o=0,s=r.length;o<s;o++)if(r[o].multiElement)return!0;return!1}function Et(t,e){var r=e.$attr,n=t.$attr;E(t,function(n,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==n&&(n.length?n+=("style"===i?";":" ")+e[i]:n=e[i]),t.$set(i,n,!0,r[i]))}),E(e,function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(n[i]=r[i]))})}function St(t,e,r,n,i,o,s,l){var u,h,c=[],p=e[0],d=t.shift(),v=L(d,{templateUrl:null,transclude:null,replace:null,$$originalDirective:d}),m=H(d.templateUrl)?d.templateUrl(e,r):d.templateUrl,y=d.templateNamespace;return e.empty(),g(m).then(function(f){var g,x,b,_;if(f=tt(f),d.replace){if(b=ue(f)?[]:Tr(Mt(y,et(f))),g=b[0],1!==b.length||g.nodeType!==Gt)throw fr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",d.name,m);x={$attr:{}},It(n,e,g);var T=pt(g,[],x);j(d.scope)&&bt(T,!0),t=T.concat(t),Et(r,x)}else g=p,e.html(f);for(t.unshift(v),u=yt(t,g,r,i,e,d,o,s,l),E(n,function(t,r){t===g&&(n[r]=e[0])}),h=at(e[0].childNodes,i);c.length;){var w=c.shift(),S=c.shift(),A=c.shift(),C=c.shift(),M=e[0];if(!w.$$destroyed){if(S!==p){var R=S.className;l.hasElementTranscludeDirective&&d.replace||(M=fe(g)),It(A,a(S),M),q(a(M),R)}_=u.transcludeOnThisElement?ct(w,u.transclude,C):C,u(h,w,M,n,_)}}c=null}).catch(function(t){X(t)&&f(t)}),function(t,e,r,n,i){var o=i;e.$$destroyed||(c?c.push(e,r,n,o):(u.transcludeOnThisElement&&(o=ct(e,u.transclude,i)),u(h,e,r,n,o)))}}function At(t,e){var r=e.priority-t.priority;return 0!==r?r:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function Ct(t,e,r,n){function i(t){return t?" (module: "+t+")":""}if(e)throw fr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),r.name,i(r.$$moduleName),t,Tt(n))}function Mt(t,r){switch(t=d(t||"html")){case"svg":case"math":var n=e.document.createElement("div");return n.innerHTML="<"+t+">"+r+"</"+t+">",n.childNodes[0].childNodes;default:return r}}function Rt(t){return V(M.valueOf(t),"ng-prop-srcset")}function Ot(t,e,r,n){if(c.test(n))throw fr("nodomevents","Property bindings for HTML DOM event properties are disallowed");var i=it(t),o=function(t,e){var r=e.toLowerCase();return w[t+"|"+r]||w["*|"+r]}(i,n),s=B;"srcset"!==n||"img"!==i&&"source"!==i?o&&(s=M.getTrusted.bind(M,o)):s=Rt,e.push({priority:100,compile:function(t,e){var i=S(e[r]),o=S(e[r],function(t){return M.valueOf(t)});return{pre:function(t,e){function r(){var r=i(t);e.prop(n,s(r))}r(),t.$watch(o,r)}}}})}function Pt(t,e,r){t.push(Uo(S,C,f,e,r,!1))}function Dt(t,e,n,i,o){var s=it(t),a=function(t,e){return"srcdoc"===e?M.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?M.RESOURCE_URL:M.MEDIA_URL:"xlinkHref"===e?"image"===t?M.MEDIA_URL:"a"===t?M.URL:M.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?M.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:M.URL}(s,i),l=!o,h=u[i]||o,p=r(n,l,a,h);if(p){if("multiple"===i&&"select"===s)throw fr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Tt(t));if(c.test(i))throw fr("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var s=o.$$observers||(o.$$observers=Ut()),l=o[i];l!==n&&(p=l&&r(l,!0,a,h),n=l),p&&(o[i]=p(t),(s[i]||(s[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(p,function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)}))}}}})}}function It(t,r,n){var i,o,s=r[0],l=r.length,u=s.parentNode;if(t)for(i=0,o=t.length;i<o;i++)if(t[i]===s){t[i++]=n;for(var h=i,c=h+l-1,p=t.length;h<p;h++,c++)c<p?t[h]=t[c]:delete t[h];t.length-=l-1,t.context===s&&(t.context=n);break}u&&u.replaceChild(n,s);var d=e.document.createDocumentFragment();for(i=0;i<l;i++)d.appendChild(r[i]);for(a.hasData(s)&&(a.data(n,a.data(s)),a(s).off("$destroy")),a.cleanData(d.querySelectorAll("*")),i=1;i<l;i++)delete r[i];r[0]=n,r.length=1}function Ft(t,e){return O(function(){return t.apply(null,arguments)},t,e)}function kt(t,e,r,n,i,o){try{t(e,r,n,i,o)}catch(t){f(t,Tt(r))}}function Nt(t,e){if(x)throw fr("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function $t(t,e,n,i,o){var s,a=[],l={};function u(e,r,i){H(n.$onChanges)&&!lt(r,i)&&(P||(t.$$postDigest(G),P=[]),s||(s={},P.push(h)),s[e]&&(i=s[e].previousValue),s[e]=new mr(i,r))}function h(){n.$onChanges(s),s=void 0}return E(i,function(i,s){var h,c,d,f,g,v=i.attrName,m=i.optional;switch(i.mode){case"@":m||p.call(e,v)||(Nt(v,o.name),n[s]=e[v]=void 0),g=e.$observe(v,function(t){if(W(t)||J(t)){var e=n[s];u(s,t,e),n[s]=t}}),e.$$observers[v].$$scope=t,W(h=e[v])?n[s]=r(h)(t):J(h)&&(n[s]=h),l[s]=new mr(gr,n[s]),a.push(g);break;case"=":if(!p.call(e,v)){if(m)break;Nt(v,o.name),e[v]=void 0}if(m&&!e[v])break;c=S(e[v]),f=c.literal?ut:lt,d=c.assign||function(){throw h=n[s]=c(t),fr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[v],v,o.name)},h=n[s]=c(t);var y=function(e){return f(e,n[s])||(f(e,h)?d(t,e=n[s]):n[s]=e),h=e};y.$stateful=!0,g=i.collection?t.$watchCollection(e[v],y):t.$watch(S(e[v],y),null,c.literal),a.push(g);break;case"<":if(!p.call(e,v)){if(m)break;Nt(v,o.name),e[v]=void 0}if(m&&!e[v])break;var x=(c=S(e[v])).literal,b=n[s]=c(t);l[s]=new mr(gr,n[s]),g=t[i.collection?"$watchCollection":"$watch"](c,function(t,e){if(e===t){if(e===b||x&&ut(e,b))return;e=b}u(s,t,e),n[s]=t}),a.push(g);break;case"&":if(m||p.call(e,v)||Nt(v,o.name),(c=e.hasOwnProperty(v)?S(e[v]):F)===F&&m)break;n[s]=function(e){return c(t,e)}}}),{initialChanges:l,removeWatches:a.length&&function(){for(var t=0,e=a.length;t<e;++t)a[t]()}}}}]}function mr(t,e){this.previousValue=t,this.currentValue=e}vr.$inject=["$provide","$$sanitizeUriProvider"],mr.prototype.isFirstChange=function(){return this.previousValue===gr};var yr=/^((?:x|data)[:\-_])/i,xr=/[:\-_]+(.)/g;function br(t){return t.replace(yr,"").replace(xr,function(t,e,r){return r?e.toUpperCase():e})}function _r(t,e){var r="",n=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<n.length;o++){for(var s=n[o],a=0;a<i.length;a++)if(s===i[a])continue t;r+=(r.length>0?" ":"")+s}return r}function Tr(t){var e=(t=a(t)).length;if(e<=1)return t;for(;e--;){var r=t[e];(r.nodeType===Vt||r.nodeType===Wt&&""===r.nodeValue.trim())&&v.call(t,e,1)}return t}var wr=o("$controller"),Er=/^(\S+)(\s+as\s+([\w$]+))?$/;function Sr(t,e){if(e&&W(e))return e;if(W(t)){var r=Er.exec(t);if(r)return r[3]}}function Ar(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,r){Nt(e,"controller"),j(e)?O(t,e):t[e]=r},this.$get=["$injector",function(e){return function(n,i,o,s){var a,l,u,h;if(o=!0===o,s&&W(s)&&(h=s),W(n)){if(!(l=n.match(Er)))throw wr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",n);if(u=l[1],h=h||l[3],!(n=t.hasOwnProperty(u)?t[u]:function(t,e,r){if(!e)return t;for(var n,i=e.split("."),o=t,s=i.length,a=0;a<s;a++)n=i[a],t&&(t=(o=t)[n]);return!r&&H(t)?ft(o,t):t}(i.$scope,u,!0)))throw wr("ctrlreg","The controller with the name '{0}' is not registered.",u);kt(n,u,!0)}if(o){var c=(Y(n)?n[n.length-1]:n).prototype;return a=Object.create(c||null),h&&r(i,h,a,u||n.name),O(function(){var t=e.invoke(n,a,i,u);return t!==a&&(j(t)||H(t))&&(a=t,h&&r(i,h,a,u||n.name)),a},{instance:a,identifier:h})}return a=e.instantiate(n,i,u),h&&r(i,h,a,u||n.name),a};function r(t,e,r,n){if(!t||!j(t.$scope))throw o("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",n,e);t.$scope[e]=r}}]}function Cr(){this.$get=["$window",function(t){return a(t.document)}]}function Mr(){this.$get=["$document","$rootScope",function(t,e){var r=t[0],n=r&&r.hidden;function i(){n=r.hidden}return t.on("visibilitychange",i),e.$on("$destroy",function(){t.off("visibilitychange",i)}),function(){return n}}]}function Rr(){this.$get=["$log",function(t){return function(e,r){t.error.apply(t,arguments)}}]}var Or=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof a&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Pr="application/json",Dr={"Content-Type":Pr+";charset=utf-8"},Ir=/^\[|^\{(?!\{)/,Lr={"[":/]$/,"{":/}$/},Fr=/^\)]\}',?\n/,Br=o("$http");function kr(t){return j(t)?z(t)?t.toISOString():vt(t):t}function Nr(){this.$get=function(){return function(t){if(!t)return"";var e=[];return S(t,function(t,r){null===t||$(t)||H(t)||(Y(t)?E(t,function(t){e.push(At(r)+"="+At(kr(t)))}):e.push(At(r)+"="+At(kr(t))))}),e.join("&")}}}function $r(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(r,n,i){Y(r)?E(r,function(e,r){t(e,n+"["+(j(e)?r:"")+"]")}):j(r)&&!z(r)?S(r,function(e,r){t(e,n+(i?"":"[")+r+(i?"":"]"))}):(H(r)&&(r=r()),e.push(At(n)+"="+(null==r?"":At(kr(r)))))}(t,"",!0),e.join("&")}}}function Ur(t,e){if(W(t)){var r=t.replace(Fr,"").trim();if(r){var n=e("Content-Type"),i=n&&0===n.indexOf(Pr);if(i||(s=(o=r).match(Ir))&&Lr[s[0]].test(o))try{t=mt(r)}catch(e){if(!i)return t;throw Br("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var o,s;return t}function jr(t){var e,r=Ut();function n(t,e){t&&(r[t]=r[t]?r[t]+", "+e:e)}return W(t)?E(t.split("\n"),function(t){e=t.indexOf(":"),n(d(et(t.substr(0,e))),et(t.substr(e+1)))}):j(t)&&E(t,function(t,e){n(d(e),et(t))}),r}function Gr(t){var e;return function(r){if(e||(e=jr(t)),r){var n=e[d(r)];return void 0===n&&(n=null),n}return e}}function Wr(t,e,r,n){return H(n)?n(t,e,r):(E(n,function(n){t=n(t,e,r)}),t)}function Vr(t){return 200<=t&&t<300}function zr(){var t=this.defaults={transformResponse:[Ur],transformRequest:[function(t){return!j(t)||(e=t,"[object File]"===y.call(e))||function(t){return"[object Blob]"===y.call(t)}(t)||function(t){return"[object FormData]"===y.call(t)}(t)?t:vt(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Xt(Dr),put:Xt(Dr),patch:Xt(Dr)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return U(t)?(e=!!t,this):e};var r=this.interceptors=[],n=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(i,s,a,l,u,h,c,p){var g=l("$http");t.paramSerializer=W(t.paramSerializer)?c.get(t.paramSerializer):t.paramSerializer;var v=[];E(r,function(t){v.unshift(W(t)?c.get(t):c.invoke(t))});var m,y=(m=[ci].concat(n.map(pi)),function(t){var e=pi(t);return m.some(di.bind(null,e))});function x(r){if(!j(r))throw o("$http")("badreq","Http request configuration must be an object.  Received: {0}",r);if(!W(p.valueOf(r.url)))throw o("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",r.url);var n=O({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},r);n.headers=function(e){var r,n,i,o=t.headers,s=O({},e.headers);o=O({},o.common,o[d(e.method)]);t:for(r in o){for(i in n=d(r),s)if(d(i)===n)continue t;s[r]=o[r]}return function(t,e){var r,n={};return E(t,function(t,i){H(t)?null!=(r=t(e))&&(n[i]=r):n[i]=t}),n}(s,Xt(e))}(r),n.method=f(n.method),n.paramSerializer=W(n.paramSerializer)?c.get(n.paramSerializer):n.paramSerializer,i.$$incOutstandingRequestCount("$http");var l=[],m=[],b=h.resolve(n);return E(v,function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&m.push(t.response,t.responseError)}),b=_(b,l),b=(b=_(b=b.then(function(r){var n=r.headers,i=Wr(r.data,Gr(n),void 0,r.transformRequest);$(i)&&E(n,function(t,e){"content-type"===d(e)&&delete n[e]});$(r.withCredentials)&&!$(t.withCredentials)&&(r.withCredentials=t.withCredentials);return function(r,n){var i,o,l=h.defer(),c=l.promise,f=r.headers,v="jsonp"===d(r.method),m=r.url;v?m=p.getTrustedResourceUrl(m):W(m)||(m=p.valueOf(m));m=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(m,r.paramSerializer(r.params)),v&&(m=function(t,e){var r=t.split("?");if(r.length>2)throw Br("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return E(Et(r[1]),function(r,n){if("JSON_CALLBACK"===r)throw Br("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(n===e)throw Br("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)}),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(m,r.jsonpCallbackParam));x.pendingRequests.push(r),c.then(S,S),!r.cache&&!t.cache||!1===r.cache||"GET"!==r.method&&"JSONP"!==r.method||(i=j(r.cache)?r.cache:j(t.cache)?t.cache:g);i&&(U(o=i.get(m))?K(o)?o.then(w,w):Y(o)?T(o[1],o[0],Xt(o[2]),o[3],o[4]):T(o,200,{},"OK","complete"):i.put(m,c));if($(o)){var b=y(r.url)?a()[r.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(f[r.xsrfHeaderName||t.xsrfHeaderName]=b),s(r.method,m,n,function(t,r,n,o,s){i&&(Vr(t)?i.put(m,[t,r,jr(n),o,s]):i.remove(m));function a(){T(r,t,n,o,s)}e?u.$applyAsync(a):(a(),u.$$phase||u.$apply())},f,r.timeout,r.withCredentials,r.responseType,_(r.eventHandlers),_(r.uploadEventHandlers))}return c;function _(t){if(t){var r={};return E(t,function(t,n){r[n]=function(r){function n(){t(r)}e?u.$applyAsync(n):u.$$phase?n():u.$apply(n)}}),r}}function T(t,e,n,i,o){(Vr(e=e>=-1?e:0)?l.resolve:l.reject)({data:t,status:e,headers:Gr(n),config:r,statusText:i,xhrStatus:o})}function w(t){T(t.data,t.status,Xt(t.headers()),t.statusText,t.xhrStatus)}function S(){var t=x.pendingRequests.indexOf(r);-1!==t&&x.pendingRequests.splice(t,1)}}(r,i).then(T,T)}),m)).finally(function(){i.$$completeOutstandingRequest(F,"$http")});function _(t,e){for(var r=0,n=e.length;r<n;){var i=e[r++],o=e[r++];t=t.then(i,o)}return e.length=0,t}function T(t){var e=O({},t);return e.data=Wr(t.data,t.headers,t.status,n.transformResponse),Vr(t.status)?e:h.reject(e)}}return x.pendingRequests=[],function(t){E(arguments,function(t){x[t]=function(e,r){return x(O({},r||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){E(arguments,function(t){x[t]=function(e,r,n){return x(O({},n||{},{method:t,url:e,data:r}))}})}("post","put","patch"),x.defaults=t,x}]}function Yr(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Xr(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,r,n){return function(t,e,r,n,i){return function(o,s,a,l,u,h,c,p,f,g){if(s=s||t.url(),"jsonp"===d(o))var v=n.createCallback(s),m=function(t,e,r){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),s=null;return o.type="text/javascript",o.src=t,o.async=!0,s=function(t){o.removeEventListener("load",s),o.removeEventListener("error",s),i.body.removeChild(o),o=null;var a=-1,l="unknown";t&&("load"!==t.type||n.wasCalled(e)||(t={type:"error"}),l=t.type,a="error"===t.type?404:200),r&&r(a,l)},o.addEventListener("load",s),o.addEventListener("error",s),i.body.appendChild(o),s}(s,v,function(t,e){var r=200===t&&n.getResponse(v);T(l,t,r,"",e,"complete"),n.removeCallback(v)});else{var y=e(o,s),x=!1;y.open(o,s,!0),E(u,function(t,e){U(t)&&y.setRequestHeader(e,t)}),y.onload=function(){var t=y.statusText||"",e="response"in y?y.response:y.responseText,r=1223===y.status?204:y.status;0===r&&(r=e?200:"file"===pi(s).protocol?404:0),T(l,r,e,y.getAllResponseHeaders(),t,"complete")};if(y.onerror=function(){T(l,-1,null,null,"","error")},y.ontimeout=function(){T(l,-1,null,null,"","timeout")},y.onabort=function(){T(l,-1,null,null,"",x?"timeout":"abort")},E(f,function(t,e){y.addEventListener(e,t)}),E(g,function(t,e){y.upload.addEventListener(e,t)}),c&&(y.withCredentials=!0),p)try{y.responseType=p}catch(t){if("json"!==p)throw t}y.send($(a)?null:a)}if(h>0)var b=r(function(){_("timeout")},h);else K(h)&&h.then(function(){_(U(h.$$timeoutId)?"timeout":"abort")});function _(t){x="timeout"===t,m&&m(),y&&y.abort()}function T(t,e,n,i,o,s){U(b)&&r.cancel(b),m=y=null,t(e,n,i,o,s)}}}(t,n,t.defer,e,r[0])}]}var Hr=_.$interpolateMinErr=o("$interpolate");function qr(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(r,n,i){var o=t.length,s=e.length,a=new RegExp(t.replace(/./g,u),"g"),l=new RegExp(e.replace(/./g,u),"g");function u(t){return"\\\\\\"+t}function h(r){return r.replace(a,t).replace(l,e)}function c(t,e,r,n){var i=t.$watch(function(t){return i(),n(t)},e,r);return i}function p(a,l,u,p){var d=u===i.URL||u===i.MEDIA_URL;if(!a.length||-1===a.indexOf(t)){if(l&&!d)return;var f=h(a);d&&(f=i.getTrusted(u,f));var g=k(f);return g.exp=a,g.expressions=[],g.$$watchDelegate=c,g}p=!!p;for(var v,m,y,x,b,_=0,T=[],w=a.length,E=[],S=[];_<w;){if(-1===(v=a.indexOf(t,_))||-1===(m=a.indexOf(e,v+o))){_!==w&&E.push(h(a.substring(_)));break}_!==v&&E.push(h(a.substring(_,v))),x=a.substring(v+o,m),T.push(x),_=m+s,S.push(E.length),E.push("")}b=1===E.length&&1===S.length;var A=d&&b?void 0:function(t){try{return t=u&&!d?i.getTrusted(u,t):i.valueOf(t),p&&!U(t)?t:jt(t)}catch(t){n(Hr.interr(a,t))}};if(y=T.map(function(t){return r(t,A)}),!l||T.length){var C=function(t){for(var e=0,r=T.length;e<r;e++){if(p&&$(t[e]))return;E[S[e]]=t[e]}return d?i.getTrusted(u,b?E[0]:E.join("")):(u&&E.length>1&&Hr.throwNoconcat(a),E.join(""))};return O(function(t){var e=0,r=T.length,i=new Array(r);try{for(;e<r;e++)i[e]=y[e](t);return C(i)}catch(t){n(Hr.interr(a,t))}},{exp:a,expressions:T,$$watchDelegate:function(t,e){var r;return t.$watchGroup(y,function(n,i){var o=C(n);e.call(this,o,n!==i?r:o,t),r=o})}})}}return p.startSymbol=function(){return t},p.endSymbol=function(){return e},p}]}Hr.throwNoconcat=function(t){throw Hr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Hr.interr=function(t,e){return Hr("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Zr=o("$interval");function Qr(){this.$get=["$$intervalFactory","$window",function(t,e){var r={},n=function(t){e.clearInterval(t),delete r[t]},i=t(function(t,n,i){var o=e.setInterval(t,n);return r[o]=i,o},n);return i.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Zr("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!r.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,i=r[e];return Vn(i.promise),i.reject("canceled"),n(e),!0},i}]}function Jr(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,r,n){return function(i,o){return function(s,a,l,u){var h=arguments.length>4,c=h?dt(arguments,4):[],p=0,d=U(u)&&!u,f=(d?r:e).defer(),g=f.promise;function v(){h?s.apply(null,c):s(p)}return l=U(l)?l:0,g.$$intervalId=i(function(){d?t.defer(v):n.$evalAsync(v),f.notify(p++),l>0&&p>=l&&(f.resolve(p),o(g.$$intervalId)),d||n.$apply()},a,f,d),g}}}]}var Kr=function(){this.$get=function(){var t=_.callbacks,e={};return{createCallback:function(r){var n="_"+(t.$$counter++).toString(36),i="angular.callbacks."+n,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(n);return e[i]=t[n]=o,i},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(r){var n=e[r];delete t[n.id],delete e[r]}}}},tn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,en={http:80,https:443,ftp:21},rn=o("$location");function nn(t,e,r){var n,i=(n=[],E(e,function(t,e){Y(t)?E(t,function(t){n.push(At(e,!0)+(!0===t?"":"="+At(t,!0)))}):n.push(At(e,!0)+(!0===t?"":"="+At(t,!0)))}),n.length?n.join("&"):""),o=r?"#"+St(r):"";return function(t){for(var e=t.split("/"),r=e.length;r--;)e[r]=St(e[r].replace(/%2F/g,"/"));return e.join("/")}(t)+(i?"?"+i:"")+o}function on(t,e){var r=pi(t);e.$$protocol=r.protocol,e.$$host=r.hostname,e.$$port=D(r.port)||en[r.protocol]||null}var sn=/^\s*[\\\/]{2,}/;function an(t,e,r){if(sn.test(t))throw rn("badpath",'Invalid url "{0}".',t);var n="/"!==t.charAt(0);n&&(t="/"+t);var i=pi(t),o=n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;e.$$path=function(t,e){for(var r=t.split("/"),n=r.length;n--;)r[n]=decodeURIComponent(r[n]),e&&(r[n]=r[n].replace(/\//g,"%2F"));return r.join("/")}(o,r),e.$$search=Et(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function ln(t,e){return t.slice(0,e.length)===e}function un(t,e){if(ln(e,t))return e.substr(t.length)}function hn(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function cn(t,e,r){this.$$html5=!0,r=r||"",on(t,this),this.$$parse=function(t){var r=un(e,t);if(!W(r))throw rn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);an(r,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(n,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(U(o=un(t,n))?(s=o,a=r&&U(o=un(r,o))?e+(un("/",o)||o):t+s):U(o=un(e,n))?a=e+o:e===n+"/"&&(a=e),a&&this.$$parse(a),!!a);var o,s,a}}function pn(t,e,r){on(t,this),this.$$parse=function(n){var i,o=un(t,n)||un(e,n);$(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",$(o)&&(t=n,this.replace())):$(i=un(r,o))&&(i=o),an(i,this,!1),this.$$path=function(t,e,r){var n,i=/^\/[A-Z]:(\/.*)/;ln(e,r)&&(e=e.replace(r,""));if(i.exec(e))return t;return(n=i.exec(t))?n[1]:t}(this.$$path,i,t),this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?r+e:"")},this.$$parseLinkUrl=function(e,r){return hn(t)===hn(e)&&(this.$$parse(e),!0)}}function dn(t,e,r){this.$$html5=!0,pn.apply(this,arguments),this.$$parseLinkUrl=function(n,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===hn(n)?o=n:(s=un(e,n))?o=t+r+s:e===n+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,s},this.$$normalizeUrl=function(e){return t+r+e}}var fn={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=nn(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:gn("$$absUrl"),url:function(t){if($(t))return this.$$url;var e=tn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:gn("$$protocol"),host:gn("$$host"),port:gn("$$port"),path:vn("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(W(t)||V(t))t=t.toString(),this.$$search=Et(t);else{if(!j(t))throw rn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");E(t=at(t,{}),function(e,r){null==e&&delete t[r]}),this.$$search=t}break;default:$(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:vn("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function gn(t){return function(){return this[t]}}function vn(t,e){return function(r){return $(r)?this[t]:(this[t]=e(r),this.$$compose(),this)}}function mn(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return U(e)?(t=e,this):t},this.html5Mode=function(t){return J(t)?(e.enabled=t,this):j(t)?(J(t.enabled)&&(e.enabled=t.enabled),J(t.requireBase)&&(e.requireBase=t.requireBase),(J(t.rewriteLinks)||W(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(r,n,i,o,s){var l,u,h,c,p=n.baseHref(),d=n.url();if(e.enabled){if(!p&&e.requireBase)throw rn("nobase","$location in HTML5 mode requires a <base> tag to be present!");h=(c=d).substring(0,c.indexOf("/",c.indexOf("//")+2))+(p||"/"),u=i.history?cn:dn}else h=hn(d),u=pn;var f=function(t){return t.substr(0,hn(t).lastIndexOf("/")+1)}(h);(l=new u(h,f,"#"+t)).$$parseLinkUrl(d,d),l.$$state=n.state();var g=/^\s*(javascript|mailto):/i;function v(t,e,r){var i=l.url(),o=l.$$state;try{n.url(t,e,r),l.$$state=n.state()}catch(t){throw l.url(i),l.$$state=o,t}}o.on("click",function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var s=a(t.target);"a"!==it(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!W(i)||!$(s.attr(i))){var u=s.prop("href"),h=s.attr("href")||s.attr("xlink:href");j(u)&&"[object SVGAnimatedString]"===u.toString()&&(u=pi(u.animVal).href),g.test(u)||!u||s.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(u,h)&&(t.preventDefault(),l.absUrl()!==n.url()&&r.$apply())}}}),l.absUrl()!==d&&n.url(l.absUrl(),!0);var m=!0;return n.onUrlChange(function(t,e){ln(t,f)?(r.$evalAsync(function(){var n,i=l.absUrl(),o=l.$$state;l.$$parse(t),l.$$state=e,n=r.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,l.absUrl()===t&&(n?(l.$$parse(i),l.$$state=o,v(i,!1,o)):(m=!1,y(i,o)))}),r.$$phase||r.$digest()):s.location.href=t}),r.$watch(function(){if(m||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var t=n.url(),e=l.absUrl(),o=n.state(),s=l.$$replace,a=!((u=t)===(h=e)||pi(u).href===pi(h).href)||l.$$html5&&i.history&&o!==l.$$state;(m||a)&&(m=!1,r.$evalAsync(function(){var e=l.absUrl(),n=r.$broadcast("$locationChangeStart",e,t,l.$$state,o).defaultPrevented;l.absUrl()===e&&(n?(l.$$parse(t),l.$$state=o):(a&&v(e,s,o===l.$$state?null:l.$$state),y(t,o)))}))}var u,h;l.$$replace=!1}),l;function y(t,e){r.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}}]}function yn(){var t=!0,e=this;this.debugEnabled=function(e){return U(e)?(t=e,this):t},this.$get=["$window",function(r){var n,i=s||/\bEdge\//.test(r.navigator&&r.navigator.userAgent);return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:(n=o("debug"),function(){t&&n.apply(e,arguments)})};function o(t){var e=r.console||{},n=e[t]||e.log||F;return function(){var t=[];return E(arguments,function(e){t.push(function(t){return X(t)&&(t.stack&&i?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),Function.prototype.apply.call(n,e,t)}}}]}E([dn,pn,cn],function(t){t.prototype=Object.create(fn),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==cn||!this.$$html5)throw rn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=$(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var xn=o("$parse"),bn={}.constructor.prototype.valueOf;function _n(t){return t+""}var Tn=Ut();E("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){Tn[t]=!0});var wn={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},En=function(t){this.options=t};En.prototype={constructor:En,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var r=e+this.peek(),n=r+this.peek(2),i=Tn[e],o=Tn[r],s=Tn[n];if(i||o||s){var a=s?n:o?r:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var r=t.charCodeAt(0),n=e.charCodeAt(0);return r>=55296&&r<=56319&&n>=56320&&n<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,r){r=r||this.index;var n=U(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,r)+"]":" "+r;throw xn("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,n,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var r=d(this.text.charAt(this.index));if("."===r||this.isNumber(r))t+=r;else{var n=this.peek();if("e"===r&&this.isExpOperator(n))t+=r;else if(this.isExpOperator(r)&&n&&this.isNumber(n)&&"e"===t.charAt(t.length-1))t+=r;else{if(!this.isExpOperator(r)||n&&this.isNumber(n)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var r="",n=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(n+=o,i){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,r+=String.fromCharCode(parseInt(s,16))}else{r+=wn[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:n,constant:!0,value:r});r+=o}this.index++}this.throwError("Unterminated quote",e)}};var Sn=function(t,e){this.lexer=t,this.options=e};function An(t,e){return void 0!==t?t:e}function Cn(t,e){return void 0===t?e:void 0===e?t:t+e}Sn.Program="Program",Sn.ExpressionStatement="ExpressionStatement",Sn.AssignmentExpression="AssignmentExpression",Sn.ConditionalExpression="ConditionalExpression",Sn.LogicalExpression="LogicalExpression",Sn.BinaryExpression="BinaryExpression",Sn.UnaryExpression="UnaryExpression",Sn.CallExpression="CallExpression",Sn.MemberExpression="MemberExpression",Sn.Identifier="Identifier",Sn.Literal="Literal",Sn.ArrayExpression="ArrayExpression",Sn.Property="Property",Sn.ObjectExpression="ObjectExpression",Sn.ThisExpression="ThisExpression",Sn.LocalsExpression="LocalsExpression",Sn.NGValueParameter="NGValueParameter",Sn.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Sn.Program,body:t}},expressionStatement:function(){return{type:Sn.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Dn(t))throw xn("lval","Trying to assign a value to a non l-value");t={type:Sn.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,r=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Sn.ConditionalExpression,test:r,alternate:t,consequent:e}):r},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Sn.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Sn.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Sn.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Sn.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Sn.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Sn.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Sn.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=at(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Sn.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Sn.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Sn.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Sn.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],r={type:Sn.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return r},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Sn.Identifier,name:t.text}},constant:function(){return{type:Sn.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Sn.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Sn.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Sn.ObjectExpression,properties:e}},throwError:function(t,e){throw xn("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw xn("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw xn("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,r,n){return this.peekAhead(0,t,e,r,n)},peekAhead:function(t,e,r,n,i){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===r||s===n||s===i||!e&&!r&&!n&&!i)return o}return!1},expect:function(t,e,r,n){var i=this.peek(t,e,r,n);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:Sn.ThisExpression},$locals:{type:Sn.LocalsExpression}}};var Mn=1,Rn=2;function On(t,e,r){var n,i,o,s=t.isPure=function(t,e){switch(t.type){case Sn.MemberExpression:if(t.computed)return!1;break;case Sn.UnaryExpression:return Mn;case Sn.BinaryExpression:return"+"!==t.operator&&Mn;case Sn.CallExpression:return!1}return void 0===e?Rn:e}(t,r);switch(t.type){case Sn.Program:n=!0,E(t.body,function(t){On(t.expression,e,s),n=n&&t.expression.constant}),t.constant=n;break;case Sn.Literal:t.constant=!0,t.toWatch=[];break;case Sn.UnaryExpression:On(t.argument,e,s),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Sn.BinaryExpression:On(t.left,e,s),On(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Sn.LogicalExpression:On(t.left,e,s),On(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Sn.ConditionalExpression:On(t.test,e,s),On(t.alternate,e,s),On(t.consequent,e,s),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Sn.Identifier:t.constant=!1,t.toWatch=[t];break;case Sn.MemberExpression:On(t.object,e,s),t.computed&&On(t.property,e,s),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Sn.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),n=o,i=[],E(t.arguments,function(t){On(t,e,s),n=n&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=o?i:[t];break;case Sn.AssignmentExpression:On(t.left,e,s),On(t.right,e,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Sn.ArrayExpression:n=!0,i=[],E(t.elements,function(t){On(t,e,s),n=n&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=i;break;case Sn.ObjectExpression:n=!0,i=[],E(t.properties,function(t){On(t.value,e,s),n=n&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(On(t.key,e,!1),n=n&&t.key.constant,i.push.apply(i,t.key.toWatch))}),t.constant=n,t.toWatch=i;break;case Sn.ThisExpression:case Sn.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Pn(t){if(1===t.length){var e=t[0].expression,r=e.toWatch;return 1!==r.length?r:r[0]!==e?r:void 0}}function Dn(t){return t.type===Sn.Identifier||t.type===Sn.MemberExpression}function In(t){if(1===t.body.length&&Dn(t.body[0].expression))return{type:Sn.AssignmentExpression,left:t.body[0].expression,right:{type:Sn.NGValueParameter},operator:"="}}function Ln(t){this.$filter=t}function Fn(t){this.$filter=t}function Bn(t,e,r){this.ast=new Sn(t,r),this.astCompiler=r.csp?new Fn(e):new Ln(e)}function kn(t){return H(t.valueOf)?t.valueOf():bn.call(t)}function Nn(){var t,e,r=Ut(),n={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){n[t]=e},this.setIdentifierFns=function(r,n){return t=r,e=n,this},this.$get=["$filter",function(i){var o={csp:ht().noUnsafeEval,literals:at(n),isIdentifierStart:H(t)&&t,isIdentifierContinue:H(e)&&e};return s.$$getAst=function(t){return new Bn(new En(o),i,o).getAst(t).ast},s;function s(t,e){var n,s;switch(typeof t){case"string":if(t=t.trim(),!(n=r[s=t]))n=new Bn(new En(o),i,o).parse(t),r[s]=p(n);return d(n,e);case"function":return d(t,e);default:return d(F,e)}}function a(t,e,r){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=kn(t))&&!r)&&(t===e||t!=t&&e!=e)}function l(t,e,r,n,i){var o,s=n.inputs;if(1===s.length){var l=a;return s=s[0],t.$watch(function(t){var e=s(t);return a(e,l,s.isPure)||(o=n(t,void 0,void 0,[e]),l=e&&kn(e)),o},e,r,i)}for(var u=[],h=[],c=0,p=s.length;c<p;c++)u[c]=a,h[c]=null;return t.$watch(function(t){for(var e=!1,r=0,i=s.length;r<i;r++){var l=s[r](t);(e||(e=!a(l,u[r],s[r].isPure)))&&(h[r]=l,u[r]=l&&kn(l))}return e&&(o=n(t,void 0,void 0,h)),o},e,r,i)}function u(t,e,r,n,i){var o,s,a=n.literal?h:U,l=n.$$intercepted||n,u=n.$$interceptor||B,c=n.inputs&&!l.inputs;return f.literal=n.literal,f.constant=n.constant,f.inputs=n.inputs,p(f),o=t.$watch(f,e,r,i);function d(){a(s)&&o()}function f(t,e,r,n){return s=c&&n?n[0]:l(t,e,r,n),a(s)&&t.$$postDigest(d),u(s)}}function h(t){var e=!0;return E(t,function(t){U(t)||(e=!1)}),e}function c(t,e,r,n){var i=t.$watch(function(t){return i(),n(t)},e,r);return i}function p(t){return t.constant?t.$$watchDelegate=c:t.oneTime?t.$$watchDelegate=u:t.inputs&&(t.$$watchDelegate=l),t}function d(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function r(r){return e(t(r))}return r.$stateful=t.$stateful||e.$stateful,r.$$pure=t.$$pure&&e.$$pure,r}(t.$$interceptor,e),t=t.$$intercepted);var r=!1,n=function(n,i,o,s){var a=r&&s?s[0]:t(n,i,o,s);return e(a)};return n.$$intercepted=t,n.$$interceptor=e,n.literal=t.literal,n.oneTime=t.oneTime,n.constant=t.constant,e.$stateful||(r=!t.inputs,n.inputs=t.inputs?t.inputs:[t],e.$$pure||(n.inputs=n.inputs.map(function(t){return t.isPure===Rn?function(e){return t(e)}:t}))),p(n)}}]}function $n(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,r){return jn(function(t){e.$evalAsync(t)},r,t)}],this.errorOnUnhandledRejections=function(e){return U(e)?(t=e,this):t}}function Un(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,r){return jn(function(t){e.defer(t)},r,t)}],this.errorOnUnhandledRejections=function(e){return U(e)?(t=e,this):t}}function jn(t,e,r){var n=o("$q",TypeError),i=0,s=[];function a(){return new l}function l(){var t=this.promise=new u;this.resolve=function(e){p(t,e)},this.reject=function(e){d(t,e)},this.notify=function(e){g(t,e)}}function u(){this.$$state={status:0}}function h(){for(;!i&&s.length;){var t=s.shift();if(!Gn(t)){Wn(t);var r="Possibly unhandled rejection: "+Ht(t.value);X(t.value)?e(t.value,r):e(r)}}}function c(n){!r||n.pending||2!==n.status||Gn(n)||(0===i&&0===s.length&&t(h),s.push(n)),!n.processScheduled&&n.pending&&(n.processScheduled=!0,++i,t(function(){!function(n){var o,s,a;a=n.pending,n.processScheduled=!1,n.pending=void 0;try{for(var l=0,u=a.length;l<u;++l){Wn(n),s=a[l][0],o=a[l][n.status];try{H(o)?p(s,o(n.value)):1===n.status?p(s,n.value):d(s,n.value)}catch(t){d(s,t),t&&!0===t.$$passToExceptionHandler&&e(t)}}}finally{--i,r&&0===i&&t(h)}}(n)}))}function p(t,e){t.$$state.status||(e===t?f(t,n("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):function t(e,r){var n;var i=!1;try{(j(r)||H(r))&&(n=r.then),H(n)?(e.$$state.status=-1,n.call(r,function o(t){if(i)return;i=!0,function t(e,r){var n;var i=!1;try{(j(r)||H(r))&&(n=r.then),H(n)?(e.$$state.status=-1,n.call(r,o,s,function(t){g(e,t)})):(e.$$state.value=r,e.$$state.status=1,c(e.$$state))}catch(t){s(t)}function o(r){i||(i=!0,t(e,r))}function s(t){i||(i=!0,f(e,t))}}(e,t)},s,function(t){g(e,t)})):(e.$$state.value=r,e.$$state.status=1,c(e.$$state))}catch(t){s(t)}function o(r){i||(i=!0,t(e,r))}function s(t){i||(i=!0,f(e,t))}}(t,e))}function d(t,e){t.$$state.status||f(t,e)}function f(t,e){t.$$state.value=e,t.$$state.status=2,c(t.$$state)}function g(r,n){var i=r.$$state.pending;r.$$state.status<=0&&i&&i.length&&t(function(){for(var t,r,o=0,s=i.length;o<s;o++){r=i[o][0],t=i[o][3];try{g(r,H(t)?t(n):n)}catch(t){e(t)}}})}function v(t){var e=new u;return d(e,t),e}function m(t,e,r){var n=null;try{H(r)&&(n=r())}catch(t){return v(t)}return K(n)?n.then(function(){return e(t)},v):e(t)}function y(t,e,r,n){var i=new u;return p(i,t),i.then(e,r,n)}O(u.prototype,{then:function(t,e,r){if($(t)&&$(e)&&$(r))return this;var n=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([n,t,e,r]),this.$$state.status>0&&c(this.$$state),n},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return m(e,x,t)},function(e){return m(e,v,t)},e)}});var x=y;function b(t){if(!H(t))throw n("norslvr","Expected resolverFn, got '{0}'",t);var e=new u;return t(function(t){p(e,t)},function(t){d(e,t)}),e}return b.prototype=u.prototype,b.defer=a,b.reject=v,b.when=y,b.resolve=x,b.all=function(t){var e=new u,r=0,n=Y(t)?[]:{};return E(t,function(t,i){r++,y(t).then(function(t){n[i]=t,--r||p(e,n)},function(t){d(e,t)})}),0===r&&p(e,n),e},b.race=function(t){var e=a();return E(t,function(t){y(t).then(e.resolve,e.reject)}),e.promise},b}function Gn(t){return!!t.pur}function Wn(t){t.pur=!0}function Vn(t){Wn(t.$$state)}function zn(){this.$get=["$window","$timeout",function(t,e){var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame,n=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!r,o=i?function(t){var e=r(t);return function(){n(e)}}:function(t){var r=e(t,16.66,!1);return function(){e.cancel(r)}};return o.supported=i,o}]}function Yn(){var t=10,e=o("$rootScope"),r=null,n=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(i,o,a){function l(t){t.currentScope.$$destroyed=!0}function u(){this.$id=C(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(t,e){var r;return e=e||this,t?(r=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=C(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),r=new this.$$ChildScope),r.$parent=e,r.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=r,e.$$childTail=r):e.$$childHead=e.$$childTail=r,(t||e!==this)&&r.$on("$destroy",l),r},$watch:function(t,e,n,i){var s=o(t),a=H(e)?e:F;if(s.$$watchDelegate)return s.$$watchDelegate(this,a,n,s,t);var l=this,u=l.$$watchers,h={fn:a,last:b,get:s,exp:i||t,eq:!!n};return r=null,u||((u=l.$$watchers=[]).$$digestWatchIndex=-1),u.unshift(h),u.$$digestWatchIndex++,y(this,1),function(){var t=st(u,h);t>=0&&(y(l,-1),t<u.$$digestWatchIndex&&u.$$digestWatchIndex--),r=null}},$watchGroup:function(t,e){var r=new Array(t.length),n=new Array(t.length),i=[],o=this,s=!1,a=!0;if(!t.length){var l=!0;return o.$evalAsync(function(){l&&e(n,n,o)}),function(){l=!1}}if(1===t.length)return this.$watch(t[0],function(t,i,o){n[0]=t,r[0]=i,e(n,t===i?n:r,o)});function u(){s=!1;try{a?(a=!1,e(n,n,o)):e(n,r,o)}finally{for(var i=0;i<t.length;i++)r[i]=n[i]}}return E(t,function(t,e){var r=o.$watch(t,function(t){n[e]=t,s||(s=!0,o.$evalAsync(u))});i.push(r)}),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){g.$$pure=o(t).literal,g.$stateful=!g.$$pure;var r,n,i,s=this,a=e.length>1,l=0,u=o(t,g),h=[],c={},d=!0,f=0;function g(t){var e,i,o,s;if(!$(r=t)){if(j(r))if(w(r)){n!==h&&(f=(n=h).length=0,l++),e=r.length,f!==e&&(l++,n.length=f=e);for(var a=0;a<e;a++)s=n[a],o=r[a],s!=s&&o!=o||s===o||(l++,n[a]=o)}else{for(i in n!==c&&(n=c={},f=0,l++),e=0,r)p.call(r,i)&&(e++,o=r[i],s=n[i],i in n?s!=s&&o!=o||s===o||(l++,n[i]=o):(f++,n[i]=o,l++));if(f>e)for(i in l++,n)p.call(r,i)||(f--,delete n[i])}else n!==r&&(n=r,l++);return l}}return this.$watch(u,function(){if(d?(d=!1,e(r,r,s)):e(r,i,s),a)if(j(r))if(w(r)){i=new Array(r.length);for(var t=0;t<r.length;t++)i[t]=r[t]}else for(var n in i={},r)p.call(r,n)&&(i[n]=r[n]);else i=r})},$digest:function(){var o,s,l,u,p,f,y,x,T,w=t,E=c.length?h:this,S=[];v("$digest"),a.$$checkUrlChange(),this===h&&null!==n&&(a.defer.cancel(n),_()),r=null;do{p=!1,y=E;for(var A=0;A<c.length;A++){try{(0,(T=c[A]).fn)(T.scope,T.locals)}catch(t){i(t)}r=null}c.length=0;t:do{if(u=!y.$$suspended&&y.$$watchers)for(u.$$digestWatchIndex=u.length;u.$$digestWatchIndex--;)try{if(o=u[u.$$digestWatchIndex])if((s=(0,o.get)(y))===(l=o.last)||(o.eq?ut(s,l):I(s)&&I(l))){if(o===r){p=!1;break t}}else p=!0,r=o,o.last=o.eq?at(s,null):s,(0,o.fn)(s,l===b?s:l,y),w<5&&(S[x=4-w]||(S[x]=[]),S[x].push({msg:H(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:s,oldVal:l}))}catch(t){i(t)}if(!(f=!y.$$suspended&&y.$$watchersCount&&y.$$childHead||y!==E&&y.$$nextSibling))for(;y!==E&&!(f=y.$$nextSibling);)y=y.$parent}while(y=f);if((p||c.length)&&!w--)throw m(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,S)}while(p||c.length);for(m();g<d.length;)try{d[g++]()}catch(t){i(t)}d.length=g=0,a.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===h&&a.$$applicationDestroyed(),y(this,-this.$$watchersCount),this.$$listenerCount)x(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=F,this.$on=this.$watch=this.$watchGroup=function(){return F},this.$$listeners={},this.$$nextSibling=null,function t(e){9===s&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return o(t)(this,e)},$evalAsync:function(t,e){h.$$phase||c.length||a.defer(function(){c.length&&h.$digest()},null,"$evalAsync"),c.push({scope:this,fn:o(t),locals:e})},$$postDigest:function(t){d.push(t)},$apply:function(t){try{v("$apply");try{return this.$eval(t)}finally{m()}}catch(t){i(t)}finally{try{h.$digest()}catch(t){throw i(t),t}}},$applyAsync:function(t){var e=this;t&&f.push(function(){e.$eval(t)}),t=o(t),null===n&&(n=a.defer(function(){h.$apply(_)},null,"$applyAsync"))},$on:function(t,e){var r=this.$$listeners[t];r||(this.$$listeners[t]=r=[]),r.push(e);var n=this;do{n.$$listenerCount[t]||(n.$$listenerCount[t]=0),n.$$listenerCount[t]++}while(n=n.$parent);var i=this;return function(){var n=r.indexOf(e);-1!==n&&(delete r[n],x(i,1,t))}},$emit:function(t,e){var r,n,o,s=[],a=this,l=!1,u={name:t,targetScope:a,stopPropagation:function(){l=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},h=pt([u],arguments,1);do{for(r=a.$$listeners[t]||s,u.currentScope=a,n=0,o=r.length;n<o;n++)if(r[n])try{r[n].apply(null,h)}catch(t){i(t)}else r.splice(n,1),n--,o--;if(l)break;a=a.$parent}while(a);return u.currentScope=null,u},$broadcast:function(t,e){var r=this,n=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var s,a,l,u=pt([o],arguments,1);r=n;){for(o.currentScope=r,a=0,l=(s=r.$$listeners[t]||[]).length;a<l;a++)if(s[a])try{s[a].apply(null,u)}catch(t){i(t)}else s.splice(a,1),a--,l--;if(!(n=r.$$listenerCount[t]&&r.$$childHead||r!==this&&r.$$nextSibling))for(;r!==this&&!(n=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var h=new u,c=h.$$asyncQueue=[],d=h.$$postDigestQueue=[],f=h.$$applyAsyncQueue=[],g=0;return h;function v(t){if(h.$$phase)throw e("inprog","{0} already in progress",h.$$phase);h.$$phase=t}function m(){h.$$phase=null}function y(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function x(t,e,r){do{t.$$listenerCount[r]-=e,0===t.$$listenerCount[r]&&delete t.$$listenerCount[r]}while(t=t.$parent)}function b(){}function _(){for(;f.length;)try{f.shift()()}catch(t){i(t)}n=null}}]}function Xn(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return U(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return U(t)?(e=t,this):e},this.$get=function(){return function(r,n){var i=n?e:t,o=pi(r&&r.trim()).href;return""===o||o.match(i)?r:"unsafe:"+o}}}Ln.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},On(t,e.$filter);var r,n="";if(this.stage="assign",r=In(t)){this.state.computing="assign";var i=this.nextId();this.recurse(r,i),this.return_(i),n="fn.assign="+this.generateFunction("assign","s,v,l")}var o=Pn(t.body);e.stage="inputs",E(o,function(t,r){var n="fn"+r;e.state[n]={vars:[],body:[],own:{}},e.state.computing=n;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:n,isPure:t.isPure}),t.watchId=r}),this.state.computing="fn",this.stage="main",this.recurse(t);var s='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",a=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,_n,An,Cn);return this.state=this.stage=void 0,a},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,r=this;return E(e,function(e){t.push("var "+e.name+"="+r.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(t){return t.name}).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return E(this.state.filters,function(r,n){t.push(r+"=$filter("+e.escape(n)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,r,n,i,o){var s,a,l,u,h,c=this;if(n=n||F,!o&&U(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,r,n,i,!0));switch(t.type){case Sn.Program:E(t.body,function(e,r){c.recurse(e.expression,void 0,void 0,function(t){a=t}),r!==t.body.length-1?c.current().body.push(a,";"):c.return_(a)});break;case Sn.Literal:u=this.escape(t.value),this.assign(e,u),n(e||u);break;case Sn.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){a=t}),u=t.operator+"("+this.ifDefined(a,0)+")",this.assign(e,u),n(u);break;case Sn.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){s=t}),this.recurse(t.right,void 0,void 0,function(t){a=t}),u="+"===t.operator?this.plus(s,a):"-"===t.operator?this.ifDefined(s,0)+t.operator+this.ifDefined(a,0):"("+s+")"+t.operator+"("+a+")",this.assign(e,u),n(u);break;case Sn.LogicalExpression:e=e||this.nextId(),c.recurse(t.left,e),c.if_("&&"===t.operator?e:c.not(e),c.lazyRecurse(t.right,e)),n(e);break;case Sn.ConditionalExpression:e=e||this.nextId(),c.recurse(t.test,e),c.if_(e,c.lazyRecurse(t.alternate,e),c.lazyRecurse(t.consequent,e)),n(e);break;case Sn.Identifier:e=e||this.nextId(),r&&(r.context="inputs"===c.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),r.computed=!1,r.name=t.name),c.if_("inputs"===c.stage||c.not(c.getHasOwnProperty("l",t.name)),function(){c.if_("inputs"===c.stage||"s",function(){i&&1!==i&&c.if_(c.isNull(c.nonComputedMember("s",t.name)),c.lazyAssign(c.nonComputedMember("s",t.name),"{}")),c.assign(e,c.nonComputedMember("s",t.name))})},e&&c.lazyAssign(e,c.nonComputedMember("l",t.name))),n(e);break;case Sn.MemberExpression:s=r&&(r.context=this.nextId())||this.nextId(),e=e||this.nextId(),c.recurse(t.object,s,void 0,function(){c.if_(c.notNull(s),function(){t.computed?(a=c.nextId(),c.recurse(t.property,a),c.getStringValue(a),i&&1!==i&&c.if_(c.not(c.computedMember(s,a)),c.lazyAssign(c.computedMember(s,a),"{}")),u=c.computedMember(s,a),c.assign(e,u),r&&(r.computed=!0,r.name=a)):(i&&1!==i&&c.if_(c.isNull(c.nonComputedMember(s,t.property.name)),c.lazyAssign(c.nonComputedMember(s,t.property.name),"{}")),u=c.nonComputedMember(s,t.property.name),c.assign(e,u),r&&(r.computed=!1,r.name=t.property.name))},function(){c.assign(e,"undefined")}),n(e)},!!i);break;case Sn.CallExpression:e=e||this.nextId(),t.filter?(a=c.filter(t.callee.name),l=[],E(t.arguments,function(t){var e=c.nextId();c.recurse(t,e),l.push(e)}),u=a+"("+l.join(",")+")",c.assign(e,u),n(e)):(a=c.nextId(),s={},l=[],c.recurse(t.callee,a,s,function(){c.if_(c.notNull(a),function(){E(t.arguments,function(e){c.recurse(e,t.constant?void 0:c.nextId(),void 0,function(t){l.push(t)})}),u=s.name?c.member(s.context,s.name,s.computed)+"("+l.join(",")+")":a+"("+l.join(",")+")",c.assign(e,u)},function(){c.assign(e,"undefined")}),n(e)}));break;case Sn.AssignmentExpression:a=this.nextId(),s={},this.recurse(t.left,void 0,s,function(){c.if_(c.notNull(s.context),function(){c.recurse(t.right,a),u=c.member(s.context,s.name,s.computed)+t.operator+a,c.assign(e,u),n(e||u)})},1);break;case Sn.ArrayExpression:l=[],E(t.elements,function(e){c.recurse(e,t.constant?void 0:c.nextId(),void 0,function(t){l.push(t)})}),u="["+l.join(",")+"]",this.assign(e,u),n(e||u);break;case Sn.ObjectExpression:l=[],h=!1,E(t.properties,function(t){t.computed&&(h=!0)}),h?(e=e||this.nextId(),this.assign(e,"{}"),E(t.properties,function(t){t.computed?(s=c.nextId(),c.recurse(t.key,s)):s=t.key.type===Sn.Identifier?t.key.name:""+t.key.value,a=c.nextId(),c.recurse(t.value,a),c.assign(c.member(e,s,t.computed),a)})):(E(t.properties,function(e){c.recurse(e.value,t.constant?void 0:c.nextId(),void 0,function(t){l.push(c.escape(e.key.type===Sn.Identifier?e.key.name:""+e.key.value)+":"+t)})}),u="{"+l.join(",")+"}",this.assign(e,u)),n(e||u);break;case Sn.ThisExpression:this.assign(e,"s"),n(e||"s");break;case Sn.LocalsExpression:this.assign(e,"l"),n(e||"l");break;case Sn.NGValueParameter:this.assign(e,"v"),n(e||"v")}},getHasOwnProperty:function(t,e){var r=t+"."+e,n=this.current().own;return n.hasOwnProperty(r)||(n[r]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),n[r]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,r){if(!0===t)e();else{var n=this.current().body;n.push("if(",t,"){"),e(),n.push("}"),r&&(n.push("else{"),r(),n.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,r){return r?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,r,n,i,o){var s=this;return function(){s.recurse(t,e,r,n,i,o)}},lazyAssign:function(t,e){var r=this;return function(){r.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(W(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(V(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw xn("esc","IMPOSSIBLE")},nextId:function(t,e){var r="v"+this.state.nextId++;return t||this.current().vars.push(r+(e?"="+e:"")),r},current:function(){return this.state[this.state.computing]}},Fn.prototype={compile:function(t){var e,r,n=this;On(t,n.$filter),(e=In(t))&&(r=this.recurse(e));var i,o=Pn(t.body);o&&(i=[],E(o,function(t,e){var r=n.recurse(t);r.isPure=t.isPure,t.input=r,i.push(r),t.watchId=e}));var s=[];E(t.body,function(t){s.push(n.recurse(t.expression))});var a=0===t.body.length?F:1===t.body.length?s[0]:function(t,e){var r;return E(s,function(n){r=n(t,e)}),r};return r&&(a.assign=function(t,e,n){return r(t,n,e)}),i&&(a.inputs=i),a},recurse:function(t,e,r){var n,i,o,s=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Sn.Literal:return this.value(t.value,e);case Sn.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case Sn.BinaryExpression:case Sn.LogicalExpression:return n=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](n,i,e);case Sn.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Sn.Identifier:return s.identifier(t.name,e,r);case Sn.MemberExpression:return n=this.recurse(t.object,!1,!!r),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(n,i,e,r):this.nonComputedMember(n,i,e,r);case Sn.CallExpression:return o=[],E(t.arguments,function(t){o.push(s.recurse(t))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,r,n,s){for(var a=[],l=0;l<o.length;++l)a.push(o[l](t,r,n,s));var u=i.apply(void 0,a,s);return e?{context:void 0,name:void 0,value:u}:u}:function(t,r,n,s){var a,l=i(t,r,n,s);if(null!=l.value){for(var u=[],h=0;h<o.length;++h)u.push(o[h](t,r,n,s));a=l.value.apply(l.context,u)}return e?{value:a}:a};case Sn.AssignmentExpression:return n=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,r,o,s){var a=n(t,r,o,s),l=i(t,r,o,s);return a.context[a.name]=l,e?{value:l}:l};case Sn.ArrayExpression:return o=[],E(t.elements,function(t){o.push(s.recurse(t))}),function(t,r,n,i){for(var s=[],a=0;a<o.length;++a)s.push(o[a](t,r,n,i));return e?{value:s}:s};case Sn.ObjectExpression:return o=[],E(t.properties,function(t){t.computed?o.push({key:s.recurse(t.key),computed:!0,value:s.recurse(t.value)}):o.push({key:t.key.type===Sn.Identifier?t.key.name:""+t.key.value,computed:!1,value:s.recurse(t.value)})}),function(t,r,n,i){for(var s={},a=0;a<o.length;++a)o[a].computed?s[o[a].key(t,r,n,i)]=o[a].value(t,r,n,i):s[o[a].key]=o[a].value(t,r,n,i);return e?{value:s}:s};case Sn.ThisExpression:return function(t){return e?{value:t}:t};case Sn.LocalsExpression:return function(t,r){return e?{value:r}:r};case Sn.NGValueParameter:return function(t,r,n){return e?{value:n}:n}}},"unary+":function(t,e){return function(r,n,i,o){var s=t(r,n,i,o);return s=U(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(r,n,i,o){var s=t(r,n,i,o);return s=U(s)?-s:-0,e?{value:s}:s}},"unary!":function(t,e){return function(r,n,i,o){var s=!t(r,n,i,o);return e?{value:s}:s}},"binary+":function(t,e,r){return function(n,i,o,s){var a=Cn(t(n,i,o,s),e(n,i,o,s));return r?{value:a}:a}},"binary-":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s),l=e(n,i,o,s),u=(U(a)?a:0)-(U(l)?l:0);return r?{value:u}:u}},"binary*":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)*e(n,i,o,s);return r?{value:a}:a}},"binary/":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)/e(n,i,o,s);return r?{value:a}:a}},"binary%":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)%e(n,i,o,s);return r?{value:a}:a}},"binary===":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)===e(n,i,o,s);return r?{value:a}:a}},"binary!==":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)!==e(n,i,o,s);return r?{value:a}:a}},"binary==":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)==e(n,i,o,s);return r?{value:a}:a}},"binary!=":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)!=e(n,i,o,s);return r?{value:a}:a}},"binary<":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)<e(n,i,o,s);return r?{value:a}:a}},"binary>":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)>e(n,i,o,s);return r?{value:a}:a}},"binary<=":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)<=e(n,i,o,s);return r?{value:a}:a}},"binary>=":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)>=e(n,i,o,s);return r?{value:a}:a}},"binary&&":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)&&e(n,i,o,s);return r?{value:a}:a}},"binary||":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)||e(n,i,o,s);return r?{value:a}:a}},"ternary?:":function(t,e,r,n){return function(i,o,s,a){var l=t(i,o,s,a)?e(i,o,s,a):r(i,o,s,a);return n?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,r){return function(n,i,o,s){var a=i&&t in i?i:n;r&&1!==r&&a&&null==a[t]&&(a[t]={});var l=a?a[t]:void 0;return e?{context:a,name:t,value:l}:l}},computedMember:function(t,e,r,n){return function(i,o,s,a){var l,u,h=t(i,o,s,a);return null!=h&&(l=_n(l=e(i,o,s,a)),n&&1!==n&&h&&!h[l]&&(h[l]={}),u=h[l]),r?{context:h,name:l,value:u}:u}},nonComputedMember:function(t,e,r,n){return function(i,o,s,a){var l=t(i,o,s,a);n&&1!==n&&l&&null==l[e]&&(l[e]={});var u=null!=l?l[e]:void 0;return r?{context:l,name:e,value:u}:u}},inputs:function(t,e){return function(r,n,i,o){return o?o[e]:t(r,n,i)}}},Bn.prototype={constructor:Bn,parse:function(t){var e=this.getAst(t),r=this.astCompiler.compile(e.ast);return r.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Sn.Literal||t.body[0].expression.type===Sn.ArrayExpression||t.body[0].expression.type===Sn.ObjectExpression)}(e.ast),r.constant=function(t){return t.constant}(e.ast),r.oneTime=e.oneTime,r},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var Hn=o("$sce"),qn={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Zn=/_([a-z])/g;function Qn(t){return t.replace(Zn,re)}function Jn(t){var e=[];return U(t)&&E(t,function(t){e.push(function(t){if("self"===t)return t;if(W(t)){if(t.indexOf("***")>-1)throw Hn("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=rt(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(q(t))return new RegExp("^"+t.source+"$");throw Hn("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Kn(){this.SCE_CONTEXTS=qn;var t=["self"],r=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Jn(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(r=Jn(t)),r},this.$get=["$injector","$$sanitizeUri",function(n,i){var o=function(t){throw Hn("unsafe","Attempting to use an unsafe value in a safe context.")};function s(t,r){return"self"===t?di(r,ci)||function(t){return di(t,function(){if(e.document.baseURI)return e.document.baseURI;ui||((ui=e.document.createElement("a")).href=".",ui=ui.cloneNode(!1));return ui.href}())}(r):!!t.exec(r.href)}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(o=n.get("$sanitize"));var l=a(),u={};return u[qn.HTML]=a(l),u[qn.CSS]=a(l),u[qn.MEDIA_URL]=a(l),u[qn.URL]=a(u[qn.MEDIA_URL]),u[qn.JS]=a(l),u[qn.RESOURCE_URL]=a(u[qn.URL]),{trustAs:function(t,e){var r=u.hasOwnProperty(t)?u[t]:null;if(!r)throw Hn("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||$(e)||""===e)return e;if("string"!=typeof e)throw Hn("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new r(e)},getTrusted:function(e,n){if(null===n||$(n)||""===n)return n;var a=u.hasOwnProperty(e)?u[e]:null;if(a&&n instanceof a)return n.$$unwrapTrustedValue();if(H(n.$$unwrapTrustedValue)&&(n=n.$$unwrapTrustedValue()),e===qn.MEDIA_URL||e===qn.URL)return i(n.toString(),e===qn.MEDIA_URL);if(e===qn.RESOURCE_URL){if(function(e){var n,i,o=pi(e.toString()),a=!1;for(n=0,i=t.length;n<i;n++)if(s(t[n],o)){a=!0;break}if(a)for(n=0,i=r.length;n<i;n++)if(s(r[n],o)){a=!1;break}return a}(n))return n;throw Hn("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",n.toString())}if(e===qn.HTML)return o(n);throw Hn("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof l?t.$$unwrapTrustedValue():t}}}]}function ti(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,r){if(t&&s<8)throw Hn("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var n=Xt(qn);n.isEnabled=function(){return t},n.trustAs=r.trustAs,n.getTrusted=r.getTrusted,n.valueOf=r.valueOf,t||(n.trustAs=n.getTrusted=function(t,e){return e},n.valueOf=B),n.parseAs=function(t,r){var i=e(r);return i.literal&&i.constant?i:e(r,function(e){return n.getTrusted(t,e)})};var i=n.parseAs,o=n.getTrusted,a=n.trustAs;return E(qn,function(t,e){var r=d(e);n[Qn("parse_as_"+r)]=function(e){return i(t,e)},n[Qn("get_trusted_"+r)]=function(e){return o(t,e)},n[Qn("trust_as_"+r)]=function(e){return a(t,e)}}),n}]}function ei(){this.$get=["$window","$document",function(t,e){var r={},n=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=D((/android (\d+)/.exec(d((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},l=a.body&&a.body.style,u=!1,h=!1;return l&&(u=!!("transition"in l||"webkitTransition"in l),h=!!("animation"in l||"webkitAnimation"in l)),{history:!(!n||i<4||o),hasEvent:function(t){if("input"===t&&s)return!1;if($(r[t])){var e=a.createElement("div");r[t]="on"+t in e}return r[t]},csp:ht(),transitions:u,animations:h,android:i}}]}function ri(){this.$get=k(function(t){return new ni(t)})}function ni(t){var e={},r=[],n=this.ALL_TASKS_TYPE="$$all$$",i=this.DEFAULT_TASK_TYPE="$$default$$";function o(){var t=r.pop();return t&&t.cb}function s(t){for(var e=r.length-1;e>=0;--e){var n=r[e];if(n.type===t)return r.splice(e,1),n.cb}}this.completeTask=function(r,a){a=a||i;try{r()}finally{!function(t){e[t=t||i]&&(e[t]--,e[n]--)}(a);var l=e[a],u=e[n];if(!u||!l)for(var h,c=u?s:o;h=c(a);)try{h()}catch(e){t.error(e)}}},this.incTaskCount=function(t){e[t=t||i]=(e[t]||0)+1,e[n]=(e[n]||0)+1},this.notifyWhenNoPendingTasks=function(t,i){e[i=i||n]?r.push({type:i,cb:t}):t()}}var ii=o("$templateRequest");function oi(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,r,n,i,o){function s(a,l){s.totalPendingRequests++,W(a)&&!$(r.get(a))||(a=o.getTrustedResourceUrl(a));var u=n.defaults&&n.defaults.transformResponse;return Y(u)?u=u.filter(function(t){return t!==Ur}):u===Ur&&(u=null),n.get(a,O({cache:r,transformResponse:u},t)).finally(function(){s.totalPendingRequests--}).then(function(t){return r.put(a,t.data)},function(t){l||(t=ii("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,t.status,t.statusText),e(t));return i.reject(t)})}return s.totalPendingRequests=0,s}]}function si(){this.$get=["$rootScope","$browser","$location",function(t,e,r){var n={findBindings:function(t,e,r){var n=t.getElementsByClassName("ng-binding"),i=[];return E(n,function(t){var n=_.element(t).data("$binding");n&&E(n,function(n){r?new RegExp("(^|\\s)"+rt(e)+"(\\s|\\||$)").test(n)&&i.push(t):-1!==n.indexOf(e)&&i.push(t)})}),i},findModels:function(t,e,r){for(var n=["ng-","data-ng-","ng\\:"],i=0;i<n.length;++i){var o="["+n[i]+"model"+(r?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(o);if(s.length)return s}},getLocation:function(){return r.url()},setLocation:function(e){e!==r.url()&&(r.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return n}]}var ai=o("$timeout");function li(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,r,n,i){var o={};function s(s,a,l){H(s)||(l=a,a=s,s=F);var u,h=dt(arguments,3),c=U(l)&&!l,p=(c?n:r).defer(),d=p.promise;return u=e.defer(function(){try{p.resolve(s.apply(null,h))}catch(t){p.reject(t),i(t)}finally{delete o[d.$$timeoutId]}c||t.$apply()},a,"$timeout"),d.$$timeoutId=u,o[u]=p,d}return s.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw ai("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!o.hasOwnProperty(t.$$timeoutId))return!1;var r=t.$$timeoutId,n=o[r];return Vn(n.promise),n.reject("canceled"),delete o[r],e.defer.cancel(r)},s}]}var ui,hi=e.document.createElement("a"),ci=pi(e.location.href);function pi(t){if(!W(t))return t;var e=t;return s&&(hi.setAttribute("href",e),e=hi.href),hi.setAttribute("href",e),{href:hi.href,protocol:hi.protocol?hi.protocol.replace(/:$/,""):"",host:hi.host,search:hi.search?hi.search.replace(/^\?/,""):"",hash:hi.hash?hi.hash.replace(/^#/,""):"",hostname:hi.hostname,port:hi.port,pathname:"/"===hi.pathname.charAt(0)?hi.pathname:"/"+hi.pathname}}function di(t,e){return t=pi(t),e=pi(e),t.protocol===e.protocol&&t.host===e.host}function fi(){this.$get=k(e)}function gi(t){var e=t[0]||{},r={},n="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,s,a,l,u=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(u!==n)for(t=(n=u).split("; "),r={},s=0;s<t.length;s++)(a=(o=t[s]).indexOf("="))>0&&(l=i(o.substring(0,a)),$(r[l])&&(r[l]=i(o.substring(a+1))));return r}}function vi(){this.$get=gi}function mi(t){var e="Filter";function r(n,i){if(j(n)){var o={};return E(n,function(t,e){o[e]=r(e,t)}),o}return t.factory(n+e,i)}this.register=r,this.$get=["$injector",function(t){return function(r){return t.get(r+e)}}],r("currency",Ei),r("date",Bi),r("filter",yi),r("json",ki),r("limitTo",Ui),r("lowercase",Ni),r("number",Si),r("orderBy",Gi),r("uppercase",$i)}function yi(){return function(t,e,r,n){if(!w(t)){if(null==t)return t;throw o("filter")("notarray","Expected array but received: {0}",t)}var i,s;switch(n=n||"$",bi(e)){case"function":i=e;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":i=function(t,e,r,n){var i=j(t)&&r in t;!0===e?e=ut:H(e)||(e=function(t,e){return!$(t)&&(null===t||null===e?t===e:!(j(e)||j(t)&&!N(t))&&(t=d(""+t),e=d(""+e),-1!==t.indexOf(e)))});return function(o){return i&&!j(o)?xi(o,t[r],e,r,!1):xi(o,t,e,r,n)}}(e,r,n,s);break;default:return t}return Array.prototype.filter.call(t,i)}}function xi(t,e,r,n,i,o){var s=bi(t),a=bi(e);if("string"===a&&"!"===e.charAt(0))return!xi(t,e.substring(1),r,n,i);if(Y(t))return t.some(function(t){return xi(t,e,r,n,i)});switch(s){case"object":var l;if(i){for(l in t)if(l.charAt&&"$"!==l.charAt(0)&&xi(t[l],e,r,n,!0))return!0;return!o&&xi(t,e,r,n,!1)}if("object"===a){for(l in e){var u=e[l];if(!H(u)&&!$(u)){var h=l===n;if(!xi(h?t:t[l],u,r,n,h,h))return!1}}return!0}return r(t,e);case"function":return!1;default:return r(t,e)}}function bi(t){return null===t?"null":typeof t}gi.$inject=["$document"],mi.$inject=["$provide"];var _i=22,Ti=".",wi="0";function Ei(t){var e=t.NUMBER_FORMATS;return function(t,r,n){$(r)&&(r=e.CURRENCY_SYM),$(n)&&(n=e.PATTERNS[1].maxFrac);var i=r?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:Ai(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,n).replace(i,r)}}function Si(t){var e=t.NUMBER_FORMATS;return function(t,r){return null==t?t:Ai(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,r)}}function Ai(t,e,r,n,i){if(!W(t)&&!V(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,l=Math.abs(t)+"",u="";if(s)u="∞";else{(function(t,e,r,n){var i=t.d,o=i.length-t.i,s=(e=$(e)?Math.min(Math.max(r,o),n):+e)+t.i,a=i[s];if(s>0){i.splice(Math.max(t.i,s));for(var l=s;l<i.length;l++)i[l]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,s=e+1),i[0]=0;for(var u=1;u<s;u++)i[u]=0}if(a>=5)if(s-1<0){for(var h=0;h>s;h--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[s-1]++;for(;o<Math.max(0,e);o++)i.push(0);var c=i.reduceRight(function(t,e,r,n){return e+=t,n[r]=e%10,Math.floor(e/10)},0);c&&(i.unshift(c),t.i++)})(o=function(t){var e,r,n,i,o,s=0;for((r=t.indexOf(Ti))>-1&&(t=t.replace(Ti,"")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charAt(n)===wi;n++);if(n===(o=t.length))e=[0],r=1;else{for(o--;t.charAt(o)===wi;)o--;for(r-=n,e=[],i=0;n<=o;n++,i++)e[i]=+t.charAt(n)}return r>_i&&(e=e.splice(0,_i-1),s=r-1,r=1),{d:e,e:s,i:r}}(l),i,e.minFrac,e.maxFrac);var h=o.d,c=o.i,p=o.e,d=[];for(a=h.reduce(function(t,e){return t&&!e},!0);c<0;)h.unshift(0),c++;c>0?d=h.splice(c,h.length):(d=h,h=[0]);var f=[];for(h.length>=e.lgSize&&f.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)f.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&f.unshift(h.join("")),u=f.join(r),d.length&&(u+=n+d.join("")),p&&(u+="e+"+p)}return t<0&&!a?e.negPre+u+e.negSuf:e.posPre+u+e.posSuf}function Ci(t,e,r,n){var i="";for((t<0||n&&t<=0)&&(n?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t=wi+t;return r&&(t=t.substr(t.length-e)),i+t}function Mi(t,e,r,n,i){return r=r||0,function(o){var s=o["get"+t]();return(r>0||s>-r)&&(s+=r),0===s&&-12===r&&(s=12),Ci(s,e,n,i)}}function Ri(t,e,r){return function(n,i){var o=n["get"+t]();return i[f((r?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function Oi(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Pi(t){return function(e){var r,n=Oi(e.getFullYear()),i=+(r=e,new Date(r.getFullYear(),r.getMonth(),r.getDate()+(4-r.getDay())))-+n;return Ci(1+Math.round(i/6048e5),t)}}function Di(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}Ei.$inject=["$locale"],Si.$inject=["$locale"];var Ii={yyyy:Mi("FullYear",4,0,!1,!0),yy:Mi("FullYear",2,0,!0,!0),y:Mi("FullYear",1,0,!1,!0),MMMM:Ri("Month"),MMM:Ri("Month",!0),MM:Mi("Month",2,1),M:Mi("Month",1,1),LLLL:Ri("Month",!1,!0),dd:Mi("Date",2),d:Mi("Date",1),HH:Mi("Hours",2),H:Mi("Hours",1),hh:Mi("Hours",2,-12),h:Mi("Hours",1,-12),mm:Mi("Minutes",2),m:Mi("Minutes",1),ss:Mi("Seconds",2),s:Mi("Seconds",1),sss:Mi("Milliseconds",3),EEEE:Ri("Day"),EEE:Ri("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,r){var n=-1*r,i=n>=0?"+":"";return i+=Ci(Math[n>0?"floor":"ceil"](n/60),2)+Ci(Math.abs(n%60),2)},ww:Pi(2),w:Pi(1),G:Di,GG:Di,GGG:Di,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Li=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Fi=/^-?\d+$/;function Bi(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(r,n,i){var o,s,a="",l=[];if(n=n||"mediumDate",n=t.DATETIME_FORMATS[n]||n,W(r)&&(r=Fi.test(r)?D(r):function(t){var r;if(r=t.match(e)){var n=new Date(0),i=0,o=0,s=r[8]?n.setUTCFullYear:n.setFullYear,a=r[8]?n.setUTCHours:n.setHours;r[9]&&(i=D(r[9]+r[10]),o=D(r[9]+r[11])),s.call(n,D(r[1]),D(r[2])-1,D(r[3]));var l=D(r[4]||0)-i,u=D(r[5]||0)-o,h=D(r[6]||0),c=Math.round(1e3*parseFloat("0."+(r[7]||0)));return a.call(n,l,u,h,c),n}return t}(r)),V(r)&&(r=new Date(r)),!z(r)||!isFinite(r.getTime()))return r;for(;n;)(s=Li.exec(n))?n=(l=pt(l,s,1)).pop():(l.push(n),n=null);var u=r.getTimezoneOffset();return i&&(u=xt(i,u),r=_t(r,i,!0)),E(l,function(e){o=Ii[e],a+=o?o(r,t.DATETIME_FORMATS,u):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function ki(){return function(t,e){return $(e)&&(e=2),vt(t,e)}}Bi.$inject=["$locale"];var Ni=k(d),$i=k(f);function Ui(){return function(t,e,r){return e=Math.abs(Number(e))===1/0?Number(e):D(e),I(e)?t:(V(t)&&(t=t.toString()),w(t)?(r=(r=!r||isNaN(r)?0:D(r))<0?Math.max(0,t.length+r):r,e>=0?ji(t,r,r+e):0===r?ji(t,e,t.length):ji(t,Math.max(0,r+e),r)):t)}}function ji(t,e,r){return W(t)?t.slice(e,r):g.call(t,e,r)}function Gi(t){return function(n,i,s,a){if(null==n)return n;if(!w(n))throw o("orderBy")("notarray","Expected array but received: {0}",n);Y(i)||(i=[i]),0===i.length&&(i=["+"]);var l=i.map(function(e){var r=1,n=B;if(H(e))n=e;else if(W(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(r="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(n=t(e)).constant)){var i=n();n=function(t){return t[i]}}return{get:n,descending:r}}),u=s?-1:1,h=H(a)?a:r,c=Array.prototype.map.call(n,function(t,r){return{value:t,tieBreaker:{value:r,type:"number",index:r},predicateValues:l.map(function(n){return function(t,r){var n=typeof t;null===t?n="null":"object"===n&&(t=function(t){if(H(t.valueOf)&&e(t=t.valueOf()))return t;if(N(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:n,index:r}}(n.get(t),r)})}});return c.sort(function(t,e){for(var n=0,i=l.length;n<i;n++){var o=h(t.predicateValues[n],e.predicateValues[n]);if(o)return o*l[n].descending*u}return(h(t.tieBreaker,e.tieBreaker)||r(t.tieBreaker,e.tieBreaker))*u}),n=c.map(function(t){return t.value})};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function r(t,e){var r=0,n=t.type,i=e.type;if(n===i){var o=t.value,s=e.value;"string"===n?(o=o.toLowerCase(),s=s.toLowerCase()):"object"===n&&(j(o)&&(o=t.index),j(s)&&(s=e.index)),o!==s&&(r=o<s?-1:1)}else r="undefined"===n?1:"undefined"===i?-1:"null"===n?1:"null"===i?-1:n<i?-1:1;return r}}function Wi(t){return H(t)&&(t={link:t}),t.restrict=t.restrict||"AC",k(t)}Gi.$inject=["$parse"];var Vi=k({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var r="[object SVGAnimatedString]"===y.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(r)||t.preventDefault()})}}}}),zi={};E(De,function(t,e){if("multiple"!==t){var r=br("ng-"+e),n=i;"checked"===t&&(n=function(t,e,n){n.ngModel!==n[r]&&i(t,0,n)}),zi[r]=function(){return{restrict:"A",priority:100,link:n}}}function i(t,n,i){t.$watch(i[r],function(t){i.$set(e,!!t)})}}),E(Le,function(t,e){zi[e]=function(){return{priority:100,link:function(t,r,n){if("ngPattern"===e&&"/"===n.ngPattern.charAt(0)){var i=n.ngPattern.match(h);if(i)return void n.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(n[e],function(t){n.$set(e,t)})}}}}),E(["src","srcset","href"],function(t){var e=br("ng-"+t);zi[e]=function(){return{priority:99,link:function(r,n,i){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===y.call(n.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(e,function(e){e?(i.$set(a,e),s&&o&&n.prop(o,i[a])):"href"===t&&i.$set(a,null)})}}}});var Yi={$addControl:F,$getControls:k([]),$$renameControl:function(t,e){t.$name=e},$removeControl:F,$setValidity:F,$setDirty:F,$setPristine:F,$setSubmitted:F,$$setSubmitted:F},Xi="ng-pending";function Hi(t,e,r,n,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(r),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Yi,this.$$element=t,this.$$animate=n,Ji(this)}Hi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Hi.prototype={$rollbackViewValue:function(){E(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){E(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){Nt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return Xt(this.$$controls)},$$renameControl:function(t,e){var r=t.$name;this[r]===t&&delete this[r],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],E(this.$pending,function(e,r){this.$setValidity(r,null,t)},this),E(this.$error,function(e,r){this.$setValidity(r,null,t)},this),E(this.$$success,function(e,r){this.$setValidity(r,null,t)},this),st(this.$$controls,t),t.$$parentForm=Yi},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ho),this.$$animate.addClass(this.$$element,qo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ho,qo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,E(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){E(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==Yi;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,E(this.$$controls,function(t){t.$$setSubmitted&&t.$$setSubmitted()})}},Ki({clazz:Hi,set:function(t,e,r){var n=t[e];n?-1===n.indexOf(r)&&n.push(r):t[e]=[r]},unset:function(t,e,r){var n=t[e];n&&(st(n,r),0===n.length&&delete t[e])}});var qi=function(t){return["$timeout","$parse",function(e,r){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Hi,compile:function(r,i){r.addClass(Ho).addClass(Yo);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,r,i,s){var a=s[0];if(!("action"in i)){var l=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};r[0].addEventListener("submit",l),r.on("$destroy",function(){e(function(){r[0].removeEventListener("submit",l)},0,!1)})}(s[1]||a.$$parentForm).$addControl(a);var u=o?n(a.$name):F;o&&(u(t,a),i.$observe(o,function(e){a.$name!==e&&(u(t,void 0),a.$$parentForm.$$renameControl(a,e),(u=n(a.$name))(t,a))})),r.on("$destroy",function(){a.$$parentForm.$removeControl(a),u(t,void 0),O(a,Yi)})}}}};function n(t){return""===t?r('this[""]').assign:r(t).assign||F}}]},Zi=qi(),Qi=qi(!0);function Ji(t){t.$$classCache={},t.$$classCache[Xo]=!(t.$$classCache[Yo]=t.$$element.hasClass(Yo))}function Ki(t){var e=t.clazz,r=t.set,n=t.unset;function i(t,e,r){r&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!r&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,r){e=e?"-"+Lt(e,"-"):"",i(t,Yo+e,!0===r),i(t,Xo+e,!1===r)}e.prototype.$setValidity=function(t,e,s){var a;$(e)?function(t,e,n,i){t[e]||(t[e]={});r(t[e],n,i)}(this,"$pending",t,s):function(t,e,r,i){t[e]&&n(t[e],r,i);to(t[e])&&(t[e]=void 0)}(this,"$pending",t,s),J(e)?e?(n(this.$error,t,s),r(this.$$success,t,s)):(r(this.$error,t,s),n(this.$$success,t,s)):(n(this.$error,t,s),n(this.$$success,t,s)),this.$pending?(i(this,Xi,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(i(this,Xi,!1),this.$valid=to(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,a=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,a,this)}}function to(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var eo=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ro=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,no=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,io=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,oo=/^(\d{4,})-(\d{2})-(\d{2})$/,so=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ao=/^(\d{4,})-W(\d\d)$/,lo=/^(\d{4,})-(\d\d)$/,uo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ho="keydown wheel mousedown",co=Ut();E("date,datetime-local,month,time,week".split(","),function(t){co[t]=!0});var po={text:function(t,e,r,n,i,o){go(t,e,r,n,i,o),fo(n)},date:mo("date",oo,vo(oo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mo("datetimelocal",so,vo(so,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:mo("time",uo,vo(uo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mo("week",ao,function(t,e){if(z(t))return t;if(W(t)){ao.lastIndex=0;var r=ao.exec(t);if(r){var n=+r[1],i=+r[2],o=0,s=0,a=0,l=0,u=Oi(n),h=7*(i-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),l=e.getMilliseconds()),new Date(n,0,u.getDate()+h,o,s,a,l)}}return NaN},"yyyy-Www"),month:mo("month",lo,vo(lo,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,r,n,i,o){var s,a;yo(t,e,r,n,"number"),xo(n),go(t,e,r,n,i,o),(U(r.min)||r.ngMin)&&(n.$validators.min=function(t,e){return n.$isEmpty(e)||$(s)||e>=s},r.$observe("min",function(t){s=bo(t),n.$validate()}));(U(r.max)||r.ngMax)&&(n.$validators.max=function(t,e){return n.$isEmpty(e)||$(a)||e<=a},r.$observe("max",function(t){a=bo(t),n.$validate()}));if(U(r.step)||r.ngStep){var l;n.$validators.step=function(t,e){return n.$isEmpty(e)||$(l)||wo(e,s||0,l)},r.$observe("step",function(t){l=bo(t),n.$validate()})}},url:function(t,e,r,n,i,o){go(t,e,r,n,i,o),fo(n),n.$validators.url=function(t,e){var r=t||e;return n.$isEmpty(r)||ro.test(r)}},email:function(t,e,r,n,i,o){go(t,e,r,n,i,o),fo(n),n.$validators.email=function(t,e){var r=t||e;return n.$isEmpty(r)||no.test(r)}},radio:function(t,e,r,n){var i=!r.ngTrim||"false"!==et(r.ngTrim);$(r.name)&&e.attr("name",C());e.on("change",function(t){var o;e[0].checked&&(o=r.value,i&&(o=et(o)),n.$setViewValue(o,t&&t.type))}),n.$render=function(){var t=r.value;i&&(t=et(t)),e[0].checked=t===n.$viewValue},r.$observe("value",n.$render)},range:function(t,e,r,n,i,o){yo(t,e,r,n,"range"),xo(n),go(t,e,r,n,i,o);var s=n.$$hasNativeValidators&&"range"===e[0].type,a=s?0:void 0,l=s?100:void 0,u=s?1:void 0,h=e[0].validity,c=U(r.min),p=U(r.max),d=U(r.step),f=n.$render;n.$render=s&&U(h.rangeUnderflow)&&U(h.rangeOverflow)?function(){f(),n.$setViewValue(e.val())}:f,c&&(n.$validators.min=s?function(){return!0}:function(t,e){return n.$isEmpty(e)||$(a)||e>=a},g("min",function(t){if(a=bo(t),I(n.$modelValue))return;if(s){var r=e.val();a>r&&(r=a,e.val(r)),n.$setViewValue(r)}else n.$validate()}));p&&(n.$validators.max=s?function(){return!0}:function(t,e){return n.$isEmpty(e)||$(l)||e<=l},g("max",function(t){if(l=bo(t),I(n.$modelValue))return;if(s){var r=e.val();l<r&&(e.val(l),r=l<a?a:l),n.$setViewValue(r)}else n.$validate()}));d&&(n.$validators.step=s?function(){return!h.stepMismatch}:function(t,e){return n.$isEmpty(e)||$(u)||wo(e,a||0,u)},g("step",function(t){if(u=bo(t),I(n.$modelValue))return;s&&n.$viewValue!==e.val()?n.$setViewValue(e.val()):n.$validate()}));function g(t,n){e.attr(t,r[t]),r.$observe(t,n)}},checkbox:function(t,e,r,n,i,o,s,a){var l=Eo(a,t,"ngTrueValue",r.ngTrueValue,!0),u=Eo(a,t,"ngFalseValue",r.ngFalseValue,!1);e.on("change",function(t){n.$setViewValue(e[0].checked,t&&t.type)}),n.$render=function(){e[0].checked=n.$viewValue},n.$isEmpty=function(t){return!1===t},n.$formatters.push(function(t){return ut(t,l)}),n.$parsers.push(function(t){return t?l:u})},hidden:F,button:F,submit:F,reset:F,file:F};function fo(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function go(t,e,r,n,i,o){var s,a=d(e[0].type);if(!i.android){var l=!1;e.on("compositionstart",function(){l=!0}),e.on("compositionupdate",function(t){($(t.data)||""===t.data)&&(l=!1)}),e.on("compositionend",function(){l=!1,u()})}var u=function(t){if(s&&(o.defer.cancel(s),s=null),!l){var i=e.val(),u=t&&t.type;"password"===a||r.ngTrim&&"false"===r.ngTrim||(i=et(i)),(n.$viewValue!==i||""===i&&n.$$hasNativeValidators)&&n.$setViewValue(i,u)}};if(i.hasEvent("input"))e.on("input",u);else{var h=function(t,e,r){s||(s=o.defer(function(){s=null,e&&e.value===r||u(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||h(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut drop",h)}e.on("change",u),co[a]&&n.$$hasNativeValidators&&a===r.type&&e.on(ho,function(t){if(!s){var e=this[c],r=e.badInput,n=e.typeMismatch;s=o.defer(function(){s=null,e.badInput===r&&e.typeMismatch===n||u(t)})}}),n.$render=function(){var t=n.$isEmpty(n.$viewValue)?"":n.$viewValue;e.val()!==t&&e.val(t)}}function vo(t,e){return function(r,n){var i,o;if(z(r))return r;if(W(r)){if('"'===r.charAt(0)&&'"'===r.charAt(r.length-1)&&(r=r.substring(1,r.length-1)),eo.test(r))return new Date(r);if(t.lastIndex=0,i=t.exec(r)){i.shift(),o=n?{yyyy:n.getFullYear(),MM:n.getMonth()+1,dd:n.getDate(),HH:n.getHours(),mm:n.getMinutes(),ss:n.getSeconds(),sss:n.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},E(i,function(t,r){r<e.length&&(o[e[r]]=+t)});var s=new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0);return o.yyyy<100&&s.setFullYear(o.yyyy),s}}return NaN}}function mo(t,e,r,n){return function(i,o,s,a,l,u,h){yo(i,o,s,a,t),go(0,o,s,a,l,u);var c,p,d,f,g="time"===t||"datetimelocal"===t;(a.$parsers.push(function(r){return a.$isEmpty(r)?null:e.test(r)?y(r,c):void(a.$$parserName=t)}),a.$formatters.push(function(t){if(t&&!z(t))throw Zo("datefmt","Expected `{0}` to be a date",t);if(v(t)){c=t;var e=a.$options.getOption("timezone");return e&&(p=e,c=_t(c,e,!0)),function(t,e){var r=n;g&&W(a.$options.getOption("timeSecondsFormat"))&&(r=n.replace("ss.sss",a.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var i=h("date")(t,r,e);g&&a.$options.getOption("timeStripZeroSeconds")&&(i=i.replace(/(?::00)?(?:\.000)?$/,""));return i}(t,e)}return c=null,p=null,""}),U(s.min)||s.ngMin)&&(a.$validators.min=function(t){return!v(t)||$(d)||r(t)>=d},s.$observe("min",function(t){d=m(t),a.$validate()}));(U(s.max)||s.ngMax)&&(a.$validators.max=function(t){return!v(t)||$(f)||r(t)<=f},s.$observe("max",function(t){f=m(t),a.$validate()}));function v(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function m(t){return U(t)&&!z(t)?y(t)||void 0:t}function y(t,e){var n=a.$options.getOption("timezone");p&&p!==n&&(e=bt(e,xt(p)));var i=r(t,e);return!isNaN(i)&&n&&(i=_t(i,n)),i}}}function yo(t,e,r,n,i){var o=e[0];(n.$$hasNativeValidators=j(o.validity))&&n.$parsers.push(function(t){var r=e.prop(c)||{};if(!r.badInput&&!r.typeMismatch)return t;n.$$parserName=i})}function xo(t){t.$parsers.push(function(e){return t.$isEmpty(e)?null:io.test(e)?parseFloat(e):void(t.$$parserName="number")}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!V(e))throw Zo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function bo(t){return U(t)&&!V(t)&&(t=parseFloat(t)),I(t)?void 0:t}function _o(t){return(0|t)===t}function To(t){var e=t.toString(),r=e.indexOf(".");if(-1===r){if(-1<t&&t<1){var n=/e-(\d+)$/.exec(e);if(n)return Number(n[1])}return 0}return e.length-r-1}function wo(t,e,r){var n=Number(t),i=!_o(n),o=!_o(e),s=!_o(r);if(i||o||s){var a=i?To(n):0,l=o?To(e):0,u=s?To(r):0,h=Math.max(a,l,u),c=Math.pow(10,h);n*=c,e*=c,r*=c,i&&(n=Math.round(n)),o&&(e=Math.round(e)),s&&(r=Math.round(r))}return(n-e)%r==0}function Eo(t,e,r,n,i){var o;if(U(n)){if(!(o=t(n)).constant)throw Zo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",r,n);return o(e)}return i}var So=["$browser","$sniffer","$filter","$parse",function(t,e,r,n){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,s,a){a[0]&&(po[d(s.type)]||po.text)(i,o,s,a[0],e,t,r,n)}}}}],Ao=/^(true|false|\d+)$/,Co=function(){function t(t,e,r){var n=U(r)?r:9===s?"":null;t.prop("value",n),e.$set("value",r)}return{restrict:"A",priority:100,compile:function(e,r){return Ao.test(r.ngValue)?function(e,r,n){t(r,n,e.$eval(n.ngValue))}:function(e,r,n){e.$watch(n.ngValue,function(e){t(r,n,e)})}}}},Mo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,r,n){t.$$addBindingInfo(r,n.ngBind),r=r[0],e.$watch(n.ngBind,function(t){r.textContent=jt(t)})}}}}],Ro=["$interpolate","$compile",function(t,e){return{compile:function(r){return e.$$addBindingClass(r),function(r,n,i){var o=t(n.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(n,o.expressions),n=n[0],i.$observe("ngBindTemplate",function(t){n.textContent=$(t)?"":t})}}}}],Oo=["$sce","$parse","$compile",function(t,e,r){return{restrict:"A",compile:function(n,i){var o=e(i.ngBindHtml),s=e(i.ngBindHtml,function(e){return t.valueOf(e)});return r.$$addBindingClass(n),function(e,n,i){r.$$addBindingInfo(n,i.ngBindHtml),e.$watch(s,function(){var r=o(e);n.html(t.getTrustedHtml(r)||"")})}}}}],Po=k({restrict:"A",require:"ngModel",link:function(t,e,r,n){n.$viewChangeListeners.push(function(){t.$eval(r.ngChange)})}});function Do(t,e){var r;return t="ngClass"+t,["$parse",function(s){return{restrict:"AC",link:function(a,l,u){var h,c=l.data("$classCounts"),p=!0;function d(t,e){var r=[];return E(t,function(t){(e>0||c[t])&&(c[t]=(c[t]||0)+e,c[t]===+(e>0)&&r.push(t))}),r.join(" ")}c||(c=Ut(),l.data("$classCounts",c)),"ngClass"!==t&&(r||(r=s("$index",function(t){return 1&t})),a.$watch(r,function(t){t===e?(r=d(i(r=h),1),u.$addClass(r)):function(t){t=d(i(t),-1),u.$removeClass(t)}(h);var r;p=t})),a.$watch(s(u[t],o),function(t){p===e&&function(t,e){var r=i(t),o=i(e),s=n(r,o),a=n(o,r),l=d(s,-1),h=d(a,1);u.$addClass(h),u.$removeClass(l)}(h,t);h=t})}}}];function n(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var r=[];t:for(var n=0;n<t.length;n++){for(var i=t[n],o=0;o<e.length;o++)if(i===e[o])continue t;r.push(i)}return r}function i(t){return t&&t.split(" ")}function o(t){if(!t)return t;var e=t;return Y(t)?e=t.map(o).join(" "):j(t)?e=Object.keys(t).filter(function(e){return t[e]}).join(" "):W(t)||(e=t+""),e}}var Io=Do("",!0),Lo=Do("Odd",0),Fo=Do("Even",1),Bo=Wi({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),ko=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],No={},$o={blur:!0,focus:!0};function Uo(t,e,r,n,i,o){return{restrict:"A",compile:function(s,a){var l=t(a[n]);return function(t,n){n.on(i,function(n){var i=function(){l(t,{$event:n})};if(e.$$phase)if(o)t.$evalAsync(i);else try{i()}catch(t){r(t)}else t.$apply(i)})}}}}E("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=br("ng-"+t);No[e]=["$parse","$rootScope","$exceptionHandler",function(r,n,i){return Uo(r,n,i,e,t,$o[t])}]});var jo=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(r,n,i,o,s){var a,l,u;r.$watch(i.ngIf,function(r){r?l||s(function(r,o){l=o,r[r.length++]=e.$$createComment("end ngIf",i.ngIf),a={clone:r},t.enter(r,n.parent(),n)}):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),a&&(u=$t(a.clone),t.leave(u).done(function(t){!1!==t&&(u=null)}),a=null))})}}}],Go=["$templateRequest","$anchorScroll","$animate",function(t,e,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:_.noop,compile:function(n,i){var o=i.ngInclude||i.src,s=i.onload||"",a=i.autoscroll;return function(n,i,l,u,h){var c,p,d,f=0,g=function(){p&&(p.remove(),p=null),c&&(c.$destroy(),c=null),d&&(r.leave(d).done(function(t){!1!==t&&(p=null)}),p=d,d=null)};n.$watch(o,function(o){var l=function(t){!1===t||!U(a)||a&&!n.$eval(a)||e()},p=++f;o?(t(o,!0).then(function(t){if(!n.$$destroyed&&p===f){var e=n.$new();u.template=t;var a=h(e,function(t){g(),r.enter(t,null,i).done(l)});d=a,(c=e).$emit("$includeContentLoaded",o),n.$eval(s)}},function(){n.$$destroyed||p===f&&(g(),n.$emit("$includeContentError",o))}),n.$emit("$includeContentRequested",o)):(g(),u.template=null)})}}}}],Wo=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(r,n,i,o){if(y.call(n[0]).match(/SVG/))return n.empty(),void t(ce(o.template,e.document).childNodes)(r,function(t){n.append(t)},{futureParentElement:n});n.html(o.template),t(n.contents())(r)}}}],Vo=Wi({priority:450,compile:function(){return{pre:function(t,e,r){t.$eval(r.ngInit)}}}}),zo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,r,n){var i=r.ngList||", ",o="false"!==r.ngTrim,s=o?et(i):i;n.$parsers.push(function(t){if(!$(t)){var e=[];return t&&E(t.split(s),function(t){t&&e.push(o?et(t):t)}),e}}),n.$formatters.push(function(t){if(Y(t))return t.join(i)}),n.$isEmpty=function(t){return!t||!t.length}}}},Yo="ng-valid",Xo="ng-invalid",Ho="ng-pristine",qo="ng-dirty",Zo=o("ngModel");function Qo(t,e,r,n,i,o,s,a,l){var u;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(r.name||"",!1)(t),this.$$parentForm=Yi,this.$options=Jo,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(r.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=r,this.$$element=n,this.$$animate=o,this.$$timeout=s,this.$$parse=i,this.$$q=a,this.$$exceptionHandler=e,Ji(this),(u=this).$$scope.$watch(function(t){var e=u.$$ngModelGet(t);return e===u.$modelValue||u.$modelValue!=u.$modelValue&&e!=e||u.$$setModelValue(e),e})}Qo.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Qo.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var r=this.$$parsedNgModel(e);return H(r)&&(r=t(e)),r},this.$$ngModelSet=function(t,r){H(this.$$parsedNgModel(t))?e(t,{$$$p:r}):this.$$parsedNgModelAssign(t,r)}}else if(!this.$$parsedNgModel.assign)throw Zo("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Tt(this.$$element))},$render:F,$isEmpty:function(t){return $(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,qo),this.$$animate.addClass(this.$$element,Ho)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Ho),this.$$animate.addClass(this.$$element,qo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!I(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,r=this.$valid,n=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,function(t){i||r===t||(o.$modelValue=t?e:void 0,o.$modelValue!==n&&o.$$writeModelToScope())})}},$$runValidators:function(t,e,r){this.$$currentValidationRunId++;var n,i,o=this.$$currentValidationRunId,s=this;(function(){var t=s.$$parserName;if(!$(s.$$parserValid))return s.$$parserValid||(E(s.$validators,function(t,e){a(e,null)}),E(s.$asyncValidators,function(t,e){a(e,null)})),a(t,s.$$parserValid),s.$$parserValid;a(t,null);return!0})()?!function(){var r=!0;if(E(s.$validators,function(n,i){var o=Boolean(n(t,e));r=r&&o,a(i,o)}),!r)return E(s.$asyncValidators,function(t,e){a(e,null)}),!1;return!0}()?l(!1):(n=[],i=!0,E(s.$asyncValidators,function(r,o){var s=r(t,e);if(!K(s))throw Zo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);a(o,void 0),n.push(s.then(function(){a(o,!0)},function(){i=!1,a(o,!1)}))}),n.length?s.$$q.all(n).then(function(){l(i)},F):l(!0)):l(!1);function a(t,e){o===s.$$currentValidationRunId&&s.$setValidity(t,e)}function l(t){o===s.$$currentValidationRunId&&r(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!$(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var r=0;r<this.$parsers.length;r++)if($(t=this.$parsers[r](t))){this.$$parserValid=!1;break}I(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var n=this.$modelValue,i=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==n&&e.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(r){i||(e.$modelValue=r?t:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),E(this.$viewChangeListeners,function(t){try{t()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");V(e[t])?e=e[t]:V(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:V(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var r=this;e>0?this.$$pendingDebounce=this.$$timeout(function(){r.$commitViewValue()},e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){r.$commitViewValue()})},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,F))},$$format:function(){for(var t=this.$formatters,e=t.length,r=this.$modelValue;e--;)r=t[e](r);return r},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Ki({clazz:Qo,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Jo,Ko=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Qo,priority:1,compile:function(e){return e.addClass(Ho).addClass("ng-untouched").addClass(Yo),{pre:function(t,e,r,n){var i=n[0],o=n[1]||i.$$parentForm,s=n[2];s&&(i.$options=s.$options),i.$$initGetterSetters(),o.$addControl(i),r.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,r,n,i){var o=i[0];function s(){o.$setTouched()}o.$$setUpdateOnEvents(),r.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(s):e.$apply(s))})}}}}}],ts=/(\s+|^)default(\s+|$)/;function es(t){this.$$options=t}es.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return E(t=O({},t),function(r,n){"$inherit"===r?"*"===n?e=!0:(t[n]=this.$$options[n],"updateOn"===n&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===n&&(t.updateOnDefault=!1,t[n]=et(r.replace(ts,function(){return t.updateOnDefault=!0," "})))},this),e&&(delete t["*"],ns(t,this.$$options)),ns(t,Jo.$$options),new es(t)}},Jo=new es({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var rs=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Jo,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function ns(t,e){E(e,function(e,r){U(t[r])||(t[r]=e)})}var is=Wi({terminal:!0,priority:1e3}),os=o("ngOptions"),ss=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,as=["$compile","$document","$parse",function(t,r,n){var i=e.document.createElement("option"),o=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,r,n){n[0].registerOption=F},post:function(e,s,l,u){for(var h=u[0],c=u[1],p=l.multiple,d=0,f=s.children(),g=f.length;d<g;d++)if(""===f[d].value){h.hasEmptyOption=!0,h.emptyOption=f.eq(d);break}s.empty();var v,m=!!h.emptyOption;a(i.cloneNode(!1)).val("?");var y=function(t,e,r){var i=t.match(ss);if(!i)throw os("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,Tt(e));var o=i[5]||i[7],s=i[6],a=/ as /.test(i[0])&&i[1],l=i[9],u=n(i[2]?i[1]:o),h=a&&n(a)||u,c=l&&n(l),p=l?function(t,e){return c(r,e)}:function(t){return $e(t)},d=function(t,e){return p(t,x(t,e))},f=n(i[2]||i[1]),g=n(i[3]||""),v=n(i[4]||""),m=n(i[8]),y={},x=s?function(t,e){return y[s]=e,y[o]=t,y}:function(t){return y[o]=t,y};function b(t,e,r,n,i){this.selectValue=t,this.viewValue=e,this.label=r,this.group=n,this.disabled=i}function _(t){var e;if(!s&&w(t))e=t;else for(var r in e=[],t)t.hasOwnProperty(r)&&"$"!==r.charAt(0)&&e.push(r);return e}return{trackBy:l,getTrackByValue:d,getWatchables:n(m,function(t){for(var e=[],n=_(t=t||[]),o=n.length,s=0;s<o;s++){var a=t===n?s:n[s],l=t[a],u=x(l,a),h=p(l,u);if(e.push(h),i[2]||i[1]){var c=f(r,u);e.push(c)}if(i[4]){var d=v(r,u);e.push(d)}}return e}),getOptions:function(){for(var t=[],e={},n=m(r)||[],i=_(n),o=i.length,s=0;s<o;s++){var a=n===i?s:i[s],u=n[a],c=x(u,a),y=h(r,c),T=p(y,c),w=new b(T,y,f(r,c),g(r,c),v(r,c));t.push(w),e[T]=w}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[d(t)]},getViewValueFromOption:function(t){return l?at(t.viewValue):t.viewValue}}}}}(l.ngOptions,s,e),x=r[0].createDocumentFragment();function b(t,e){var r=i.cloneNode(!1);e.appendChild(r),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}(t,r)}function _(t){var e=v.getOptionFromViewValue(t),r=e&&e.element;return r&&!r.selected&&(r.selected=!0),e}h.generateUnknownOptionValue=function(t){return"?"},p?(h.writeValue=function(t){if(v){var e=t&&t.map(_)||[];v.items.forEach(function(t){t.element.selected&&!ot(e,t)&&(t.element.selected=!1)})}},h.readValue=function(){var t=s.val()||[],e=[];return E(t,function(t){var r=v.selectValueMap[t];r&&!r.disabled&&e.push(v.getViewValueFromOption(r))}),e},y.trackBy&&e.$watchCollection(function(){if(Y(c.$viewValue))return c.$viewValue.map(function(t){return y.getTrackByValue(t)})},function(){c.$render()})):(h.writeValue=function(t){if(v){var e=s[0].options[s[0].selectedIndex],r=v.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),r?(s[0].value!==r.selectValue&&(h.removeUnknownOption(),s[0].value=r.selectValue,r.element.selected=!0),r.element.setAttribute("selected","selected")):h.selectUnknownOrEmptyOption(t)}},h.readValue=function(){var t=v.selectValueMap[s.val()];return t&&!t.disabled?(h.unselectEmptyOption(),h.removeUnknownOption(),v.getViewValueFromOption(t)):null},y.trackBy&&e.$watch(function(){return y.getTrackByValue(c.$viewValue)},function(){c.$render()})),m&&(t(h.emptyOption)(e),s.prepend(h.emptyOption),h.emptyOption[0].nodeType===Vt?(h.hasEmptyOption=!1,h.registerOption=function(t,e){""===e.val()&&(h.hasEmptyOption=!0,h.emptyOption=e,h.emptyOption.removeClass("ng-scope"),c.$render(),e.on("$destroy",function(){var t=h.$isEmptyOptionSelected();h.hasEmptyOption=!1,h.emptyOption=void 0,t&&c.$render()}))}):h.emptyOption.removeClass("ng-scope")),e.$watchCollection(y.getWatchables,function(){var t=v&&h.readValue();if(v)for(var e=v.items.length-1;e>=0;e--){var r=v.items[e];U(r.group)?Re(r.element.parentNode):Re(r.element)}v=y.getOptions();var n={};if(v.items.forEach(function(t){var e;U(t.group)?((e=n[t.group])||(e=o.cloneNode(!1),x.appendChild(e),e.label=null===t.group?"null":t.group,n[t.group]=e),b(t,e)):b(t,x)}),s[0].appendChild(x),c.$render(),!c.$isEmpty(t)){var i=h.readValue(),a=y.trackBy||p;(a?ut(t,i):t===i)||(c.$setViewValue(i),c.$render())}})}}}}],ls=["$locale","$interpolate","$log",function(t,e,r){var n=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(o,s,a){var l,u=a.count,h=a.$attr.when&&s.attr(a.$attr.when),c=a.offset||0,p=o.$eval(h)||{},f={},g=e.startSymbol(),v=e.endSymbol(),m=g+u+"-"+c+v,y=_.noop;function x(t){s.text(t||"")}E(a,function(t,e){var r=i.exec(e);if(r){var n=(r[1]?"-":"")+d(r[2]);p[n]=s.attr(a.$attr[e])}}),E(p,function(t,r){f[r]=e(t.replace(n,m))}),o.$watch(u,function(e){var n=parseFloat(e),i=I(n);if(i||n in p||(n=t.pluralCat(n-c)),!(n===l||i&&I(l))){y();var s=f[n];$(s)?(null!=e&&r.debug("ngPluralize: no rule defined for '"+n+"' in "+h),y=F,x()):y=o.$watch(s,x),l=n}})}}}],us=o("ngRef"),hs=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,r){var n=br(it(e)),i=t(r.ngRef),o=i.assign||function(){throw us("nonassign",'Expression in ngRef="{0}" is non-assignable!',r.ngRef)};return function(t,e,s){var a;if(s.hasOwnProperty("ngRefRead")){if("$element"===s.ngRefRead)a=e;else if(!(a=e.data("$"+s.ngRefRead+"Controller")))throw us("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',s.ngRefRead,r.ngRef)}else a=e.data("$"+n+"Controller");o(t,a=a||e),e.on("$destroy",function(){i(t)===a&&o(t,null)})}}}}],cs=["$parse","$animate","$compile",function(t,e,r){var n=o("ngRepeat"),i=function(t,e,r,n,i,o,s){t[r]=n,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},s=function(t){return t.clone[0]},a=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(o,l){var u=l.ngRepeat,h=r.$$createComment("end ngRepeat",u),c=u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!c)throw n("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",u);var d=c[1],f=c[2],g=c[3],v=c[4];if(!(c=d.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw n("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",d);var m,y,x,b,_=c[3]||c[1],T=c[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw n("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",g);var S={$id:$e};return v?m=t(v):(x=function(t,e){return $e(e)},b=function(t){return t}),function(t,r,o,l,c){m&&(y=function(e,r,n){return T&&(S[T]=e),S[_]=r,S.$index=n,m(t,S)});var d=Ut();t.$watchCollection(f,function(o){var l,f,v,m,S,A,C,M,R,O,P,D,I=r[0],L=Ut();if(g&&(t[g]=o),w(o))R=o,M=y||x;else for(var F in M=y||b,R=[],o)p.call(o,F)&&"$"!==F.charAt(0)&&R.push(F);for(m=R.length,P=new Array(m),l=0;l<m;l++)if(S=o===R?l:R[l],A=o[S],C=M(S,A,l),d[C])O=d[C],delete d[C],L[C]=O,P[l]=O;else{if(L[C])throw E(P,function(t){t&&t.scope&&(d[t.id]=t)}),n("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",u,C,A);P[l]={id:C,scope:void 0,clone:void 0},L[C]=!0}for(var B in d){if(D=$t((O=d[B]).clone),e.leave(D),D[0].parentNode)for(l=0,f=D.length;l<f;l++)D[l].$$NG_REMOVED=!0;O.scope.$destroy()}for(l=0;l<m;l++)if(S=o===R?l:R[l],A=o[S],(O=P[l]).scope){v=I;do{v=v.nextSibling}while(v&&v.$$NG_REMOVED);s(O)!==v&&e.move($t(O.clone),null,I),I=a(O),i(O.scope,l,_,A,T,S,m)}else c(function(t,r){O.scope=r;var n=h.cloneNode(!1);t[t.length++]=n,e.enter(t,null,I),I=n,O.clone=t,L[O.id]=O,i(O.scope,l,_,A,T,S,m)});d=L})}}}}],ps=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,r,n){e.$watch(n.ngShow,function(e){t[e?"removeClass":"addClass"](r,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ds=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,r,n){e.$watch(n.ngHide,function(e){t[e?"addClass":"removeClass"](r,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],fs=Wi(function(t,e,r){t.$watchCollection(r.ngStyle,function(t,r){r&&t!==r&&E(r,function(t,r){e.css(r,"")}),t&&e.css(t)})}),gs=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(r,n,i,o){var s=i.ngSwitch||i.on,a=[],l=[],u=[],h=[],c=function(t,e){return function(r){!1!==r&&t.splice(e,1)}};r.$watch(s,function(r){for(var n,i;u.length;)t.cancel(u.pop());for(n=0,i=h.length;n<i;++n){var s=$t(l[n].clone);h[n].$destroy(),(u[n]=t.leave(s)).done(c(u,n))}l.length=0,h.length=0,(a=o.cases["!"+r]||o.cases["?"])&&E(a,function(r){r.transclude(function(n,i){h.push(i);var o=r.element;n[n.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:n};l.push(s),t.enter(n,o.parent(),o)})})})}}}],vs=Wi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,r,n,i){E(r.ngSwitchWhen.split(r.ngSwitchWhenSeparator).sort().filter(function(t,e,r){return r[e-1]!==t}),function(t){n.cases["!"+t]=n.cases["!"+t]||[],n.cases["!"+t].push({transclude:i,element:e})})}}),ms=Wi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,r,n,i){n.cases["?"]=n.cases["?"]||[],n.cases["?"].push({transclude:i,element:e})}}),ys=o("ngTransclude"),xs=["$compile",function(t){return{restrict:"EAC",compile:function(e){var r=t(e.contents());return e.empty(),function(t,e,n,i,o){if(!o)throw ys("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Tt(e));n.ngTransclude===n.$attr.ngTransclude&&(n.ngTransclude="");var s=n.ngTransclude||n.ngTranscludeSlot;function a(){r(t,function(t){e.append(t)})}o(function(t,r){t.length&&function(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];if(n.nodeType!==Wt||n.nodeValue.trim())return!0}}(t)?e.append(t):(a(),r.$destroy())},null,s),s&&!o.isSlotFilled(s)&&a()}}}}],bs=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,r){if("text/ng-template"===r.type){var n=r.id,i=e[0].text;t.put(n,i)}}}}],_s={$setViewValue:F,$render:F};function Ts(t,e){t.prop("selected",e),t.attr("selected",e)}var ws=["$element","$scope",function(t,r){var n=this,i=new Ge;n.selectValueMap={},n.ngModelCtrl=_s,n.multiple=!1,n.unknownOption=a(e.document.createElement("option")),n.hasEmptyOption=!1,n.emptyOption=void 0,n.renderUnknownOption=function(e){var r=n.generateUnknownOptionValue(e);n.unknownOption.val(r),t.prepend(n.unknownOption),Ts(n.unknownOption,!0),t.val(r)},n.updateUnknownOption=function(e){var r=n.generateUnknownOptionValue(e);n.unknownOption.val(r),Ts(n.unknownOption,!0),t.val(r)},n.generateUnknownOptionValue=function(t){return"? "+$e(t)+" ?"},n.removeUnknownOption=function(){n.unknownOption.parent()&&n.unknownOption.remove()},n.selectEmptyOption=function(){n.emptyOption&&(t.val(""),Ts(n.emptyOption,!0))},n.unselectEmptyOption=function(){n.hasEmptyOption&&Ts(n.emptyOption,!1)},r.$on("$destroy",function(){n.renderUnknownOption=F}),n.readValue=function(){var e=t.val(),r=e in n.selectValueMap?n.selectValueMap[e]:e;return n.hasOption(r)?r:null},n.writeValue=function(e){var r=t[0].options[t[0].selectedIndex];if(r&&Ts(a(r),!1),n.hasOption(e)){n.removeUnknownOption();var i=$e(e);t.val(i in n.selectValueMap?i:e);var o=t[0].options[t[0].selectedIndex];Ts(a(o),!0)}else n.selectUnknownOrEmptyOption(e)},n.addOption=function(t,e){if(e[0].nodeType!==Vt){Nt(t,'"option value"'),""===t&&(n.hasEmptyOption=!0,n.emptyOption=e);var r=i.get(t)||0;i.set(t,r+1),s()}},n.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(n.hasEmptyOption=!1,n.emptyOption=void 0)):i.set(t,e-1))},n.hasOption=function(t){return!!i.get(t)},n.$hasEmptyOption=function(){return n.hasEmptyOption},n.$isUnknownOptionSelected=function(){return t[0].options[0]===n.unknownOption[0]},n.$isEmptyOptionSelected=function(){return n.hasEmptyOption&&t[0].options[t[0].selectedIndex]===n.emptyOption[0]},n.selectUnknownOrEmptyOption=function(t){null==t&&n.emptyOption?(n.removeUnknownOption(),n.selectEmptyOption()):n.unknownOption.parent().length?n.updateUnknownOption(t):n.renderUnknownOption(t)};var o=!1;function s(){o||(o=!0,r.$$postDigest(function(){o=!1,n.ngModelCtrl.$render()}))}var l=!1;function u(t){l||(l=!0,r.$$postDigest(function(){r.$$destroyed||(l=!1,n.ngModelCtrl.$setViewValue(n.readValue()),t&&n.ngModelCtrl.$render())}))}n.registerOption=function(t,e,r,i,o){var a,l;r.$attr.ngValue?r.$observe("value",function(t){var r,i=e.prop("selected");U(l)&&(n.removeOption(a),delete n.selectValueMap[l],r=!0),l=$e(t),a=t,n.selectValueMap[l]=t,n.addOption(t,e),e.attr("value",l),r&&i&&u()}):i?r.$observe("value",function(t){var r;n.readValue();var i=e.prop("selected");U(a)&&(n.removeOption(a),r=!0),a=t,n.addOption(t,e),r&&i&&u()}):o?t.$watch(o,function(t,i){r.$set("value",t);var o=e.prop("selected");i!==t&&n.removeOption(i),n.addOption(t,e),i&&o&&u()}):n.addOption(r.value,e);r.$observe("disabled",function(t){("true"===t||t&&e.prop("selected"))&&(n.multiple?u(!0):(n.ngModelCtrl.$setViewValue(null),n.ngModelCtrl.$render()))}),e.on("$destroy",function(){var t=n.readValue(),e=r.value;n.removeOption(e),s(),(n.multiple&&t&&-1!==t.indexOf(e)||t===e)&&u(!0)})}}],Es=function(){return{restrict:"E",require:["select","?ngModel"],controller:ws,priority:1,link:{pre:function(t,e,r,n){var i=n[0],o=n[1];if(!o)return void(i.registerOption=F);if(i.ngModelCtrl=o,e.on("change",function(){i.removeUnknownOption(),t.$apply(function(){o.$setViewValue(i.readValue())})}),r.multiple){i.multiple=!0,i.readValue=function(){var t=[];return E(e.find("option"),function(e){if(e.selected&&!e.disabled){var r=e.value;t.push(r in i.selectValueMap?i.selectValueMap[r]:r)}}),t},i.writeValue=function(t){E(e.find("option"),function(e){var r=!!t&&(ot(t,e.value)||ot(t,i.selectValueMap[e.value])),n=e.selected;r!==n&&Ts(a(e),r)})};var s,l=NaN;t.$watch(function(){l!==o.$viewValue||ut(s,o.$viewValue)||(s=Xt(o.$viewValue),o.$render()),l=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,r,n){var i=n[1];if(!i)return;var o=n[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}},Ss=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,r){var n,i;return U(r.ngValue)||(U(r.value)?n=t(r.value,!0):(i=t(e.text(),!0))||r.$set("value",e.text())),function(t,e,r){var o=e.parent(),s=o.data("$selectController")||o.parent().data("$selectController");s&&s.registerOption(t,e,r,n,i)}}}}],As=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,r,n){n&&(r.required=!0,n.$validators.required=function(t,e){return!r.required||!n.$isEmpty(e)},r.$observe("required",function(){n.$validate()}))}}},Cs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,r,n){if(n){var i,s=r.ngPattern||r.pattern;r.$observe("pattern",function(t){if(W(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw o("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,Tt(e));i=t||void 0,n.$validate()}),n.$validators.pattern=function(t,e){return n.$isEmpty(e)||$(i)||i.test(e)}}}}},Ms=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,r,n){if(n){var i=-1;r.$observe("maxlength",function(t){var e=D(t);i=I(e)?-1:e,n.$validate()}),n.$validators.maxlength=function(t,e){return i<0||n.$isEmpty(e)||e.length<=i}}}}},Rs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,r,n){if(n){var i=0;r.$observe("minlength",function(t){i=D(t)||0,n.$validate()}),n.$validators.minlength=function(t,e){return n.$isEmpty(e)||e.length>=i}}}}};e.angular.bootstrap?e.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var r;if(!Ft){var n=ct();(l=$(n)?t:n?e[n]:void 0)&&l.fn.on?(a=l,O(l.fn,{scope:Pe.scope,isolateScope:Pe.isolateScope,controller:Pe.controller,injector:Pe.injector,inheritedData:Pe.inheritedData})):a=de,r=a.cleanData,a.cleanData=function(t){for(var e,n,i=0;null!=(n=t[i]);i++)(e=(a._data(n)||{}).events)&&e.$destroy&&a(n).triggerHandler("$destroy");r(t)},_.element=a,Ft=!0}}(),function(t){O(t,{errorHandlingConfig:n,bootstrap:Ot,copy:at,extend:O,merge:P,equals:ut,element:a,forEach:E,injector:Je,noop:F,bind:ft,toJson:vt,fromJson:mt,identity:B,isUndefined:$,isDefined:U,isString:W,isFunction:H,isObject:j,isNumber:V,isElement:nt,isArray:Y,version:qt,isDate:z,callbacks:{$$counter:0},getTestability:Dt,reloadWithDebugInfo:Pt,$$minErr:o,$$csp:ht,$$encodeUriSegment:St,$$encodeUriQuery:At,$$lowercase:d,$$stringify:jt,$$uppercase:f}),(u=function(t){var e=o("$injector"),r=o("ng");function n(t,e,r){return t[e]||(t[e]=r())}var i=n(t,"angular",Object);return i.$$minErr=i.$$minErr||o,n(i,"module",function(){var t={};return function(i,o,s){var a={};return function(t,e){if("hasOwnProperty"===t)throw r("badname","hasOwnProperty is not a valid {0} name",e)}(i,"module"),o&&t.hasOwnProperty(i)&&(t[i]=null),n(t,i,function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],n=[],l=[],u=c("$injector","invoke","push",n),h={_invokeQueue:t,_configBlocks:n,_runBlocks:l,info:function(t){if(U(t)){if(!j(t))throw r("aobj","Argument '{0}' must be an object","value");return a=t,this}return a},requires:o,name:i,provider:p("$provide","provider"),factory:p("$provide","factory"),service:p("$provide","service"),value:c("$provide","value"),constant:c("$provide","constant","unshift"),decorator:p("$provide","decorator",n),animation:p("$animateProvider","register"),filter:p("$filterProvider","register"),controller:p("$controllerProvider","register"),directive:p("$compileProvider","directive"),component:p("$compileProvider","component"),config:u,run:function(t){return l.push(t),this}};return s&&u(s),h;function c(e,r,n,i){return i||(i=t),function(){return i[n||"push"]([e,r,arguments]),h}}function p(e,r,n){return n||(n=t),function(t,o){return o&&H(o)&&(o.$$moduleName=i),n.push([e,r,arguments]),h}}})}})}(e))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Xn}),t.provider("$compile",vr).directive({a:Vi,input:So,textarea:So,form:Zi,script:bs,select:Es,option:Ss,ngBind:Mo,ngBindHtml:Oo,ngBindTemplate:Ro,ngClass:Io,ngClassEven:Fo,ngClassOdd:Lo,ngCloak:Bo,ngController:ko,ngForm:Qi,ngHide:ds,ngIf:jo,ngInclude:Go,ngInit:Vo,ngNonBindable:is,ngPluralize:ls,ngRef:hs,ngRepeat:cs,ngShow:ps,ngStyle:fs,ngSwitch:gs,ngSwitchWhen:vs,ngSwitchDefault:ms,ngOptions:as,ngTransclude:xs,ngModel:Ko,ngList:zo,ngChange:Po,pattern:Cs,ngPattern:Cs,required:As,ngRequired:As,minlength:Rs,ngMinlength:Rs,maxlength:Ms,ngMaxlength:Ms,ngValue:Co,ngModelOptions:rs}).directive({ngInclude:Wo}).directive(zi).directive(No),t.provider({$anchorScroll:Ke,$animate:sr,$animateCss:ur,$$animateJs:ir,$$animateQueue:or,$$AnimateRunner:lr,$$animateAsyncRun:ar,$browser:cr,$cacheFactory:pr,$controller:Ar,$document:Cr,$$isDocumentHidden:Mr,$exceptionHandler:Rr,$filter:mi,$$forceReflow:Or,$interpolate:qr,$interval:Qr,$$intervalFactory:Jr,$http:zr,$httpParamSerializer:Nr,$httpParamSerializerJQLike:$r,$httpBackend:Xr,$xhrFactory:Yr,$jsonpCallbacks:Kr,$location:mn,$log:yn,$parse:Nn,$rootScope:Yn,$q:$n,$$q:Un,$sce:ti,$sceDelegate:Kn,$sniffer:ei,$$taskTrackerFactory:ri,$templateCache:dr,$templateRequest:oi,$$testability:si,$timeout:li,$window:fi,$$rAF:zn,$$jqLite:Ne,$$Map:We,$$cookieReader:vi})}]).info({angularVersion:"1.7.5"})}(_),_.module("ngLocale",[],["$provide",function(t){var e="one",r="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,n){var i=0|t,o=function(t,e){var r=e;void 0===r&&(r=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var n=Math.pow(10,r);return{v:r,f:(t*n|0)%n}}(t,n);return 1==i&&0==o.v?e:r}})}]),a(function(){Rt(e.document,Ot)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')}).call(this,r("EVdn"))},KHwQ:function(t,e,r){r("IbG+"),t.exports=angular},MVZn:function(t,e,r){var n=r("lSNA");t.exports=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),i.forEach(function(e){n(t,e,r[e])})}return t}},MWP8:function(t,e,r){var n,i,o;!function(s,a){"use strict";i=[r("KHwQ")],void 0===(o="function"==typeof(n=function(t){function e(t,e){var r;try{r=t[e]}catch(t){r=!1}if(r){var n="__"+Math.round(1e7*Math.random());try{t[e].setItem(n,n),t[e].removeItem(n,n)}catch(t){r=!1}}return r}return(t=t&&t.module?t:window.angular).module("ngStorage",[]).provider("$localStorage",r("localStorage")).provider("$sessionStorage",r("sessionStorage"));function r(r){var n=e(window,r);return function(){var i="ngStorage-";this.setKeyPrefix=function(t){if("string"!=typeof t)throw new TypeError("[ngStorage] - "+r+"Provider.setKeyPrefix() expects a String.");i=t};var o=t.toJson,s=t.fromJson;this.setSerializer=function(t){if("function"!=typeof t)throw new TypeError("[ngStorage] - "+r+"Provider.setSerializer expects a function.");o=t},this.setDeserializer=function(t){if("function"!=typeof t)throw new TypeError("[ngStorage] - "+r+"Provider.setDeserializer expects a function.");s=t},this.supported=function(){return!!n},this.get=function(t){return n&&s(n.getItem(i+t))},this.set=function(t,e){return n&&n.setItem(i+t,o(e))},this.remove=function(t){n&&n.removeItem(i+t)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(n,a,l,u,h){var c,p,d=i.length,f=e(a,r),g=f||(l.warn("This browser does not support Web Storage!"),{setItem:t.noop,getItem:t.noop,removeItem:t.noop}),v={$default:function(e){for(var r in e)t.isDefined(v[r])||(v[r]=t.copy(e[r]));return v.$sync(),v},$reset:function(t){for(var e in v)"$"===e[0]||delete v[e]&&g.removeItem(i+e);return v.$default(t)},$sync:function(){for(var t,e=0,r=g.length;e<r;e++)(t=g.key(e))&&i===t.slice(0,d)&&(v[t.slice(d)]=s(g.getItem(t)))},$apply:function(){var e;if(p=null,!t.equals(v,c)){for(var r in e=t.copy(c),t.forEach(v,function(r,n){t.isDefined(r)&&"$"!==n[0]&&(g.setItem(i+n,o(r)),delete e[n])}),e)g.removeItem(i+r);c=t.copy(v)}},$supported:function(){return!!f}};return v.$sync(),c=t.copy(v),n.$watch(function(){p||(p=u(v.$apply,100,!1))}),a.addEventListener&&a.addEventListener("storage",function(e){if(e.key){var r=h[0];r.hasFocus&&r.hasFocus()||i!==e.key.slice(0,d)||(e.newValue?v[e.key.slice(d)]=s(e.newValue):delete v[e.key.slice(d)],c=t.copy(v),n.$apply())}}),a.addEventListener&&a.addEventListener("beforeunload",function(){v.$apply()}),v}]}}})?n.apply(e,i):n)||(t.exports=o)}()},NE08:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAWCAYAAAAinad/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhGOUJGNUJCNUQxNTExRTU4MjlERDcxNEI3NTM3MEQ1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhGOUJGNUJDNUQxNTExRTU4MjlERDcxNEI3NTM3MEQ1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEY5QkY1Qjk1RDE1MTFFNTgyOURENzE0Qjc1MzcwRDUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEY5QkY1QkE1RDE1MTFFNTgyOURENzE0Qjc1MzcwRDUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz61RqiGAAAAvElEQVR42qzVoQoCQRSF4d1FFjQZBJvNYrMbfAuxGo1uNRoNNpPV4gMYTVaj3SgGmyCi438X7hPcc+CbeGCYmTtZSumIPrIoWyxvrNFWlHnumKFQlHkuGKnKLD/s0VOUeV5Yoqko89wwUZV5ThiqyixfbNFRlHmeWKBhZXmqK8O5oioyTcp6FWyzQhk9gB260QM4K66GXdop8uhzWqEVfU4HxUO3ETSOjqAH5tHh+MFGMbbtQxkoPpS/AAMAGbchRa3jSiEAAAAASUVORK5CYII="},NK5I:function(t,e,r){(function(e,r){var n;(function(){t.exports=function t(e,r,i){function o(a,l){if(!r[a]){if(!e[a]){var u="function"==typeof n&&n;if(!l&&u)return n(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r||t)},c,c.exports,t,e,r,i)}return r[a].exports}for(var s="function"==typeof n&&n,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,n,i){(function(t,e){!function(){function i(){}function o(t){return t}function s(t){return!!t}function a(t){return!t}function l(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function u(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function h(t){return U(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function c(t,e){for(var r=-1,n=t.length;++r<n;)e(t[r],r,t)}function p(t,e){for(var r=-1,n=t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function d(t){return p(Array(t),function(t,e){return e})}function f(t,e,r){return c(t,function(t,n,i){r=e(r,t,n,i)}),r}function g(t,e){c(j(t),function(r){e(t[r],r)})}function v(t,e){for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1}function m(t){var e,r,n=-1;return h(t)?(e=t.length,function(){return e>++n?n:null}):(r=j(t),e=r.length,function(){return e>++n?r[n]:null})}function y(t,e){return e=null==e?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),i=0;r>i;i++)n[i]=arguments[i+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n)}}}function x(t){return function(e,r,n){return t(e,n)}}function b(t){return function(e,r,n){n=u(n||i);var o=m(e=e||[]);if(0>=t)return n(null);var s=!1,a=0,h=!1;!function i(){if(s&&0>=a)return n(null);for(;t>a&&!h;){var u=o();if(null===u)return s=!0,void(0>=a&&n(null));a+=1,r(e[u],u,l(function(t){a-=1,t?(n(t),h=!0):i()}))}}()}}function _(t){return function(e,r,n){return t(k.eachOf,e,r,n)}}function T(t){return function(e,r,n,i){return t(b(r),e,n,i)}}function w(t){return function(e,r,n){return t(k.eachOfSeries,e,r,n)}}function E(t,e,r,n){n=u(n||i);var o=h(e=e||[])?[]:{};t(e,function(t,e,n){r(t,function(t,r){o[e]=r,n(t)})},function(t){n(t,o)})}function S(t,e,r,n){var i=[];t(e,function(t,e,n){r(t,function(r){r&&i.push({index:e,value:t}),n()})},function(){n(p(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function A(t,e,r,n){S(t,e,function(t,e){r(t,function(t){e(!t)})},n)}function C(t,e,r){return function(n,i,o,s){function a(){s&&s(r(!1,void 0))}function l(t,n,i){return s?void o(t,function(n){s&&e(n)&&(s(r(!0,t)),s=o=!1),i()}):i()}arguments.length>3?t(n,i,l,a):(s=o,o=i,t(n,l,a))}}function M(t,e){return e}function R(t,e,r){r=r||i;var n=h(e)?[]:{};t(e,function(t,e,r){t(y(function(t,i){i.length<=1&&(i=i[0]),n[e]=i,r(t)}))},function(t){r(t,n)})}function O(t,e,r,n){var i=[];t(e,function(t,e,n){r(t,function(t,e){i=i.concat(e||[]),n(t)})},function(t){n(t,i)})}function P(t,e,r){function n(t,e,r,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");return t.started=!0,U(e)||(e=[e]),0===e.length&&t.idle()?k.setImmediate(function(){t.drain()}):(c(e,function(e){var o={data:e,callback:n||i};r?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated()}),void k.setImmediate(t.process))}function o(t,e){return function(){s-=1;var r=!1,n=arguments;c(e,function(t){c(a,function(e,n){e!==t||r||(a.splice(n,1),r=!0)}),t.callback.apply(t,n)}),t.tasks.length+s===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a=[],u={tasks:[],concurrency:e,payload:r,saturated:i,empty:i,drain:i,started:!1,paused:!1,push:function(t,e){n(u,t,!1,e)},kill:function(){u.drain=i,u.tasks=[]},unshift:function(t,e){n(u,t,!0,e)},process:function(){if(!u.paused&&s<u.concurrency&&u.tasks.length)for(;s<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),r=p(e,function(t){return t.data});0===u.tasks.length&&u.empty(),s+=1,a.push(e[0]);var n=l(o(u,e));t(r,n)}},length:function(){return u.tasks.length},running:function(){return s},workersList:function(){return a},idle:function(){return u.tasks.length+s===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;t>=e;e++)k.setImmediate(u.process)}}};return u}function D(t){return y(function(e,r){e.apply(null,r.concat([y(function(e,r){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&c(r,function(e){console[t](e)}))})]))})}function I(t){return function(e,r,n){t(d(e),r,n)}}function L(t){return y(function(e,r){var n=y(function(r){var n=this,i=r.pop();return t(e,function(t,e,i){t.apply(n,r.concat([i]))},i)});return r.length?n.apply(this,r):n})}function F(t){return y(function(e){var r=e.pop();e.push(function(){var t=arguments;n?k.setImmediate(function(){r.apply(null,t)}):r.apply(null,t)});var n=!0;t.apply(this,e),n=!1})}var B,k={},N="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this;null!=N&&(B=N.async),k.noConflict=function(){return N.async=B,k};var $=Object.prototype.toString,U=Array.isArray||function(t){return"[object Array]"===$.call(t)},j=Object.keys||function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e},G="function"==typeof r&&r,W=G?function(t){G(t)}:function(t){setTimeout(t,0)};"object"==typeof t&&"function"==typeof t.nextTick?k.nextTick=t.nextTick:k.nextTick=W,k.setImmediate=G?W:k.nextTick,k.forEach=k.each=function(t,e,r){return k.eachOf(t,x(e),r)},k.forEachSeries=k.eachSeries=function(t,e,r){return k.eachOfSeries(t,x(e),r)},k.forEachLimit=k.eachLimit=function(t,e,r,n){return b(e)(t,x(r),n)},k.forEachOf=k.eachOf=function(t,e,r){function n(t){a--,t?r(t):null===o&&0>=a&&r(null)}r=u(r||i);for(var o,s=m(t=t||[]),a=0;null!=(o=s());)a+=1,e(t[o],o,l(n));0===a&&r(null)},k.forEachOfSeries=k.eachOfSeries=function(t,e,r){r=u(r||i);var n=m(t=t||[]),o=n();!function i(){var s=!0;return null===o?r(null):(e(t[o],o,l(function(t){if(t)r(t);else{if(null===(o=n()))return r(null);s?k.setImmediate(i):i()}})),void(s=!1))}()},k.forEachOfLimit=k.eachOfLimit=function(t,e,r,n){b(e)(t,r,n)},k.map=_(E),k.mapSeries=w(E),k.mapLimit=T(E),k.inject=k.foldl=k.reduce=function(t,e,r,n){k.eachOfSeries(t,function(t,n,i){r(e,t,function(t,r){e=r,i(t)})},function(t){n(t,e)})},k.foldr=k.reduceRight=function(t,e,r,n){var i=p(t,o).reverse();k.reduce(i,e,r,n)},k.transform=function(t,e,r,n){3===arguments.length&&(n=r,r=e,e=U(t)?[]:{}),k.eachOf(t,function(t,n,i){r(e,t,n,i)},function(t){n(t,e)})},k.select=k.filter=_(S),k.selectLimit=k.filterLimit=T(S),k.selectSeries=k.filterSeries=w(S),k.reject=_(A),k.rejectLimit=T(A),k.rejectSeries=w(A),k.any=k.some=C(k.eachOf,s,o),k.someLimit=C(k.eachOfLimit,s,o),k.all=k.every=C(k.eachOf,a,a),k.everyLimit=C(k.eachOfLimit,a,a),k.detect=C(k.eachOf,o,M),k.detectSeries=C(k.eachOfSeries,o,M),k.detectLimit=C(k.eachOfLimit,o,M),k.sortBy=function(t,e,r){function n(t,e){var r=t.criteria,n=e.criteria;return n>r?-1:r>n?1:0}k.map(t,function(t,r){e(t,function(e,n){e?r(e):r(null,{value:t,criteria:n})})},function(t,e){return t?r(t):void r(null,p(e.sort(n),function(t){return t.value}))})},k.auto=function(t,e,r){function n(t){d.unshift(t)}function o(t){var e=v(d,t);e>=0&&d.splice(e,1)}function s(){l--,c(d.slice(0),function(t){t()})}r||(r=e,e=null),r=u(r||i);var a=j(t),l=a.length;if(!l)return r(null);e||(e=l);var h={},p=0,d=[];n(function(){l||r(null,h)}),c(a,function(i){function a(){return e>p&&f(d,function(t,e){return t&&h.hasOwnProperty(e)},!0)&&!h.hasOwnProperty(i)}for(var l,u=U(t[i])?t[i]:[t[i]],c=y(function(t,e){if(p--,e.length<=1&&(e=e[0]),t){var n={};g(h,function(t,e){n[e]=t}),n[i]=e,r(t,n)}else h[i]=e,k.setImmediate(s)}),d=u.slice(0,u.length-1),m=d.length;m--;){if(!(l=t[d[m]]))throw new Error("Has inexistant dependency");if(U(l)&&v(l,i)>=0)throw new Error("Has cyclic dependencies")}a()?(p++,u[u.length-1](c,h)):n(function t(){a()&&(p++,o(t),u[u.length-1](c,h))})})},k.retry=function(t,e,r){function n(t,e){function r(t,r){return function(n){t(function(t,e){n(!t||r,{err:t,result:e})},e)}}function n(t){return function(e){setTimeout(function(){e(null)},t)}}for(;a.times;){var i=!(a.times-=1);s.push(r(a.task,i)),!i&&a.interval>0&&s.push(n(a.interval))}k.series(s,function(e,r){r=r[r.length-1],(t||a.callback)(r.err,r.result)})}var i=5,o=0,s=[],a={times:i,interval:o},l=arguments.length;if(1>l||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=l&&"function"==typeof t&&(r=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||i;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||i,t.interval=parseInt(e.interval,10)||o}}(a,t),a.callback=r,a.task=e,a.callback?n():n},k.waterfall=function(t,e){if(e=u(e||i),!U(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}return t.length?void function t(r){return y(function(n,i){if(n)e.apply(null,[n].concat(i));else{var o=r.next();o?i.push(t(o)):i.push(e),F(r).apply(null,i)}})}(k.iterator(t))():e()},k.parallel=function(t,e){R(k.eachOf,t,e)},k.parallelLimit=function(t,e,r){R(b(e),t,r)},k.series=function(t,e){R(k.eachOfSeries,t,e)},k.iterator=function(t){return function e(r){function n(){return t.length&&t[r].apply(null,arguments),n.next()}return n.next=function(){return r<t.length-1?e(r+1):null},n}(0)},k.apply=y(function(t,e){return y(function(r){return t.apply(null,e.concat(r))})}),k.concat=_(O),k.concatSeries=w(O),k.whilst=function(t,e,r){if(r=r||i,t()){var n=y(function(i,o){i?r(i):t.apply(this,o)?e(n):r(null)});e(n)}else r(null)},k.doWhilst=function(t,e,r){var n=0;return k.whilst(function(){return++n<=1||e.apply(this,arguments)},t,r)},k.until=function(t,e,r){return k.whilst(function(){return!t.apply(this,arguments)},e,r)},k.doUntil=function(t,e,r){return k.doWhilst(t,function(){return!e.apply(this,arguments)},r)},k.during=function(t,e,r){r=r||i;var n=y(function(e,n){e?r(e):(n.push(o),t.apply(this,n))}),o=function(t,i){t?r(t):i?e(n):r(null)};t(o)},k.doDuring=function(t,e,r){var n=0;k.during(function(t){n++<1?t(null,!0):e.apply(this,arguments)},t,r)},k.queue=function(t,e){var r=P(function(e,r){t(e[0],r)},e,1);return r},k.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function n(t,e,n,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,U(e)||(e=[e]),0===e.length?k.setImmediate(function(){t.drain()}):void c(e,function(e){var s={data:e,priority:n,callback:"function"==typeof o?o:i};t.tasks.splice(function(t,e,r){for(var n=-1,i=t.length-1;i>n;){var o=n+(i-n+1>>>1);r(e,t[o])>=0?n=o:i=o-1}return n}(t.tasks,s,r)+1,0,s),t.tasks.length===t.concurrency&&t.saturated(),k.setImmediate(t.process)})}var o=k.queue(t,e);return o.push=function(t,e,r){n(o,t,e,r)},delete o.unshift,o},k.cargo=function(t,e){return P(t,1,e)},k.log=D("log"),k.dir=D("dir"),k.memoize=function(t,e){var r={},n={};e=e||o;var i=y(function(i){var o=i.pop(),s=e.apply(null,i);s in r?k.setImmediate(function(){o.apply(null,r[s])}):s in n?n[s].push(o):(n[s]=[o],t.apply(null,i.concat([y(function(t){r[s]=t;var e=n[s];delete n[s];for(var i=0,o=e.length;o>i;i++)e[i].apply(null,t)})])))});return i.memo=r,i.unmemoized=t,i},k.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},k.times=I(k.map),k.timesSeries=I(k.mapSeries),k.timesLimit=function(t,e,r,n){return k.mapLimit(d(t),e,r,n)},k.seq=function(){var t=arguments;return y(function(e){var r=this,n=e[e.length-1];"function"==typeof n?e.pop():n=i,k.reduce(t,e,function(t,e,n){e.apply(r,t.concat([y(function(t,e){n(t,e)})]))},function(t,e){n.apply(r,[t].concat(e))})})},k.compose=function(){return k.seq.apply(null,Array.prototype.reverse.call(arguments))},k.applyEach=L(k.eachOf),k.applyEachSeries=L(k.eachOfSeries),k.forever=function(t,e){var r=l(e||i),n=F(t);!function t(e){return e?r(e):void n(t)}()},k.ensureAsync=F,k.constant=y(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),k.wrapSync=k.asyncify=function(t){return y(function(e){var r,n=e.pop();try{r=t.apply(this,e)}catch(t){return n(t)}!function(t){var e=typeof t;return"function"===e||"object"===e&&!!t}(r)||"function"!=typeof r.then?n(null,r):r.then(function(t){n(null,t)}).catch(function(t){n(t.message?t:new Error(t))})})},"object"==typeof n&&n.exports?n.exports=k:N.async=k}()}).call(this,t("_process"),void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,i="/"===s.charAt(0))}return r=e(n(r.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(t){var i=r.isAbsolute(t),o="/"===s(t,-1);return(t=e(n(t.split("/"),function(t){return!!t}),!i).join("/"))||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var i=n(t.split("/")),o=n(e.split("/")),s=Math.min(i.length,o.length),a=s,l=0;s>l;l++)if(i[l]!==o[l]){a=l;break}for(var u=[],l=a;l<i.length;l++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return 0>e&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:3}],3:[function(t,e,r){function n(){h=!1,a.length?u=a.concat(u):c=-1,u.length&&i()}function i(){if(!h){var t=setTimeout(n);h=!0;for(var e=u.length;e;){for(a=u,u=[];++c<e;)a&&a[c].run();c=-1,e=u.length}a=null,h=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,l=e.exports={},u=[],h=!1,c=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new o(t,e)),1!==u.length||h||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],4:[function(t,r,n){(function(t){!function(e){function i(t){throw RangeError(P[t])}function o(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function s(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]);var i=(t=t.replace(O,".")).split("."),s=o(i,e).join(".");return n+s}function a(t){for(var e,r,n=[],i=0,o=t.length;o>i;)(e=t.charCodeAt(i++))>=55296&&56319>=e&&o>i?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function l(t){return o(t,function(t){var e="";return t>65535&&(e+=L((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=L(t)}).join("")}function u(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:b}function h(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function c(t,e,r){var n=0;for(t=r?I(t/E):t>>1,t+=I(t/e);t>D*T>>1;n+=b)t=I(t/D);return I(n+(D+1)*t/(t+w))}function p(t){var e,r,n,o,s,a,h,p,d,f,g=[],v=t.length,m=0,y=A,w=S;for(0>(r=t.lastIndexOf(C))&&(r=0),n=0;r>n;++n)t.charCodeAt(n)>=128&&i("not-basic"),g.push(t.charCodeAt(n));for(o=r>0?r+1:0;v>o;){for(s=m,a=1,h=b;o>=v&&i("invalid-input"),((p=u(t.charCodeAt(o++)))>=b||p>I((x-m)/a))&&i("overflow"),m+=p*a,!((d=w>=h?_:h>=w+T?T:h-w)>p);h+=b)a>I(x/(f=b-d))&&i("overflow"),a*=f;e=g.length+1,w=c(m-s,e,0==s),I(m/e)>x-y&&i("overflow"),y+=I(m/e),m%=e,g.splice(m++,0,y)}return l(g)}function d(t){var e,r,n,o,s,l,u,p,d,f,g,v,m,y,w,E=[];for(t=a(t),v=t.length,e=A,r=0,s=S,l=0;v>l;++l)128>(g=t[l])&&E.push(L(g));for(n=o=E.length,o&&E.push(C);v>n;){for(u=x,l=0;v>l;++l)(g=t[l])>=e&&u>g&&(u=g);for(u-e>I((x-r)/(m=n+1))&&i("overflow"),r+=(u-e)*m,e=u,l=0;v>l;++l)if(g=t[l],e>g&&++r>x&&i("overflow"),g==e){for(p=r,d=b;!((f=s>=d?_:d>=s+T?T:d-s)>p);d+=b)w=p-f,y=b-f,E.push(L(h(f+w%y,0))),p=I(w/y);E.push(L(h(p,0))),s=c(r,m,n==o),r=0,++n}++r,++e}return E.join("")}var f="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof r&&r&&!r.nodeType&&r,v="object"==typeof t&&t;(v.global===v||v.window===v||v.self===v)&&(e=v);var m,y,x=2147483647,b=36,_=1,T=26,w=38,E=700,S=72,A=128,C="-",M=/^xn--/,R=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=b-_,I=Math.floor,L=String.fromCharCode;if(m={version:"1.3.2",ucs2:{decode:a,encode:l},decode:p,encode:d,toASCII:function(t){return s(t,function(t){return R.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return s(t,function(t){return M.test(t)?p(t.slice(4).toLowerCase()):t})}},f&&g)if(r.exports==f)g.exports=m;else for(y in m)m.hasOwnProperty(y)&&(f[y]=m[y]);else e.punycode=m}(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=t.length;l>0&&u>l&&(u=l);for(var h=0;u>h;++h){var c,p,d,f,g=t[h].replace(a,"%20"),v=g.indexOf(r);v>=0?(c=g.substr(0,v),p=g.substr(v+1)):(c=g,p=""),d=decodeURIComponent(c),f=decodeURIComponent(p),n(s,d)?i(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],6:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(i(s))+r;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],7:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":5,"./encode":6}],8:[function(t,e,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&s(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return"string"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return null===t}var l=t("punycode");r.parse=i,r.resolve=function(t,e){return i(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},r.format=function(t){return o(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)},r.Url=n;var u=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),p=["'"].concat(c),d=["%","/","?",";","#"].concat(p),f=["/","?","#"],g=/^[a-z0-9A-Z_-]{0,63}$/,v=/^([a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=t("querystring");n.prototype.parse=function(t,e,r){if(!o(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var i=u.exec(n);if(i){var s=(i=i[0]).toLowerCase();this.protocol=s,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&y[i]||(n=n.substr(2),this.slashes=!0)}if(!y[i]&&(a||i&&!x[i])){for(var h=-1,c=0;c<f.length;c++){var _=n.indexOf(f[c]);-1!==_&&(-1===h||h>_)&&(h=_)}var T,w;-1!==(w=-1===h?n.lastIndexOf("@"):n.lastIndexOf("@",h))&&(T=n.slice(0,w),n=n.slice(w+1),this.auth=decodeURIComponent(T)),h=-1;for(var c=0;c<d.length;c++){var _=n.indexOf(d[c]);-1!==_&&(-1===h||h>_)&&(h=_)}-1===h&&(h=n.length),this.host=n.slice(0,h),n=n.slice(h),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var S=this.hostname.split(/\./),c=0,A=S.length;A>c;c++){var C=S[c];if(C&&!C.match(g)){for(var M="",R=0,O=C.length;O>R;R++)M+=C.charCodeAt(R)>127?"x":C[R];if(!M.match(g)){var P=S.slice(0,c),D=S.slice(c+1),I=C.match(v);I&&(P.push(I[1]),D.unshift(I[2])),D.length&&(n="/"+D.join(".")+n),this.hostname=P.join(".");break}}}if(this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),!E){for(var L=this.hostname.split("."),F=[],c=0;c<L.length;++c){var B=L[c];F.push(B.match(/[^A-Za-z0-9_-]/)?"xn--"+l.encode(B):B)}this.hostname=F.join(".")}var k=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+k,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!m[s])for(var c=0,A=p.length;A>c;c++){var $=p[c],U=encodeURIComponent($);U===$&&(U=escape($)),n=n.split($).join(U)}var j=n.indexOf("#");-1!==j&&(this.hash=n.substr(j),n=n.slice(0,j));var G=n.indexOf("?");if(-1!==G?(this.search=n.substr(G),this.query=n.substr(G+1),e&&(this.query=b.parse(this.query)),n=n.slice(0,G)):e&&(this.search="",this.query={}),n&&(this.pathname=n),x[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var k=this.pathname||"",B=this.search||"";this.path=k+B}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||x[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(o(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),x[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!x[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||y[t.protocol])r.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var s=r.pathname||"",l=r.search||"";r.path=s+l}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var u=r.pathname&&"/"===r.pathname.charAt(0),h=t.host||t.pathname&&"/"===t.pathname.charAt(0),c=h||u||r.host&&t.pathname,p=c,d=r.pathname&&r.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],f=r.protocol&&!x[r.protocol];if(f&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),c=c&&(""===i[0]||""===d[0])),h)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=t.search,r.query=t.query;else if(!function(t){return null==t}(t.search)){if(f){r.hostname=r.host=d.shift();var g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=t.search,r.query=t.query,a(r.pathname)&&a(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var v=d.slice(-1)[0],m=(r.host||t.host)&&("."===v||".."===v)||""===v,b=0,_=d.length;_>=0;_--)"."==(v=d[_])?d.splice(_,1):".."===v?(d.splice(_,1),b++):b&&(d.splice(_,1),b--);if(!c&&!p)for(;b--;b)d.unshift("..");!c||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),m&&"/"!==d.join("/").substr(-1)&&d.push("");var T=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(f){r.hostname=r.host=T?"":d.length?d.shift():"";var g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return(c=c||r.host&&d.length)&&!T&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),a(r.pathname)&&a(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:4,querystring:7}],9:[function(t,e,r){"use strict";function n(t,e,r,n,i){var o,s,a,l=0;for(o=e,s=r-n;r>o;o+=n)l+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;if(i===l>0)for(o=e;r>o;o+=n)a=T(o,t[o],t[o+1],a);else for(o=r-n;o>=e;o-=n)a=T(o,t[o],t[o+1],a);return a}function i(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!y(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{if(w(n),(n=e=n.prev)===n.next)return null;r=!0}}while(r||n!==e);return e}function o(t,e,r,n,h,c,p){if(t){!p&&c&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=d(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,l,u=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;u>e&&(a++,n=n.nextZ);e++);for(l=u;a>0||l>0&&n;)0===a?(i=n,n=n.nextZ,l--):0!==l&&n?r.z<=n.z?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--):(i=r,r=r.nextZ,a--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(s>1)}(i)}(t,n,h,c);for(var f,g,v=t;t.prev!==t.next;)if(f=t.prev,g=t.next,c?a(t,n,h,c):s(t))e.push(f.i/r),e.push(t.i/r),e.push(g.i/r),w(t),t=g.next,v=g.next;else if((t=g)===v){p?1===p?o(t=l(t,e,r),e,r,n,h,c,2):2===p&&u(t,e,r,n,h,c):o(i(t),e,r,n,h,c,1);break}}}function s(t){var e=t.prev,r=t,n=t.next;if(m(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(g(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(t,e,r,n){var i=t.prev,o=t,s=t.next;if(m(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,u=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=d(a,l,e,r,n),p=d(u,h,e,r,n),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function l(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;x(i,n,n.next,o)&&b(i,o)&&b(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),w(n),w(n.next),n=t=o),n=n.next}while(n!==t);return n}function u(t,e,r,n,s,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&v(l,u)){var h=_(l,u);return l=i(l,l.next),h=i(h,h.next),o(l,e,r,n,s,a),void o(h,e,r,n,s,a)}u=u.next}l=l.next}while(l!==t)}function h(t,e,r,o){var s,a,l,u,h,d=[];for(s=0,a=e.length;a>s;s++)l=e[s]*o,u=a-1>s?e[s+1]*o:t.length,(h=n(t,l,u,o,!1))===h.next&&(h.steiner=!0),d.push(f(h));for(d.sort(c),s=0;s<d.length;s++)p(d[s],r),r=i(r,r.next);return r}function c(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);i>=a&&a>s&&(s=a,r=n.x<n.next.x?n:n.next)}n=n.next}while(n!==e);if(!r)return null;var l,u=r,h=1/0;for(n=r.next;n!==u;)i>=n.x&&n.x>=r.x&&g(o<r.y?i:s,o,r.x,r.y,o<r.y?s:i,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(i-n.x),(h>l||l===h&&n.x>r.x)&&b(n,t)&&(r=n,h=l)),n=n.next;return r}(t,e)){var r=_(e,t);i(r,r.next)}}function d(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)/i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)/i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function g(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function v(t,e){return y(t,e)||t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&x(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&b(t,e)&&b(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function m(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,r,n){return m(t,e,r)>0!=m(t,e,n)>0&&m(r,n,t)>0!=m(r,n,e)>0}function b(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function _(t,e){var r=new E(t.i,t.x,t.y),n=new E(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function T(t,e,r,n){var i=new E(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.exports=function(t,e,r){r=r||2;var i,s,a,l,u,c,p,d=e&&e.length,f=d?e[0]*r:t.length,g=n(t,0,f,r,!0),v=[];if(!g)return v;if(d&&(g=h(t,e,g,r)),t.length>80*r){i=a=t[0],s=l=t[1];for(var m=r;f>m;m+=r)u=t[m],c=t[m+1],i>u&&(i=u),s>c&&(s=c),u>a&&(a=u),c>l&&(l=c);p=Math.max(a-i,l-s)}return o(g,v,r,i,s,p),v}},{}],10:[function(t,e,r){"use strict";function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(){}var o="function"!=typeof Object.create&&"~";i.prototype._events=void 0,i.prototype.listeners=function(t,e){var r=o?o+t:t,n=this._events&&this._events[r];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);s>i;i++)a[i]=n[i].fn;return a},i.prototype.emit=function(t,e,r,n,i,s){var a=o?o+t:t;if(!this._events||!this._events[a])return!1;var l,u,h=this._events[a],c=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,i),!0;case 6:return h.fn.call(h.context,e,r,n,i,s),!0}for(u=1,l=new Array(c-1);c>u;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var p,d=h.length;for(u=0;d>u;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),c){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,r);break;default:if(!l)for(p=1,l=new Array(c-1);c>p;p++)l[p-1]=arguments[p];h[u].fn.apply(h[u].context,l)}}return!0},i.prototype.on=function(t,e,r){var i=new n(e,r||this),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.once=function(t,e,r){var i=new n(e,r||this,!0),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.removeListener=function(t,e,r,n){var i=o?o+t:t;if(!this._events||!this._events[i])return this;var s=this._events[i],a=[];if(e)if(s.fn)(s.fn!==e||n&&!s.once||r&&s.context!==r)&&a.push(s);else for(var l=0,u=s.length;u>l;l++)(s[l].fn!==e||n&&!s[l].once||r&&s[l].context!==r)&&a.push(s[l]);return a.length?this._events[i]=1===a.length?a[0]:a:delete this._events[i],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[o?o+t:t]:this._events=o?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=o,void 0!==e&&(e.exports=i)},{}],11:[function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var r,o,s=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),a=1;a<arguments.length;a++){for(var l in r=Object(arguments[a]))n.call(r,l)&&(s[l]=r[l]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(r);for(var u=0;u<o.length;u++)i.call(r,o[u])&&(s[o[u]]=r[o[u]])}}return s}},{}],12:[function(t,e,r){e.exports={name:"pixi.js",version:"3.0.9",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/pixijs/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/pixijs/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/","CONTRIBUTING.md","LICENSE","package.json","README.md"],dependencies:{async:"^1.5.0",brfs:"^1.4.1",earcut:"^2.0.7",eventemitter3:"^1.1.1","object-assign":"^4.0.1","resource-loader":"^1.6.4"},devDependencies:{browserify:"^11.1.0",chai:"^3.2.0",del:"^2.0.2",gulp:"^3.9.0","gulp-cached":"^1.1.0","gulp-concat":"^2.6.0","gulp-debug":"^2.1.0","gulp-header":"^1.7.1","gulp-jshint":"^1.11.2","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.4.1","gulp-util":"^3.0.6","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.2","jshint-summary":"^0.4.0",minimist:"^1.2.0",mocha:"^2.3.2","require-dir":"^0.3.0","run-sequence":"^1.1.2",testem:"^0.9.4","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.4.0"},browserify:{transform:["brfs"]}}},{}],13:[function(t,e,r){function n(t){var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var i=t("../core");Object.assign(i.DisplayObject.prototype,t("./accessibleTarget")),n.prototype.constructor=n,e.exports=n,n.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},n.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=e.length-1;r>=0;r--)this.updateAccessibleObjects(e[r])}},n.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,i.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{n=s._accessibleDiv;var a=s.hitArea,l=s.worldTransform;s.hitArea?(n.style.left=(l.tx+a.x*l.a)*e+"px",n.style.top=(l.ty+a.y*l.d)*r+"px",n.style.width=a.width*l.a*e+"px",n.style.height=a.height*l.d*r+"px"):(a=s.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*r+"px",n.style.width=a.width*e+"px",n.style.height=a.height*r+"px")}}this.renderId++},n.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},n.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.title=t.accessibleTitle||"displayObject "+this.tabIndex,t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},n.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},n.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},n.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},n.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},n.prototype._onMouseMove=function(){this.deactivate()},n.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i.WebGLRenderer.registerPlugin("accessibility",n),i.CanvasRenderer.registerPlugin("accessibility",n)},{"../core":23,"./accessibleTarget":14}],14:[function(t,e,r){e.exports={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],15:[function(t,e,r){e.exports={accessibleTarget:t("./accessibleTarget"),AccessibilityManager:t("./AccessibilityManager")}},{"./AccessibilityManager":13,"./accessibleTarget":14}],16:[function(t,e,r){var n={VERSION:t("../../package.json").version,PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};e.exports=n},{"../../package.json":12}],17:[function(t,e,r){function n(){s.call(this),this.children=[]}var i=t("../math"),o=t("../utils"),s=t("./DisplayObject"),a=t("../textures/RenderTexture"),l=new i.Matrix;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}}),n.prototype.onChildrenChange=function(){},n.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var r=0;e>r;r++)this.addChild(arguments[r]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},n.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit("added",this),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},n.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);if(0>r||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[r]=e,this.children[n]=t,this.onChildrenChange(n>r?r:n)}},n.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},n.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(t);o.removeItems(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},n.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},n.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var r=0;e>r;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(t);if(-1===n)return;t.parent=null,o.removeItems(this.children,n,1),this.onChildrenChange(n),t.emit("removed",this)}return t},n.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,o.removeItems(this.children,t,1),this.onChildrenChange(t),e.emit("removed",this),e},n.prototype.removeChildren=function(t,e){var r,n,i=t||0,o="number"==typeof e?e:this.children.length,s=o-i;if(s>0&&o>=s){for(r=this.children.splice(i,s),n=0;n<r.length;++n)r[n].parent=null;for(this.onChildrenChange(t),n=0;n<r.length;++n)r[n].emit("removed",this);return r}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},n.prototype.generateTexture=function(t,e,r){var n=this.getLocalBounds(),i=new a(t,0|n.width,0|n.height,r,e);return l.tx=-n.x,l.ty=-n.y,i.render(this,l),i},n.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;e>t;++t)this.children[t].updateTransform()}},n.prototype.containerUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return i.Rectangle.EMPTY;for(var t,e,r,n=1/0,o=1/0,s=-1/0,a=-1/0,l=!1,u=0,h=this.children.length;h>u;++u){var c=this.children[u];c.visible&&(l=!0,t=this.children[u].getBounds(),n=n<t.x?n:t.x,o=o<t.y?o:t.y,e=t.width+t.x,r=t.height+t.y,s=s>e?s:e,a=a>r?a:r)}if(!l)return i.Rectangle.EMPTY;var p=this._bounds;p.x=n,p.y=o,p.width=s-n,p.height=a-o,this._currentBounds=p}return this._currentBounds},n.prototype.containerGetBounds=n.prototype.getBounds,n.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=i.Matrix.IDENTITY;for(var e=0,r=this.children.length;r>e;++e)this.children[e].updateTransform();return this.worldTransform=t,this._currentBounds=null,this.getBounds(i.Matrix.IDENTITY)},n.prototype.renderWebGL=function(t){var e,r;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&this._filters.length&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,r=this.children.length;r>e;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,r=this.children.length;r>e;++e)this.children[e].renderWebGL(t)},n.prototype._renderWebGL=function(t){},n.prototype._renderCanvas=function(t){},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t),this._renderCanvas(t);for(var e=0,r=this.children.length;r>e;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.prototype.destroy=function(t){if(s.prototype.destroy.call(this),t)for(var e=0,r=this.children.length;r>e;++e)this.children[e].destroy(t);this.removeChildren(),this.children=null}},{"../math":26,"../textures/RenderTexture":64,"../utils":70,"./DisplayObject":18}],18:[function(t,e,r){function n(){s.call(this),this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.skew=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new i.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var i=t("../math"),o=t("../textures/RenderTexture"),s=t("eventemitter3"),a=t("../const"),l=new i.Matrix,u={worldTransform:new i.Matrix,worldAlpha:1,children:[]};n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),n.prototype.updateTransform=function(){var t,e,r,n,i,o,s=this.parent.worldTransform,u=this.worldTransform;this.skew.x||this.skew.y?(l.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),u.a=l.a*s.a+l.b*s.c,u.b=l.a*s.b+l.b*s.d,u.c=l.c*s.a+l.d*s.c,u.d=l.c*s.b+l.d*s.d,u.tx=l.tx*s.a+l.ty*s.c+s.tx,u.ty=l.tx*s.b+l.ty*s.d+s.ty):this.rotation%a.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,r=-this._sr*this.scale.y,n=this._cr*this.scale.y,i=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(i-=this.pivot.x*t+this.pivot.y*r,o-=this.pivot.x*e+this.pivot.y*n),u.a=t*s.a+e*s.c,u.b=t*s.b+e*s.d,u.c=r*s.a+n*s.c,u.d=r*s.b+n*s.d,u.tx=i*s.a+o*s.c+s.tx,u.ty=i*s.b+o*s.d+s.ty):(t=this.scale.x,n=this.scale.y,i=this.position.x-this.pivot.x*t,o=this.position.y-this.pivot.y*n,u.a=t*s.a,u.b=t*s.b,u.c=n*s.c,u.d=n*s.d,u.tx=i*s.a+o*s.c+s.tx,u.ty=i*s.b+o*s.d+s.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},n.prototype.displayObjectUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(t){return i.Rectangle.EMPTY},n.prototype.getLocalBounds=function(){return this.getBounds(i.Matrix.IDENTITY)},n.prototype.toGlobal=function(t){return this.parent?this.displayObjectUpdateTransform():(this.parent=u,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(t)},n.prototype.toLocal=function(t,e,r){return e&&(t=e.toGlobal(t)),this.parent?this.displayObjectUpdateTransform():(this.parent=u,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(t,r)},n.prototype.renderWebGL=function(t){},n.prototype.renderCanvas=function(t){},n.prototype.generateTexture=function(t,e,r){var n=this.getLocalBounds(),i=new o(t,0|n.width,0|n.height,e,r);return l.tx=-n.x,l.ty=-n.y,i.render(this,l),i},n.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},n.prototype.setTransform=function(t,e,r,n,i,o,s,a,l){return this.position.x=t||0,this.position.y=e||0,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i||0,this.skew.x=o||0,this.skew.y=s||0,this.pivot.x=a||0,this.pivot.y=l||0,this},n.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":16,"../math":26,"../textures/RenderTexture":64,eventemitter3:10}],19:[function(t,e,r){function n(){i.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=h.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new u.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var i=t("../display/Container"),o=t("../textures/Texture"),s=t("../renderers/canvas/utils/CanvasBuffer"),a=t("../renderers/canvas/utils/CanvasGraphics"),l=t("./GraphicsData"),u=t("../math"),h=t("../const"),c=new u.Point;n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){var t=new n;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=!0,t.glDirty=!0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},n.prototype.lineStyle=function(t,e,r){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===r?1:r,this.currentPath)if(this.currentPath.shape.points.length){var n=new u.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},n.prototype.moveTo=function(t,e){var r=new u.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},n.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},n.prototype.quadraticCurveTo=function(t,e,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,s=this.currentPath.shape.points;0===s.length&&this.moveTo(0,0);for(var a=s[s.length-2],l=s[s.length-1],u=0,h=1;20>=h;++h)i=a+(t-a)*(u=h/20),o=l+(e-l)*u,s.push(i+(t+(r-t)*u-i)*u,o+(e+(n-e)*u-o)*u);return this.dirty=this.boundsDirty=!0,this},n.prototype.bezierCurveTo=function(t,e,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var s,a,l,u,h,c=this.currentPath.shape.points,p=c[c.length-2],d=c[c.length-1],f=0,g=1;20>=g;++g)l=(a=(s=1-(f=g/20))*s)*s,h=(u=f*f)*f,c.push(l*p+3*a*f*t+3*s*u*r+h*i,l*d+3*a*f*e+3*s*u*n+h*o);return this.dirty=this.boundsDirty=!0,this},n.prototype.arcTo=function(t,e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],l=a-e,u=s-t,h=n-e,c=r-t,p=Math.abs(l*c-u*h);if(1e-8>p||0===i)(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e);else{var d=l*l+u*u,f=h*h+c*c,g=l*h+u*c,v=i*Math.sqrt(d)/p,m=i*Math.sqrt(f)/p,y=v*g/d,x=m*g/f,b=v*c+m*u,_=v*h+m*l,T=u*(m+y),w=l*(m+y),E=c*(v+x),S=h*(v+x),A=Math.atan2(w-_,T-b),C=Math.atan2(S-_,E-b);this.arc(b+t,_+e,i,A,C,u*h>c*l)}return this.dirty=this.boundsDirty=!0,this},n.prototype.arc=function(t,e,r,n,i,o){if(o=o||!1,n===i)return this;!o&&n>=i?i+=2*Math.PI:o&&i>=n&&(n+=2*Math.PI);var s=o?-1*(n-i):i-n,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var l=t+Math.cos(n)*r,u=e+Math.sin(n)*r;this.currentPath?this.currentPath.shape.points.push(l,u):this.moveTo(l,u);for(var h=this.currentPath.shape.points,c=s/(2*a),p=2*c,d=Math.cos(c),f=Math.sin(c),g=a-1,v=g%1/g,m=0;g>=m;m++){var y=m+v*m,x=c+n+p*y,b=Math.cos(x),_=-Math.sin(x);h.push((d*b+f*_)*r+t,(d*-_+f*b)*r+e)}return this.dirty=this.boundsDirty=!0,this},n.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.prototype.drawRect=function(t,e,r,n){return this.drawShape(new u.Rectangle(t,e,r,n)),this},n.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new u.RoundedRectangle(t,e,r,n,i)),this},n.prototype.drawCircle=function(t,e,r){return this.drawShape(new u.Circle(t,e,r)),this},n.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new u.Ellipse(t,e,r,n)),this},n.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof u.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var i=new u.Polygon(e);return i.closed=r,this.drawShape(i),this},n.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.prototype.generateTexture=function(t,e,r){e=e||1;var n=this.getLocalBounds(),i=new s(n.width*e,n.height*e),l=o.fromCanvas(i.canvas,r);return l.baseTexture.resolution=e,i.context.scale(e,e),i.context.translate(-n.x,-n.y),a.renderGraphics(this,i.context),l},n.prototype._renderWebGL=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this)},n.prototype._renderCanvas=function(t){if(!0!==this.isMask){this._prevTint!==this.tint&&(this.dirty=!0);var e=t.context,r=this.worldTransform,n=t.blendModes[this.blendMode];n!==e.globalCompositeOperation&&(e.globalCompositeOperation=n);var i=t.resolution;e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),a.renderGraphics(this,e)}},n.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return u.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var e=this._localBounds,r=e.x,n=e.width+e.x,i=e.y,o=e.height+e.y,s=t||this.worldTransform,a=s.a,l=s.b,h=s.c,c=s.d,p=s.tx,d=s.ty,f=a*n+h*o+p,g=c*o+l*n+d,v=a*r+h*o+p,m=c*o+l*r+d,y=a*r+h*i+p,x=c*i+l*r+d,b=a*n+h*i+p,_=c*i+l*n+d,T=f,w=g,E=f,S=g;E=(E=(E=E>v?v:E)>y?y:E)>b?b:E,S=(S=(S=S>m?m:S)>x?x:S)>_?_:S,T=b>(T=y>(T=v>T?v:T)?y:T)?b:T,w=_>(w=x>(w=m>w?m:w)?x:w)?_:w,this._bounds.x=E,this._bounds.width=T-E,this._bounds.y=S,this._bounds.height=w-S,this._currentBounds=this._bounds}return this._currentBounds},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);for(var e=this.graphicsData,r=0;r<e.length;r++){var n=e[r];if(n.fill&&n.shape&&n.shape.contains(c.x,c.y))return!0}return!1},n.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,n=-1/0;if(this.graphicsData.length)for(var i,o,s,a,l,u,c=0;c<this.graphicsData.length;c++){var p=this.graphicsData[c],d=p.type,f=p.lineWidth;if(i=p.shape,d===h.SHAPES.RECT||d===h.SHAPES.RREC)s=i.x-f/2,a=i.y-f/2,l=i.width+f,u=i.height+f,t=t>s?s:t,e=s+l>e?s+l:e,r=r>a?a:r,n=a+u>n?a+u:n;else if(d===h.SHAPES.CIRC)s=i.x,a=i.y,l=i.radius+f/2,u=i.radius+f/2,t=t>s-l?s-l:t,e=s+l>e?s+l:e,r=r>a-u?a-u:r,n=a+u>n?a+u:n;else if(d===h.SHAPES.ELIP)s=i.x,a=i.y,l=i.width+f/2,u=i.height+f/2,t=t>s-l?s-l:t,e=s+l>e?s+l:e,r=r>a-u?a-u:r,n=a+u>n?a+u:n;else{o=i.points;for(var g=0;g<o.length;g+=2)s=o[g],a=o[g+1],t=t>s-f?s-f:t,e=s+f>e?s+f:e,r=r>a-f?a-f:r,n=a+f>n?a+f:n}}else t=0,e=0,r=0,n=0;var v=this.boundsPadding;this._localBounds.x=t-v,this._localBounds.width=e-t+2*v,this._localBounds.y=r-v,this._localBounds.height=n-r+2*v},n.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new l(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===h.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty=this.boundsDirty=!0,e},n.prototype.destroy=function(){i.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var r=0;r<this._webgl[e].data.length;++r)this._webgl[e].data[r].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":16,"../display/Container":17,"../math":26,"../renderers/canvas/utils/CanvasBuffer":38,"../renderers/canvas/utils/CanvasGraphics":39,"../textures/Texture":65,"./GraphicsData":20}],20:[function(t,e,r){function n(t,e,r,n,i,o,s){this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=n,this.fillAlpha=i,this._fillTint=n,this.fill=o,this.shape=s,this.type=s.type}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.destroy=function(){this.shape=null}},{}],21:[function(t,e,r){function n(t){a.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var i=t("../../utils"),o=t("../../math"),s=t("../../const"),a=t("../../renderers/webgl/utils/ObjectRenderer"),l=t("../../renderers/webgl/WebGLRenderer"),u=t("./WebGLGraphicsData"),h=t("earcut");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,l.registerPlugin("graphics",n),n.prototype.onContextChange=function(){},n.prototype.destroy=function(){a.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},n.prototype.render=function(t){var e,r=this.renderer,n=r.gl,o=r.shaderManager.plugins.primitiveShader;(t.dirty||!t._webGL[n.id])&&this.updateGraphics(t);var s=t._webGL[n.id];r.blendModeManager.setBlendMode(t.blendMode);for(var a=0,l=s.data.length;l>a;a++)e=s.data[a],1===s.data[a].mode?(r.stencilManager.pushStencil(t,e),n.uniform1f(r.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilManager.popStencil(t,e)):(o=r.shaderManager.primitiveShader,r.shaderManager.setShader(o),n.uniformMatrix3fv(o.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(o.uniforms.projectionMatrix._location,!1,r.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(o.uniforms.tint._location,i.hex2rgb(t.tint)),n.uniform1f(o.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(o.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(o.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0)),r.drawCount++},n.prototype.updateGraphics=function(t){var e,r,n=this.renderer.gl,i=t._webGL[n.id];if(i||(i=t._webGL[n.id]={lastIndex:0,data:[],gl:n}),t.dirty=!1,t.clearDirty){for(t.clearDirty=!1,e=0;e<i.data.length;e++){var o=i.data[e];o.reset(),this.graphicsDataPool.push(o)}i.data=[],i.lastIndex=0}for(e=i.lastIndex;e<t.graphicsData.length;e++){var a=t.graphicsData[e];if(a.type===s.SHAPES.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<2*this.maximumSimplePolySize){r=this.switchMode(i,0);var l=this.buildPoly(a,r);l||(r=this.switchMode(i,1),this.buildComplexPoly(a,r))}else r=this.switchMode(i,1),this.buildComplexPoly(a,r);a.lineWidth>0&&(r=this.switchMode(i,0),this.buildLine(a,r))}else r=this.switchMode(i,0),a.type===s.SHAPES.RECT?this.buildRectangle(a,r):a.type===s.SHAPES.CIRC||a.type===s.SHAPES.ELIP?this.buildCircle(a,r):a.type===s.SHAPES.RREC&&this.buildRoundedRectangle(a,r);i.lastIndex++}for(e=0;e<i.data.length;e++)(r=i.data[e]).dirty&&r.upload()},n.prototype.switchMode=function(t,e){var r;return t.data.length?((r=t.data[t.data.length-1]).points.length>32e4||r.mode!==e||1===e)&&((r=this.graphicsDataPool.pop()||new u(t.gl)).mode=e,t.data.push(r)):((r=this.graphicsDataPool.pop()||new u(t.gl)).mode=e,t.data.push(r)),r.dirty=!0,r},n.prototype.buildRectangle=function(t,e){var r=t.shape,n=r.x,o=r.y,s=r.width,a=r.height;if(t.fill){var l=i.hex2rgb(t.fillColor),u=t.fillAlpha,h=l[0]*u,c=l[1]*u,p=l[2]*u,d=e.points,f=e.indices,g=d.length/6;d.push(n,o),d.push(h,c,p,u),d.push(n+s,o),d.push(h,c,p,u),d.push(n,o+a),d.push(h,c,p,u),d.push(n+s,o+a),d.push(h,c,p,u),f.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var v=t.points;t.points=[n,o,n+s,o,n+s,o+a,n,o+a,n,o],this.buildLine(t,e),t.points=v}},n.prototype.buildRoundedRectangle=function(t,e){var r=t.shape,n=r.x,o=r.y,s=r.width,a=r.height,l=r.radius,u=[];if(u.push(n,o+l),this.quadraticBezierCurve(n,o+a-l,n,o+a,n+l,o+a,u),this.quadraticBezierCurve(n+s-l,o+a,n+s,o+a,n+s,o+a-l,u),this.quadraticBezierCurve(n+s,o+l,n+s,o,n+s-l,o,u),this.quadraticBezierCurve(n+l,o,n,o,n,o+l+1e-10,u),t.fill){var c=i.hex2rgb(t.fillColor),p=t.fillAlpha,d=c[0]*p,f=c[1]*p,g=c[2]*p,v=e.points,m=e.indices,y=v.length/6,x=h(u,null,2),b=0;for(b=0;b<x.length;b+=3)m.push(x[b]+y),m.push(x[b]+y),m.push(x[b+1]+y),m.push(x[b+2]+y),m.push(x[b+2]+y);for(b=0;b<u.length;b++)v.push(u[b],u[++b],d,f,g,p)}if(t.lineWidth){var _=t.points;t.points=u,this.buildLine(t,e),t.points=_}},n.prototype.quadraticBezierCurve=function(t,e,r,n,i,o,s){function a(t,e,r){var n=e-t;return t+n*r}for(var l,u,h,c,p,d,f=s||[],g=0,v=0;20>=v;v++)l=a(t,r,g=v/20),u=a(e,n,g),h=a(r,i,g),c=a(n,o,g),p=a(l,h,g),d=a(u,c,g),f.push(p,d);return f},n.prototype.buildCircle=function(t,e){var r,n,o=t.shape,a=o.x,l=o.y;t.type===s.SHAPES.CIRC?(r=o.radius,n=o.radius):(r=o.width,n=o.height);var u=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(o.width+o.height)),h=2*Math.PI/u,c=0;if(t.fill){var p=i.hex2rgb(t.fillColor),d=t.fillAlpha,f=p[0]*d,g=p[1]*d,v=p[2]*d,m=e.points,y=e.indices,x=m.length/6;for(y.push(x),c=0;u+1>c;c++)m.push(a,l,f,g,v,d),m.push(a+Math.sin(h*c)*r,l+Math.cos(h*c)*n,f,g,v,d),y.push(x++,x++);y.push(x-1)}if(t.lineWidth){var b=t.points;for(t.points=[],c=0;u+1>c;c++)t.points.push(a+Math.sin(h*c)*r,l+Math.cos(h*c)*n);this.buildLine(t,e),t.points=b}},n.prototype.buildLine=function(t,e){var r=0,n=t.points;if(0!==n.length){var s=new o.Point(n[0],n[1]),a=new o.Point(n[n.length-2],n[n.length-1]);if(s.x===a.x&&s.y===a.y){(n=n.slice()).pop(),n.pop();var l=(a=new o.Point(n[n.length-2],n[n.length-1])).x+.5*(s.x-a.x),u=a.y+.5*(s.y-a.y);n.unshift(l,u),n.push(l,u)}var h,c,p,d,f,g,v,m,y,x,b,_,T,w,E,S,A,C,M,R,O,P,D=e.points,I=e.indices,L=n.length/2,F=n.length,B=D.length/6,k=t.lineWidth/2,N=i.hex2rgb(t.lineColor),$=t.lineAlpha,U=N[0]*$,j=N[1]*$,G=N[2]*$;for(p=n[0],d=n[1],f=n[2],g=n[3],y=-(d-g),x=p-f,P=Math.sqrt(y*y+x*x),y/=P,x/=P,y*=k,x*=k,D.push(p-y,d-x,U,j,G,$),D.push(p+y,d+x,U,j,G,$),r=1;L-1>r;r++)p=n[2*(r-1)],d=n[2*(r-1)+1],f=n[2*r],g=n[2*r+1],v=n[2*(r+1)],m=n[2*(r+1)+1],y=-(d-g),x=p-f,P=Math.sqrt(y*y+x*x),y/=P,x/=P,y*=k,x*=k,b=-(g-m),_=f-v,P=Math.sqrt(b*b+_*_),b/=P,_/=P,A=(-y+p)*(-x+g)-(-y+f)*(-x+d),R=(-(b*=k)+v)*(-(_*=k)+g)-(-b+f)*(-_+m),O=(E=-x+d-(-x+g))*(M=-b+f-(-b+v))-(C=-_+m-(-_+g))*(S=-y+f-(-y+p)),Math.abs(O)<.1?(O+=10.1,D.push(f-y,g-x,U,j,G,$),D.push(f+y,g+x,U,j,G,$)):((h=(S*R-M*A)/O)-f)*(h-f)+((c=(C*A-E*R)/O)-g)*(c-g)>19600?(T=y-b,w=x-_,P=Math.sqrt(T*T+w*w),T/=P,w/=P,T*=k,w*=k,D.push(f-T,g-w),D.push(U,j,G,$),D.push(f+T,g+w),D.push(U,j,G,$),D.push(f-T,g-w),D.push(U,j,G,$),F++):(D.push(h,c),D.push(U,j,G,$),D.push(f-(h-f),g-(c-g)),D.push(U,j,G,$));for(p=n[2*(L-2)],d=n[2*(L-2)+1],f=n[2*(L-1)],g=n[2*(L-1)+1],y=-(d-g),x=p-f,P=Math.sqrt(y*y+x*x),y/=P,x/=P,y*=k,x*=k,D.push(f-y,g-x),D.push(U,j,G,$),D.push(f+y,g+x),D.push(U,j,G,$),I.push(B),r=0;F>r;r++)I.push(B++);I.push(B-1)}},n.prototype.buildComplexPoly=function(t,e){var r=t.points.slice();if(!(r.length<6)){var n=e.indices;e.points=r,e.alpha=t.fillAlpha,e.color=i.hex2rgb(t.fillColor);for(var o,s,a=1/0,l=-1/0,u=1/0,h=-1/0,c=0;c<r.length;c+=2)o=r[c],s=r[c+1],a=a>o?o:a,l=o>l?o:l,u=u>s?s:u,h=s>h?s:h;r.push(a,u,l,u,l,h,a,h);var p=r.length/2;for(c=0;p>c;c++)n.push(c)}},n.prototype.buildPoly=function(t,e){var r=t.points;if(!(r.length<6)){var n=e.points,o=e.indices,s=r.length/2,a=i.hex2rgb(t.fillColor),l=t.fillAlpha,u=a[0]*l,c=a[1]*l,p=a[2]*l,d=h(r,null,2);if(!d)return!1;var f=n.length/6,g=0;for(g=0;g<d.length;g+=3)o.push(d[g]+f),o.push(d[g]+f),o.push(d[g+1]+f),o.push(d[g+2]+f),o.push(d[g+2]+f);for(g=0;s>g;g++)n.push(r[2*g],r[2*g+1],u,c,p,l);return!0}}},{"../../const":16,"../../math":26,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56,"../../utils":70,"./WebGLGraphicsData":22,earcut:9}],22:[function(t,e,r){function n(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}n.prototype.constructor=n,e.exports=n,n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndices,t.STATIC_DRAW),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],23:[function(t,e,r){var n=e.exports=Object.assign(t("./const"),t("./math"),{utils:t("./utils"),ticker:t("./ticker"),DisplayObject:t("./display/DisplayObject"),Container:t("./display/Container"),Sprite:t("./sprites/Sprite"),ParticleContainer:t("./particles/ParticleContainer"),SpriteRenderer:t("./sprites/webgl/SpriteRenderer"),ParticleRenderer:t("./particles/webgl/ParticleRenderer"),Text:t("./text/Text"),Graphics:t("./graphics/Graphics"),GraphicsData:t("./graphics/GraphicsData"),GraphicsRenderer:t("./graphics/webgl/GraphicsRenderer"),Texture:t("./textures/Texture"),BaseTexture:t("./textures/BaseTexture"),RenderTexture:t("./textures/RenderTexture"),VideoBaseTexture:t("./textures/VideoBaseTexture"),TextureUvs:t("./textures/TextureUvs"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer"),CanvasGraphics:t("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:t("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:t("./renderers/webgl/WebGLRenderer"),WebGLManager:t("./renderers/webgl/managers/WebGLManager"),ShaderManager:t("./renderers/webgl/managers/ShaderManager"),Shader:t("./renderers/webgl/shaders/Shader"),ObjectRenderer:t("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:t("./renderers/webgl/utils/RenderTarget"),AbstractFilter:t("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:t("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:t("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(t,e,r,i){return t=t||800,e=e||600,!i&&n.utils.isWebGLSupported()?new n.WebGLRenderer(t,e,r):new n.CanvasRenderer(t,e,r)}})},{"./const":16,"./display/Container":17,"./display/DisplayObject":18,"./graphics/Graphics":19,"./graphics/GraphicsData":20,"./graphics/webgl/GraphicsRenderer":21,"./math":26,"./particles/ParticleContainer":32,"./particles/webgl/ParticleRenderer":34,"./renderers/canvas/CanvasRenderer":37,"./renderers/canvas/utils/CanvasBuffer":38,"./renderers/canvas/utils/CanvasGraphics":39,"./renderers/webgl/WebGLRenderer":42,"./renderers/webgl/filters/AbstractFilter":43,"./renderers/webgl/filters/FXAAFilter":44,"./renderers/webgl/filters/SpriteMaskFilter":45,"./renderers/webgl/managers/ShaderManager":49,"./renderers/webgl/managers/WebGLManager":51,"./renderers/webgl/shaders/Shader":54,"./renderers/webgl/utils/ObjectRenderer":56,"./renderers/webgl/utils/RenderTarget":58,"./sprites/Sprite":60,"./sprites/webgl/SpriteRenderer":61,"./text/Text":62,"./textures/BaseTexture":63,"./textures/RenderTexture":64,"./textures/Texture":65,"./textures/TextureUvs":66,"./textures/VideoBaseTexture":67,"./ticker":69,"./utils":70}],24:[function(t,e,r){function n(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var i=t("./Point");n.prototype.constructor=n,e.exports=n,n.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},n.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},n.prototype.apply=function(t,e){e=e||new i;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},n.prototype.applyInverse=function(t,e){e=e||new i;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,o=t.y;return e.x=this.d*r*n+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*o+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},n.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},n.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},n.prototype.setTransform=function(t,e,r,n,i,o,s,a,l){var u,h,c,p,d,f,g,v,m,y;return d=Math.sin(s),f=Math.cos(s),g=Math.cos(l),v=Math.sin(l),m=-Math.sin(a),y=Math.cos(a),u=f*i,h=d*i,c=-d*o,p=f*o,this.a=g*u+v*c,this.b=g*h+v*p,this.c=m*u+y*c,this.d=m*h+y*p,this.tx=t+(r*u+n*c),this.ty=e+(r*h+n*p),this},n.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},n.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var t=new n;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.IDENTITY=new n,n.TEMP_MATRIX=new n},{"./Point":25}],25:[function(t,e,r){function n(t,e){this.x=t||0,this.y=e||0}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(t){this.set(t.x,t.y)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],26:[function(t,e,r){e.exports={Point:t("./Point"),Matrix:t("./Matrix"),Circle:t("./shapes/Circle"),Ellipse:t("./shapes/Ellipse"),Polygon:t("./shapes/Polygon"),Rectangle:t("./shapes/Rectangle"),RoundedRectangle:t("./shapes/RoundedRectangle")}},{"./Matrix":24,"./Point":25,"./shapes/Circle":27,"./shapes/Ellipse":28,"./shapes/Polygon":29,"./shapes/Rectangle":30,"./shapes/RoundedRectangle":31}],27:[function(t,e,r){function n(t,e,r){this.x=t||0,this.y=e||0,this.radius=r||0,this.type=o.SHAPES.CIRC}var i=t("./Rectangle"),o=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.x-t,n=this.y-e,i=this.radius*this.radius;return i>=(r*=r)+(n*=n)},n.prototype.getBounds=function(){return new i(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":16,"./Rectangle":30}],28:[function(t,e,r){function n(t,e,r,n){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this.type=o.SHAPES.ELIP}var i=t("./Rectangle"),o=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return 1>=(r*=r)+(n*=n)},n.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":16,"./Rectangle":30}],29:[function(t,e,r){function n(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}if(e[0]instanceof i){for(var n=[],s=0,a=e.length;a>s;s++)n.push(e[s].x,e[s].y);e=n}this.closed=!0,this.points=e,this.type=o.SHAPES.POLY}var i=t("../Point"),o=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.points.slice())},n.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;n>i;o=i++){var s=this.points[2*i],a=this.points[2*i+1],l=this.points[2*o],u=this.points[2*o+1],h=a>e!=u>e&&(l-s)*(e-a)/(u-a)+s>t;h&&(r=!r)}return r}},{"../../const":16,"../Point":25}],30:[function(t,e,r){function n(t,e,r,n){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this.type=i.SHAPES.RECT}var i=t("../../const");n.prototype.constructor=n,e.exports=n,n.EMPTY=new n(0,0,0,0),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}},{"../../const":16}],31:[function(t,e,r){function n(t,e,r,n,o){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this.radius=o||20,this.type=i.SHAPES.RREC}var i=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}},{"../../const":16}],32:[function(t,e,r){function n(t,e,r){i.call(this),(r=r||15e3)>16384&&(r=16384),r>(t=t||15e3)&&(r=t),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=r,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=o.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(e)}var i=t("../display/Container"),o=t("../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},n.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},n.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,n=!0,i=0,o=0,s=0,a=0,l=t.blendModes[this.blendMode];l!==e.globalCompositeOperation&&(e.globalCompositeOperation=l),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var h=this.children[u];if(h.visible){var c=h.texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)n&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),n=!1),i=h.anchor.x*(-c.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-c.height*h.scale.y)+h.position.y+.5,s=c.width*h.scale.x,a=c.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var p=h.worldTransform;t.roundPixels?e.setTransform(p.a,p.b,p.c,p.d,0|p.tx,0|p.ty):e.setTransform(p.a,p.b,p.c,p.d,p.tx,p.ty),i=h.anchor.x*-c.width+.5,o=h.anchor.y*-c.height+.5,s=c.width,a=c.height}e.drawImage(h.texture.baseTexture.source,c.x,c.y,c.width,c.height,i,o,s,a)}}}},n.prototype.destroy=function(){if(i.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null}},{"../const":16,"../display/Container":17}],33:[function(t,e,r){function n(t,e,r,n){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;i++){var o=e[i];r[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}n.prototype.constructor=n,e.exports=n,n.prototype.initBuffers=function(){var t,e,r=this.gl,n=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)(e=this.dynamicProperties[t]).offset=n,n+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),r.bufferData(r.ARRAY_BUFFER,this.dynamicData,r.DYNAMIC_DRAW);var i=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)(e=this.staticProperties[t]).offset=i,i+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),r.bufferData(r.ARRAY_BUFFER,this.staticData,r.DYNAMIC_DRAW)},n.prototype.uploadDynamic=function(t,e,r){for(var n=this.gl,i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,e,r,this.dynamicData,this.dynamicStride,o.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.dynamicData)},n.prototype.uploadStatic=function(t,e,r){for(var n=this.gl,i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,e,r,this.staticData,this.staticStride,o.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.staticData)},n.prototype.bind=function(){var t,e,r=this.gl;for(r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],r.vertexAttribPointer(e.attribute,e.size,r.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],r.vertexAttribPointer(e.attribute,e.size,r.FLOAT,!1,4*this.staticStride,4*e.offset)},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],34:[function(t,e,r){function n(t){i.call(this,t),this.indices=new Uint16Array(98304);for(var e=0,r=0;98304>e;e+=6,r+=4)this.indices[e+0]=r+0,this.indices[e+1]=r+1,this.indices[e+2]=r+2,this.indices[e+3]=r+0,this.indices[e+4]=r+2,this.indices[e+5]=r+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new l.Matrix}var i=t("../../renderers/webgl/utils/ObjectRenderer"),o=t("../../renderers/webgl/WebGLRenderer"),s=t("./ParticleShader"),a=t("./ParticleBuffer"),l=t("../../math");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,o.registerPlugin("particle",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new s(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},n.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},n.prototype.render=function(t){var e=t.children,r=e.length,n=t._maxSize,i=t._batchSize;if(0!==r){r>n&&(r=n),t._buffers||(t._buffers=this.generateBuffers(t)),this.renderer.blendModeManager.setBlendMode(t.blendMode);var o=this.renderer.gl,s=t.worldTransform.copy(this.tempMatrix);s.prepend(this.renderer.currentRenderTarget.projectionMatrix),o.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,s.toArray(!0)),o.uniform1f(this.shader.uniforms.uAlpha._location,t.worldAlpha);var a=e[0]._texture.baseTexture;if(a._glTextures[o.id])o.bindTexture(o.TEXTURE_2D,a._glTextures[o.id]);else{if(!this.renderer.updateTexture(a))return;t._properties[0]&&t._properties[3]||(t._bufferToUpdate=0)}for(var l=0,u=0;r>l;l+=i,u+=1){var h=r-l;h>i&&(h=i);var c=t._buffers[u];c.uploadDynamic(e,l,h),t._bufferToUpdate===u&&(c.uploadStatic(e,l,h),t._bufferToUpdate=u+1),c.bind(this.shader),o.drawElements(o.TRIANGLES,6*h,o.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},n.prototype.generateBuffers=function(t){var e,r=this.renderer.gl,n=[],i=t._maxSize,o=t._batchSize,s=t._properties;for(e=0;i>e;e+=o)n.push(new a(r,this.properties,s,o));return n},n.prototype.uploadVertices=function(t,e,r,n,i,o){for(var s,a,l,u,h,c,p,d,f,g=0;r>g;g++)s=t[e+g],a=s._texture,u=s.scale.x,h=s.scale.y,a.trim?(l=a.trim,p=l.x-s.anchor.x*l.width,c=p+a.crop.width,f=l.y-s.anchor.y*l.height,d=f+a.crop.height):(c=a._frame.width*(1-s.anchor.x),p=a._frame.width*-s.anchor.x,d=a._frame.height*(1-s.anchor.y),f=a._frame.height*-s.anchor.y),n[o]=p*u,n[o+1]=f*h,n[o+i]=c*u,n[o+i+1]=f*h,n[o+2*i]=c*u,n[o+2*i+1]=d*h,n[o+3*i]=p*u,n[o+3*i+1]=d*h,o+=4*i},n.prototype.uploadPosition=function(t,e,r,n,i,o){for(var s=0;r>s;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+i]=a.x,n[o+i+1]=a.y,n[o+2*i]=a.x,n[o+2*i+1]=a.y,n[o+3*i]=a.x,n[o+3*i+1]=a.y,o+=4*i}},n.prototype.uploadRotation=function(t,e,r,n,i,o){for(var s=0;r>s;s++){var a=t[e+s].rotation;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},n.prototype.uploadUvs=function(t,e,r,n,i,o){for(var s=0;r>s;s++){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+i]=a.x1,n[o+i+1]=a.y1,n[o+2*i]=a.x2,n[o+2*i+1]=a.y2,n[o+3*i]=a.x3,n[o+3*i+1]=a.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},n.prototype.uploadAlpha=function(t,e,r,n,i,o){for(var s=0;r>s;s++){var a=t[e+s].alpha;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},n.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":26,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56,"./ParticleBuffer":33,"./ParticleShader":35}],35:[function(t,e,r){function n(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var i=t("../../renderers/webgl/shaders/TextureShader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n},{"../../renderers/webgl/shaders/TextureShader":55}],36:[function(t,e,r){function n(t,e,r,n){if(a.call(this),i.sayHello(t),n)for(var l in s.DEFAULT_RENDER_OPTIONS)void 0===n[l]&&(n[l]=s.DEFAULT_RENDER_OPTIONS[l]);else n=s.DEFAULT_RENDER_OPTIONS;this.type=s.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=r||600,this.view=n.view||document.createElement("canvas"),this.resolution=n.resolution,this.transparent=n.transparent,this.autoResize=n.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=n.preserveDrawingBuffer,this.clearBeforeRender=n.clearBeforeRender,this.roundPixels=n.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=n.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new o.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var i=t("../utils"),o=t("../math"),s=t("../const"),a=t("eventemitter3");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=i.hex2string(t),i.hex2rgb(t,this._backgroundColorRgb)}}}),n.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":16,"../math":26,"../utils":70,eventemitter3:10}],37:[function(t,e,r){function n(t,e,r){r=r||{},i.call(this,"Canvas",t,e,r),this.type=l.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new o,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new a.Matrix,worldAlpha:1},this.resize(t,e)}var i=t("../SystemRenderer"),o=t("./utils/CanvasMaskManager"),s=t("../../utils"),a=t("../../math"),l=t("../../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,s.pluginTarget.mixin(n),n.prototype.render=function(t){this.emit("prerender");var e=t.parent;this._lastObjectRendered=t,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[l.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context),this.emit("postrender")},n.prototype.destroy=function(t){this.destroyPlugins(),i.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},n.prototype.renderDisplayObject=function(t,e){var r=this.context;this.context=e,t.renderCanvas(this),this.context=r},n.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.smoothProperty&&(this.context[this.smoothProperty]=l.SCALE_MODES.DEFAULT===l.SCALE_MODES.LINEAR)},n.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},s.canUseNewCanvasBlendModes()?(this.blendModes[l.BLEND_MODES.NORMAL]="source-over",this.blendModes[l.BLEND_MODES.ADD]="lighter",this.blendModes[l.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[l.BLEND_MODES.SCREEN]="screen",this.blendModes[l.BLEND_MODES.OVERLAY]="overlay",this.blendModes[l.BLEND_MODES.DARKEN]="darken",this.blendModes[l.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[l.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[l.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[l.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[l.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[l.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[l.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[l.BLEND_MODES.HUE]="hue",this.blendModes[l.BLEND_MODES.SATURATION]="saturate",this.blendModes[l.BLEND_MODES.COLOR]="color",this.blendModes[l.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[l.BLEND_MODES.NORMAL]="source-over",this.blendModes[l.BLEND_MODES.ADD]="lighter",this.blendModes[l.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[l.BLEND_MODES.SCREEN]="source-over",this.blendModes[l.BLEND_MODES.OVERLAY]="source-over",this.blendModes[l.BLEND_MODES.DARKEN]="source-over",this.blendModes[l.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[l.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[l.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[l.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[l.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[l.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[l.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[l.BLEND_MODES.HUE]="source-over",this.blendModes[l.BLEND_MODES.SATURATION]="source-over",this.blendModes[l.BLEND_MODES.COLOR]="source-over",this.blendModes[l.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":16,"../../math":26,"../../utils":70,"../SystemRenderer":36,"./utils/CanvasMaskManager":40}],38:[function(t,e,r){function n(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},n.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],39:[function(t,e,r){var n=t("../../../const"),i={};e.exports=i,i.renderGraphics=function(t,e){var r=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],s=o.shape,a=o._fillTint,l=o._lineTint;if(e.lineWidth=o.lineWidth,o.type===n.SHAPES.POLY){e.beginPath();var u=s.points;e.moveTo(u[0],u[1]);for(var h=1;h<u.length/2;h++)e.lineTo(u[2*h],u[2*h+1]);s.closed&&e.lineTo(u[0],u[1]),u[0]===u[u.length-2]&&u[1]===u[u.length-1]&&e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.stroke())}else if(o.type===n.SHAPES.RECT)(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(s.x,s.y,s.width,s.height)),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.strokeRect(s.x,s.y,s.width,s.height));else if(o.type===n.SHAPES.CIRC)e.beginPath(),e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.stroke());else if(o.type===n.SHAPES.ELIP){var c=2*s.width,p=2*s.height,d=s.x-c/2,f=s.y-p/2;e.beginPath();var g=.5522848,v=c/2*g,m=p/2*g,y=d+c,x=f+p,b=d+c/2,_=f+p/2;e.moveTo(d,_),e.bezierCurveTo(d,_-m,b-v,f,b,f),e.bezierCurveTo(b+v,f,y,_-m,y,_),e.bezierCurveTo(y,_+m,b+v,x,b,x),e.bezierCurveTo(b-v,x,d,_+m,d,_),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.stroke())}else if(o.type===n.SHAPES.RREC){var T=s.x,w=s.y,E=s.width,S=s.height,A=s.radius,C=Math.min(E,S)/2|0;A=A>C?C:A,e.beginPath(),e.moveTo(T,w+A),e.lineTo(T,w+S-A),e.quadraticCurveTo(T,w+S,T+A,w+S),e.lineTo(T+E-A,w+S),e.quadraticCurveTo(T+E,w+S,T+E,w+S-A),e.lineTo(T+E,w+A),e.quadraticCurveTo(T+E,w,T+E-A,w),e.lineTo(T+A,w),e.quadraticCurveTo(T,w,T,w+A),e.closePath(),(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.stroke())}}},i.renderGraphicsMask=function(t,e){var r=t.graphicsData.length;if(0!==r){e.beginPath();for(var i=0;r>i;i++){var o=t.graphicsData[i],s=o.shape;if(o.type===n.SHAPES.POLY){var a=s.points;e.moveTo(a[0],a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(a[2*l],a[2*l+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===n.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===n.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===n.SHAPES.ELIP){var u=2*s.width,h=2*s.height,c=s.x-u/2,p=s.y-h/2,d=.5522848,f=u/2*d,g=h/2*d,v=c+u,m=p+h,y=c+u/2,x=p+h/2;e.moveTo(c,x),e.bezierCurveTo(c,x-g,y-f,p,y,p),e.bezierCurveTo(y+f,p,v,x-g,v,x),e.bezierCurveTo(v,x+g,y+f,m,y,m),e.bezierCurveTo(y-f,m,c,x+g,c,x),e.closePath()}else if(o.type===n.SHAPES.RREC){var b=s.x,_=s.y,T=s.width,w=s.height,E=s.radius,S=Math.min(T,w)/2|0;E=E>S?S:E,e.moveTo(b,_+E),e.lineTo(b,_+w-E),e.quadraticCurveTo(b,_+w,b+E,_+w),e.lineTo(b+T-E,_+w),e.quadraticCurveTo(b+T,_+w,b+T,_+w-E),e.lineTo(b+T,_+E),e.quadraticCurveTo(b+T,_,b+T-E,_),e.lineTo(b+E,_),e.quadraticCurveTo(b,_,b,_+E),e.closePath()}}}},i.updateGraphicsTint=function(t){if(16777215!==t.tint||t._prevTint!==t.tint){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,n=(255&t.tint)/255,i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255}}}},{"../../../const":16}],40:[function(t,e,r){function n(){}var i=t("./CanvasGraphics");n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t,e){e.context.save();var r=t.alpha,n=t.worldTransform,o=e.resolution;e.context.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),t.texture||(i.renderGraphicsMask(t,e.context),e.context.clip()),t.worldAlpha=r},n.prototype.popMask=function(t){t.context.restore()},n.prototype.destroy=function(){}},{"./CanvasGraphics":39}],41:[function(t,e,r){var n=t("../../../utils"),i={};e.exports=i,i.getTintedTexture=function(t,e){var r=t.texture,n="#"+("00000"+(0|(e=i.roundColor(e))).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[n])return r.tintCache[n];var o=i.canvas||document.createElement("canvas");if(i.tintMethod(r,e,o),i.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[n]=s}else r.tintCache[n]=o,i.canvas=null;return o},i.tintWithMultiply=function(t,e,r){var n=r.getContext("2d"),i=t.baseTexture.resolution,o=t.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,r.width=o.width,r.height=o.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,o.width,o.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithOverlay=function(t,e,r){var n=r.getContext("2d"),i=t.baseTexture.resolution,o=t.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,r.width=o.width,r.height=o.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,o.width,o.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithPerPixel=function(t,e,r){var i=r.getContext("2d"),o=t.baseTexture.resolution,s=t.crop.clone();s.x*=o,s.y*=o,s.width*=o,s.height*=o,r.width=s.width,r.height=s.height,i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var a=n.hex2rgb(e),l=a[0],u=a[1],h=a[2],c=i.getImageData(0,0,s.width,s.height),p=c.data,d=0;d<p.length;d+=4)p[d+0]*=l,p[d+1]*=u,p[d+2]*=h;i.putImageData(c,0,0)},i.roundColor=function(t){var e=i.cacheStepsPerColorChannel,r=n.hex2rgb(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),n.rgb2hex(r)},i.cacheStepsPerColorChannel=8,i.convertTintToImage=!1,i.canUseMultiply=n.canUseNewCanvasBlendModes(),i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel},{"../../../utils":70}],42:[function(t,e,r){function n(t,e,r){r=r||{},i.call(this,"WebGL",t,e,r),this.type=f.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!r.forceFXAA&&r.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new o(this),this.maskManager=new s(this),this.stencilManager=new a(this),this.filterManager=new l(this),this.blendModeManager=new u(this),this.currentRenderTarget=null,this.currentRenderer=new c(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var i=t("../SystemRenderer"),o=t("./managers/ShaderManager"),s=t("./managers/MaskManager"),a=t("./managers/StencilManager"),l=t("./managers/FilterManager"),u=t("./managers/BlendModeManager"),h=t("./utils/RenderTarget"),c=t("./utils/ObjectRenderer"),p=t("./filters/FXAAFilter"),d=t("../../utils"),f=t("../../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,d.pluginTarget.mixin(n),n.glContextId=0,n.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=n.glContextId++,t.id=this.glContextId,t.renderer=this},n.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new h(t,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",t),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!t.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new p])},n.prototype.render=function(t){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=t,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,t.filterArea=this.renderTarget.size,t.filters=this._FXAAFilter);var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var r=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?r.clearColor(0,0,0,0):r.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),r.clear(r.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget),this.emit("postrender")}},n.prototype.renderDisplayObject=function(t,e,r){this.setRenderTarget(e),r&&e.clear(),this.filterManager.setFilterStack(e.filterStack),t.renderWebGL(this),this.currentRenderer.flush()},n.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},n.prototype.setRenderTarget=function(t){this.currentRenderTarget!==t&&(this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack))},n.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.filterManager.resize(t,e),this.renderTarget.resize(t,e),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},n.prototype.updateTexture=function(t){if((t=t.baseTexture||t).hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},n.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded&&t._glTextures[this.gl.id]&&(this.gl.deleteTexture(t._glTextures[this.gl.id]),delete t._glTextures[this.gl.id],!e)){var r=this._managedTextures.indexOf(t);-1!==r&&d.removeItems(this._managedTextures,r,1)}},n.prototype.handleContextLost=function(t){t.preventDefault()},n.prototype.handleContextRestored=function(){this._initContext();for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.gl.id]&&delete e._glTextures[this.gl.id]}},n.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var e=0;e<this._managedTextures.length;++e){var r=this._managedTextures[e];this.destroyTexture(r,!0),r.off("update",this.updateTexture,this),r.off("dispose",this.destroyTexture,this)}i.prototype.destroy.call(this,t),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl=null},n.prototype._mapGlModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[f.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],this.blendModes[f.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SCREEN]=[t.SRC_ALPHA,t.ONE],this.blendModes[f.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[f.DRAW_MODES.POINTS]=t.POINTS,this.drawModes[f.DRAW_MODES.LINES]=t.LINES,this.drawModes[f.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,this.drawModes[f.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLES]=t.TRIANGLES,this.drawModes[f.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN)}},{"../../const":16,"../../utils":70,"../SystemRenderer":36,"./filters/FXAAFilter":44,"./managers/BlendModeManager":46,"./managers/FilterManager":47,"./managers/MaskManager":48,"./managers/ShaderManager":49,"./managers/StencilManager":50,"./utils/ObjectRenderer":56,"./utils/RenderTarget":58}],43:[function(t,e,r){function n(t,e,r){this.shaders=[],this.padding=0,this.uniforms=r||{},this.vertexSrc=t||i.defaultVertexSrc,this.fragmentSrc=e||i.defaultFragmentSrc}var i=t("../shaders/TextureShader");n.prototype.constructor=n,e.exports=n,n.prototype.getShader=function(t){var e=t.gl,r=this.shaders[e.id];return r||(r=new i(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=r),r},n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);t.filterManager.applyFilter(i,e,r,n)},n.prototype.syncUniform=function(t){for(var e=0,r=this.shaders.length;r>e;++e)this.shaders[e].syncUniform(t)}},{"../shaders/TextureShader":55}],44:[function(t,e,r){function n(){i.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var i=t("./AbstractFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager,i=this.getShader(t);n.applyFilter(i,e,r)}},{"./AbstractFilter":43}],45:[function(t,e,r){function n(t){var e=new o.Matrix;i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:t._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:e.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=e}var i=t("./AbstractFilter"),o=t("../../../math");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager;this.uniforms.mask.value=this.maskSprite._texture,n.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var i=this.getShader(t);n.applyFilter(i,e,r)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../../math":26,"./AbstractFilter":43}],46:[function(t,e,r){function n(t){i.call(this,t),this.currentBlendMode=99999}var i=t("./WebGLManager");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},{"./WebGLManager":51}],47:[function(t,e,r){function n(t){i.call(this,t),this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new l.Rectangle(0,0,t.width,t.height),this.currentFrame=null}var i=t("./WebGLManager"),o=t("../utils/RenderTarget"),s=t("../../../const"),a=t("../utils/Quad"),l=t("../../../math");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new a(t)},n.prototype.setFilterStack=function(t){this.filterStack=t},n.prototype.pushFilter=function(t,e){var r=t.filterArea?t.filterArea.clone():t.getBounds();r.x=0|r.x,r.y=0|r.y,r.width=0|r.width,r.height=0|r.height;var n=0|e[0].padding;if(r.x-=n,r.y-=n,r.width+=2*n,r.height+=2*n,this.renderer.currentRenderTarget.transform){var i=this.renderer.currentRenderTarget.transform;r.x+=i.tx,r.y+=i.ty,this.capFilterArea(r),r.x-=i.tx,r.y-=i.ty}else this.capFilterArea(r);if(r.width>0&&r.height>0){this.currentFrame=r;var o=this.getRenderTarget();this.renderer.setRenderTarget(o),o.clear(),this.filterStack.push({renderTarget:o,filter:e})}else this.filterStack.push({renderTarget:null,filter:e})},n.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],r=t.renderTarget;if(t.renderTarget){var n=e.renderTarget,i=this.renderer.gl;this.currentFrame=r.frame,this.quad.map(this.textureSize,r.frame),i.bindBuffer(i.ARRAY_BUFFER,this.quad.vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var o=t.filter;if(i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,i.FLOAT,!1,0,32),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,i.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(s.BLEND_MODES.NORMAL),1===o.length)o[0].uniforms.dimensions&&(o[0].uniforms.dimensions.value[0]=this.renderer.width,o[0].uniforms.dimensions.value[1]=this.renderer.height,o[0].uniforms.dimensions.value[2]=this.quad.vertices[0],o[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),o[0].applyFilter(this.renderer,r,n),this.returnRenderTarget(r);else{for(var a=r,l=this.getRenderTarget(!0),u=0;u<o.length-1;u++){var h=o[u];h.uniforms.dimensions&&(h.uniforms.dimensions.value[0]=this.renderer.width,h.uniforms.dimensions.value[1]=this.renderer.height,h.uniforms.dimensions.value[2]=this.quad.vertices[0],h.uniforms.dimensions.value[3]=this.quad.vertices[5]),h.applyFilter(this.renderer,a,l);var c=a;a=l,l=c}o[o.length-1].applyFilter(this.renderer,a,n),this.returnRenderTarget(a),this.returnRenderTarget(l)}return t.filter}},n.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new o(this.renderer.gl,this.textureSize.width,this.textureSize.height,s.SCALE_MODES.LINEAR,this.renderer.resolution*s.FILTER_RESOLUTION);return e.frame=this.currentFrame,t&&e.clear(!0),e},n.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},n.prototype.applyFilter=function(t,e,r,n){var i=this.renderer.gl;this.renderer.setRenderTarget(r),n&&r.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),this.renderer.drawCount++},n.prototype.calculateMappedMatrix=function(t,e,r){var n=e.worldTransform.copy(l.Matrix.TEMP_MATRIX),i=e._texture.baseTexture,o=r.identity(),s=this.textureSize.height/this.textureSize.width;o.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),o.scale(1,s);var a=this.textureSize.width/i.width,u=this.textureSize.height/i.height;return n.tx/=i.width*a,n.ty/=i.width*a,n.invert(),o.prepend(n),o.scale(1,1/s),o.scale(a,u),o.translate(e.anchor.x,e.anchor.y),o},n.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},n.prototype.resize=function(t,e){this.textureSize.width=t,this.textureSize.height=e;for(var r=0;r<this.texturePool.length;r++)this.texturePool[r].resize(t,e)},n.prototype.destroy=function(){this.quad.destroy(),i.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},{"../../../const":16,"../../../math":26,"../utils/Quad":57,"../utils/RenderTarget":58,"./WebGLManager":51}],48:[function(t,e,r){function n(t){i.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var i=t("./WebGLManager"),o=t("../filters/SpriteMaskFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},n.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},n.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool.pop();r||(r=[new o(e)]),r[0].maskSprite=e,this.renderer.filterManager.pushFilter(t,r)},n.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},n.prototype.pushStencilMask=function(t,e){this.renderer.stencilManager.pushMask(e)},n.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},{"../filters/SpriteMaskFilter":45,"./WebGLManager":51}],49:[function(t,e,r){function n(t){i.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var i=t("./WebGLManager"),o=t("../shaders/TextureShader"),s=t("../shaders/ComplexPrimitiveShader"),a=t("../shaders/PrimitiveShader"),l=t("../../../utils");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,l.pluginTarget.mixin(n),e.exports=n,n.prototype.onContextChange=function(){this.initPlugins();var t=this.renderer.gl;this.maxAttibs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.defaultShader=new o(this),this.primitiveShader=new a(this),this.complexPrimitiveShader=new s(this)},n.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var r in t)this.tempAttribState[t[r]]=!0;var n=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.attribState[e]?n.enableVertexAttribArray(e):n.disableVertexAttribArray(e))},n.prototype.setShader=function(t){return this._currentId!==t.uid&&(this._currentId=t.uid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},n.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),i.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":70,"../shaders/ComplexPrimitiveShader":52,"../shaders/PrimitiveShader":53,"../shaders/TextureShader":55,"./WebGLManager":51}],50:[function(t,e,r){function n(t){i.call(this,t),this.stencilMaskStack=null}var i=t("./WebGLManager"),o=t("../../../utils");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},n.prototype.pushStencil=function(t,e){this.renderer.currentRenderTarget.attachStencilBuffer();var r=this.renderer.gl,n=this.stencilMaskStack;this.bindGraphics(t,e),0===n.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),n.reverse=!0,n.count=0),n.stencilStack.push(e);var i=n.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===e.mode?(r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),n.reverse?(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),n.reverse?r.stencilFunc(r.EQUAL,255-(i+1),255):r.stencilFunc(r.EQUAL,i+1,255),n.reverse=!n.reverse):(n.reverse?(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),n.reverse?r.stencilFunc(r.EQUAL,i+1,255):r.stencilFunc(r.EQUAL,255-(i+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),n.count++},n.prototype.bindGraphics=function(t,e){var r,n=this.renderer.gl;1===e.mode?(r=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(r),n.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(r.uniforms.tint._location,o.hex2rgb(t.tint)),n.uniform3fv(r.uniforms.color._location,e.color),n.uniform1f(r.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(r.attributes.aVertexPosition,2,n.FLOAT,!1,8,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(r=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(r),n.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(r.uniforms.tint._location,o.hex2rgb(t.tint)),n.uniform1f(r.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(r.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(r.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},n.prototype.popStencil=function(t,e){var r=this.renderer.gl,n=this.stencilMaskStack;if(n.stencilStack.pop(),n.count--,0===n.stencilStack.length)r.disable(r.STENCIL_TEST);else{var i=n.count;this.bindGraphics(t,e),r.colorMask(!1,!1,!1,!1),1===e.mode?(n.reverse=!n.reverse,n.reverse?(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,n.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)):(n.reverse?(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.renderer.drawCount++,n.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},n.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0])},n.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":70,"./WebGLManager":51}],51:[function(t,e,r){function n(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],52:[function(t,e,r){function n(t){i.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var i=t("./Shader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n},{"./Shader":54}],53:[function(t,e,r){function n(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var i=t("./Shader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n},{"./Shader":54}],54:[function(t,e,r){function n(t,e,r,n,o){if(!e||!r)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=i.uid(),this.gl=t.renderer.gl,this.shaderManager=t,this.program=null,this.uniforms=n||{},this.attributes=o||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=r,this.init()}var i=t("../../../utils");n.prototype.constructor=n,e.exports=n,n.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},n.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},n.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},n.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),r=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),n=t.createProgram();return t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(n,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(n)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(n)),t.deleteProgram(n),n=null),t.deleteShader(e),t.deleteShader(r),this.program=n},n.prototype.syncUniform=function(t){var e,r,n=t._location,o=t.value,s=this.gl;switch(t.type){case"b":case"bool":case"boolean":s.uniform1i(n,o?1:0);break;case"i":case"1i":s.uniform1i(n,o);break;case"f":case"1f":s.uniform1f(n,o);break;case"2f":s.uniform2f(n,o[0],o[1]);break;case"3f":s.uniform3f(n,o[0],o[1],o[2]);break;case"4f":s.uniform4f(n,o[0],o[1],o[2],o[3]);break;case"v2":s.uniform2f(n,o.x,o.y);break;case"v3":s.uniform3f(n,o.x,o.y,o.z);break;case"v4":s.uniform4f(n,o.x,o.y,o.z,o.w);break;case"1iv":s.uniform1iv(n,o);break;case"2iv":s.uniform2iv(n,o);break;case"3iv":s.uniform3iv(n,o);break;case"4iv":s.uniform4iv(n,o);break;case"1fv":s.uniform1fv(n,o);break;case"2fv":s.uniform2fv(n,o);break;case"3fv":s.uniform3fv(n,o);break;case"4fv":s.uniform4fv(n,o);break;case"m2":case"mat2":case"Matrix2fv":s.uniformMatrix2fv(n,t.transpose,o);break;case"m3":case"mat3":case"Matrix3fv":s.uniformMatrix3fv(n,t.transpose,o);break;case"m4":case"mat4":case"Matrix4fv":s.uniformMatrix4fv(n,t.transpose,o);break;case"c":"number"==typeof o&&(o=i.hex2rgb(o)),s.uniform3f(n,o[0],o[1],o[2]);break;case"iv1":s.uniform1iv(n,o);break;case"iv":s.uniform3iv(n,o);break;case"fv1":s.uniform1fv(n,o);break;case"fv":s.uniform3fv(n,o);break;case"v2v":for(t._array||(t._array=new Float32Array(2*o.length)),e=0,r=o.length;r>e;++e)t._array[2*e]=o[e].x,t._array[2*e+1]=o[e].y;s.uniform2fv(n,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*o.length)),e=0,r=o.length;r>e;++e)t._array[3*e]=o[e].x,t._array[3*e+1]=o[e].y,t._array[3*e+2]=o[e].z;s.uniform3fv(n,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*o.length)),e=0,r=o.length;r>e;++e)t._array[4*e]=o[e].x,t._array[4*e+1]=o[e].y,t._array[4*e+2]=o[e].z,t._array[4*e+3]=o[e].w;s.uniform4fv(n,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;s.activeTexture(s["TEXTURE"+this.textureCount]);var a=t.value.baseTexture._glTextures[s.id];a||(this.initSampler2D(t),a=t.value.baseTexture._glTextures[s.id]),s.bindTexture(s.TEXTURE_2D,a),s.uniform1i(t._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+t.type)}},n.prototype.syncUniforms=function(){for(var t in this.textureCount=1,this.uniforms)this.syncUniform(this.uniforms[t])},n.prototype.initSampler2D=function(t){var e=this.gl,r=t.value.baseTexture;if(r.hasLoaded)if(t.textureData){var n=t.textureData;r._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,r._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,n.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n.magFilter?n.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n.wrapS?n.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n.wrapS?n.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n.wrapT?n.wrapT:e.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(r)},n.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},n.prototype._glCompile=function(t,e){var r=this.gl.createShader(t);return this.gl.shaderSource(r,e),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(console.log(this.gl.getShaderInfoLog(r)),null)}},{"../../../utils":70}],55:[function(t,e,r){function n(t,e,r,o,s){var a={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(o)for(var l in o)a[l]=o[l];var u={aVertexPosition:0,aTextureCoord:0,aColor:0};if(s)for(var h in s)u[h]=s[h];e=e||n.defaultVertexSrc,r=r||n.defaultFragmentSrc,i.call(this,t,e,r,a,u)}var i=t("./Shader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),n.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":54}],56:[function(t,e,r){function n(t){i.call(this,t)}var i=t("../managers/WebGLManager");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.flush=function(){},n.prototype.render=function(t){}},{"../managers/WebGLManager":51}],57:[function(t,e,r){function n(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}n.prototype.constructor=n,n.prototype.map=function(t,e){var r=0,n=0;this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.upload()},n.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},n.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},e.exports=n},{}],58:[function(t,e,r){var n=t("../../../math"),i=t("../../../utils"),o=t("../../../const"),s=t("./StencilMaskStack"),a=function(t,e,r,a,l,u){if(this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new n.Rectangle(0,0,1,1),this.resolution=l||o.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new s,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=a||o.SCALE_MODES.DEFAULT,this.root=u,!this.root){this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,a===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST);var h=i.isPowerOfTwo(e,r);h?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}this.resize(e,r)};a.prototype.constructor=a,e.exports=a,a.prototype.clear=function(t){var e=this.gl;t&&e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},a.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},a.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),this.transform&&this.projectionMatrix.append(this.transform),t.viewport(0,0,e.width*this.resolution,e.height*this.resolution)},a.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},a.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t*this.resolution,e*this.resolution,0,r.RGBA,r.UNSIGNED_BYTE,null),this.stencilBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencilBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t*this.resolution,e*this.resolution))}var n=this.frame||this.size;this.calculateProjection(n)}},a.prototype.destroy=function(){var t=this.gl;t.deleteRenderbuffer(this.stencilBuffer),t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":16,"../../../math":26,"../../../utils":70,"./StencilMaskStack":59}],59:[function(t,e,r){function n(){this.stencilStack=[],this.reverse=!0,this.count=0}n.prototype.constructor=n,e.exports=n},{}],60:[function(t,e,r){function n(t){s.call(this),this.anchor=new i.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=u.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||o.EMPTY}var i=t("../math"),o=t("../textures/Texture"),s=t("../display/Container"),a=t("../renderers/canvas/utils/CanvasTinter"),l=t("../utils"),u=t("../const"),h=new i.Point;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(t){var e=l.sign(this.scale.x)||1;this.scale.x=e*t/this.texture._frame.width,this._width=t}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(t){var e=l.sign(this.scale.y)||1;this.scale.y=e*t/this.texture._frame.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),n.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=l.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=l.sign(this.scale.y)*this._height/this.texture.frame.height)},n.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},n.prototype.getBounds=function(t){if(!this._currentBounds){var e,r,n,i,o=this._texture._frame.width,s=this._texture._frame.height,a=o*(1-this.anchor.x),l=o*-this.anchor.x,u=s*(1-this.anchor.y),h=s*-this.anchor.y,c=t||this.worldTransform,p=c.a,d=c.b,f=c.c,g=c.d,v=c.tx,m=c.ty,y=p*l+f*h+v,x=g*h+d*l+m,b=p*a+f*h+v,_=g*h+d*a+m,T=p*a+f*u+v,w=g*u+d*a+m,E=p*l+f*u+v,S=g*u+d*l+m;if(e=(e=(e=(e=y)>b?b:e)>T?T:e)>E?E:e,n=(n=(n=(n=x)>_?_:n)>w?w:n)>S?S:n,r=E>(r=T>(r=b>(r=y)?b:r)?T:r)?E:r,i=S>(i=w>(i=_>(i=x)?_:i)?w:i)?S:i,this.children.length){var A=this.containerGetBounds();a=A.x,l=A.x+A.width,u=A.y,h=A.y+A.height,e=a>e?e:a,n=u>n?n:u,r=r>l?r:l,i=i>h?i:h}var C=this._bounds;C.x=e,C.width=r-e,C.y=n,C.height=i-n,this._currentBounds=C}return this._currentBounds},n.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,h);var e,r=this._texture._frame.width,n=this._texture._frame.height,i=-r*this.anchor.x;return h.x>i&&h.x<i+r&&(e=-n*this.anchor.y,h.y>e&&h.y<e+n)},n.prototype._renderCanvas=function(t){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var e=t.blendModes[this.blendMode];if(e!==t.context.globalCompositeOperation&&(t.context.globalCompositeOperation=e),this.texture.valid){var r,n,i,o,s=this._texture,l=this.worldTransform;t.context.globalAlpha=this.worldAlpha;var h=s.baseTexture.scaleMode===u.SCALE_MODES.LINEAR;if(t.smoothProperty&&t.context[t.smoothProperty]!==h&&(t.context[t.smoothProperty]=h),s.rotate){i=s.crop.height,o=s.crop.width,r=s.trim?s.trim.y-this.anchor.y*s.trim.height:this.anchor.y*-s._frame.height,n=s.trim?s.trim.x-this.anchor.x*s.trim.width:this.anchor.x*-s._frame.width,r+=i,l.tx=n*l.a+r*l.c+l.tx,l.ty=n*l.b+r*l.d+l.ty;var c=l.a;l.a=-l.c,l.c=c,c=l.b,l.b=-l.d,l.d=c,r=0,n=0}else i=s.crop.width,o=s.crop.height,r=s.trim?s.trim.x-this.anchor.x*s.trim.width:this.anchor.x*-s._frame.width,n=s.trim?s.trim.y-this.anchor.y*s.trim.height:this.anchor.y*-s._frame.height;t.roundPixels?(t.context.setTransform(l.a,l.b,l.c,l.d,l.tx*t.resolution|0,l.ty*t.resolution|0),r|=0,n|=0):t.context.setTransform(l.a,l.b,l.c,l.d,l.tx*t.resolution,l.ty*t.resolution);var p=s.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,i*p,o*p,r*t.resolution,n*t.resolution,i*t.resolution,o*t.resolution)):t.context.drawImage(s.baseTexture.source,s.crop.x*p,s.crop.y*p,i*p,o*p,r*t.resolution,n*t.resolution,i*t.resolution,o*t.resolution)}}},n.prototype.destroy=function(t,e){s.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},n.fromFrame=function(t){var e=l.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new n(e)},n.fromImage=function(t,e,r){return new n(o.fromImage(t,e,r))}},{"../const":16,"../display/Container":17,"../math":26,"../renderers/canvas/utils/CanvasTinter":41,"../textures/Texture":65,"../utils":70}],61:[function(t,e,r){function n(t){i.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=s.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,r=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(r);for(var n=0,o=0;r>n;n+=6,o+=4)this.indices[n+0]=o+0,this.indices[n+1]=o+1,this.indices[n+2]=o+2,this.indices[n+3]=o+0,this.indices[n+4]=o+2,this.indices[n+5]=o+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var i=t("../../renderers/webgl/utils/ObjectRenderer"),o=t("../../renderers/webgl/WebGLRenderer"),s=t("../../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,o.registerPlugin("sprite",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},n.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&this.flush();var r=e._uvs;if(r){var n,i,o,s,a=t.anchor.x,l=t.anchor.y;if(e.trim&&void 0===t.tileScale){var u=e.trim;i=u.x-a*u.width,n=i+e.crop.width,s=u.y-l*u.height,o=s+e.crop.height}else n=e._frame.width*(1-a),i=e._frame.width*-a,o=e._frame.height*(1-l),s=e._frame.height*-l;var h=this.currentBatchSize*this.vertByteSize,c=t.worldTransform,p=c.a,d=c.b,f=c.c,g=c.d,v=c.tx,m=c.ty,y=this.colors,x=this.positions;if(this.renderer.roundPixels){var b=this.renderer.resolution;x[h]=((p*i+f*s+v)*b|0)/b,x[h+1]=((g*s+d*i+m)*b|0)/b,x[h+5]=((p*n+f*s+v)*b|0)/b,x[h+6]=((g*s+d*n+m)*b|0)/b,x[h+10]=((p*n+f*o+v)*b|0)/b,x[h+11]=((g*o+d*n+m)*b|0)/b,x[h+15]=((p*i+f*o+v)*b|0)/b,x[h+16]=((g*o+d*i+m)*b|0)/b}else x[h]=p*i+f*s+v,x[h+1]=g*s+d*i+m,x[h+5]=p*n+f*s+v,x[h+6]=g*s+d*n+m,x[h+10]=p*n+f*o+v,x[h+11]=g*o+d*n+m,x[h+15]=p*i+f*o+v,x[h+16]=g*o+d*i+m;x[h+2]=r.x0,x[h+3]=r.y0,x[h+7]=r.x1,x[h+8]=r.y1,x[h+12]=r.x2,x[h+13]=r.y2,x[h+17]=r.x3,x[h+18]=r.y3;var _=t.tint;y[h+4]=y[h+9]=y[h+14]=y[h+19]=(_>>16)+(65280&_)+((255&_)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},n.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var r=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,r)}for(var n,i,o,s,a=0,l=0,u=null,h=this.renderer.blendModeManager.currentBlendMode,c=null,p=!1,d=!1,f=0,g=this.currentBatchSize;g>f;f++)s=this.sprites[f],n=s._texture.baseTexture,i=s.blendMode,o=s.shader||this.shader,p=h!==i,d=c!==o,(u!==n||p||d)&&(this.renderBatch(u,a,l),l=f,a=0,u=n,p&&(h=i,this.renderer.blendModeManager.setBlendMode(h)),d&&((t=(c=o).shaders?c.shaders[e.id]:c)||(t=c.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),e.activeTexture(e.TEXTURE0))),a++;this.renderBatch(u,a,l),this.currentBatchSize=0}},n.prototype.renderBatch=function(t,e,r){if(0!==e){var n=this.renderer.gl;t._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,t._glTextures[n.id]):this.renderer.updateTexture(t),n.drawElements(n.TRIANGLES,6*e,n.UNSIGNED_SHORT,6*r*2),this.renderer.drawCount++}},n.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16)},n.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":16,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56}],62:[function(t,e,r){function n(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||l.RESOLUTION,this._text=null,this._style=null;var n=o.fromCanvas(this.canvas);n.trim=new s.Rectangle,i.call(this,n),this.text=t,this.style=e}var i=t("../sprites/Sprite"),o=t("../textures/Texture"),s=t("../math"),a=t("../utils"),l=t("../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.fontPropertiesCache={},n.fontPropertiesCanvas=document.createElement("canvas"),n.fontPropertiesContext=n.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(n.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(t){this.scale.x=t/this._texture._frame.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(t){this.scale.y=t/this._texture._frame.height,this._height=t}},style:{get:function(){return this._style},set:function(t){"number"==typeof(t=t||{}).fill&&(t.fill=a.hex2string(t.fill)),"number"==typeof t.stroke&&(t.stroke=a.hex2string(t.stroke)),"number"==typeof t.dropShadowColor&&(t.dropShadowColor=a.hex2string(t.dropShadowColor)),t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowColor=t.dropShadowColor||"#000000",t.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/6,t.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:5,t.dropShadowBlur=void 0!==t.dropShadowBlur?t.dropShadowBlur:0,t.padding=t.padding||0,t.textBaseline=t.textBaseline||"alphabetic",t.lineJoin=t.lineJoin||"miter",t.miterLimit=t.miterLimit||10,this._style=t,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(){var t=this._style;this.context.font=t.font;for(var e=t.wordWrap?this.wordWrap(this._text):this._text,r=e.split(/(?:\r\n|\r|\n)/),n=new Array(r.length),i=0,o=this.determineFontProperties(t.font),s=0;s<r.length;s++){var a=this.context.measureText(r[s]).width;n[s]=a,i=Math.max(i,a)}var l=i+t.strokeThickness;t.dropShadow&&(l+=t.dropShadowDistance),this.canvas.width=(l+this.context.lineWidth)*this.resolution;var u,h,c=this.style.lineHeight||o.fontSize+t.strokeThickness,p=c*r.length;if(t.dropShadow&&(p+=t.dropShadowDistance),this.canvas.height=(p+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.strokeStyle=t.stroke,this.context.lineWidth=t.strokeThickness,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit,t.dropShadow){t.dropShadowBlur>0?(this.context.shadowColor=t.dropShadowColor,this.context.shadowBlur=t.dropShadowBlur):this.context.fillStyle=t.dropShadowColor;var d=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,f=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;for(s=0;s<r.length;s++)u=t.strokeThickness/2,h=t.strokeThickness/2+s*c+o.ascent,"right"===t.align?u+=i-n[s]:"center"===t.align&&(u+=(i-n[s])/2),t.fill&&this.context.fillText(r[s],u+d,h+f+this._style.padding)}for(this.context.fillStyle=t.fill,s=0;s<r.length;s++)u=t.strokeThickness/2,h=t.strokeThickness/2+s*c+o.ascent,"right"===t.align?u+=i-n[s]:"center"===t.align&&(u+=(i-n[s])/2),t.stroke&&t.strokeThickness&&this.context.strokeText(r[s],u,h+this._style.padding),t.fill&&this.context.fillText(r[s],u,h+this._style.padding);this.updateTexture()},n.prototype.updateTexture=function(){var t=this._texture;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-this._style.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},n.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),i.prototype.renderWebGL.call(this,t)},n.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),i.prototype._renderCanvas.call(this,t)},n.prototype.determineFontProperties=function(t){var e=n.fontPropertiesCache[t];if(!e){e={};var r=n.fontPropertiesCanvas,i=n.fontPropertiesContext;i.font=t;var o=Math.ceil(i.measureText("|MÉq").width),s=Math.ceil(i.measureText("M").width),a=2*s;s=1.4*s|0,r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|MÉq",0,s);var l,u,h=i.getImageData(0,0,o,a).data,c=h.length,p=4*o,d=0,f=!1;for(l=0;s>l;l++){for(u=0;p>u;u+=4)if(255!==h[d+u]){f=!0;break}if(f)break;d+=p}for(e.ascent=s-l,d=c-p,f=!1,l=a;l>s;l--){for(u=0;p>u;u+=4)if(255!==h[d+u]){f=!0;break}if(f)break;d-=p}e.descent=l-s,e.fontSize=e.ascent+e.descent,n.fontPropertiesCache[t]=e}return e},n.prototype.wordWrap=function(t){for(var e="",r=t.split("\n"),n=this._style.wordWrapWidth,i=0;i<r.length;i++){for(var o=n,s=r[i].split(" "),a=0;a<s.length;a++){var l=this.context.measureText(s[a]).width,u=l+this.context.measureText(" ").width;0===a||u>o?(a>0&&(e+="\n"),e+=s[a],o=n-l):(o-=u,e+=" "+s[a])}i<r.length-1&&(e+="\n")}return e},n.prototype.getBounds=function(t){return this.dirty&&this.updateText(),i.prototype.getBounds.call(this,t)},n.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t||t)}},{"../const":16,"../math":26,"../sprites/Sprite":60,"../textures/Texture":65,"../utils":70}],63:[function(t,e,r){function n(t,e,r){s.call(this),this.uid=i.uid(),this.resolution=r||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||o.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},t&&this.loadSource(t)}var i=t("../utils"),o=t("../const"),s=t("eventemitter3");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},n.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var r=this;t.onload=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),r.emit("loaded",r))},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},n.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},n.prototype.destroy=function(){this.imageUrl?(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},n.prototype.dispose=function(){this.emit("dispose",this)},n.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},n.fromImage=function(t,e,r){var o=i.BaseTextureCache[t];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!o){var s=new Image;e&&(s.crossOrigin=""),(o=new n(s,r)).imageUrl=t,s.src=t,i.BaseTextureCache[t]=o,o.resolution=i.getResolutionOfUrl(t)}return o},n.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+i.uid());var r=i.BaseTextureCache[t._pixiId];return r||(r=new n(t,e),i.BaseTextureCache[t._pixiId]=r),r}},{"../const":16,"../utils":70,eventemitter3:10}],64:[function(t,e,r){function n(t,e,r,n,c){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,r=r||100,c=c||h.RESOLUTION;var p=new i;if(p.width=e,p.height=r,p.resolution=c,p.scaleMode=n||h.SCALE_MODES.DEFAULT,p.hasLoaded=!0,o.call(this,p,new u.Rectangle(0,0,e,r)),this.width=e,this.height=r,this.resolution=c,this.render=null,this.renderer=t,this.renderer.type===h.RENDERER_TYPE.WEBGL){var d=this.renderer.gl;this.textureBuffer=new s(d,this.width,this.height,p.scaleMode,this.resolution),this.baseTexture._glTextures[d.id]=this.textureBuffer.texture,this.filterManager=new a(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,r),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new l(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var i=t("./BaseTexture"),o=t("./Texture"),s=t("../renderers/webgl/utils/RenderTarget"),a=t("../renderers/webgl/managers/FilterManager"),l=t("../renderers/canvas/utils/CanvasBuffer"),u=t("../math"),h=t("../const"),c=new u.Matrix;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.resize=function(t,e,r){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=this._frame.width=this.crop.width=t,this.height=this._frame.height=this.crop.height=e,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},n.prototype.clear=function(){this.valid&&(this.renderer.type===h.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.prototype.renderWebGL=function(t,e,r,n){if(this.valid){if(n=void 0===n||n,this.textureBuffer.transform=e,this.textureBuffer.activate(),t.worldAlpha=1,n){t.worldTransform.identity(),t.currentBounds=null;var i,o,s=t.children;for(i=0,o=s.length;o>i;++i)s[i].updateTransform()}var a=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(t,this.textureBuffer,r),this.renderer.filterManager=a}},n.prototype.renderCanvas=function(t,e,r,n){if(this.valid){n=!!n;var i=c;i.identity(),e&&i.append(e);var o=t.worldTransform;t.worldTransform=i,t.worldAlpha=1;var s,a,l=t.children;for(s=0,a=l.length;a>s;++s)l[s].updateTransform();r&&this.textureBuffer.clear();var u=this.textureBuffer.context,h=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,u),this.renderer.resolution=h,t.worldTransform===i&&(t.worldTransform=o)}},n.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},n.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},n.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.prototype.getCanvas=function(){if(this.renderer.type===h.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.size.width,r=this.textureBuffer.size.height,n=new Uint8Array(4*e*r);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,r,t.RGBA,t.UNSIGNED_BYTE,n),t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new l(e,r),o=i.context.getImageData(0,0,e,r);return o.data.set(n),i.context.putImageData(o,0,0),i.canvas}return this.textureBuffer.canvas},n.prototype.getPixels=function(){var t,e;if(this.renderer.type===h.RENDERER_TYPE.WEBGL){var r=this.renderer.gl;t=this.textureBuffer.size.width,e=this.textureBuffer.size.height;var n=new Uint8Array(4*t*e);return r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),r.readPixels(0,0,t,e,r.RGBA,r.UNSIGNED_BYTE,n),r.bindFramebuffer(r.FRAMEBUFFER,null),n}return t=this.textureBuffer.canvas.width,e=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,t,e).data},n.prototype.getPixel=function(t,e){if(this.renderer.type===h.RENDERER_TYPE.WEBGL){var r=this.renderer.gl,n=new Uint8Array(4);return r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),r.readPixels(t,e,1,1,r.RGBA,r.UNSIGNED_BYTE,n),r.bindFramebuffer(r.FRAMEBUFFER,null),n}return this.textureBuffer.canvas.getContext("2d").getImageData(t,e,1,1).data}},{"../const":16,"../math":26,"../renderers/canvas/utils/CanvasBuffer":38,"../renderers/webgl/managers/FilterManager":47,"../renderers/webgl/utils/RenderTarget":58,"./BaseTexture":63,"./Texture":65}],65:[function(t,e,r){function n(t,e,r,i,o){a.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new l.Rectangle(0,0,1,1)),t instanceof n&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||e,this.rotate=!!o,t.hasLoaded?(this.noFrame&&(e=new l.Rectangle(0,0,t.width,t.height),t.on("update",this.onBaseTextureUpdated,this)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this)}var i=t("./BaseTexture"),o=t("./VideoBaseTexture"),s=t("./TextureUvs"),a=t("eventemitter3"),l=t("../math"),u=t("../utils");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{frame:{get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,this.width=t.width,this.height=t.height,!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=t,this.valid&&this._updateUvs()}}}),n.prototype.update=function(){this.baseTexture.update()},n.prototype.onBaseTextureLoaded=function(t){this.noFrame?this.frame=new l.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.emit("update",this)},n.prototype.onBaseTextureUpdated=function(t){this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},n.prototype.destroy=function(t){this.baseTexture&&(t&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},n.prototype.clone=function(){return new n(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},n.prototype._updateUvs=function(){this._uvs||(this._uvs=new s),this._uvs.set(this.crop,this.baseTexture,this.rotate)},n.fromImage=function(t,e,r){var o=u.TextureCache[t];return o||(o=new n(i.fromImage(t,e,r)),u.TextureCache[t]=o),o},n.fromFrame=function(t){var e=u.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},n.fromCanvas=function(t,e){return new n(i.fromCanvas(t,e))},n.fromVideo=function(t,e){return"string"==typeof t?n.fromVideoUrl(t,e):new n(o.fromVideo(t,e))},n.fromVideoUrl=function(t,e){return new n(o.fromUrl(t,e))},n.addTextureToCache=function(t,e){u.TextureCache[e]=t},n.removeTextureFromCache=function(t){var e=u.TextureCache[t];return delete u.TextureCache[t],delete u.BaseTextureCache[t],e},n.EMPTY=new n(new i)},{"../math":26,"../utils":70,"./BaseTexture":63,"./TextureUvs":66,"./VideoBaseTexture":67,eventemitter3:10}],66:[function(t,e,r){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}e.exports=n,n.prototype.set=function(t,e,r){var n=e.width,i=e.height;r?(this.x0=(t.x+t.height)/n,this.y0=t.y/i,this.x1=(t.x+t.height)/n,this.y1=(t.y+t.width)/i,this.x2=t.x/n,this.y2=(t.y+t.width)/i,this.x3=t.x/n,this.y3=t.y/i):(this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i)}},{}],67:[function(t,e,r){function n(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),o.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function i(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=t,r.type=e,r}var o=t("./BaseTexture"),s=t("../utils");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},n.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},n.prototype._onPlayStop=function(){this.autoUpdate=!1},n.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},n.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete s.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),o.prototype.destroy.call(this)},n.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+s.uid());var r=s.BaseTextureCache[t._pixiId];return r||(r=new n(t,e),s.BaseTextureCache[t._pixiId]=r),r},n.fromUrl=function(t,e){var r=document.createElement("video");if(Array.isArray(t))for(var o=0;o<t.length;++o)r.appendChild(i(t[o].src||t[o],t[o].mime));else r.appendChild(i(t.src||t,t.mime));return r.load(),r.play(),n.fromVideo(r,e)},n.fromUrls=n.fromUrl},{"../utils":70,"./BaseTexture":63}],68:[function(t,e,r){function n(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(s,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new o,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var i=t("../const"),o=t("eventemitter3"),s="tick";Object.defineProperties(n.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,i.TARGET_FPMS);this._maxElapsedMS=1/e}}}),n.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(s,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(t,e){return this._emitter.on(s,t,e),this._startIfPossible(),this},n.prototype.addOnce=function(t,e){return this._emitter.once(s,t,e),this._startIfPossible(),this},n.prototype.remove=function(t,e){return this._emitter.off(s,t,e),this._emitter.listeners(s,!0)||this._cancelIfNeeded(),this},n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.update=function(t){var e;t=t||performance.now(),(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*i.TARGET_FPMS*this.speed,this._emitter.emit(s,this.deltaTime),this.lastTime=t},e.exports=n},{"../const":16,eventemitter3:10}],69:[function(t,e,r){var n=t("./Ticker"),i=new n;i.autoStart=!0,e.exports={shared:i,Ticker:n}},{"./Ticker":68}],70:[function(t,e,r){var n=t("../const"),i=e.exports={_uid:0,_saidHello:!1,EventEmitter:t("eventemitter3"),pluginTarget:t("./pluginTarget"),async:t("async"),uid:function(){return++i._uid},hex2rgb:function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",r=new Image;r.src=t+"AP804Oa6"+e;var n=new Image;n.src=t+"/wCKxvRF"+e;var i=document.createElement("canvas");i.width=6,i.height=1;var o=i.getContext("2d");o.globalCompositeOperation="multiply",o.drawImage(r,0,0),o.drawImage(n,2,0);var s=o.getImageData(2,0,1,1).data;return 255===s[0]&&0===s[1]&&0===s[2]},getNextPowerOfTwo:function(t){if(t>0&&0==(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0==(t&t-1)&&e>0&&0==(e&e-1)},getResolutionOfUrl:function(t){var e=n.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!i._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+n.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+n.VERSION+" - "+t+" - http://www.pixijs.com/");i._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!r||!r.getContextAttributes().stencil)}catch(t){return!1}},sign:function(t){return t?0>t?-1:1:0},removeItems:function(t,e,r){var n=t.length;if(!(e>=n||0===r)){for(var i=e,o=n-(r=e+r>n?n-e:r);o>i;++i)t[i]=t[i+r];t.length=o}},TextureCache:{},BaseTextureCache:{}}},{"../const":16,"./pluginTarget":71,async:1,eventemitter3:10}],71:[function(t,e,r){e.exports={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,r){t.__plugins[e]=r},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},{}],72:[function(t,e,r){var n=t("./core"),i=t("./mesh"),o=t("./extras"),s=t("./filters");n.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},n.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(n,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),i.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),i.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),o.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),o.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),o.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),n.utils.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),n.utils.TextureCache}},math:{get:function(){return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),n}}}),n.Sprite.prototype.setTexture=function(t){this.texture=t,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},o.BitmapText.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},n.Text.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},n.Text.prototype.setStyle=function(t){this.style=t,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},n.Texture.prototype.setFrame=function(t){this.frame=t,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(s,{AbstractFilter:{get:function(){return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),n.AbstractFilter}},FXAAFilter:{get:function(){return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),n.FXAAFilter}},SpriteMaskFilter:{get:function(){return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),n.SpriteMaskFilter}}}),n.utils.uuid=function(){return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),n.utils.uid()}},{"./core":23,"./extras":79,"./filters":96,"./mesh":121}],73:[function(t,e,r){function n(t,e){i.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var i=t("../core");n.prototype=Object.create(i.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{tint:{get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):n.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(){for(var t=n.fonts[this._font.name],e=new i.Point,r=null,o=[],s=0,a=0,l=[],u=0,h=this._font.size/t.size,c=-1,p=0,d=0;d<this.text.length;d++){var f=this.text.charCodeAt(d);if(c=/(\s)/.test(this.text.charAt(d))?d:c,/(?:\r\n|\r|\n)/.test(this.text.charAt(d)))l.push(s),a=Math.max(a,s),u++,e.x=0,e.y+=t.lineHeight,r=null;else if(-1!==c&&this.maxWidth>0&&e.x*h>this.maxWidth)i.utils.removeItems(o,c,d-c),d=c,c=-1,l.push(s),a=Math.max(a,s),u++,e.x=0,e.y+=t.lineHeight,r=null;else{var g=t.chars[f];g&&(r&&g.kerning[r]&&(e.x+=g.kerning[r]),o.push({texture:g.texture,line:u,charCode:f,position:new i.Point(e.x+g.xOffset,e.y+g.yOffset)}),s=e.x+(g.texture.width+g.xOffset),e.x+=g.xAdvance,p=Math.max(p,g.yOffset+g.texture.height),r=f)}}l.push(s),a=Math.max(a,s);var v=[];for(d=0;u>=d;d++){var m=0;"right"===this._font.align?m=a-l[d]:"center"===this._font.align&&(m=(a-l[d])/2),v.push(m)}var y=o.length,x=this.tint;for(d=0;y>d;d++){var b=this._glyphs[d];b?b.texture=o[d].texture:(b=new i.Sprite(o[d].texture),this._glyphs.push(b)),b.position.x=(o[d].position.x+v[o[d].line])*h,b.position.y=o[d].position.y*h,b.scale.x=b.scale.y=h,b.tint=x,b.parent||this.addChild(b)}for(d=y;d<this._glyphs.length;++d)this.removeChild(this._glyphs[d]);this.textWidth=a*h,this.textHeight=(e.y+t.lineHeight)*h,this.maxLineHeight=p*h},n.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},n.prototype.getLocalBounds=function(){return this.validate(),i.Container.prototype.getLocalBounds.call(this)},n.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},n.fonts={}},{"../core":23}],74:[function(t,e,r){function n(t){i.Sprite.call(this,t[0]instanceof i.Texture?t[0]:t[0].texture),this._textures=null,this._durations=null,this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var i=t("../core");n.prototype=Object.create(i.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){if(t[0]instanceof i.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},currentFrame:{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return 0>t&&(t+=this._textures.length),t}}}),n.prototype.stop=function(){this.playing&&(this.playing=!1,i.ticker.shared.remove(this.update,this))},n.prototype.play=function(){this.playing||(this.playing=!0,i.ticker.shared.add(this.update,this))},n.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t,this._texture=this._textures[this.currentFrame]},n.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},n.prototype.update=function(t){var e=this.animationSpeed*t;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;0>r;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},n.prototype.destroy=function(){this.stop(),i.Sprite.prototype.destroy.call(this)},n.fromFrames=function(t){for(var e=[],r=0;r<t.length;++r)e.push(new i.Texture.fromFrame(t[r]));return new n(e)},n.fromImages=function(t){for(var e=[],r=0;r<t.length;++r)e.push(new i.Texture.fromImage(t[r]));return new n(e)}},{"../core":23}],75:[function(t,e,r){function n(t,e,r){i.Sprite.call(this,t),this.tileScale=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this._width=e||100,this._height=r||100,this._uvs=new i.TextureUvs,this._canvasPattern=null,this.shader=new i.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var i=t("../core"),o=new i.Point,s=t("../core/renderers/canvas/utils/CanvasTinter");n.prototype=Object.create(i.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),n.prototype._onTextureUpdate=function(){},n.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){var r=e._uvs,n=e._frame.width,i=e._frame.height,o=e.baseTexture.width,s=e.baseTexture.height;e._uvs=this._uvs,e._frame.width=this.width,e._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/o,this.shader.uniforms.uPixelSize.value[1]=1/s,this.shader.uniforms.uFrame.value[0]=r.x0,this.shader.uniforms.uFrame.value[1]=r.y0,this.shader.uniforms.uFrame.value[2]=r.x1-r.x0,this.shader.uniforms.uFrame.value[3]=r.y2-r.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(n*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(i*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=o/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=s/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=r,e._frame.width=n,e._frame.height=i}},n.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,n=this.worldTransform,o=t.resolution,a=e.baseTexture,l=this.tilePosition.x/this.tileScale.x%e._frame.width,u=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var h=new i.CanvasBuffer(e._frame.width,e._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=s.getTintedTexture(this,this.tint)),h.context.drawImage(this.tintedTexture,0,0)):h.context.drawImage(a.source,-e._frame.x,-e._frame.y),this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),r.scale(this.tileScale.x,this.tileScale.y),r.translate(l+this.anchor.x*-this._width,u+this.anchor.y*-this._height);var c=t.blendModes[this.blendMode];c!==t.context.globalCompositeOperation&&(r.globalCompositeOperation=c),r.fillStyle=this._canvasPattern,r.fillRect(-l,-u,this._width/this.tileScale.x,this._height/this.tileScale.y)}},n.prototype.getBounds=function(){var t,e,r,n,i=this._width,o=this._height,s=i*(1-this.anchor.x),a=i*-this.anchor.x,l=o*(1-this.anchor.y),u=o*-this.anchor.y,h=this.worldTransform,c=h.a,p=h.b,d=h.c,f=h.d,g=h.tx,v=h.ty,m=c*a+d*u+g,y=f*u+p*a+v,x=c*s+d*u+g,b=f*u+p*s+v,_=c*s+d*l+g,T=f*l+p*s+v,w=c*a+d*l+g,E=f*l+p*a+v;t=(t=(t=(t=m)>x?x:t)>_?_:t)>w?w:t,r=(r=(r=(r=y)>b?b:r)>T?T:r)>E?E:r,e=w>(e=_>(e=x>(e=m)?x:e)?_:e)?w:e,n=E>(n=T>(n=b>(n=y)?b:n)?T:n)?E:n;var S=this._bounds;return S.x=t,S.width=e-t,S.y=r,S.height=n-r,this._currentBounds=S,S},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,o);var e,r=this._width,n=this._height,i=-r*this.anchor.x;return o.x>i&&o.x<i+r&&(e=-n*this.anchor.y,o.y>e&&o.y<e+n)},n.prototype.destroy=function(){i.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},n.fromFrame=function(t,e,r){var o=i.utils.TextureCache[t];if(!o)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new n(o,e,r)},n.fromImage=function(t,e,r,o,s){return new n(i.Texture.fromImage(t,o,s),e,r)}},{"../core":23,"../core/renderers/canvas/utils/CanvasTinter":41}],76:[function(t,e,r){var n=t("../core"),i=n.DisplayObject,o=new n.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._originalRenderWebGL=null,i.prototype._originalRenderCanvas=null,i.prototype._originalUpdateTransform=null,i.prototype._originalHitTest=null,i.prototype._originalDestroy=null,i.prototype._cachedSprite=null,Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),i.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cachedSprite.worldAlpha=this.worldAlpha,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this._cachedSprite))},i.prototype._initCachedDisplayObject=function(t){if(!this._cachedSprite){t.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;e.x-=r,e.y-=r,e.width+=2*r,e.height+=2*r}var i=t.currentRenderTarget,s=t.filterManager.filterStack,a=new n.RenderTexture(t,0|e.width,0|e.height),l=o;l.tx=-e.x,l.ty=-e.y,this.renderWebGL=this._originalRenderWebGL,a.render(this,l,!0,!0),t.setRenderTarget(i),t.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(a),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(t))},i.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cachedSprite){var e=this.getLocalBounds(),r=t.context,i=new n.RenderTexture(t,0|e.width,0|e.height),s=o;s.tx=-e.x,s.ty=-e.y,this.renderCanvas=this._originalRenderCanvas,i.render(this,s,!0),t.context=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},i.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":23}],77:[function(t,e,r){var n=t("../core");n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":23}],78:[function(t,e,r){var n=t("../core");n.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new n.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":23}],79:[function(t,e,r){t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition"),e.exports={MovieClip:t("./MovieClip"),TilingSprite:t("./TilingSprite"),BitmapText:t("./BitmapText")}},{"./BitmapText":73,"./MovieClip":74,"./TilingSprite":75,"./cacheAsBitmap":76,"./getChildByName":77,"./getGlobalPosition":78}],80:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":23}],81:[function(t,e,r){function n(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new s,this.defaultFilter=new i.AbstractFilter}var i=t("../../core"),o=t("../blur/BlurXFilter"),s=t("../blur/BlurYFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,r),this.blurXFilter.applyFilter(t,e,n),t.blendModeManager.setBlendMode(i.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,n,r),t.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":23,"../blur/BlurXFilter":84,"../blur/BlurYFilter":85}],82:[function(t,e,r){function n(t,e){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:t||0},dirY:{type:"1f",value:e||0}}),this.defaultFilter=new i.AbstractFilter,this.passes=1,this.dirX=t||0,this.dirY=e||0,this.strength=4}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(i,e,r,n);else{var o=t.filterManager.getRenderTarget(!0);t.filterManager.applyFilter(i,e,o,n);for(var s=0;s<this.passes-2;s++)t.filterManager.applyFilter(i,o,o,n);t.filterManager.applyFilter(i,o,r,n),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}},dirX:{get:function(){return this.dirX},set:function(t){this.uniforms.dirX.value=t}},dirY:{get:function(){return this.dirY},set:function(t){this.uniforms.dirY.value=t}}})},{"../../core":23}],83:[function(t,e,r){function n(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new s}var i=t("../../core"),o=t("./BlurXFilter"),s=t("./BlurYFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,n),this.blurYFilter.applyFilter(t,n,r),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":23,"./BlurXFilter":84,"./BlurYFilter":85}],84:[function(t,e,r){function n(){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(i,e,r,n);else{for(var o=t.filterManager.getRenderTarget(!0),s=e,a=o,l=0;l<this.passes-1;l++){t.filterManager.applyFilter(i,s,a,!0);var u=a;a=s,s=u}t.filterManager.applyFilter(i,s,r,n),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":23}],85:[function(t,e,r){function n(){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(i,e,r,n);else{for(var o=t.filterManager.getRenderTarget(!0),s=e,a=o,l=0;l<this.passes-1;l++){t.filterManager.applyFilter(i,s,a,!0);var u=a;a=s,s=u}t.filterManager.applyFilter(i,s,r,n),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":23}],86:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":23}],87:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._loadMatrix=function(t,e){var r=t;(e=!!e)&&(this._multiply(r,this.uniforms.m.value,t),r=this._colorMatrix(r)),this.uniforms.m.value=r},n.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19],t},n.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},n.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.grayscale=n.prototype.greyscale,n.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},n.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=.213,o=.715,s=.072,a=[i+r*(1-i)+n*-i,o+r*-o+n*-o,s+r*-s+n*(1-s),0,0,i+r*-i+.143*n,o+r*(1-o)+.14*n,s+r*-s+-.283*n,0,0,i+r*-i+-.787*n,o+r*-o+n*o,s+r*(1-s)+n*s,0,0,0,0,0,1,0];this._loadMatrix(a,e)},n.prototype.contrast=function(t,e){var r=(t||0)+1,n=-128*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.saturate=function(t,e){var r=2*(t||0)/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.desaturate=function(t){this.saturate(-1)},n.prototype.negative=function(t){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],t)},n.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},n.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},n.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},n.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},n.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},n.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},n.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},n.prototype.colorTone=function(t,e,r,n,i){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,l=((n=n||3375104)>>16&255)/255,u=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,l,u,h,e=e||.15,0,o-l,s-u,a-h,0,0];this._loadMatrix(c,i)},n.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},n.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(t){this.uniforms.m.value=t}}})},{"../../core":23}],88:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}})},{"../../core":23}],89:[function(t,e,r){function n(t,e,r){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"v2",value:{x:1/e,y:1/r}}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})},{"../../core":23}],90:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":23}],91:[function(t,e,r){function n(t,e){var r=new i.Matrix;t.renderable=!1,i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:r.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=t,this.maskMatrix=r,null==e&&(e=20),this.scale=new i.Point(e,e)}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager;n.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/e.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/e.frame.height);var i=this.getShader(t);n.applyFilter(i,e,r)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(t){this.uniforms.mapSampler.value=t}}})},{"../../core":23}],92:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":23}],93:[function(t,e,r){function n(){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r,n){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(i,e,r,n);else{for(var o=t.filterManager.getRenderTarget(!0),s=e,a=o,l=0;l<this.passes-1;l++){t.filterManager.applyFilter(i,s,a,n);var u=a;a=s,s=u}t.filterManager.applyFilter(i,s,r,n),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}}})},{"../../core":23}],94:[function(t,e,r){function n(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYTintFilter=new s,this.defaultFilter=new i.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=i.BLEND_MODES.MULTIPLY}var i=t("../../core"),o=t("../blur/BlurXFilter"),s=t("./BlurYTintFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,e,n),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,n,r),t.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,e,r),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return i.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=i.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},{"../../core":23,"../blur/BlurXFilter":84,"./BlurYTintFilter":93}],95:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})},{"../../core":23}],96:[function(t,e,r){e.exports={AsciiFilter:t("./ascii/AsciiFilter"),BloomFilter:t("./bloom/BloomFilter"),BlurFilter:t("./blur/BlurFilter"),BlurXFilter:t("./blur/BlurXFilter"),BlurYFilter:t("./blur/BlurYFilter"),BlurDirFilter:t("./blur/BlurDirFilter"),ColorMatrixFilter:t("./color/ColorMatrixFilter"),ColorStepFilter:t("./color/ColorStepFilter"),ConvolutionFilter:t("./convolution/ConvolutionFilter"),CrossHatchFilter:t("./crosshatch/CrossHatchFilter"),DisplacementFilter:t("./displacement/DisplacementFilter"),DotScreenFilter:t("./dot/DotScreenFilter"),GrayFilter:t("./gray/GrayFilter"),DropShadowFilter:t("./dropshadow/DropShadowFilter"),InvertFilter:t("./invert/InvertFilter"),NoiseFilter:t("./noise/NoiseFilter"),PixelateFilter:t("./pixelate/PixelateFilter"),RGBSplitFilter:t("./rgb/RGBSplitFilter"),ShockwaveFilter:t("./shockwave/ShockwaveFilter"),SepiaFilter:t("./sepia/SepiaFilter"),SmartBlurFilter:t("./blur/SmartBlurFilter"),TiltShiftFilter:t("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:t("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:t("./tiltshift/TiltShiftYFilter"),TwistFilter:t("./twist/TwistFilter")}},{"./ascii/AsciiFilter":80,"./bloom/BloomFilter":81,"./blur/BlurDirFilter":82,"./blur/BlurFilter":83,"./blur/BlurXFilter":84,"./blur/BlurYFilter":85,"./blur/SmartBlurFilter":86,"./color/ColorMatrixFilter":87,"./color/ColorStepFilter":88,"./convolution/ConvolutionFilter":89,"./crosshatch/CrossHatchFilter":90,"./displacement/DisplacementFilter":91,"./dot/DotScreenFilter":92,"./dropshadow/DropShadowFilter":94,"./gray/GrayFilter":95,"./invert/InvertFilter":97,"./noise/NoiseFilter":98,"./pixelate/PixelateFilter":99,"./rgb/RGBSplitFilter":100,"./sepia/SepiaFilter":101,"./shockwave/ShockwaveFilter":102,"./tiltshift/TiltShiftFilter":104,"./tiltshift/TiltShiftXFilter":105,"./tiltshift/TiltShiftYFilter":106,"./twist/TwistFilter":107}],97:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})},{"../../core":23}],98:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})},{"../../core":23}],99:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":23}],100:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})},{"../../core":23}],101:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})},{"../../core":23}],102:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})},{"../../core":23}],103:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(n.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})},{"../../core":23}],104:[function(t,e,r){function n(){i.AbstractFilter.call(this),this.tiltShiftXFilter=new o,this.tiltShiftYFilter=new s}var i=t("../../core"),o=t("./TiltShiftXFilter"),s=t("./TiltShiftYFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,r){var n=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,n),this.tiltShiftYFilter.applyFilter(t,n,r),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},{"../../core":23,"./TiltShiftXFilter":105,"./TiltShiftYFilter":106}],105:[function(t,e,r){function n(){i.call(this)}var i=t("./TiltShiftAxisFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/r,this.uniforms.delta.value.y=e/r}},{"./TiltShiftAxisFilter":103}],106:[function(t,e,r){function n(){i.call(this)}var i=t("./TiltShiftAxisFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/r,this.uniforms.delta.value.y=t/r}},{"./TiltShiftAxisFilter":103}],107:[function(t,e,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var i=t("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":23}],108:[function(t,r,n){(function(e){t("./polyfill");var n=r.exports=t("./core");n.extras=t("./extras"),n.filters=t("./filters"),n.interaction=t("./interaction"),n.loaders=t("./loaders"),n.mesh=t("./mesh"),n.accessibility=t("./accessibility"),n.loader=new n.loaders.Loader,Object.assign(n,t("./deprecation")),e.PIXI=n}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":15,"./core":23,"./deprecation":72,"./extras":79,"./filters":96,"./interaction":111,"./loaders":114,"./mesh":121,"./polyfill":126}],109:[function(t,e,r){function n(){this.global=new i.Point,this.target=null,this.originalEvent=null}var i=t("../core");n.prototype.constructor=n,e.exports=n,n.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)}},{"../core":23}],110:[function(t,e,r){function n(t,e){e=e||{},this.renderer=t,this.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new o,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new i.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var i=t("../core"),o=t("./InteractionData");Object.assign(i.DisplayObject.prototype,t("./interactiveTarget")),n.prototype.constructor=n,e.exports=n,n.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},n.prototype.addEvents=function(){this.interactionDOMElement&&(i.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},n.prototype.removeEvents=function(){this.interactionDOMElement&&(i.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},n.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},n.prototype.dispatchEvent=function(t,e,r){r.stopped||(r.target=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},n.prototype.mapPositionToPoint=function(t,e,r){var n=this.interactionDOMElement.getBoundingClientRect();t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)/this.resolution,t.y=(r-n.top)*(this.interactionDOMElement.height/n.height)/this.resolution},n.prototype.processInteractive=function(t,e,r,n,i){if(!e||!e.visible)return!1;var o=!1,s=i=e.interactive||i;if(e.hitArea&&(s=!1),e.interactiveChildren)for(var a=e.children,l=a.length-1;l>=0;l--)this.processInteractive(t,a[l],r,n,s)&&(o=!0,s=!1,a[l].interactive&&(n=!1));return i&&(n&&!o&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),o=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(o=e.containsPoint(t))),e.interactive&&r(e,o)),o},n.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},n.prototype.processMouseDown=function(t,e){var r=this.mouse.originalEvent,n=2===r.button||3===r.which;e&&(t[n?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,n?"rightdown":"mousedown",this.eventData))},n.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},n.prototype.processMouseUp=function(t,e){var r=this.mouse.originalEvent,n=2===r.button||3===r.which,i=n?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,n?"rightup":"mouseup",this.eventData),t[i]&&(t[i]=!1,this.dispatchEvent(t,n?"rightclick":"click",this.eventData))):t[i]&&(t[i]=!1,this.dispatchEvent(t,n?"rightupoutside":"mouseupoutside",this.eventData))},n.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},n.prototype.processMouseMove=function(t,e){this.dispatchEvent(t,"mousemove",this.eventData),this.processMouseOverOut(t,e)},n.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},n.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},n.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,n=0;r>n;n++){var i=e[n],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(o)}},n.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,"touchstart",this.eventData))},n.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,n=0;r>n;n++){var i=e[n],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(o)}},n.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},n.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,n=0;r>n;n++){var i=e[n],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchMove,!0),this.returnTouchData(o)}},n.prototype.processTouchMove=function(t,e){e=e,this.dispatchEvent(t,"touchmove",this.eventData)},n.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new o),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},n.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},n.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},i.WebGLRenderer.registerPlugin("interaction",n),i.CanvasRenderer.registerPlugin("interaction",n)},{"../core":23,"./InteractionData":109,"./interactiveTarget":112}],111:[function(t,e,r){e.exports={InteractionData:t("./InteractionData"),InteractionManager:t("./InteractionManager"),interactiveTarget:t("./interactiveTarget")}},{"./InteractionData":109,"./InteractionManager":110,"./interactiveTarget":112}],112:[function(t,e,r){e.exports={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1}},{}],113:[function(t,e,r){function n(t,e){var r={},n=t.data.getElementsByTagName("info")[0],i=t.data.getElementsByTagName("common")[0];r.font=n.getAttribute("face"),r.size=parseInt(n.getAttribute("size"),10),r.lineHeight=parseInt(i.getAttribute("lineHeight"),10),r.chars={};for(var a=t.data.getElementsByTagName("char"),l=0;l<a.length;l++){var u=parseInt(a[l].getAttribute("id"),10),h=new o.Rectangle(parseInt(a[l].getAttribute("x"),10)+e.frame.x,parseInt(a[l].getAttribute("y"),10)+e.frame.y,parseInt(a[l].getAttribute("width"),10),parseInt(a[l].getAttribute("height"),10));r.chars[u]={xOffset:parseInt(a[l].getAttribute("xoffset"),10),yOffset:parseInt(a[l].getAttribute("yoffset"),10),xAdvance:parseInt(a[l].getAttribute("xadvance"),10),kerning:{},texture:new o.Texture(e.baseTexture,h)}}var c=t.data.getElementsByTagName("kerning");for(l=0;l<c.length;l++){var p=parseInt(c[l].getAttribute("first"),10),d=parseInt(c[l].getAttribute("second"),10),f=parseInt(c[l].getAttribute("amount"),10);r.chars[d].kerning[p]=f}t.bitmapFont=r,s.BitmapText.fonts[r.font]=r}var i=t("resource-loader").Resource,o=t("../core"),s=t("../extras"),a=t("path");e.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var r=a.dirname(t.url);"."===r&&(r=""),this.baseUrl&&r&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/"),r=r.replace(this.baseUrl,"")),r&&"/"!==r.charAt(r.length-1)&&(r+="/");var s=r+t.data.getElementsByTagName("page")[0].getAttribute("file");if(o.utils.TextureCache[s])n(t,o.utils.TextureCache[s]),e();else{var l={crossOrigin:t.crossOrigin,loadType:i.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};this.add(t.name+"_image",s,l,function(r){n(t,r.texture),e()})}}}},{"../core":23,"../extras":79,path:2,"resource-loader":133}],114:[function(t,e,r){e.exports={Loader:t("./loader"),bitmapFontParser:t("./bitmapFontParser"),spritesheetParser:t("./spritesheetParser"),textureParser:t("./textureParser"),Resource:t("resource-loader").Resource}},{"./bitmapFontParser":113,"./loader":115,"./spritesheetParser":116,"./textureParser":117,"resource-loader":133}],115:[function(t,e,r){function n(t,e){i.call(this,t,e);for(var r=0;r<n._pixiMiddleware.length;++r)this.use(n._pixiMiddleware[r]())}var i=t("resource-loader"),o=t("./textureParser"),s=t("./spritesheetParser"),a=t("./bitmapFontParser");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n._pixiMiddleware=[i.middleware.parsing.blob,o,s,a],n.addPixiMiddleware=function(t){n._pixiMiddleware.push(t)};var l=i.Resource;l.setExtensionXhrType("fnt",l.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":113,"./spritesheetParser":116,"./textureParser":117,"resource-loader":133}],116:[function(t,e,r){var n=t("resource-loader").Resource,i=t("path"),o=t("../core");e.exports=function(){return function(t,e){if(!t.data||!t.isJson||!t.data.frames)return e();var r={crossOrigin:t.crossOrigin,loadType:n.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata},s=i.dirname(t.url.replace(this.baseUrl,"")),a=o.utils.getResolutionOfUrl(t.url);this.add(t.name+"_image",s+"/"+t.data.meta.image,r,function(r){t.textures={};var n=t.data.frames;for(var i in n){var s=n[i].frame;if(s){var l=null,u=null;if(l=n[i].rotated?new o.Rectangle(s.x,s.y,s.h,s.w):new o.Rectangle(s.x,s.y,s.w,s.h),n[i].trimmed&&(u=new o.Rectangle(n[i].spriteSourceSize.x/a,n[i].spriteSourceSize.y/a,n[i].sourceSize.w/a,n[i].sourceSize.h/a)),n[i].rotated){var h=l.width;l.width=l.height,l.height=h}l.x/=a,l.y/=a,l.width/=a,l.height/=a,t.textures[i]=new o.Texture(r.texture.baseTexture,l,l.clone(),u,n[i].rotated),o.utils.TextureCache[i]=t.textures[i]}}e()})}}},{"../core":23,path:2,"resource-loader":133}],117:[function(t,e,r){var n=t("../core");e.exports=function(){return function(t,e){if(t.data&&t.isImage){var r=new n.BaseTexture(t.data,null,n.utils.getResolutionOfUrl(t.url));r.imageUrl=t.url,t.texture=new n.Texture(r),n.utils.BaseTextureCache[t.url]=r,n.utils.TextureCache[t.url]=t.texture}e()}}},{"../core":23}],118:[function(t,e,r){function n(t,e,r,o,s){i.Container.call(this),this._texture=null,this.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=o||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=i.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=s||n.DRAW_MODES.TRIANGLE_MESH,this.texture=t,this.shader=null}var i=t("../core"),o=new i.Point,s=new i.Polygon;n.prototype=Object.create(i.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),n.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},n.prototype._renderCanvas=function(t){var e=t.context,r=this.worldTransform;t.roundPixels?e.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===n.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},n.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,r=this.uvs,n=e.length/2,i=0;n-2>i;i++){var o=2*i;this._renderCanvasDrawTriangle(t,e,r,o,o+2,o+4)}},n.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,r=this.uvs,n=this.indices,i=n.length,o=0;i>o;o+=3){var s=2*n[o],a=2*n[o+1],l=2*n[o+2];this._renderCanvasDrawTriangle(t,e,r,s,a,l)}},n.prototype._renderCanvasDrawTriangle=function(t,e,r,n,i,o){var s=this._texture.baseTexture.source,a=this._texture.baseTexture.width,l=this._texture.baseTexture.height,u=e[n],h=e[i],c=e[o],p=e[n+1],d=e[i+1],f=e[o+1],g=r[n]*a,v=r[i]*a,m=r[o]*a,y=r[n+1]*l,x=r[i+1]*l,b=r[o+1]*l;if(this.canvasPadding>0){var _=this.canvasPadding/this.worldTransform.a,T=this.canvasPadding/this.worldTransform.d,w=(u+h+c)/3,E=(p+d+f)/3,S=u-w,A=p-E,C=Math.sqrt(S*S+A*A);u=w+S/C*(C+_),p=E+A/C*(C+T),S=h-w,A=d-E,C=Math.sqrt(S*S+A*A),h=w+S/C*(C+_),d=E+A/C*(C+T),S=c-w,A=f-E,C=Math.sqrt(S*S+A*A),c=w+S/C*(C+_),f=E+A/C*(C+T)}t.save(),t.beginPath(),t.moveTo(u,p),t.lineTo(h,d),t.lineTo(c,f),t.closePath(),t.clip();var M=g*x+y*m+v*b-x*m-y*v-g*b,R=u*x+y*c+h*b-x*c-y*h-u*b,O=g*h+u*m+v*c-h*m-u*v-g*c,P=g*x*c+y*h*m+u*v*b-u*x*m-y*v*c-g*h*b,D=p*x+y*f+d*b-x*f-y*d-p*b,I=g*d+p*m+v*f-d*m-p*v-g*f,L=g*x*f+y*d*m+p*v*b-p*x*m-y*v*f-g*d*b;t.transform(R/M,D/M,O/M,I/M,P/M,L/M),t.drawImage(s,0,0),t.restore()},n.prototype.renderMeshFlat=function(t){var e=this.context,r=t.vertices,n=r.length/2;e.beginPath();for(var i=1;n-2>i;i++){var o=2*i,s=r[o],a=r[o+2],l=r[o+4],u=r[o+1],h=r[o+3],c=r[o+5];e.moveTo(s,u),e.lineTo(a,h),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.prototype._onTextureUpdate=function(){this.updateFrame=!0},n.prototype.getBounds=function(t){if(!this._currentBounds){for(var e=t||this.worldTransform,r=e.a,n=e.b,o=e.c,s=e.d,a=e.tx,l=e.ty,u=-1/0,h=-1/0,c=1/0,p=1/0,d=this.vertices,f=0,g=d.length;g>f;f+=2){var v=d[f],m=d[f+1],y=r*v+o*m+a,x=s*m+n*v+l;c=c>y?y:c,p=p>x?x:p,u=y>u?y:u,h=x>h?x:h}if(c===-1/0||h===1/0)return i.Rectangle.EMPTY;var b=this._bounds;b.x=c,b.width=u-c,b.y=p,b.height=h-p,this._currentBounds=b}return this._currentBounds},n.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,o);var e,r,i=this.vertices,a=s.points;if(this.drawMode===n.DRAW_MODES.TRIANGLES){var l=this.indices;for(r=this.indices.length,e=0;r>e;e+=3){var u=2*l[e],h=2*l[e+1],c=2*l[e+2];if(a[0]=i[u],a[1]=i[u+1],a[2]=i[h],a[3]=i[h+1],a[4]=i[c],a[5]=i[c+1],s.contains(o.x,o.y))return!0}}else for(r=i.length,e=0;r>e;e+=6)if(a[0]=i[e],a[1]=i[e+1],a[2]=i[e+2],a[3]=i[e+3],a[4]=i[e+4],a[5]=i[e+5],s.contains(o.x,o.y))return!0;return!1},n.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":23}],119:[function(t,e,r){function n(t,e,r){i.call(this,t),this._ready=!0,this.segmentsX=e||10,this.segmentsY=r||10,this.drawMode=i.DRAW_MODES.TRIANGLES,this.refresh()}var i=t("./Mesh");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.refresh=function(){var t=this.segmentsX*this.segmentsY,e=[],r=[],n=[],i=this.texture,o=this.segmentsX-1,s=this.segmentsY-1,a=0,l=i.width/o,u=i.height/s;for(a=0;t>a;a++){var h=a%this.segmentsX,c=a/this.segmentsX|0;e.push(h*l,c*u),r.push(h/(this.segmentsX-1),c/(this.segmentsY-1))}var p=o*s;for(a=0;p>a;a++){var d=a%o,f=a/o|0,g=f*this.segmentsX+d,v=f*this.segmentsX+d+1,m=(f+1)*this.segmentsX+d,y=(f+1)*this.segmentsX+d+1;n.push(g,v,m),n.push(v,y,m)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(r),this.colors=new Float32Array([]),this.indices=new Uint16Array(n)},n.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":118}],120:[function(t,e,r){function n(t,e){i.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var i=t("./Mesh"),o=t("../core");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,r=this.indices,n=this.colors,i=this._texture._uvs,s=new o.Point(i.x0,i.y0),a=new o.Point(i.x2-i.x0,i.y2-i.y0);e[0]=0+s.x,e[1]=0+s.y,e[2]=0+s.x,e[3]=1*a.y+s.y,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var l,u,h=t.length,c=1;h>c;c++)t[c],u=c/(h-1),e[l=4*c]=u*a.x+s.x,e[l+1]=0+s.y,e[l+2]=u*a.x+s.x,e[l+3]=1*a.y+s.y,n[l=2*c]=1,n[l+1]=1,r[l=2*c]=l,r[l+1]=l+1;this.dirty=!0}},n.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},n.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,r,n,i,o,s=t[0],a=0,l=0,u=this.vertices,h=t.length,c=0;h>c;c++)r=t[c],n=4*c,e=c<t.length-1?t[c+1]:r,l=-(e.x-s.x),a=e.y-s.y,i=Math.sqrt(a*a+l*l),o=this._texture.height/2,a/=i,l/=i,a*=o,l*=o,u[n]=r.x+a,u[n+1]=r.y+l,u[n+2]=r.x-a,u[n+3]=r.y-l,s=r;this.containerUpdateTransform()}}},{"../core":23,"./Mesh":118}],121:[function(t,e,r){e.exports={Mesh:t("./Mesh"),Plane:t("./Plane"),Rope:t("./Rope"),MeshRenderer:t("./webgl/MeshRenderer"),MeshShader:t("./webgl/MeshShader")}},{"./Mesh":118,"./Plane":119,"./Rope":120,"./webgl/MeshRenderer":122,"./webgl/MeshShader":123}],122:[function(t,e,r){function n(t){i.ObjectRenderer.call(this,t),this.indices=new Uint16Array(15e3);for(var e=0,r=0;15e3>e;e+=6,r+=4)this.indices[e+0]=r+0,this.indices[e+1]=r+1,this.indices[e+2]=r+2,this.indices[e+3]=r+0,this.indices[e+4]=r+2,this.indices[e+5]=r+3;this.currentShader=null}var i=t("../../core"),o=t("../Mesh");n.prototype=Object.create(i.ObjectRenderer.prototype),n.prototype.constructor=n,e.exports=n,i.WebGLRenderer.registerPlugin("mesh",n),n.prototype.onContextChange=function(){},n.prototype.render=function(t){t._vertexBuffer||this._initWebGL(t);var e=this.renderer,r=e.gl,n=t._texture.baseTexture,i=t.shader,s=t.drawMode===o.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;e.blendModeManager.setBlendMode(t.blendMode),i=i?i.shaders[r.id]||i.getShader(e):e.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(i),i.uniforms.translationMatrix.value=t.worldTransform.toArray(!0),i.uniforms.projectionMatrix.value=e.currentRenderTarget.projectionMatrix.toArray(!0),i.uniforms.alpha.value=t.worldAlpha,i.syncUniforms(),t.dirty?(t.dirty=!1,r.bindBuffer(r.ARRAY_BUFFER,t._vertexBuffer),r.bufferData(r.ARRAY_BUFFER,t.vertices,r.STATIC_DRAW),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,t._uvBuffer),r.bufferData(r.ARRAY_BUFFER,t.uvs,r.STATIC_DRAW),r.vertexAttribPointer(i.attributes.aTextureCoord,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE0),n._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,n._glTextures[r.id]):this.renderer.updateTexture(n),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t._indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.indices,r.STATIC_DRAW)):(r.bindBuffer(r.ARRAY_BUFFER,t._vertexBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,t.vertices),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,t._uvBuffer),r.vertexAttribPointer(i.attributes.aTextureCoord,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE0),n._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,n._glTextures[r.id]):this.renderer.updateTexture(n),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t._indexBuffer),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,t.indices)),r.drawElements(s,t.indices.length,r.UNSIGNED_SHORT,0)},n.prototype._initWebGL=function(t){var e=this.renderer.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),t.colors&&(t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},n.prototype.flush=function(){},n.prototype.start=function(){this.currentShader=null},n.prototype.destroy=function(){i.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":23,"../Mesh":118}],123:[function(t,e,r){function n(t){i.Shader.call(this,t,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var i=t("../../core");n.prototype=Object.create(i.Shader.prototype),n.prototype.constructor=n,e.exports=n,i.ShaderManager.registerPlugin("meshShader",n)},{"../../core":23}],124:[function(t,e,r){Math.sign||(Math.sign=function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1})},{}],125:[function(t,e,r){Object.assign||(Object.assign=t("object-assign"))},{"object-assign":11}],126:[function(t,e,r){t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign")},{"./Math.sign":124,"./Object.assign":125,"./requestAnimationFrame":127}],127:[function(t,r,n){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var r=Date.now(),n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[n[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[i]+"CancelAnimationFrame"]||t[n[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+r-e;return 0>n&&(n=0),r=e,setTimeout(function(){r=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],128:[function(t,e,n){(function(t){!function(){function n(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(i,arguments)}}var i,o,s={};null!=(i=this)&&(o=i.async),s.noConflict=function(){return i.async=o,s};var a=Object.prototype.toString,l=Array.isArray||function(t){return"[object Array]"===a.call(t)},u=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r+=1)e(t[r],r,t)},h=function(t,e){if(t.map)return t.map(e);var r=[];return u(t,function(t,n,i){r.push(e(t,n,i))}),r},c=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};void 0!==t&&t.nextTick?(s.nextTick=t.nextTick,s.setImmediate=void 0!==r?function(t){r(t)}:s.nextTick):"function"==typeof r?(s.nextTick=function(t){r(t)},s.setImmediate=s.nextTick):(s.nextTick=function(t){setTimeout(t,0)},s.setImmediate=s.nextTick),s.each=function(t,e,r){function i(e){e?(r(e),r=function(){}):(o+=1)>=t.length&&r()}if(r=r||function(){},!t.length)return r();var o=0;u(t,function(t){e(t,n(i))})},s.forEach=s.each,s.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var n=0,i=function(){e(t[n],function(e){e?(r(e),r=function(){}):(n+=1)>=t.length?r():i()})};i()},s.forEachSeries=s.eachSeries,s.eachLimit=function(t,e,r,n){var i=p(e);i.apply(null,[t,r,n])},s.forEachLimit=s.eachLimit;var p=function(t){return function(e,r,n){if(n=n||function(){},!e.length||0>=t)return n();var i=0,o=0,s=0;!function a(){if(i>=e.length)return n();for(;t>s&&o<e.length;)s+=1,r(e[(o+=1)-1],function(t){t?(n(t),n=function(){}):(s-=1,(i+=1)>=e.length?n():a())})}()}},d=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.each].concat(e))}},f=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.eachSeries].concat(e))}},g=function(t,e,r,n){if(e=h(e,function(t,e){return{index:e,value:t}}),n){var i=[];t(e,function(t,e){r(t.value,function(r,n){i[t.index]=n,e(r)})},function(t){n(t,i)})}else t(e,function(t,e){r(t.value,function(t){e(t)})})};s.map=d(g),s.mapSeries=f(g),s.mapLimit=function(t,e,r,n){return v(e)(t,r,n)};var v=function(t){return function(t,e){return function(){var r=Array.prototype.slice.call(arguments);return e.apply(null,[p(t)].concat(r))}}(t,g)};s.reduce=function(t,e,r,n){s.eachSeries(t,function(t,n){r(e,t,function(t,r){e=r,n(t)})},function(t){n(t,e)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(t,e,r,n){var i=h(t,function(t){return t}).reverse();s.reduce(i,e,r,n)},s.foldr=s.reduceRight;var m=function(t,e,r,n){var i=[];e=h(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r&&i.push(t),e()})},function(t){n(h(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};s.filter=d(m),s.filterSeries=f(m),s.select=s.filter,s.selectSeries=s.filterSeries;var y=function(t,e,r,n){var i=[];e=h(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r||i.push(t),e()})},function(t){n(h(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};s.reject=d(y),s.rejectSeries=f(y);var x=function(t,e,r,n){t(e,function(t,e){r(t,function(r){r?(n(t),n=function(){}):e()})},function(t){n()})};s.detect=d(x),s.detectSeries=f(x),s.some=function(t,e,r){s.each(t,function(t,n){e(t,function(t){t&&(r(!0),r=function(){}),n()})},function(t){r(!1)})},s.any=s.some,s.every=function(t,e,r){s.each(t,function(t,n){e(t,function(t){t||(r(!1),r=function(){}),n()})},function(t){r(!0)})},s.all=s.every,s.sortBy=function(t,e,r){s.map(t,function(t,r){e(t,function(e,n){e?r(e):r(null,{value:t,criteria:n})})},function(t,e){if(t)return r(t);r(null,h(e.sort(function(t,e){var r=t.criteria,n=e.criteria;return n>r?-1:r>n?1:0}),function(t){return t.value}))})},s.auto=function(t,e){e=e||function(){};var r=c(t),n=r.length;if(!n)return e();var i={},o=[],a=function(t){o.unshift(t)},h=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},p=function(){n--,u(o.slice(0),function(t){t()})};a(function(){if(!n){var t=e;e=function(){},t(null,i)}}),u(r,function(r){var n=l(t[r])?t[r]:[t[r]],o=function(t){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),t){var o={};u(c(i),function(t){o[t]=i[t]}),o[r]=n,e(t,o),e=function(){}}else i[r]=n,s.setImmediate(p)},d=n.slice(0,Math.abs(n.length-1))||[],f=function(){return function(t,e,r){return t.reduce?t.reduce(e,r):(u(t,function(t,n,i){r=e(r,t,n,i)}),r)}(d,function(t,e){return t&&i.hasOwnProperty(e)},!0)&&!i.hasOwnProperty(r)};if(f())n[n.length-1](o,i);else{var g=function(){f()&&(h(g),n[n.length-1](o,i))};a(g)}})},s.retry=function(t,e,r){var n=[];"function"==typeof t&&(r=e,e=t,t=5),t=parseInt(t,10)||5;var i=function(i,o){for(var a=function(t,e){return function(r){t(function(t,n){r(!t||e,{err:t,result:n})},o)}};t;)n.push(a(e,!(t-=1)));s.series(n,function(t,e){e=e[e.length-1],(i||r)(e.err,e.result)})};return r?i():i},s.waterfall=function(t,e){if(e=e||function(){},!l(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var n=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();o?i.push(n(o)):i.push(e),s.setImmediate(function(){t.apply(null,i)})}}};n(s.iterator(t))()};var b=function(t,e,r){if(r=r||function(){},l(e))t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var n={};t.each(c(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(t){r(t,n)})}};s.parallel=function(t,e){b({map:s.map,each:s.each},t,e)},s.parallelLimit=function(t,e,r){b({map:v(e),each:p(e)},t,r)},s.series=function(t,e){if(e=e||function(){},l(t))s.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};s.eachSeries(c(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(t){e(t,r)})}},s.iterator=function(t){var e=function(r){var n=function(){return t.length&&t[r].apply(null,arguments),n.next()};return n.next=function(){return r<t.length-1?e(r+1):null},n};return e(0)},s.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var _=function(t,e,r,n){var i=[];t(e,function(t,e){r(t,function(t,r){i=i.concat(r||[]),e(t)})},function(t){n(t,i)})};s.concat=d(_),s.concatSeries=f(_),s.whilst=function(t,e,r){t()?e(function(n){return n?r(n):void s.whilst(t,e,r)}):r()},s.doWhilst=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?s.doWhilst(t,e,r):r()})},s.until=function(t,e,r){t()?r():e(function(n){return n?r(n):void s.until(t,e,r)})},s.doUntil=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?r():s.doUntil(t,e,r)})},s.queue=function(t,e){function r(t,e,r,n){return t.started||(t.started=!0),l(e)||(e=[e]),0==e.length?s.setImmediate(function(){t.drain&&t.drain()}):void u(e,function(e){var i={data:e,callback:"function"==typeof n?n:null};r?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)})}void 0===e&&(e=1);var i=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){r(o,t,!1,e)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(t,e){r(o,t,!0,e)},process:function(){if(!o.paused&&i<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),i+=1;var r=n(function(){i-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+i===0&&o.drain(),o.process()});t(e.data,r)}},length:function(){return o.tasks.length},running:function(){return i},idle:function(){return o.tasks.length+i===0},pause:function(){!0!==o.paused&&(o.paused=!0,o.process())},resume:function(){!1!==o.paused&&(o.paused=!1,o.process())}};return o},s.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function n(t,e,n,i){return t.started||(t.started=!0),l(e)||(e=[e]),0==e.length?s.setImmediate(function(){t.drain&&t.drain()}):void u(e,function(e){var o={data:e,priority:n,callback:"function"==typeof i?i:null};t.tasks.splice(function(t,e,r){for(var n=-1,i=t.length-1;i>n;){var o=n+(i-n+1>>>1);r(e,t[o])>=0?n=o:i=o-1}return n}(t.tasks,o,r)+1,0,o),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)})}var i=s.queue(t,e);return i.push=function(t,e,r){n(i,t,e,r)},delete i.unshift,i},s.cargo=function(t,e){var r=!1,n=[],i={tasks:n,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){l(t)||(t=[t]),u(t,function(t){n.push({data:t,callback:"function"==typeof r?r:null}),i.drained=!1,i.saturated&&n.length===e&&i.saturated()}),s.setImmediate(i.process)},process:function o(){if(!r){if(0===n.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var s="number"==typeof e?n.splice(0,e):n.splice(0,n.length),a=h(s,function(t){return t.data});i.empty&&i.empty(),r=!0,t(a,function(){r=!1;var t=arguments;u(s,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return n.length},running:function(){return r}};return i};var T=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&u(r,function(e){console[t](e)}))}]))}};s.log=T("log"),s.dir=T("dir"),s.memoize=function(t,e){var r={},n={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=e.apply(null,i);a in r?s.nextTick(function(){o.apply(null,r[a])}):a in n?n[a].push(o):(n[a]=[o],t.apply(null,i.concat([function(){r[a]=arguments;var t=n[a];delete n[a];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=t,i},s.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},s.times=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return s.map(n,e,r)},s.timesSeries=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return s.mapSeries(n,e,r)},s.seq=function(){var t=arguments;return function(){var e=this,r=Array.prototype.slice.call(arguments),n=r.pop();s.reduce(t,r,function(t,r,n){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))},function(t,r){n.apply(e,[t].concat(r))})}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var w=function(t,e){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return t(e,function(t,e){t.apply(r,n.concat([e]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};s.applyEach=d(w),s.applyEachSeries=f(w),s.forever=function(t,e){!function r(n){if(n){if(e)return e(n);throw n}t(r)}()},void 0!==e&&e.exports?e.exports=s:i.async=s}()}).call(this,t("_process"))},{_process:3}],129:[function(t,e,r){"use strict";function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(){}var o="function"!=typeof Object.create&&"~";i.prototype._events=void 0,i.prototype.listeners=function(t,e){var r=o?o+t:t,n=this._events&&this._events[r];if(e)return!!n;if(!n)return[];if(this._events[r].fn)return[this._events[r].fn];for(var i=0,s=this._events[r].length,a=new Array(s);s>i;i++)a[i]=this._events[r][i].fn;return a},i.prototype.emit=function(t,e,r,n,i,s){var a=o?o+t:t;if(!this._events||!this._events[a])return!1;var l,u,h=this._events[a],c=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,i),!0;case 6:return h.fn.call(h.context,e,r,n,i,s),!0}for(u=1,l=new Array(c-1);c>u;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var p,d=h.length;for(u=0;d>u;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),c){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,r);break;default:if(!l)for(p=1,l=new Array(c-1);c>p;p++)l[p-1]=arguments[p];h[u].fn.apply(h[u].context,l)}}return!0},i.prototype.on=function(t,e,r){var i=new n(e,r||this),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.once=function(t,e,r){var i=new n(e,r||this,!0),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.removeListener=function(t,e,r,n){var i=o?o+t:t;if(!this._events||!this._events[i])return this;var s=this._events[i],a=[];if(e)if(s.fn)(s.fn!==e||n&&!s.once||r&&s.context!==r)&&a.push(s);else for(var l=0,u=s.length;u>l;l++)(s[l].fn!==e||n&&!s[l].once||r&&s[l].context!==r)&&a.push(s[l]);return a.length?this._events[i]=1===a.length?a[0]:a:delete this._events[i],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[o?o+t:t]:this._events=o?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=o,e.exports=i},{}],130:[function(t,e,r){function n(t,e){a.call(this),e=e||10,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=i.queue(this._boundLoadResource,e),this.resources={}}var i=t("async"),o=t("url"),s=t("./Resource"),a=t("eventemitter3");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.add=n.prototype.enqueue=function(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._handleBaseUrl(e),this.resources[t]=new s(t,e,r),"function"==typeof n&&this.resources[t].once("afterMiddleware",n),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=100/this._buffer.length),this},n.prototype._handleBaseUrl=function(t){var e=o.parse(t);return e.protocol||0===e.pathname.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t},n.prototype.before=n.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},n.prototype.after=n.prototype.use=function(t){return this._afterMiddleware.push(t),this},n.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},n.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this);for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},n.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,this._runMiddleware(t,this._beforeMiddleware,function(){t.load(r._boundOnLoad)})},n.prototype._onComplete=function(){this.emit("complete",this,this.resources)},n.prototype._onLoad=function(t){this.progress+=this._progressChunk,this.emit("progress",this,t),this._runMiddleware(t,this._afterMiddleware,function(){t.emit("afterMiddleware",t),this._numToLoad--,0===this._numToLoad&&(this.progress=100,this._onComplete()),t.error?this.emit("error",t.error,this,t):this.emit("load",this,t)}),t._dequeue()},n.prototype._runMiddleware=function(t,e,r){var n=this;i.eachSeries(e,function(e,r){e.call(n,t,r)},r.bind(this,t))},n.LOAD_TYPE=s.LOAD_TYPE,n.XHR_READY_STATE=s.XHR_READY_STATE,n.XHR_RESPONSE_TYPE=s.XHR_RESPONSE_TYPE},{"./Resource":131,async:128,eventemitter3:129,url:8}],131:[function(t,e,r){function n(t,e,r){if(s.call(this),r=r||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function i(t){return t.toString().replace("object ","")}function o(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}var s=t("eventemitter3"),a=t("url"),l=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),u=null;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},n.prototype.load=function(t){switch(this.emit("start",this),t&&this.once("complete",t),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this._loadImage();break;case n.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case n.LOAD_TYPE.VIDEO:this._loadElement("video");break;case n.LOAD_TYPE.XHR:default:l&&this.crossOrigin?this._loadXdr():this._loadXhr()}},n.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},n.prototype._loadElement=function(t){if("audio"===t&&"undefined"!=typeof Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return this.error=new Error("Unsupported element "+t),void this.complete();if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},n.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=n.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},n.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},n.prototype._createSource=function(t,e,r){r||(r=t+"/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=r,n},n.prototype._onError=function(t){this.error=new Error("Failed to load element using "+t.target.nodeName),this.complete()},n.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},n.prototype._xhrOnError=function(){this.error=new Error(i(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},n.prototype._xhrOnAbort=function(){this.error=new Error(i(this.xhr)+" Request was aborted by the user."),this.complete()},n.prototype._xdrOnTimeout=function(){this.error=new Error(i(this.xhr)+" Request timed out."),this.complete()},n.prototype._xhrOnLoad=function(){var t=this.xhr,e=void 0!==t.status?t.status:200;if(200===e||204===e||0===e&&t.responseText.length>0)if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(t){this.error=new Error("Error trying to parse loaded json:",t)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(t.responseText,"text/xml")}else{var i=document.createElement("div");i.innerHTML=t.responseText,this.data=i}this.isXml=!0}catch(t){this.error=new Error("Error trying to parse loaded xml:",t)}else this.data=t.response||t.responseText;else this.error=new Error("["+t.status+"]"+t.statusText+":"+t.responseURL);this.complete()},n.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,u||(u=document.createElement("a")),u.href=t;var r=!(t=a.parse(u.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this._getExtension()]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this._getExtension()]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(){var t,e=this.url;if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var n=e.indexOf("?");-1!==n&&(e=e.substring(0,n)),t=e.substring(e.lastIndexOf(".")+1)}return t},n.prototype._getMimeFromXhrType=function(t){switch(t){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},n.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},n.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT},n.setExtensionLoadType=function(t,e){o(n._loadTypeMap,t,e)},n.setExtensionXhrType=function(t,e){o(n._xhrTypeMap,t,e)}},{eventemitter3:129,url:8}],132:[function(t,e,r){e.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,r="",n=new Array(4),i=0,o=0;i<t.length;){for(e=new Array(3),o=0;o<e.length;o++)i<t.length?e[o]=255&t.charCodeAt(i++):e[o]=0;switch(n[0]=e[0]>>2,n[1]=(3&e[0])<<4|e[1]>>4,n[2]=(15&e[1])<<2|e[2]>>6,n[3]=63&e[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(o=0;o<n.length;o++)r+=this._keyStr.charAt(n[o])}return r}}},{}],133:[function(t,e,r){e.exports=t("./Loader"),e.exports.Resource=t("./Resource"),e.exports.middleware={caching:{memory:t("./middlewares/caching/memory")},parsing:{blob:t("./middlewares/parsing/blob")}}},{"./Loader":130,"./Resource":131,"./middlewares/caching/memory":134,"./middlewares/parsing/blob":135}],134:[function(t,e,r){var n={};e.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):t.once("complete",function(){n[this.url]=this.data}),e()}}},{}],135:[function(t,e,r){var n=t("../../Resource"),i=t("../../b64");window.URL=window.URL||window.webkitURL,e.exports=function(){return function(t,e){if(!t.data)return e();if(t.xhr&&t.xhrType===n.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=URL.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=r,t.isImage=!0,t.data.onload=function(){URL.revokeObjectURL(r),t.data.onload=null,e()}}}else{var o=t.xhr.getResponseHeader("content-type");o&&0===o.indexOf("image")&&(t.data=new Image,t.data.src="data:"+o+";base64,"+i.encodeBinary(t.xhr.responseText),t.isImage=!0,t.data.onload=function(){t.data.onload=null,e()})}else e()}}},{"../../Resource":131,"../../b64":132}]},{},[108])(108)}).call(window)}).call(this,r("yLpj"),r("URgk").setImmediate)},NeU8:function(t,e,r){var n;
/*!
 * angular-translate - v2.18.1 - 2018-05-19
 * 
 * Copyright (c) 2018 The angular-translate team, Pascal Precht; Licensed MIT
 */void 0===(n=function(){return function(){function t(t){"use strict";var e=t.storageKey(),r=t.storage(),n=function(){var n=t.preferredLanguage();angular.isString(n)?t.use(n):r.put(e,t.use())};n.displayName="fallbackFromIncorrectStorageValue",r?r.get(e)?t.use(r.get(e)).catch(n):n():angular.isString(t.preferredLanguage())&&t.use(t.preferredLanguage())}function e(t,e,r,n){"use strict";var i,o,s,a,l,u,h,c,p,d,f,g,v,m,y,x,b={},_=[],T=t,w=[],E="translate-cloak",S=!1,A=!1,C=".",M=!1,R=!1,O=0,P=!0,D="default",I={default:function(t){return(t||"").split("-").join("_")},java:function(t){var e=(t||"").split("-").join("_"),r=e.split("_");return r.length>1?r[0].toLowerCase()+"_"+r[1].toUpperCase():e},bcp47:function(t){var e=(t||"").split("_").join("-"),r=e.split("-");switch(r.length){case 1:r[0]=r[0].toLowerCase();break;case 2:r[0]=r[0].toLowerCase(),4===r[1].length?r[1]=r[1].charAt(0).toUpperCase()+r[1].slice(1).toLowerCase():r[1]=r[1].toUpperCase();break;case 3:r[0]=r[0].toLowerCase(),r[1]=r[1].charAt(0).toUpperCase()+r[1].slice(1).toLowerCase(),r[2]=r[2].toUpperCase();break;default:return e}return r.join("-")},"iso639-1":function(t){var e=(t||"").split("_").join("-"),r=e.split("-");return r[0].toLowerCase()}},L=function(){if(angular.isFunction(n.getLocale))return n.getLocale();var t,r,i=e.$get().navigator,o=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(i.languages))for(t=0;t<i.languages.length;t++)if((r=i.languages[t])&&r.length)return r;for(t=0;t<o.length;t++)if((r=i[o[t]])&&r.length)return r;return null};L.displayName="angular-translate/service: getFirstBrowserLanguage";var F=function(){var t=L()||"";return I[D]&&(t=I[D](t)),t};F.displayName="angular-translate/service: getLocale";var B=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},k=function(){return this.toString().replace(/^\s+|\s+$/g,"")},N=function(t){return angular.isString(t)?t.toLowerCase():t},$=function(t){if(t){for(var e,r=[],n=N(t),i=0,s=_.length;i<s;i++)r.push(N(_[i]));if((i=B(r,n))>-1)return _[i];if(o)for(var a in o)if(o.hasOwnProperty(a)){var l=!1,u=Object.prototype.hasOwnProperty.call(o,a)&&N(a)===N(t);if("*"===a.slice(-1)&&(l=N(a.slice(0,-1))===N(t.slice(0,a.length-1))),(u||l)&&(e=o[a],B(r,N(e))>-1))return e}var h=t.split("_");return h.length>1&&B(r,N(h[0]))>-1?h[0]:void 0}},U=function(t,e){if(!t&&!e)return b;if(t&&!e){if(angular.isString(t))return b[t]}else angular.isObject(b[t])||(b[t]={}),angular.extend(b[t],j(e));return this};this.translations=U,this.cloakClassName=function(t){return t?(E=t,this):E},this.nestedObjectDelimeter=function(t){return t?(C=t,this):C};var j=function(t,e,r,n){var i,o,s,a;for(i in e||(e=[]),r||(r={}),t)Object.prototype.hasOwnProperty.call(t,i)&&(a=t[i],angular.isObject(a)?j(a,e.concat(i),r,i):(o=e.length?""+e.join(C)+C+i:i,e.length&&i===n&&(s=""+e.join(C),r[s]="@:"+o),r[o]=a));return r};j.displayName="flatObject",this.addInterpolation=function(t){return w.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return d=t,this},this.useSanitizeValueStrategy=function(t){return r.useStrategy(t),this},this.preferredLanguage=function(t){return t?(G(t),this):i};var G=function(t){return t&&(i=t),i};this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(v=t,this):v},this.translationNotFoundIndicatorRight=function(t){return t?(m=t,this):m},this.fallbackLanguage=function(t){return W(t),this};var W=function(t){return t?(angular.isString(t)?(a=!0,s=[t]):angular.isArray(t)&&(a=!1,s=t),angular.isString(i)&&B(s,i)<0&&s.push(i),this):a?s[0]:s};this.use=function(t){if(t){if(!b[t]&&!f)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return l=t,this}return l},this.resolveClientLocale=function(){return F()};var V=function(t){return t?(T=t,this):c?c+T:T};this.storageKey=V,this.useUrlLoader=function(t,e){return this.useLoader("$translateUrlLoader",angular.extend({url:t},e))},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return f=t,g=e||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return h=t,this},this.storagePrefix=function(t){return t?(c=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return p=t,this},this.usePostCompiling=function(t){return S=!!t,this},this.forceAsyncReload=function(t){return A=!!t,this},this.uniformLanguageTag=function(t){return t?angular.isString(t)&&(t={standard:t}):t={},D=t.standard,this},this.determinePreferredLanguage=function(t){var e=t&&angular.isFunction(t)?t():F();return i=_.length&&$(e)||e,this},this.registerAvailableLanguageKeys=function(t,e){return t?(_=t,e&&(o=e),this):_},this.useLoaderCache=function(t){return!1===t?y=void 0:!0===t?y=!0:void 0===t?y="$translationCache":t&&(y=t),this},this.directivePriority=function(t){return void 0===t?O:(O=t,this)},this.statefulFilter=function(t){return void 0===t?P:(P=t,this)},this.postProcess=function(t){return x=t||void 0,this},this.keepContent=function(t){return R=!!t,this},this.$get=["$log","$injector","$rootScope","$q",function(t,e,r,n){var o,c,D,I=e.get(d||"$translateDefaultInterpolation"),L=!1,N={},z={},Y=function(t,e,r,a,u,p){!l&&i&&(l=i);var d=u&&u!==l?$(u)||u:l;if(u&&ot(u),angular.isArray(t))return function(t){for(var i={},o=[],s=function(t){var o=n.defer(),s=function(e){i[t]=e,o.resolve([t,e])};return Y(t,e,r,a,u,p).then(s,s),o.promise},l=0,h=t.length;l<h;l++)o.push(s(t[l]));return n.all(o).then(function(){return i})}(t);var f=n.defer();t&&(t=k.apply(t));var g=function(){var t=z[d]||z[i];if(c=0,h&&!t){var e=o.get(T);if(t=z[e],s&&s.length){var r=B(s,e);c=0===r?1:0,B(s,i)<0&&s.push(i)}}return t}();if(g){var v=function(){u||(d=l),rt(t,e,r,a,d,p).then(f.resolve,f.reject)};v.displayName="promiseResolved",g.finally(v).catch(angular.noop)}else rt(t,e,r,a,d,p).then(f.resolve,f.reject);return f.promise},X=function(t){return v&&(t=[v,t].join(" ")),m&&(t=[t,m].join(" ")),t},H=function(t){l=t,h&&o.put(Y.storageKey(),l),r.$emit("$translateChangeSuccess",{language:t}),I.setLocale(l);var e=function(t,e){N[e].setLocale(l)};e.displayName="eachInterpolatorLocaleSetter",angular.forEach(N,e),r.$emit("$translateChangeEnd",{language:t})},q=function(t){if(!t)throw"No language key specified for loading.";var i=n.defer();r.$emit("$translateLoadingStart",{language:t}),L=!0;var o=y;"string"==typeof o&&(o=e.get(o));var s=angular.extend({},g,{key:t,$http:angular.extend({},{cache:o},g.$http)}),a=function(e){var n={};r.$emit("$translateLoadingSuccess",{language:t}),angular.isArray(e)?angular.forEach(e,function(t){angular.extend(n,j(t))}):angular.extend(n,j(e)),L=!1,i.resolve({key:t,table:n}),r.$emit("$translateLoadingEnd",{language:t})};a.displayName="onLoaderSuccess";var l=function(t){r.$emit("$translateLoadingError",{language:t}),i.reject(t),r.$emit("$translateLoadingEnd",{language:t})};return l.displayName="onLoaderError",e.get(f)(s).then(a,l),i.promise};if(h&&(!(o=e.get(h)).get||!o.put))throw new Error("Couldn't use storage '"+h+"', missing get() or put() method!");if(w.length){var Z=function(t){var r=e.get(t);r.setLocale(i||l),N[r.getInterpolationIdentifier()]=r};Z.displayName="interpolationFactoryAdder",angular.forEach(w,Z)}var Q=function(t,e,r,i,o){var s=n.defer(),a=function(n){if(Object.prototype.hasOwnProperty.call(n,e)&&null!==n[e]){i.setLocale(t);var a=n[e];if("@:"===a.substr(0,2))Q(t,a.substr(2),r,i,o).then(s.resolve,s.reject);else{var u=i.interpolate(n[e],r,"service",o,e);u=it(e,n[e],u,r,t),s.resolve(u)}i.setLocale(l)}else s.reject()};return a.displayName="fallbackTranslationResolver",function(t){var e=n.defer();if(Object.prototype.hasOwnProperty.call(b,t))e.resolve(b[t]);else if(z[t]){var r=function(t){U(t.key,t.table),e.resolve(t.table)};r.displayName="translationTableResolver",z[t].then(r,e.reject)}else e.reject();return e.promise}(t).then(a,s.reject),s.promise},J=function(t,e,r,n,i){var o,s=b[t];if(s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){if(n.setLocale(t),o=n.interpolate(s[e],r,"filter",i,e),o=it(e,s[e],o,r,t,i),!angular.isString(o)&&angular.isFunction(o.$$unwrapTrustedValue)){var a=o.$$unwrapTrustedValue();if("@:"===a.substr(0,2))return J(t,a.substr(2),r,n,i)}else if("@:"===o.substr(0,2))return J(t,o.substr(2),r,n,i);n.setLocale(l)}return o},K=function(t,r,n,i){return p?e.get(p)(t,l,r,n,i):t},tt=function(t,e,r,i,o,a){var l=n.defer();if(t<s.length){var u=s[t];Q(u,e,r,i,a).then(function(t){l.resolve(t)},function(){return tt(t+1,e,r,i,o,a).then(l.resolve,l.reject)})}else if(o)l.resolve(o);else{var h=K(e,r,o);p&&h?l.resolve(h):l.reject(X(e))}return l.promise},et=function(t,e,r,n,i){var o;if(t<s.length){var a=s[t];(o=J(a,e,r,n,i))||""===o||(o=et(t+1,e,r,n))}return o},rt=function(t,e,r,i,o,a){var l=n.defer(),u=o?b[o]:b,h=r?N[r]:I;if(u&&Object.prototype.hasOwnProperty.call(u,t)&&null!==u[t]){var d=u[t];if("@:"===d.substr(0,2))Y(d.substr(2),e,r,i,o,a).then(l.resolve,l.reject);else{var f=h.interpolate(d,e,"service",a,t);f=it(t,d,f,e,o),l.resolve(f)}}else{var g;p&&!L&&(g=K(t,e,i)),o&&s&&s.length?function(t,e,r,n,i){return tt(D>0?D:c,t,e,r,n,i)}(t,e,h,i,a).then(function(t){l.resolve(t)},function(t){l.reject(X(t))}):p&&!L&&g?i?l.resolve(i):l.resolve(g):i?l.resolve(i):l.reject(X(t))}return l.promise},nt=function(t,e,r,n,i){var o,a=n?b[n]:b,l=I;if(N&&Object.prototype.hasOwnProperty.call(N,r)&&(l=N[r]),a&&Object.prototype.hasOwnProperty.call(a,t)&&null!==a[t]){var u=a[t];"@:"===u.substr(0,2)?o=nt(u.substr(2),e,r,n,i):(o=l.interpolate(u,e,"filter",i,t),o=it(t,u,o,e,n,i))}else{var h;p&&!L&&(h=K(t,e,i)),n&&s&&s.length?(c=0,o=function(t,e,r,n){return et(D>0?D:c,t,e,r,n)}(t,e,l,i)):o=p&&!L&&h?h:X(t)}return o},it=function(t,r,n,i,o,s){var a=x;return a&&("string"==typeof a&&(a=e.get(a)),a)?a(t,r,n,i,o,s):n},ot=function(t){b[t]||!f||z[t]||(z[t]=q(t).then(function(t){return U(t.key,t.table),t}))};Y.preferredLanguage=function(t){return t&&G(t),i},Y.cloakClassName=function(){return E},Y.nestedObjectDelimeter=function(){return C},Y.fallbackLanguage=function(t){if(null!=t){if(W(t),f&&s&&s.length)for(var e=0,r=s.length;e<r;e++)z[s[e]]||(z[s[e]]=q(s[e]));Y.use(Y.use())}return a?s[0]:s},Y.useFallbackLanguage=function(t){if(null!=t)if(t){var e=B(s,t);e>-1&&(D=e)}else D=0},Y.proposedLanguage=function(){return u},Y.storage=function(){return o},Y.negotiateLocale=$,Y.use=function(t){if(!t)return l;var e=n.defer();e.promise.then(null,angular.noop),r.$emit("$translateChangeStart",{language:t});var i=$(t);return _.length>0&&!i?n.reject(t):(i&&(t=i),u=t,!A&&b[t]||!f||z[t]?z[t]?z[t].then(function(t){return u===t.key&&H(t.key),e.resolve(t.key),t},function(t){return!l&&s&&s.length>0&&s[0]!==t?Y.use(s[0]).then(e.resolve,e.reject):e.reject(t)}):(e.resolve(t),H(t)):(z[t]=q(t).then(function(r){return U(r.key,r.table),e.resolve(r.key),u===t&&H(r.key),r},function(t){return r.$emit("$translateChangeError",{language:t}),e.reject(t),r.$emit("$translateChangeEnd",{language:t}),n.reject(t)}),z[t].finally(function(){!function(t){u===t&&(u=void 0),z[t]=void 0}(t)}).catch(angular.noop)),e.promise)},Y.resolveClientLocale=function(){return F()},Y.storageKey=function(){return V()},Y.isPostCompilingEnabled=function(){return S},Y.isForceAsyncReloadEnabled=function(){return A},Y.isKeepContent=function(){return R},Y.refresh=function(t){if(!f)throw new Error("Couldn't refresh translation table, no loader registered!");r.$emit("$translateRefreshStart",{language:t});var e=n.defer(),i={};function o(t){var e=q(t);return z[t]=e,e.then(function(e){b[t]={},U(t,e.table),i[t]=!0},angular.noop),e}if(e.promise.then(function(){for(var t in b)b.hasOwnProperty(t)&&(t in i||delete b[t]);l&&H(l)},angular.noop).finally(function(){r.$emit("$translateRefreshEnd",{language:t})}),t)b[t]?o(t).then(e.resolve,e.reject):e.reject();else{var a=s&&s.slice()||[];l&&-1===a.indexOf(l)&&a.push(l),n.all(a.map(o)).then(e.resolve,e.reject)}return e.promise},Y.instant=function(t,e,r,n,o){var a=n&&n!==l?$(n)||n:l;if(null===t||angular.isUndefined(t))return t;if(n&&ot(n),angular.isArray(t)){for(var u={},h=0,c=t.length;h<c;h++)u[t[h]]=Y.instant(t[h],e,r,n,o);return u}if(angular.isString(t)&&t.length<1)return t;t&&(t=k.apply(t));var d,f,g=[];i&&g.push(i),a&&g.push(a),s&&s.length&&(g=g.concat(s));for(var y=0,x=g.length;y<x;y++){var _=g[y];if(b[_]&&void 0!==b[_][t]&&(d=nt(t,e,r,a,o)),void 0!==d)break}return d||""===d||(v||m?d=X(t):(d=I.interpolate(t,e,"filter",o),p&&!L&&(f=K(t,e,o)),p&&!L&&f&&(d=f))),d},Y.versionInfo=function(){return"2.18.1"},Y.loaderCache=function(){return y},Y.directivePriority=function(){return O},Y.statefulFilter=function(){return P},Y.isReady=function(){return M};var st=n.defer();st.promise.then(function(){M=!0}),Y.onReady=function(t){var e=n.defer();return angular.isFunction(t)&&e.promise.then(t),M?e.resolve():st.promise.then(e.resolve),e.promise},Y.getAvailableLanguageKeys=function(){return _.length>0?_:null},Y.getTranslationTable=function(t){return(t=t||Y.use())&&b[t]?angular.copy(b[t]):null};var at=r.$on("$translateReady",function(){st.resolve(),at(),at=null}),lt=r.$on("$translateChangeEnd",function(){st.resolve(),lt(),lt=null});if(f){if(angular.equals(b,{})&&Y.use()&&Y.use(Y.use()),s&&s.length)for(var ut=function(t){return U(t.key,t.table),r.$emit("$translateChangeEnd",{language:t.key}),t},ht=0,ct=s.length;ht<ct;ht++){var pt=s[ht];!A&&b[pt]||(z[pt]=q(pt).then(ut))}}else r.$emit("$translateReady",{language:Y.use()});return Y}]}function r(t,e){"use strict";var r={setLocale:function(t){},getInterpolationIdentifier:function(){return"default"},useSanitizeValueStrategy:function(t){return e.useStrategy(t),this},interpolate:function(r,n,i,o,s){var a;return n=n||{},n=e.sanitize(n,"params",o,i),angular.isNumber(r)?a=""+r:angular.isString(r)?(a=t(r)(n),a=e.sanitize(a,"text",o,i)):a="",a}};return r}function n(t,e,r,n,i){"use strict";var o=function(t){return angular.isString(t)?t.toLowerCase():t};return{restrict:"AE",scope:!0,priority:t.directivePriority(),compile:function(s,a){var l=a.translateValues?a.translateValues:void 0,u=a.translateInterpolation?a.translateInterpolation:void 0,h=a.translateSanitizeStrategy?a.translateSanitizeStrategy:void 0,c=s[0].outerHTML.match(/translate-value-+/i),p="^(.*)("+e.startSymbol()+".*"+e.endSymbol()+")(.*)",d="^(.*)"+e.startSymbol()+"(.*)"+e.endSymbol()+"(.*)";return function(s,f,g){s.interpolateParams={},s.preText="",s.postText="",s.translateNamespace=function t(e){return e.translateNamespace?e.translateNamespace:e.$parent?t(e.$parent):void 0}(s);var v={},m=function(t){if(angular.isFunction(m._unwatchOld)&&(m._unwatchOld(),m._unwatchOld=void 0),angular.equals(t,"")||!angular.isDefined(t)){var r=function(){return this.toString().replace(/^\s+|\s+$/g,"")}.apply(f.text()),n=r.match(p);if(angular.isArray(n)){s.preText=n[1],s.postText=n[3],v.translate=e(n[2])(s.$parent);var i=r.match(d);angular.isArray(i)&&i[2]&&i[2].length&&(m._unwatchOld=s.$watch(i[2],function(t){v.translate=t,w()}))}else v.translate=r||void 0}else v.translate=t;w()},y=function(t){g.$observe(t,function(e){v[t]=e,w()})};!function(t,e,r){if(e.translateValues&&angular.extend(t,n(e.translateValues)(s.$parent)),c)for(var i in r)if(Object.prototype.hasOwnProperty.call(e,i)&&"translateValue"===i.substr(0,14)&&"translateValues"!==i){var a=o(i.substr(14,1))+i.substr(15);t[a]=r[i]}}(s.interpolateParams,g,a);var x=!0;for(var b in g.$observe("translate",function(t){void 0===t?m(""):""===t&&x||(v.translate=t,w()),x=!1}),g)g.hasOwnProperty(b)&&"translateAttr"===b.substr(0,13)&&b.length>13&&y(b);if(g.$observe("translateDefault",function(t){s.defaultText=t,w()}),h&&g.$observe("translateSanitizeStrategy",function(t){s.sanitizeStrategy=n(t)(s.$parent),w()}),l&&g.$observe("translateValues",function(t){t&&s.$parent.$watch(function(){angular.extend(s.interpolateParams,n(t)(s.$parent))})}),c){var _=function(t){g.$observe(t,function(e){var r=o(t.substr(14,1))+t.substr(15);s.interpolateParams[r]=e})};for(var T in g)Object.prototype.hasOwnProperty.call(g,T)&&"translateValue"===T.substr(0,14)&&"translateValues"!==T&&_(T)}var w=function(){for(var t in v)v.hasOwnProperty(t)&&void 0!==v[t]&&E(t,v[t],s,s.interpolateParams,s.defaultText,s.translateNamespace)},E=function(e,r,n,i,o,s){r?(s&&"."===r.charAt(0)&&(r=s+r),t(r,i,u,o,n.translateLanguage,n.sanitizeStrategy).then(function(t){S(t,n,!0,e)},function(t){S(t,n,!1,e)})):S(r,n,!1,e)},S=function(e,n,i,o){if(i||void 0!==n.defaultText&&(e=n.defaultText),"translate"===o){(i||!i&&!t.isKeepContent()&&void 0===g.translateKeepContent)&&f.empty().append(n.preText+e+n.postText);var s=t.isPostCompilingEnabled(),l=void 0!==a.translateCompile,u=l&&"false"!==a.translateCompile;(s&&!l||u)&&r(f.contents())(n)}else{var h=g.$attr[o];"data-"===h.substr(0,5)&&(h=h.substr(5)),h=h.substr(15),f.attr(h,e)}};(l||c||g.translateDefault)&&s.$watch("interpolateParams",w,!0),s.$on("translateLanguageChanged",w);var A=i.$on("$translateChangeSuccess",w);f.text().length?g.translate?m(g.translate):m(""):g.translate&&m(g.translate),w(),s.$on("$destroy",A)}}}}function i(t,e){"use strict";return{restrict:"A",priority:t.directivePriority(),link:function(r,n,i){var s,a,l,u={},h=function(){angular.forEach(s,function(e,o){e&&(u[o]=!0,r.translateNamespace&&"."===e.charAt(0)&&(e=r.translateNamespace+e),t(e,a,i.translateInterpolation,void 0,r.translateLanguage,l).then(function(t){n.attr(o,t)},function(t){n.attr(o,t)}))}),angular.forEach(u,function(t,e){s[e]||(n.removeAttr(e),delete u[e])})};o(r,i.translateAttr,function(t){s=t},h),o(r,i.translateValues,function(t){a=t},h),o(r,i.translateSanitizeStrategy,function(t){l=t},h),i.translateValues&&r.$watch(i.translateValues,h,!0),r.$on("translateLanguageChanged",h);var c=e.$on("$translateChangeSuccess",h);h(),r.$on("$destroy",c)}}}function o(t,e,r,n){"use strict";e&&("::"===e.substr(0,2)?e=e.substr(2):t.$watch(e,function(t){r(t),n()},!0),r(t.$eval(e)))}function s(t,e){"use strict";return{compile:function(r){var n=function(e){e.addClass(t.cloakClassName())};return n(r),function(r,i,o){var s=function(e){e.removeClass(t.cloakClassName())}.bind(this,i),a=n.bind(this,i);o.translateCloak&&o.translateCloak.length?(o.$observe("translateCloak",function(e){t(e).then(s,a)}),e.$on("$translateChangeSuccess",function(){t(o.translateCloak).then(s,a)})):t.onReady(s)}}}}function a(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(t,e,r){t.translateNamespace=function t(e){return e.translateNamespace?e.translateNamespace:e.$parent?t(e.$parent):void 0}(t),t.translateNamespace&&"."===r.translateNamespace.charAt(0)?t.translateNamespace+=r.translateNamespace:t.translateNamespace=r.translateNamespace}}}}}function l(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(t,e,r){r.$observe("translateLanguage",function(e){t.translateLanguage=e}),t.$watch("translateLanguage",function(){t.$broadcast("translateLanguageChanged")})}}}}function u(t,e){"use strict";var r=function(r,n,i,o){if(!angular.isObject(n)){var s=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};n=t(n)(s)}return e.instant(r,n,i,o)};return e.statefulFilter()&&(r.$stateful=!0),r}function h(t){"use strict";return t("translations")}return t.$inject=["$translate"],e.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],r.$inject=["$interpolate","$translateSanitization"],n.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],i.$inject=["$translate","$rootScope"],s.$inject=["$translate","$rootScope"],u.$inject=["$parse","$translate"],h.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(t),t.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",function(){"use strict";var t,e,r,n=null,i=!1,o=!1;(r={sanitize:function(t,e){return"text"===e&&(t=a(t)),t},escape:function(t,e){return"text"===e&&(t=s(t)),t},sanitizeParameters:function(t,e){return"params"===e&&(t=u(t,a)),t},escapeParameters:function(t,e){return"params"===e&&(t=u(t,s)),t},sce:function(t,e,r){return"text"===e?t=l(t):"params"===e&&"filter"!==r&&(t=u(t,s)),t},sceParameters:function(t,e){return"params"===e&&(t=u(t,l)),t}}).escaped=r.escapeParameters,this.addStrategy=function(t,e){return r[t]=e,this},this.removeStrategy=function(t){return delete r[t],this},this.useStrategy=function(t){return i=!0,n=t,this},this.$get=["$injector","$log",function(s,a){var l,u={};return s.has("$sanitize")&&(t=s.get("$sanitize")),s.has("$sce")&&(e=s.get("$sce")),{useStrategy:(l=this,function(t){l.useStrategy(t)}),sanitize:function(t,e,l,h){if(n||i||o||(a.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),o=!0),l||null===l||(l=n),!l)return t;h||(h="service");var c=angular.isArray(l)?l:[l];return function(t,e,n,i){return angular.forEach(i,function(i){if(angular.isFunction(i))t=i(t,e,n);else if(angular.isFunction(r[i]))t=r[i](t,e,n);else{if(!angular.isString(r[i]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+i+"'");if(!u[r[i]])try{u[r[i]]=s.get(r[i])}catch(t){throw u[r[i]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+i+"'")}t=u[r[i]](t,e,n)}}),t}(t,e,h,c)}}}];var s=function(t){var e=angular.element("<div></div>");return e.text(t),e.html()},a=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return t(e)},l=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return e.trustAsHtml(t)},u=function(t,e,r){if(angular.isDate(t))return t;if(angular.isObject(t)){var n=angular.isArray(t)?[]:{};if(r){if(r.indexOf(t)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else r=[];return r.push(t),angular.forEach(t,function(t,i){angular.isFunction(t)||(n[i]=u(t,e,r))}),r.splice(-1,1),n}return angular.isNumber(t)?t:!0===t||!1===t?t:angular.isUndefined(t)||null===t?t:e(t)}}),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",e),e.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",r),r.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",n),n.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",i),i.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",s),s.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",a),a.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",l),l.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",u),u.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",h),h.displayName="$translationCache","pascalprecht.translate"}()}.apply(e,[]))||(t.exports=n)},ONr6:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAFCAYAAACw/UeDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNzA0ODc4NTBEOTExMUU0OTQwRUY3N0Y4NjU4NkUxMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNzA0ODc4NjBEOTExMUU0OTQwRUY3N0Y4NjU4NkUxMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU3MDQ4NzgzMEQ5MTExRTQ5NDBFRjc3Rjg2NTg2RTEzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU3MDQ4Nzg0MEQ5MTExRTQ5NDBFRjc3Rjg2NTg2RTEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Z0mLggAAAFVJREFUeNpi+P//vxwQ7wLiz1AaxGfAgslWBxLc/R8V7MehmWx1jCAbGRgYeBgQ4BcQszNgArLVMQGJE2iKjjFgB+Srg4YhyItfoLQ8nrAmSx1AgAEAGIkLFSECmUsAAAAASUVORK5CYII="},Qnnr:function(t,e,r){(function(){
/**
 * @license
 * pixi.js - v1.6.1
 * Copyright (c) 2012-2014, Mat Groves
 * http://goodboydigital.com/
 *
 * Compiled: 2014-07-25
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(){var r=r||{};r.WEBGL_RENDERER=0,r.CANVAS_RENDERER=1,r.VERSION="v1.6.1",r.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},r.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},r._UID=0,"undefined"!=typeof Float32Array?(r.Float32Array=Float32Array,r.Uint16Array=Uint16Array):(r.Float32Array=Array,r.Uint16Array=Array),r.INTERACTION_FREQUENCY=30,r.AUTO_PREVENT_DEFAULT=!0,r.RAD_TO_DEG=180/Math.PI,r.DEG_TO_RAD=Math.PI/180,r.dontSayHello=!1,r.sayHello=function(t){if(!r.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["%c %c %c Pixi.js "+r.VERSION+" - "+t+"  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,e)}else window.console&&console.log("Pixi.js "+r.VERSION+" - http://www.pixijs.com/");r.dontSayHello=!0}},r.Point=function(t,e){this.x=t||0,this.y=e||0},r.Point.prototype.clone=function(){return new r.Point(this.x,this.y)},r.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},r.Point.prototype.constructor=r.Point,r.Rectangle=function(t,e,r,n){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0},r.Rectangle.prototype.clone=function(){return new r.Rectangle(this.x,this.y,this.width,this.height)},r.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=this.x;if(t>=r&&t<=r+this.width){var n=this.y;if(e>=n&&e<=n+this.height)return!0}return!1},r.Rectangle.prototype.constructor=r.Rectangle,r.EmptyRectangle=new r.Rectangle(0,0,0,0),r.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],n=0,i=t.length;i>n;n+=2)e.push(new r.Point(t[n],t[n+1]));t=e}this.points=t},r.Polygon.prototype.clone=function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].clone());return new r.Polygon(t)},r.Polygon.prototype.contains=function(t,e){for(var r=!1,n=0,i=this.points.length-1;n<this.points.length;i=n++){var o=this.points[n].x,s=this.points[n].y,a=this.points[i].x,l=this.points[i].y;s>e!=l>e&&(a-o)*(e-s)/(l-s)+o>t&&(r=!r)}return r},r.Polygon.prototype.constructor=r.Polygon,r.Circle=function(t,e,r){this.x=t||0,this.y=e||0,this.radius=r||0},r.Circle.prototype.clone=function(){return new r.Circle(this.x,this.y,this.radius)},r.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.x-t,n=this.y-e;return this.radius*this.radius>=(r*=r)+(n*=n)},r.Circle.prototype.getBounds=function(){return new r.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},r.Circle.prototype.constructor=r.Circle,r.Ellipse=function(t,e,r,n){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0},r.Ellipse.prototype.clone=function(){return new r.Ellipse(this.x,this.y,this.width,this.height)},r.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return 1>=(r*=r)+(n*=n)},r.Ellipse.prototype.getBounds=function(){return new r.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},r.Ellipse.prototype.constructor=r.Ellipse,r.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},r.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.c,e[2]=0,e[3]=this.b,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.b,e[2]=this.tx,e[3]=this.c,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},r.Matrix.prototype.apply=function(t,e){return(e=e||new r.Point).x=this.a*t.x+this.b*t.y+this.tx,e.y=this.c*t.x+this.d*t.y+this.ty,e},r.Matrix.prototype.applyInverse=function(t,e){e=e||new r.Point;var n=1/(this.a*this.d+this.b*-this.c);return e.x=this.d*n*t.x-this.b*n*t.y+(this.ty*this.b-this.tx*this.d)*n,e.y=this.a*n*t.y-this.c*n*t.x+(this.tx*this.c-this.ty*this.a)*n,e},r.identityMatrix=new r.Matrix,r.determineMatrixArrayType=function(){return"undefined"!=typeof Float32Array?Float32Array:Array},r.Matrix2=r.determineMatrixArrayType(),r.DisplayObject=function(){this.position=new r.Point,this.scale=new r.Point(1,1),this.pivot=new r.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new r.Matrix,this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new r.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},r.DisplayObject.prototype.constructor=r.DisplayObject,r.DisplayObject.prototype.setInteractive=function(t){this.interactive=t},Object.defineProperty(r.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(r.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(r.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(r.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],r=0;r<t.length;r++)for(var n=t[r].passes,i=0;i<n.length;i++)e.push(n[i]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(r.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),r.DisplayObject.prototype.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var t=this.parent.worldTransform,e=this.worldTransform,r=this.pivot.x,n=this.pivot.y,i=this._cr*this.scale.x,o=-this._sr*this.scale.y,s=this._sr*this.scale.x,a=this._cr*this.scale.y,l=this.position.x-i*r-n*o,u=this.position.y-a*n-r*s,h=t.a,c=t.b,p=t.c,d=t.d;e.a=h*i+c*s,e.b=h*o+c*a,e.tx=h*l+c*u+t.tx,e.c=p*i+d*s,e.d=p*o+d*a,e.ty=p*l+d*u+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha},r.DisplayObject.prototype.getBounds=function(t){return t=t,r.EmptyRectangle},r.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(r.identityMatrix)},r.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},r.DisplayObject.prototype.generateTexture=function(t){var e=this.getLocalBounds(),n=new r.RenderTexture(0|e.width,0|e.height,t);return n.render(this,new r.Point(-e.x,-e.y)),n},r.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},r.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,t.gl?r.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):r.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},r.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var e=new r.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new r.Sprite(e),this._cachedSprite.worldTransform=this.worldTransform}var n=this._filters;this._filters=null,this._cachedSprite.filters=n,this._cachedSprite.texture.render(this,new r.Point(-t.x,-t.y)),this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._filters=n,this._cacheAsBitmap=!0},r.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},r.DisplayObject.prototype._renderWebGL=function(t){t=t},r.DisplayObject.prototype._renderCanvas=function(t){t=t},Object.defineProperty(r.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(r.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),r.DisplayObjectContainer=function(){r.DisplayObject.call(this),this.children=[]},r.DisplayObjectContainer.prototype=Object.create(r.DisplayObject.prototype),r.DisplayObjectContainer.prototype.constructor=r.DisplayObjectContainer,Object.defineProperty(r.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/(e/this.scale.x):1,this._width=t}}),Object.defineProperty(r.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/(e/this.scale.y):1,this._height=t}}),r.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},r.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+" The index "+e+" supplied is out of bounds "+this.children.length)},r.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var r=this.children.indexOf(t),n=this.children.indexOf(e);if(0>r||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[r]=e,this.children[n]=t}},r.DisplayObjectContainer.prototype.getChildAt=function(t){if(t>=0&&t<this.children.length)return this.children[t];throw new Error("Supplied index does not exist in the child list, or the supplied DisplayObject must be a child of the caller")},r.DisplayObjectContainer.prototype.removeChild=function(t){return this.removeChildAt(this.children.indexOf(t))},r.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},r.DisplayObjectContainer.prototype.removeChildren=function(t,e){var r=t||0,n="number"==typeof e?e:this.children.length,i=n-r;if(i>0&&n>=i){for(var o=this.children.splice(r,i),s=0;s<o.length;s++){var a=o[s];this.stage&&a.removeStageReference(),a.parent=void 0}return o}throw new Error("Range Error, numeric values are outside the acceptable range")},r.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(r.DisplayObject.prototype.updateTransform.call(this),!this._cacheAsBitmap))for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()},r.DisplayObjectContainer.prototype.getBounds=function(t){if(0===this.children.length)return r.EmptyRectangle;if(t){var e=this.worldTransform;this.worldTransform=t,this.updateTransform(),this.worldTransform=e}for(var n,i,o,s=1/0,a=1/0,l=-1/0,u=-1/0,h=!1,c=0,p=this.children.length;p>c;c++){this.children[c].visible&&(h=!0,s=s<(n=this.children[c].getBounds(t)).x?s:n.x,a=a<n.y?a:n.y,l=l>(i=n.width+n.x)?l:i,u=u>(o=n.height+n.y)?u:o)}if(!h)return r.EmptyRectangle;var d=this._bounds;return d.x=s,d.y=a,d.width=l-s,d.height=u-a,d},r.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=r.identityMatrix;for(var e=0,n=this.children.length;n>e;e++)this.children[e].updateTransform();var i=this.getBounds();return this.worldTransform=t,i},r.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,r=this.children.length;r>e;e++){this.children[e].setStageReference(t)}},r.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){this.children[t].removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},r.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);var e,r;if(this._mask||this._filters){for(this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),t.spriteBatch.start()}else for(e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t)}},r.DisplayObjectContainer.prototype._renderCanvas=function(t){if(!1!==this.visible&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t.context);for(var e=0,r=this.children.length;r>e;e++){this.children[e]._renderCanvas(t)}this._mask&&t.maskManager.popMask(t.context)}},r.Sprite=function(t){r.DisplayObjectContainer.call(this),this.anchor=new r.Point,this.texture=t,this._width=0,this._height=0,this.tint=16777215,this.blendMode=r.blendModes.NORMAL,t.baseTexture.hasLoaded?this.onTextureUpdate():(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},r.Sprite.prototype=Object.create(r.DisplayObjectContainer.prototype),r.Sprite.prototype.constructor=r.Sprite,Object.defineProperty(r.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(r.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),r.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},r.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},r.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,r=this.texture.frame.height,n=e*(1-this.anchor.x),i=e*-this.anchor.x,o=r*(1-this.anchor.y),s=r*-this.anchor.y,a=t||this.worldTransform,l=a.a,u=a.c,h=a.b,c=a.d,p=a.tx,d=a.ty,f=l*i+h*s+p,g=c*s+u*i+d,v=l*n+h*s+p,m=c*s+u*n+d,y=l*n+h*o+p,x=c*o+u*n+d,b=l*i+h*o+p,_=c*o+u*i+d,T=-1/0,w=-1/0,E=1/0,S=1/0;E=(E=(E=(E=E>f?f:E)>v?v:E)>y?y:E)>b?b:E,S=(S=(S=(S=S>g?g:S)>m?m:S)>x?x:S)>_?_:S,T=b>(T=y>(T=v>(T=f>T?f:T)?v:T)?y:T)?b:T,w=_>(w=x>(w=m>(w=g>w?g:w)?m:w)?x:w)?_:w;var A=this._bounds;return A.x=E,A.width=T-E,A.y=S,A.height=w-S,this._currentBounds=A,A},r.Sprite.prototype._renderWebGL=function(t){var e,r;if(this.visible&&!(this.alpha<=0))if(this._mask||this._filters){var n=t.spriteBatch;for(this._filters&&(n.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(n.stop(),t.maskManager.pushMask(this.mask,t),n.start()),n.render(this),e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t);n.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),n.start()}else for(t.spriteBatch.render(this),e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t)},r.Sprite.prototype._renderCanvas=function(t){if(!1!==this.visible&&0!==this.alpha){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=r.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t.context),this.texture.valid){t.context.globalAlpha=this.worldAlpha,t.roundPixels?t.context.setTransform(this.worldTransform.a,this.worldTransform.c,this.worldTransform.b,this.worldTransform.d,0|this.worldTransform.tx,0|this.worldTransform.ty):t.context.setTransform(this.worldTransform.a,this.worldTransform.c,this.worldTransform.b,this.worldTransform.d,this.worldTransform.tx,this.worldTransform.ty),t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.scaleMode===r.scaleModes.LINEAR);var e=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,n=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=r.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,e,n,this.texture.crop.width,this.texture.crop.height)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,e,n,this.texture.crop.width,this.texture.crop.height)}for(var i=0,o=this.children.length;o>i;i++)this.children[i]._renderCanvas(t);this._mask&&t.maskManager.popMask(t.context)}},r.Sprite.fromFrame=function(t){var e=r.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new r.Sprite(e)},r.Sprite.fromImage=function(t,e,n){var i=r.Texture.fromImage(t,e,n);return new r.Sprite(i)},r.SpriteBatch=function(t){r.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},r.SpriteBatch.prototype=Object.create(r.DisplayObjectContainer.prototype),r.SpriteBatch.constructor=r.SpriteBatch,r.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new r.WebGLFastSpriteBatch(t),this.ready=!0},r.SpriteBatch.prototype.updateTransform=function(){r.DisplayObject.prototype.updateTransform.call(this)},r.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),t.spriteBatch.stop(),t.shaderManager.setShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.spriteBatch.start())},r.SpriteBatch.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,r.DisplayObject.prototype.updateTransform.call(this);for(var n=this.worldTransform,i=!0,o=0;o<this.children.length;o++){var s=this.children[o];if(s.visible){var a=s.texture,l=a.frame;if(e.globalAlpha=this.worldAlpha*s.alpha,s.rotation%(2*Math.PI)==0)i&&(e.setTransform(n.a,n.c,n.b,n.d,n.tx,n.ty),i=!1),e.drawImage(a.baseTexture.source,l.x,l.y,l.width,l.height,s.anchor.x*-l.width*s.scale.x+s.position.x+.5|0,s.anchor.y*-l.height*s.scale.y+s.position.y+.5|0,l.width*s.scale.x,l.height*s.scale.y);else{i||(i=!0),r.DisplayObject.prototype.updateTransform.call(s);var u=s.worldTransform;t.roundPixels?e.setTransform(u.a,u.c,u.b,u.d,0|u.tx,0|u.ty):e.setTransform(u.a,u.c,u.b,u.d,u.tx,u.ty),e.drawImage(a.baseTexture.source,l.x,l.y,l.width,l.height,s.anchor.x*-l.width+.5|0,s.anchor.y*-l.height+.5|0,l.width,l.height)}}}},r.MovieClip=function(t){r.Sprite.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},r.MovieClip.prototype=Object.create(r.Sprite.prototype),r.MovieClip.prototype.constructor=r.MovieClip,Object.defineProperty(r.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),r.MovieClip.prototype.stop=function(){this.playing=!1},r.MovieClip.prototype.play=function(){this.playing=!0},r.MovieClip.prototype.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=this.currentFrame+.5|0;this.setTexture(this.textures[e%this.textures.length])},r.MovieClip.prototype.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},r.MovieClip.prototype.updateTransform=function(){if(r.Sprite.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var t=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||t<this.textures.length?this.setTexture(this.textures[t%this.textures.length]):t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},r.MovieClip.fromFrames=function(t){for(var e=[],n=0;n<t.length;n++)e.push(new r.Texture.fromFrame(t[n]));return new r.MovieClip(e)},r.MovieClip.fromImages=function(t){for(var e=[],n=0;n<t.length;n++)e.push(new r.Texture.fromImage(t[n]));return new r.MovieClip(e)},r.FilterBlock=function(){this.visible=!0,this.renderable=!0},r.Text=function(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),r.Sprite.call(this,r.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e)},r.Text.prototype=Object.create(r.Sprite.prototype),r.Text.prototype.constructor=r.Text,Object.defineProperty(r.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(r.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),r.Text.prototype.setStyle=function(t){(t=t||{}).font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},r.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},r.Text.prototype.updateText=function(){this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),r=[],n=0,i=0;i<e.length;i++){var o=this.context.measureText(e[i]).width;r[i]=o,n=Math.max(n,o)}var s=n+this.style.strokeThickness;this.style.dropShadow&&(s+=this.style.dropShadowDistance),this.canvas.width=s+this.context.lineWidth;var a,l,u=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness,h=u*e.length;if(this.style.dropShadow&&(h+=this.style.dropShadowDistance),this.canvas.height=h,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="top",this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var c=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(i=0;i<e.length;i++)a=this.style.strokeThickness/2,l=this.style.strokeThickness/2+i*u,"right"===this.style.align?a+=n-r[i]:"center"===this.style.align&&(a+=(n-r[i])/2),this.style.fill&&this.context.fillText(e[i],a+c,l+p)}for(this.context.fillStyle=this.style.fill,i=0;i<e.length;i++)a=this.style.strokeThickness/2,l=this.style.strokeThickness/2+i*u,"right"===this.style.align?a+=n-r[i]:"center"===this.style.align&&(a+=(n-r[i])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[i],a,l),this.style.fill&&this.context.fillText(e[i],a,l);this.updateTexture()},r.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.requiresUpdate=!0},r.Text.prototype._renderWebGL=function(t){this.requiresUpdate&&(this.requiresUpdate=!1,r.updateWebGLTexture(this.texture.baseTexture,t.gl)),r.Sprite.prototype._renderWebGL.call(this,t)},r.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),r.Sprite.prototype.updateTransform.call(this)},r.Text.prototype.determineFontHeight=function(t){var e=r.Text.heightCache[t];if(!e){var n=document.getElementsByTagName("body")[0],i=document.createElement("div"),o=document.createTextNode("M");i.appendChild(o),i.setAttribute("style",t+";position:absolute;top:0;left:0"),n.appendChild(i),e=i.offsetHeight,r.Text.heightCache[t]=e,n.removeChild(i)}return e},r.Text.prototype.wordWrap=function(t){for(var e="",r=t.split("\n"),n=0;n<r.length;n++){for(var i=this.style.wordWrapWidth,o=r[n].split(" "),s=0;s<o.length;s++){var a=this.context.measureText(o[s]).width,l=a+this.context.measureText(" ").width;0===s||l>i?(s>0&&(e+="\n"),e+=o[s],i=this.style.wordWrapWidth-a):(i-=l,e+=" "+o[s])}n<r.length-1&&(e+="\n")}return e},r.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t||t)},r.Text.heightCache={},r.BitmapText=function(t,e){r.DisplayObjectContainer.call(this),this._pool=[],this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},r.BitmapText.prototype=Object.create(r.DisplayObjectContainer.prototype),r.BitmapText.prototype.constructor=r.BitmapText,r.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},r.BitmapText.prototype.setStyle=function(t){(t=t||{}).align=t.align||"left",this.style=t;var e=t.font.split(" ");this.fontName=e[e.length-1],this.fontSize=e.length>=2?parseInt(e[e.length-2],10):r.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},r.BitmapText.prototype.updateText=function(){for(var t=r.BitmapText.fonts[this.fontName],e=new r.Point,n=null,i=[],o=0,s=[],a=0,l=this.fontSize/t.size,u=0;u<this.text.length;u++){var h=this.text.charCodeAt(u);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(u)))s.push(e.x),o=Math.max(o,e.x),a++,e.x=0,e.y+=t.lineHeight,n=null;else{var c=t.chars[h];c&&(n&&c[n]&&(e.x+=c.kerning[n]),i.push({texture:c.texture,line:a,charCode:h,position:new r.Point(e.x+c.xOffset,e.y+c.yOffset)}),e.x+=c.xAdvance,n=h)}}s.push(e.x),o=Math.max(o,e.x);var p=[];for(u=0;a>=u;u++){var d=0;"right"===this.style.align?d=o-s[u]:"center"===this.style.align&&(d=(o-s[u])/2),p.push(d)}var f=this.children.length,g=i.length,v=this.tint||16777215;for(u=0;g>u;u++){var m=f>u?this.children[u]:this._pool.pop();m?m.setTexture(i[u].texture):m=new r.Sprite(i[u].texture),m.position.x=(i[u].position.x+p[i[u].line])*l,m.position.y=i[u].position.y*l,m.scale.x=m.scale.y=l,m.tint=v,m.parent||this.addChild(m)}for(;this.children.length>g;){var y=this.getChildAt(this.children.length-1);this._pool.push(y),this.removeChild(y)}this.textWidth=o*l,this.textHeight=(e.y+t.lineHeight)*l},r.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),r.DisplayObjectContainer.prototype.updateTransform.call(this)},r.BitmapText.fonts={},r.InteractionData=function(){this.global=new r.Point,this.target=null,this.originalEvent=null},r.InteractionData.prototype.getLocalPosition=function(t){var e=t.worldTransform,n=this.global,i=e.a,o=e.b,s=e.tx,a=e.c,l=e.d,u=e.ty,h=1/(i*l+o*-a);return new r.Point(l*h*n.x+-o*h*n.y+(u*o-s*l)*h,i*h*n.y+-a*h*n.x+(-u*i+s*a)*h)},r.InteractionData.prototype.constructor=r.InteractionData,r.InteractionManager=function(t){this.stage=t,this.mouse=new r.InteractionData,this.touchs={},this.tempPoint=new r.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1},r.InteractionManager.prototype.constructor=r.InteractionManager,r.InteractionManager.prototype.collectInteractiveSprite=function(t,e){for(var r=t.children,n=r.length-1;n>=0;n--){var i=r[n];i._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(i),i.children.length>0&&this.collectInteractiveSprite(i,i)):(i.__iParent=null,i.children.length>0&&this.collectInteractiveSprite(i,e))}},r.InteractionManager.prototype.setTarget=function(t){this.target=t,null===this.interactionDOMElement&&this.setTargetDomElement(t.view)},r.InteractionManager.prototype.setTargetDomElement=function(t){this.removeEvents(),window.navigator.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),this.interactionDOMElement=t,t.addEventListener("mousemove",this.onMouseMove,!0),t.addEventListener("mousedown",this.onMouseDown,!0),t.addEventListener("mouseout",this.onMouseOut,!0),t.addEventListener("touchstart",this.onTouchStart,!0),t.addEventListener("touchend",this.onTouchEnd,!0),t.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},r.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},r.InteractionManager.prototype.update=function(){if(this.target){var t=Date.now(),e=t-this.last;if(!(1>(e=e*r.INTERACTION_FREQUENCY/1e3))){this.last=t;var n=0;this.dirty&&this.rebuildInteractiveGraph();var i=this.interactiveItems.length,o="inherit",s=!1;for(n=0;i>n;n++){var a=this.interactiveItems[n];a.__hit=this.hitTest(a,this.mouse),this.mouse.target=a,a.__hit&&!s?(a.buttonMode&&(o=a.defaultCursor),a.interactiveChildren||(s=!0),a.__isOver||(a.mouseover&&a.mouseover(this.mouse),a.__isOver=!0)):a.__isOver&&(a.mouseout&&a.mouseout(this.mouse),a.__isOver=!1)}this.currentCursorStyle!==o&&(this.currentCursorStyle=o,this.interactionDOMElement.style.cursor=o)}}},r.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var t=this.interactiveItems.length,e=0;t>e;e++)this.interactiveItems[e].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},r.InteractionManager.prototype.onMouseMove=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t||window.event;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width),this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height);for(var r=this.interactiveItems.length,n=0;r>n;n++){var i=this.interactiveItems[n];i.mousemove&&i.mousemove(this.mouse)}},r.InteractionManager.prototype.onMouseDown=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t||window.event,r.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var e=this.interactiveItems.length,n=0;e>n;n++){var i=this.interactiveItems[n];if((i.mousedown||i.click)&&(i.__mouseIsDown=!0,i.__hit=this.hitTest(i,this.mouse),i.__hit&&(i.mousedown&&i.mousedown(this.mouse),i.__isDown=!0,!i.interactiveChildren)))break}},r.InteractionManager.prototype.onMouseOut=function(){this.dirty&&this.rebuildInteractiveGraph();var t=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var e=0;t>e;e++){var r=this.interactiveItems[e];r.__isOver&&(this.mouse.target=r,r.mouseout&&r.mouseout(this.mouse),r.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},r.InteractionManager.prototype.onMouseUp=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t||window.event;for(var e=this.interactiveItems.length,r=!1,n=0;e>n;n++){var i=this.interactiveItems[n];i.__hit=this.hitTest(i,this.mouse),i.__hit&&!r?(i.mouseup&&i.mouseup(this.mouse),i.__isDown&&i.click&&i.click(this.mouse),i.interactiveChildren||(r=!0)):i.__isDown&&i.mouseupoutside&&i.mouseupoutside(this.mouse),i.__isDown=!1}},r.InteractionManager.prototype.hitTest=function(t,e){var n=e.global;if(!t.worldVisible)return!1;var i=t instanceof r.Sprite,o=t.worldTransform,s=o.a,a=o.b,l=o.tx,u=o.c,h=o.d,c=o.ty,p=1/(s*h+a*-u),d=h*p*n.x+-a*p*n.y+(c*a-l*h)*p,f=s*p*n.y+-u*p*n.x+(-c*s+l*u)*p;if(e.target=t,t.hitArea&&t.hitArea.contains)return!!t.hitArea.contains(d,f)&&(e.target=t,!0);if(i){var g,v=t.texture.frame.width,m=t.texture.frame.height,y=-v*t.anchor.x;if(d>y&&y+v>d&&(f>(g=-m*t.anchor.y)&&g+m>f))return e.target=t,!0}for(var x=t.children.length,b=0;x>b;b++){var _=t.children[b];if(this.hitTest(_,e))return e.target=t,!0}return!1},r.InteractionManager.prototype.onTouchMove=function(t){this.dirty&&this.rebuildInteractiveGraph();var e,r=this.interactionDOMElement.getBoundingClientRect(),n=t.changedTouches,i=0;for(i=0;i<n.length;i++){var o=n[i];(e=this.touchs[o.identifier]).originalEvent=t||window.event,e.global.x=(o.clientX-r.left)*(this.target.width/r.width),e.global.y=(o.clientY-r.top)*(this.target.height/r.height),navigator.isCocoonJS&&(e.global.x=o.clientX,e.global.y=o.clientY);for(var s=0;s<this.interactiveItems.length;s++){var a=this.interactiveItems[s];a.touchmove&&a.__touchData&&a.__touchData[o.identifier]&&a.touchmove(e)}}},r.InteractionManager.prototype.onTouchStart=function(t){this.dirty&&this.rebuildInteractiveGraph();var e=this.interactionDOMElement.getBoundingClientRect();r.AUTO_PREVENT_DEFAULT&&t.preventDefault();for(var n=t.changedTouches,i=0;i<n.length;i++){var o=n[i],s=this.pool.pop();s||(s=new r.InteractionData),s.originalEvent=t||window.event,this.touchs[o.identifier]=s,s.global.x=(o.clientX-e.left)*(this.target.width/e.width),s.global.y=(o.clientY-e.top)*(this.target.height/e.height),navigator.isCocoonJS&&(s.global.x=o.clientX,s.global.y=o.clientY);for(var a=this.interactiveItems.length,l=0;a>l;l++){var u=this.interactiveItems[l];if((u.touchstart||u.tap)&&(u.__hit=this.hitTest(u,s),u.__hit&&(u.touchstart&&u.touchstart(s),u.__isDown=!0,u.__touchData=u.__touchData||{},u.__touchData[o.identifier]=s,!u.interactiveChildren)))break}}},r.InteractionManager.prototype.onTouchEnd=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,n=0;n<r.length;n++){var i=r[n],o=this.touchs[i.identifier],s=!1;o.global.x=(i.clientX-e.left)*(this.target.width/e.width),o.global.y=(i.clientY-e.top)*(this.target.height/e.height),navigator.isCocoonJS&&(o.global.x=i.clientX,o.global.y=i.clientY);for(var a=this.interactiveItems.length,l=0;a>l;l++){var u=this.interactiveItems[l];u.__touchData&&u.__touchData[i.identifier]&&(u.__hit=this.hitTest(u,u.__touchData[i.identifier]),o.originalEvent=t||window.event,(u.touchend||u.tap)&&(u.__hit&&!s?(u.touchend&&u.touchend(o),u.__isDown&&u.tap&&u.tap(o),u.interactiveChildren||(s=!0)):u.__isDown&&u.touchendoutside&&u.touchendoutside(o),u.__isDown=!1),u.__touchData[i.identifier]=null)}this.pool.push(o),this.touchs[i.identifier]=null}},r.Stage=function(t){r.DisplayObjectContainer.call(this),this.worldTransform=new r.Matrix,this.interactive=!0,this.interactionManager=new r.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new r.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},r.Stage.prototype=Object.create(r.DisplayObjectContainer.prototype),r.Stage.prototype.constructor=r.Stage,r.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},r.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},r.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=r.hex2rgb(this.backgroundColor);var e=this.backgroundColor.toString(16);e="000000".substr(0,6-e.length)+e,this.backgroundColorString="#"+e},r.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global};for(var n=0,i=["ms","moz","webkit","o"],o=0;o<i.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[i[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[o]+"CancelAnimationFrame"]||window[i[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),r=Math.max(0,16-(e-n)),i=window.setTimeout(function(){t(e+r)},r);return n=e+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.requestAnimFrame=window.requestAnimationFrame,r.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},r.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var t=Array.prototype.slice;return function(e){function r(){var o=i.concat(t.call(arguments));n.apply(this instanceof r?this:e,o)}var n=this,i=t.call(arguments,1);if("function"!=typeof n)throw new TypeError;return r.prototype=function t(e){return e&&(t.prototype=e),this instanceof t?void 0:new t}(n.prototype),r}}()),r.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return!!window.XMLHttpRequest&&new window.XMLHttpRequest;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(t){}},r.canUseNewCanvasBlendModes=function(){var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},r.getNextPowerOfTwo=function(t){if(t>0&&0==(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},r.EventTarget=function(){var t={};this.addEventListener=this.on=function(e,r){void 0===t[e]&&(t[e]=[]),-1===t[e].indexOf(r)&&t[e].unshift(r)},this.dispatchEvent=this.emit=function(e){if(t[e.type]&&t[e.type].length)for(var r=t[e.type].length-1;r>=0;r--)t[e.type][r](e)},this.removeEventListener=this.off=function(e,r){if(void 0!==t[e]){var n=t[e].indexOf(r);-1!==n&&t[e].splice(n,1)}},this.removeAllEventListeners=function(e){var r=t[e];r&&(r.length=0)}},r.autoDetectRenderer=function(t,e,n,i,o,s){return t||(t=800),e||(e=600),function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return!1}}()?new r.WebGLRenderer(t,e,n,i,o,s):new r.CanvasRenderer(t,e,n,i)},r.autoDetectRecommendedRenderer=function(t,e,n,i,o,s){t||(t=800),e||(e=600);var a=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return!1}}(),l=/Android/i.test(navigator.userAgent);return a&&!l?new r.WebGLRenderer(t,e,n,i,o,s):new r.CanvasRenderer(t,e,n,i)},r.PolyK={},r.PolyK.Triangulate=function(t){var e=!0,n=t.length>>1;if(3>n)return[];for(var i=[],o=[],s=0;n>s;s++)o.push(s);s=0;for(var a=n;a>3;){var l=o[(s+0)%a],u=o[(s+1)%a],h=o[(s+2)%a],c=t[2*l],p=t[2*l+1],d=t[2*u],f=t[2*u+1],g=t[2*h],v=t[2*h+1],m=!1;if(r.PolyK._convex(c,p,d,f,g,v,e)){m=!0;for(var y=0;a>y;y++){var x=o[y];if(x!==l&&x!==u&&x!==h&&r.PolyK._PointInTriangle(t[2*x],t[2*x+1],c,p,d,f,g,v)){m=!1;break}}}if(m)i.push(l,u,h),o.splice((s+1)%a,1),a--,s=0;else if(s++>3*a){if(!e)return window.console.log("PIXI Warning: shape too complex to fill"),[];for(i=[],o=[],s=0;n>s;s++)o.push(s);s=0,a=n,e=!1}}return i.push(o[0],o[1],o[2]),i},r.PolyK._PointInTriangle=function(t,e,r,n,i,o,s,a){var l=s-r,u=a-n,h=i-r,c=o-n,p=t-r,d=e-n,f=l*l+u*u,g=l*h+u*c,v=l*p+u*d,m=h*h+c*c,y=h*p+c*d,x=1/(f*m-g*g),b=(m*v-g*y)*x,_=(f*y-g*v)*x;return b>=0&&_>=0&&1>b+_},r.PolyK._convex=function(t,e,r,n,i,o,s){return(e-n)*(i-r)+(r-t)*(o-n)>=0===s},r.initDefaultShaders=function(){},r.CompileVertexShader=function(t,e){return r._CompileShader(t,e,t.VERTEX_SHADER)},r.CompileFragmentShader=function(t,e){return r._CompileShader(t,e,t.FRAGMENT_SHADER)},r._CompileShader=function(t,e,r){var n=e.join("\n"),i=t.createShader(r);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(window.console.log(t.getShaderInfoLog(i)),null)},r.compileProgram=function(t,e,n){var i=r.CompileFragmentShader(t,n),o=r.CompileVertexShader(t,e),s=t.createProgram();return t.attachShader(s,o),t.attachShader(s,i),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),s},r.PixiShader=function(t){this._UID=r._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.attributes=[],this.init()},r.PixiShader.prototype.init=function(){var t=this.gl,e=r.compileProgram(t,this.vertexSrc||r.PixiShader.defaultVertexSrc,this.fragmentSrc);for(var n in t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute],this.uniforms)this.uniforms[n].uniformLocation=t.getUniformLocation(e,n);this.initUniforms(),this.program=e},r.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var r in this.uniforms){var n=(t=this.uniforms[r]).type;"sampler2D"===n?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===n||"mat3"===n||"mat4"===n?(t.glMatrix=!0,t.glValueLength=1,"mat2"===n?t.glFunc=e.uniformMatrix2fv:"mat3"===n?t.glFunc=e.uniformMatrix3fv:"mat4"===n&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+n],t.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}},r.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var r=t.textureData,n=r.magFilter?r.magFilter:e.LINEAR,i=r.minFilter?r.minFilter:e.LINEAR,o=r.wrapS?r.wrapS:e.CLAMP_TO_EDGE,s=r.wrapT?r.wrapT:e.CLAMP_TO_EDGE,a=r.luminance?e.LUMINANCE:e.RGBA;if(r.repeat&&(o=e.REPEAT,s=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!r.flipY),r.width){var l=r.width?r.width:512,u=r.height?r.height:2,h=r.border?r.border:0;e.texImage2D(e.TEXTURE_2D,0,a,l,u,h,a,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,a,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,s)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},r.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var n in this.uniforms)1===(t=this.uniforms[n]).glValueLength?!0===t.glMatrix?t.glFunc.call(e,t.uniformLocation,t.transpose,t.value):t.glFunc.call(e,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]||r.createWebGLTexture(t.value.baseTexture,e)),e.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},r.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},r.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"],r.PixiFastShader=function(t){this._UID=r._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},r.PixiFastShader.prototype.init=function(){var t=this.gl,e=r.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.uMatrix=t.getUniformLocation(e,"uMatrix"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(e,"aPositionCoord"),this.aScale=t.getAttribLocation(e,"aScale"),this.aRotation=t.getAttribLocation(e,"aRotation"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=e},r.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},r.StripShader=function(t){this._UID=r._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},r.StripShader.prototype.init=function(){var t=this.gl,e=r.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},r.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},r.PrimitiveShader=function(t){this._UID=r._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},r.PrimitiveShader.prototype.init=function(){var t=this.gl,e=r.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},r.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},r.ComplexPrimitiveShader=function(t){this._UID=r._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},r.ComplexPrimitiveShader.prototype.init=function(){var t=this.gl,e=r.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.color=t.getUniformLocation(e,"color"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},r.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},r.WebGLGraphics=function(){},r.WebGLGraphics.renderGraphics=function(t,e){var n,i=e.gl,o=e.projection,s=e.offset,a=e.shaderManager.primitiveShader;t.dirty&&r.WebGLGraphics.updateGraphics(t,i);for(var l=t._webGL[i.id],u=0;u<l.data.length;u++)1===l.data[u].mode?(n=l.data[u],e.stencilManager.pushStencil(t,n,e),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(n.indices.length-4)),e.stencilManager.popStencil(t,n,e),this.last=n.mode):(n=l.data[u],e.shaderManager.setShader(a),a=e.shaderManager.primitiveShader,i.uniformMatrix3fv(a.translationMatrix,!1,t.worldTransform.toArray(!0)),i.uniform2f(a.projectionVector,o.x,-o.y),i.uniform2f(a.offsetVector,-s.x,-s.y),i.uniform3fv(a.tintColor,r.hex2rgb(t.tint)),i.uniform1f(a.alpha,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,n.buffer),i.vertexAttribPointer(a.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(a.colorAttribute,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n.indexBuffer),i.drawElements(i.TRIANGLE_STRIP,n.indices.length,i.UNSIGNED_SHORT,0))},r.WebGLGraphics.updateGraphics=function(t,e){var n,i,o=t._webGL[e.id];if(o||(o=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1,t.clearDirty){for(t.clearDirty=!1,n=0;n<o.data.length;n++){var s=o.data[n];s.reset(),r.WebGLGraphics.graphicsDataPool.push(s)}o.data=[],o.lastIndex=0}for(n=o.lastIndex;n<t.graphicsData.length;n++){var a=t.graphicsData[n];a.type===r.Graphics.POLY?(a.fill&&a.points.length>6&&(a.points.length>10?(i=r.WebGLGraphics.switchMode(o,1),r.WebGLGraphics.buildComplexPoly(a,i)):(i=r.WebGLGraphics.switchMode(o,0),r.WebGLGraphics.buildPoly(a,i))),a.lineWidth>0&&(i=r.WebGLGraphics.switchMode(o,0),r.WebGLGraphics.buildLine(a,i))):(i=r.WebGLGraphics.switchMode(o,0),a.type===r.Graphics.RECT?r.WebGLGraphics.buildRectangle(a,i):a.type===r.Graphics.CIRC||a.type===r.Graphics.ELIP?r.WebGLGraphics.buildCircle(a,i):a.type===r.Graphics.RREC&&r.WebGLGraphics.buildRoundedRectangle(a,i)),o.lastIndex++}for(n=0;n<o.data.length;n++)(i=o.data[n]).dirty&&i.upload()},r.WebGLGraphics.switchMode=function(t,e){var n;return t.data.length?((n=t.data[t.data.length-1]).mode!==e||1===e)&&((n=r.WebGLGraphics.graphicsDataPool.pop()||new r.WebGLGraphicsData(t.gl)).mode=e,t.data.push(n)):((n=r.WebGLGraphics.graphicsDataPool.pop()||new r.WebGLGraphicsData(t.gl)).mode=e,t.data.push(n)),n.dirty=!0,n},r.WebGLGraphics.buildRectangle=function(t,e){var n=t.points,i=n[0],o=n[1],s=n[2],a=n[3];if(t.fill){var l=r.hex2rgb(t.fillColor),u=t.fillAlpha,h=l[0]*u,c=l[1]*u,p=l[2]*u,d=e.points,f=e.indices,g=d.length/6;d.push(i,o),d.push(h,c,p,u),d.push(i+s,o),d.push(h,c,p,u),d.push(i,o+a),d.push(h,c,p,u),d.push(i+s,o+a),d.push(h,c,p,u),f.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var v=t.points;t.points=[i,o,i+s,o,i+s,o+a,i,o+a,i,o],r.WebGLGraphics.buildLine(t,e),t.points=v}},r.WebGLGraphics.buildRoundedRectangle=function(t,e){var n=t.points,i=n[0],o=n[1],s=n[2],a=n[3],l=n[4],u=[];if(u.push(i,o+l),u=(u=(u=(u=u.concat(r.WebGLGraphics.quadraticBezierCurve(i,o+a-l,i,o+a,i+l,o+a))).concat(r.WebGLGraphics.quadraticBezierCurve(i+s-l,o+a,i+s,o+a,i+s,o+a-l))).concat(r.WebGLGraphics.quadraticBezierCurve(i+s,o+l,i+s,o,i+s-l,o))).concat(r.WebGLGraphics.quadraticBezierCurve(i+l,o,i,o,i,o+l)),t.fill){var h=r.hex2rgb(t.fillColor),c=t.fillAlpha,p=h[0]*c,d=h[1]*c,f=h[2]*c,g=e.points,v=e.indices,m=g.length/6,y=r.PolyK.Triangulate(u),x=0;for(x=0;x<y.length;x+=3)v.push(y[x]+m),v.push(y[x]+m),v.push(y[x+1]+m),v.push(y[x+2]+m),v.push(y[x+2]+m);for(x=0;x<u.length;x++)g.push(u[x],u[++x],p,d,f,c)}if(t.lineWidth){var b=t.points;t.points=u,r.WebGLGraphics.buildLine(t,e),t.points=b}},r.WebGLGraphics.quadraticBezierCurve=function(t,e,r,n,i,o){function s(t,e,r){return t+(e-t)*r}for(var a,l,u,h,c,p,d=[],f=0,g=0;20>=g;g++)a=s(t,r,f=g/20),l=s(e,n,f),u=s(r,i,f),h=s(n,o,f),c=s(a,u,f),p=s(l,h,f),d.push(c,p);return d},r.WebGLGraphics.buildCircle=function(t,e){var n=t.points,i=n[0],o=n[1],s=n[2],a=n[3],l=2*Math.PI/40,u=0;if(t.fill){var h=r.hex2rgb(t.fillColor),c=t.fillAlpha,p=h[0]*c,d=h[1]*c,f=h[2]*c,g=e.points,v=e.indices,m=g.length/6;for(v.push(m),u=0;41>u;u++)g.push(i,o,p,d,f,c),g.push(i+Math.sin(l*u)*s,o+Math.cos(l*u)*a,p,d,f,c),v.push(m++,m++);v.push(m-1)}if(t.lineWidth){var y=t.points;for(t.points=[],u=0;41>u;u++)t.points.push(i+Math.sin(l*u)*s,o+Math.cos(l*u)*a);r.WebGLGraphics.buildLine(t,e),t.points=y}},r.WebGLGraphics.buildLine=function(t,e){var n=0,i=t.points;if(0!==i.length){if(t.lineWidth%2)for(n=0;n<i.length;n++)i[n]+=.5;var o=new r.Point(i[0],i[1]),s=new r.Point(i[i.length-2],i[i.length-1]);if(o.x===s.x&&o.y===s.y){(i=i.slice()).pop(),i.pop();var a=(s=new r.Point(i[i.length-2],i[i.length-1])).x+.5*(o.x-s.x),l=s.y+.5*(o.y-s.y);i.unshift(a,l),i.push(a,l)}var u,h,c,p,d,f,g,v,m,y,x,b,_,T,w,E,S,A,C,M,R,O,P=e.points,D=e.indices,I=i.length/2,L=i.length,F=P.length/6,B=t.lineWidth/2,k=r.hex2rgb(t.lineColor),N=t.lineAlpha,$=k[0]*N,U=k[1]*N,j=k[2]*N;for(c=i[0],p=i[1],d=i[2],m=-(p-(f=i[3])),y=c-d,m/=O=Math.sqrt(m*m+y*y),y/=O,m*=B,y*=B,P.push(c-m,p-y,$,U,j,N),P.push(c+m,p+y,$,U,j,N),n=1;I-1>n;n++)c=i[2*(n-1)],p=i[2*(n-1)+1],d=i[2*n],f=i[2*n+1],g=i[2*(n+1)],v=i[2*(n+1)+1],m=-(p-f),y=c-d,m/=O=Math.sqrt(m*m+y*y),y/=O,m*=B,y*=B,x=-(f-v),b=d-g,x/=O=Math.sqrt(x*x+b*b),b/=O,S=(-m+c)*(-y+f)-(-m+d)*(-y+p),M=(-(x*=B)+g)*(-(b*=B)+f)-(-x+d)*(-b+v),R=(w=-y+p-(-y+f))*(C=-x+d-(-x+g))-(A=-b+v-(-b+f))*(E=-m+d-(-m+c)),Math.abs(R)<.1?(R+=10.1,P.push(d-m,f-y,$,U,j,N),P.push(d+m,f+y,$,U,j,N)):((u=(E*M-C*S)/R)-d)*(u-d)+((h=(A*S-w*M)/R)-f)+(h-f)>19600?(_=m-x,T=y-b,_/=O=Math.sqrt(_*_+T*T),T/=O,_*=B,T*=B,P.push(d-_,f-T),P.push($,U,j,N),P.push(d+_,f+T),P.push($,U,j,N),P.push(d-_,f-T),P.push($,U,j,N),L++):(P.push(u,h),P.push($,U,j,N),P.push(d-(u-d),f-(h-f)),P.push($,U,j,N));for(c=i[2*(I-2)],p=i[2*(I-2)+1],d=i[2*(I-1)],m=-(p-(f=i[2*(I-1)+1])),y=c-d,m/=O=Math.sqrt(m*m+y*y),y/=O,m*=B,y*=B,P.push(d-m,f-y),P.push($,U,j,N),P.push(d+m,f+y),P.push($,U,j,N),D.push(F),n=0;L>n;n++)D.push(F++);D.push(F-1)}},r.WebGLGraphics.buildComplexPoly=function(t,e){var n=t.points.slice();if(!(n.length<6)){var i=e.indices;e.points=n,e.alpha=t.fillAlpha,e.color=r.hex2rgb(t.fillColor);for(var o,s,a=1/0,l=-1/0,u=1/0,h=-1/0,c=0;c<n.length;c+=2)a=a>(o=n[c])?o:a,l=o>l?o:l,u=u>(s=n[c+1])?s:u,h=s>h?s:h;n.push(a,u,l,u,l,h,a,h);var p=n.length/2;for(c=0;p>c;c++)i.push(c)}},r.WebGLGraphics.buildPoly=function(t,e){var n=t.points;if(!(n.length<6)){var i=e.points,o=e.indices,s=n.length/2,a=r.hex2rgb(t.fillColor),l=t.fillAlpha,u=a[0]*l,h=a[1]*l,c=a[2]*l,p=r.PolyK.Triangulate(n),d=i.length/6,f=0;for(f=0;f<p.length;f+=3)o.push(p[f]+d),o.push(p[f]+d),o.push(p[f+1]+d),o.push(p[f+2]+d),o.push(p[f+2]+d);for(f=0;s>f;f++)i.push(n[2*f],n[2*f+1],u,h,c,l)}},r.WebGLGraphics.graphicsDataPool=[],r.WebGLGraphicsData=function(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.lastIndex=0,this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},r.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[],this.lastIndex=0},r.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1},r.glContexts=[],r.WebGLRenderer=function(t,e,n,i,o,s){r.defaultRenderer||(r.sayHello("webGL"),r.defaultRenderer=this),this.type=r.WEBGL_RENDERER,this.transparent=!!i,this.preserveDrawingBuffer=s,this.width=t||800,this.height=e||600,this.view=n||document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height,this.contextLost=this.handleContextLost.bind(this),this.contextRestoredLost=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLost,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredLost,!1),this.options={alpha:this.transparent,antialias:!!o,premultipliedAlpha:!!i,stencil:!0,preserveDrawingBuffer:s};var a=null;if(["experimental-webgl","webgl"].forEach(function(t){try{a=a||this.view.getContext(t,this.options)}catch(t){}},this),!a)throw new Error("This browser does not support webGL. Try using the canvas renderer"+this);this.gl=a,this.glContextId=a.id=r.WebGLRenderer.glContextId++,r.glContexts[this.glContextId]=a,r.blendModesWebGL||(r.blendModesWebGL=[],r.blendModesWebGL[r.blendModes.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.ADD]=[a.SRC_ALPHA,a.DST_ALPHA],r.blendModesWebGL[r.blendModes.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.SCREEN]=[a.SRC_ALPHA,a.ONE],r.blendModesWebGL[r.blendModes.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],r.blendModesWebGL[r.blendModes.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA]),this.projection=new r.Point,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.offset=new r.Point(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.shaderManager=new r.WebGLShaderManager(a),this.spriteBatch=new r.WebGLSpriteBatch(a),this.maskManager=new r.WebGLMaskManager(a),this.filterManager=new r.WebGLFilterManager(a,this.transparent),this.stencilManager=new r.WebGLStencilManager(a),this.blendModeManager=new r.WebGLBlendModeManager(a),this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,a.useProgram(this.shaderManager.defaultShader.program),a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.BLEND),a.colorMask(!0,!0,!0,this.transparent)},r.WebGLRenderer.prototype.constructor=r.WebGLRenderer,r.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),r.WebGLRenderer.updateTextures(),t.updateTransform(),t._interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)));var e=this.gl;e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.transparent?e.clearColor(0,0,0,0):e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),e.clear(e.COLOR_BUFFER_BIT),this.renderDisplayObject(t,this.projection),t.interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this))}},r.WebGLRenderer.prototype.renderDisplayObject=function(t,e,n){this.renderSession.blendModeManager.setBlendMode(r.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.currentBlendMode=9999,this.renderSession.projection=e,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,n),t._renderWebGL(this.renderSession),this.spriteBatch.end()},r.WebGLRenderer.updateTextures=function(){var t=0;for(t=0;t<r.Texture.frameUpdates.length;t++)r.WebGLRenderer.updateTextureFrame(r.Texture.frameUpdates[t]);for(t=0;t<r.texturesToDestroy.length;t++)r.WebGLRenderer.destroyTexture(r.texturesToDestroy[t]);r.texturesToUpdate.length=0,r.texturesToDestroy.length=0,r.Texture.frameUpdates.length=0},r.WebGLRenderer.destroyTexture=function(t){for(var e=t._glTextures.length-1;e>=0;e--){var n=t._glTextures[e],i=r.glContexts[e];i&&n&&i.deleteTexture(n)}t._glTextures.length=0},r.WebGLRenderer.updateTextureFrame=function(t){t._updateWebGLuvs()},r.WebGLRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},r.createWebGLTexture=function(t,e){return t.hasLoaded&&(t._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===r.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===r.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null),t._dirty[e.id]=!1),t._glTextures[e.id]},r.updateWebGLTexture=function(t,e){t._glTextures[e.id]&&(e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===r.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===r.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._dirty[e.id]=!1)},r.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},r.WebGLRenderer.prototype.handleContextRestored=function(){try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(t){try{this.gl=this.view.getContext("webgl",this.options)}catch(t){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}var t=this.gl;for(var e in t.id=r.WebGLRenderer.glContextId++,this.shaderManager.setContext(t),this.spriteBatch.setContext(t),this.maskManager.setContext(t),this.filterManager.setContext(t),this.renderSession.gl=this.gl,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.colorMask(!0,!0,!0,this.transparent),this.gl.viewport(0,0,this.width,this.height),r.TextureCache){r.TextureCache[e].baseTexture._glTextures=[]}this.contextLost=!1},r.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLost),this.view.removeEventListener("webglcontextrestored",this.contextRestoredLost),r.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},r.WebGLRenderer.glContextId=0,r.WebGLBlendModeManager=function(t){this.gl=t,this.currentBlendMode=99999},r.WebGLBlendModeManager.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=r.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(e[0],e[1]),!0},r.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},r.WebGLMaskManager=function(t){this.maskStack=[],this.maskPosition=0,this.setContext(t),this.reverse=!1,this.count=0},r.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},r.WebGLMaskManager.prototype.pushMask=function(t,e){var n=e.gl;t.dirty&&r.WebGLGraphics.updateGraphics(t,n),t._webGL[n.id].data.length&&e.stencilManager.pushStencil(t,t._webGL[n.id].data[0],e)},r.WebGLMaskManager.prototype.popMask=function(t,e){var r=this.gl;e.stencilManager.popStencil(t,t._webGL[r.id].data[0],e)},r.WebGLMaskManager.prototype.destroy=function(){this.maskStack=null,this.gl=null},r.WebGLStencilManager=function(t){this.stencilStack=[],this.setContext(t),this.reverse=!0,this.count=0},r.WebGLStencilManager.prototype.setContext=function(t){this.gl=t},r.WebGLStencilManager.prototype.pushStencil=function(t,e,r){var n=this.gl;this.bindGraphics(t,e,r),0===this.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(e);var i=this.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===e.mode?(n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),this.reverse?n.stencilFunc(n.EQUAL,255-(i+1),255):n.stencilFunc(n.EQUAL,i+1,255),this.reverse=!this.reverse):(this.reverse?(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,i+1,255):n.stencilFunc(n.EQUAL,255-(i+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.count++},r.WebGLStencilManager.prototype.bindGraphics=function(t,e,n){this._currentGraphics=t;var i,o=this.gl,s=n.projection,a=n.offset;1===e.mode?(i=n.shaderManager.complexPrimativeShader,n.shaderManager.setShader(i),o.uniformMatrix3fv(i.translationMatrix,!1,t.worldTransform.toArray(!0)),o.uniform2f(i.projectionVector,s.x,-s.y),o.uniform2f(i.offsetVector,-a.x,-a.y),o.uniform3fv(i.tintColor,r.hex2rgb(t.tint)),o.uniform3fv(i.color,e.color),o.uniform1f(i.alpha,t.worldAlpha*e.alpha),o.bindBuffer(o.ARRAY_BUFFER,e.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,8,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(i=n.shaderManager.primitiveShader,n.shaderManager.setShader(i),o.uniformMatrix3fv(i.translationMatrix,!1,t.worldTransform.toArray(!0)),o.uniform2f(i.projectionVector,s.x,-s.y),o.uniform2f(i.offsetVector,-a.x,-a.y),o.uniform3fv(i.tintColor,r.hex2rgb(t.tint)),o.uniform1f(i.alpha,t.worldAlpha),o.bindBuffer(o.ARRAY_BUFFER,e.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,24,0),o.vertexAttribPointer(i.colorAttribute,4,o.FLOAT,!1,24,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},r.WebGLStencilManager.prototype.popStencil=function(t,e,r){var n=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)n.disable(n.STENCIL_TEST);else{var i=this.count;this.bindGraphics(t,e,r),n.colorMask(!1,!1,!1,!1),1===e.mode?(this.reverse=!this.reverse,this.reverse?(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)):(this.reverse?(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},r.WebGLStencilManager.prototype.destroy=function(){this.maskStack=null,this.gl=null},r.WebGLShaderManager=function(t){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[],this.shaderMap=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(t)},r.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new r.PrimitiveShader(t),this.complexPrimativeShader=new r.ComplexPrimitiveShader(t),this.defaultShader=new r.PixiShader(t),this.fastShader=new r.PixiFastShader(t),this.stripShader=new r.StripShader(t),this.setShader(this.defaultShader)},r.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var r=t[e];this.tempAttribState[r]=!0}var n=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?n.enableVertexAttribArray(e):n.disableVertexAttribArray(e))},r.WebGLShaderManager.prototype.setShader=function(t){return this._currentId!==t._UID&&(this._currentId=t._UID,this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},r.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},r.WebGLSpriteBatch=function(t){this.vertSize=6,this.size=2e3;var e=4*this.size*this.vertSize,r=6*this.size;this.vertices=new Float32Array(e),this.indices=new Uint16Array(r),this.lastIndexCount=0;for(var n=0,i=0;r>n;n+=6,i+=4)this.indices[n+0]=i+0,this.indices[n+1]=i+1,this.indices[n+2]=i+2,this.indices[n+3]=i+0,this.indices[n+4]=i+2,this.indices[n+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.setContext(t),this.dirty=!0,this.textures=[],this.blendModes=[]},r.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},r.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},r.WebGLSpriteBatch.prototype.end=function(){this.flush()},r.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var r=e._uvs;if(r){var n,i,o,s,a=t.worldAlpha,l=t.tint,u=this.vertices,h=t.anchor.x,c=t.anchor.y;if(e.trim){var p=e.trim;n=(i=p.x-h*p.width)+e.crop.width,o=(s=p.y-c*p.height)+e.crop.height}else n=e.frame.width*(1-h),i=e.frame.width*-h,o=e.frame.height*(1-c),s=e.frame.height*-c;var d=4*this.currentBatchSize*this.vertSize,f=t.worldTransform,g=f.a,v=f.c,m=f.b,y=f.d,x=f.tx,b=f.ty;u[d++]=g*i+m*s+x,u[d++]=y*s+v*i+b,u[d++]=r.x0,u[d++]=r.y0,u[d++]=a,u[d++]=l,u[d++]=g*n+m*s+x,u[d++]=y*s+v*n+b,u[d++]=r.x1,u[d++]=r.y1,u[d++]=a,u[d++]=l,u[d++]=g*n+m*o+x,u[d++]=y*o+v*n+b,u[d++]=r.x2,u[d++]=r.y2,u[d++]=a,u[d++]=l,u[d++]=g*i+m*o+x,u[d++]=y*o+v*i+b,u[d++]=r.x3,u[d++]=r.y3,u[d++]=a,u[d++]=l,this.textures[this.currentBatchSize]=t.texture.baseTexture,this.blendModes[this.currentBatchSize]=t.blendMode,this.currentBatchSize++}},r.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var e=t.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture),t._uvs||(t._uvs=new r.TextureUvs);var n=t._uvs;t.tilePosition.x%=e.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=e.baseTexture.height*t.tileScaleOffset.y;var i=t.tilePosition.x/(e.baseTexture.width*t.tileScaleOffset.x),o=t.tilePosition.y/(e.baseTexture.height*t.tileScaleOffset.y),s=t.width/e.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),a=t.height/e.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);n.x0=0-i,n.y0=0-o,n.x1=1*s-i,n.y1=0-o,n.x2=1*s-i,n.y2=1*a-o,n.x3=0-i,n.y3=1*a-o;var l=t.worldAlpha,u=t.tint,h=this.vertices,c=t.width,p=t.height,d=t.anchor.x,f=t.anchor.y,g=c*(1-d),v=c*-d,m=p*(1-f),y=p*-f,x=4*this.currentBatchSize*this.vertSize,b=t.worldTransform,_=b.a,T=b.c,w=b.b,E=b.d,S=b.tx,A=b.ty;h[x++]=_*v+w*y+S,h[x++]=E*y+T*v+A,h[x++]=n.x0,h[x++]=n.y0,h[x++]=l,h[x++]=u,h[x++]=_*g+w*y+S,h[x++]=E*y+T*g+A,h[x++]=n.x1,h[x++]=n.y1,h[x++]=l,h[x++]=u,h[x++]=_*g+w*m+S,h[x++]=E*m+T*g+A,h[x++]=n.x2,h[x++]=n.y2,h[x++]=l,h[x++]=u,h[x++]=_*v+w*m+S,h[x++]=E*m+T*v+A,h[x++]=n.x3,h[x++]=n.y3,h[x++]=l,h[x++]=u,this.textures[this.currentBatchSize]=e.baseTexture,this.blendModes[this.currentBatchSize]=t.blendMode,this.currentBatchSize++},r.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.renderSession.shaderManager.setShader(this.renderSession.shaderManager.defaultShader),this.dirty){this.dirty=!1,t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y);var r=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,r,0),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,r,8),t.vertexAttribPointer(this.shader.colorAttribute,2,t.FLOAT,!1,r,16)}if(this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var n=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,n)}for(var i,o,s=0,a=0,l=null,u=this.renderSession.blendModeManager.currentBlendMode,h=0,c=this.currentBatchSize;c>h;h++)i=this.textures[h],o=this.blendModes[h],(l!==i||u!==o)&&(this.renderBatch(l,s,a),a=h,s=0,l=i,u=o,this.renderSession.blendModeManager.setBlendMode(u)),s++;this.renderBatch(l,s,a),this.currentBatchSize=0}},r.WebGLSpriteBatch.prototype.renderBatch=function(t,e,n){if(0!==e){var i=this.gl;i.bindTexture(i.TEXTURE_2D,t._glTextures[i.id]||r.createWebGLTexture(t,i)),t._dirty[i.id]&&r.updateWebGLTexture(this.currentBaseTexture,i),i.drawElements(i.TRIANGLES,6*e,i.UNSIGNED_SHORT,6*n*2),this.renderSession.drawCount++}},r.WebGLSpriteBatch.prototype.stop=function(){this.flush()},r.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},r.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},r.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var e=4*this.size*this.vertSize,r=6*this.maxSize;this.vertices=new Float32Array(e),this.indices=new Uint16Array(r),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var n=0,i=0;r>n;n+=6,i+=4)this.indices[n+0]=i+0,this.indices[n+1]=i+1,this.indices[n+2]=i+2,this.indices[n+3]=i+0,this.indices[n+4]=i+2,this.indices[n+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},r.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)},r.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},r.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},r.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,r=e[0];if(r.texture._uvs){this.currentBaseTexture=r.texture.baseTexture,r.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(r.blendMode));for(var n=0,i=e.length;i>n;n++)this.renderSprite(e[n]);this.flush()}},r.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,r,n,i,o,s,a=this.vertices;if(e=t.texture._uvs,t.texture.frame.width,t.texture.frame.height,t.texture.trim){var l=t.texture.trim;r=(n=l.x-t.anchor.x*l.width)+t.texture.crop.width,i=(o=l.y-t.anchor.y*l.height)+t.texture.crop.height}else r=t.texture.frame.width*(1-t.anchor.x),n=t.texture.frame.width*-t.anchor.x,i=t.texture.frame.height*(1-t.anchor.y),o=t.texture.frame.height*-t.anchor.y;s=4*this.currentBatchSize*this.vertSize,a[s++]=n,a[s++]=o,a[s++]=t.position.x,a[s++]=t.position.y,a[s++]=t.scale.x,a[s++]=t.scale.y,a[s++]=t.rotation,a[s++]=e.x0,a[s++]=e.y1,a[s++]=t.alpha,a[s++]=r,a[s++]=o,a[s++]=t.position.x,a[s++]=t.position.y,a[s++]=t.scale.x,a[s++]=t.scale.y,a[s++]=t.rotation,a[s++]=e.x1,a[s++]=e.y1,a[s++]=t.alpha,a[s++]=r,a[s++]=i,a[s++]=t.position.x,a[s++]=t.position.y,a[s++]=t.scale.x,a[s++]=t.scale.y,a[s++]=t.rotation,a[s++]=e.x2,a[s++]=e.y2,a[s++]=t.alpha,a[s++]=n,a[s++]=i,a[s++]=t.position.x,a[s++]=t.position.y,a[s++]=t.scale.x,a[s++]=t.scale.y,a[s++]=t.rotation,a[s++]=e.x3,a[s++]=e.y3,a[s++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},r.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||r.createWebGLTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},r.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},r.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var r=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,r,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,r,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,r,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,r,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,r,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,r,36)},r.WebGLFilterManager=function(t,e){this.transparent=e,this.filterStack=[],this.offsetX=0,this.offsetY=0,this.setContext(t)},r.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},r.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var r=this.renderSession.projection;this.width=2*r.x,this.height=2*-r.y,this.buffer=e},r.WebGLFilterManager.prototype.pushFilter=function(t){var e=this.gl,n=this.renderSession.projection,i=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var o=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var s=this.texturePool.pop();s?s.resize(this.width,this.height):s=new r.FilterTexture(this.gl,this.width,this.height),e.bindTexture(e.TEXTURE_2D,s.texture);var a=t._filterArea,l=o.padding;a.x-=l,a.y-=l,a.width+=2*l,a.height+=2*l,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.viewport(0,0,a.width,a.height),n.x=a.width/2,n.y=-a.height/2,i.x=-a.x,i.y=-a.y,this.renderSession.shaderManager.setShader(this.defaultShader),e.uniform2f(this.defaultShader.projectionVector,a.width/2,-a.height/2),e.uniform2f(this.defaultShader.offsetVector,-a.x,-a.y),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=s},r.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,e=this.filterStack.pop(),n=e._filterArea,i=e._glFilterTexture,o=this.renderSession.projection,s=this.renderSession.offset;if(e.filterPasses.length>1){t.viewport(0,0,n.width,n.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=n.height,this.vertexArray[2]=n.width,this.vertexArray[3]=n.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=n.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var a=i,l=this.texturePool.pop();l||(l=new r.FilterTexture(this.gl,this.width,this.height)),l.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,l.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var u=0;u<e.filterPasses.length-1;u++){var h=e.filterPasses[u];t.bindFramebuffer(t.FRAMEBUFFER,l.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a.texture),this.applyFilterPass(h,n,n.width,n.height);var c=a;a=l,l=c}t.enable(t.BLEND),i=a,this.texturePool.push(l)}var p=e.filterPasses[e.filterPasses.length-1];this.offsetX-=n.x,this.offsetY-=n.y;var d=this.width,f=this.height,g=0,v=0,m=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var y=this.filterStack[this.filterStack.length-1];d=(n=y._filterArea).width,f=n.height,g=n.x,v=n.y,m=y._glFilterTexture.frameBuffer}o.x=d/2,o.y=-f/2,s.x=g,s.y=v;var x=(n=e._filterArea).x-g,b=n.y-v;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=x,this.vertexArray[1]=b+n.height,this.vertexArray[2]=x+n.width,this.vertexArray[3]=b+n.height,this.vertexArray[4]=x,this.vertexArray[5]=b,this.vertexArray[6]=x+n.width,this.vertexArray[7]=b,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,d,f),t.bindFramebuffer(t.FRAMEBUFFER,m),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i.texture),this.applyFilterPass(p,n,d,f),this.renderSession.shaderManager.setShader(this.defaultShader),t.uniform2f(this.defaultShader.projectionVector,d/2,-f/2),t.uniform2f(this.defaultShader.offsetVector,-g,-v),this.texturePool.push(i),e._glFilterTexture=null},r.WebGLFilterManager.prototype.applyFilterPass=function(t,e,n,i){var o=this.gl,s=t.shaders[o.id];s||((s=new r.PixiShader(o)).fragmentSrc=t.fragmentSrc,s.uniforms=t.uniforms,s.init(),t.shaders[o.id]=s),this.renderSession.shaderManager.setShader(s),o.uniform2f(s.projectionVector,n/2,-i/2),o.uniform2f(s.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),s.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(s.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(s.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(s.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},r.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},r.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},r.FilterTexture=function(t,e,n,i){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),i=i||r.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i===r.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i===r.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(e,n)},r.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},r.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,e,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindRenderbuffer(r.RENDERBUFFER,this.renderBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e)}},r.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},r.CanvasMaskManager=function(){},r.CanvasMaskManager.prototype.pushMask=function(t,e){e.save();var n=t.alpha,i=t.worldTransform;e.setTransform(i.a,i.c,i.b,i.d,i.tx,i.ty),r.CanvasGraphics.renderGraphicsMask(t,e),e.clip(),t.worldAlpha=n},r.CanvasMaskManager.prototype.popMask=function(t){t.restore()},r.CanvasTinter=function(){},r.CanvasTinter.getTintedTexture=function(t,e){var n=t.texture,i="#"+("00000"+(0|(e=r.CanvasTinter.roundColor(e))).toString(16)).substr(-6);if(n.tintCache=n.tintCache||{},n.tintCache[i])return n.tintCache[i];var o=r.CanvasTinter.canvas||document.createElement("canvas");if(r.CanvasTinter.tintMethod(n,e,o),r.CanvasTinter.convertTintToImage){var s=new Image;s.src=o.toDataURL(),n.tintCache[i]=s}else n.tintCache[i]=o,r.CanvasTinter.canvas=null;return o},r.CanvasTinter.tintWithMultiply=function(t,e,r){var n=r.getContext("2d"),i=t.frame;r.width=i.width,r.height=i.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},r.CanvasTinter.tintWithOverlay=function(t,e,r){var n=r.getContext("2d"),i=t.frame;r.width=i.width,r.height=i.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},r.CanvasTinter.tintWithPerPixel=function(t,e,n){var i=n.getContext("2d"),o=t.frame;n.width=o.width,n.height=o.height,i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=r.hex2rgb(e),a=s[0],l=s[1],u=s[2],h=i.getImageData(0,0,o.width,o.height),c=h.data,p=0;p<c.length;p+=4)c[p+0]*=a,c[p+1]*=l,c[p+2]*=u;i.putImageData(h,0,0)},r.CanvasTinter.roundColor=function(t){var e=r.CanvasTinter.cacheStepsPerColorChannel,n=r.hex2rgb(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),r.rgb2hex(n)},r.CanvasTinter.cacheStepsPerColorChannel=8,r.CanvasTinter.convertTintToImage=!1,r.CanvasTinter.canUseMultiply=r.canUseNewCanvasBlendModes(),r.CanvasTinter.tintMethod=r.CanvasTinter.canUseMultiply?r.CanvasTinter.tintWithMultiply:r.CanvasTinter.tintWithPerPixel,r.CanvasRenderer=function(t,e,n,i){r.defaultRenderer||(r.sayHello("Canvas"),r.defaultRenderer=this),this.type=r.CANVAS_RENDERER,this.clearBeforeRender=!0,this.transparent=!!i,r.blendModesCanvas||(r.blendModesCanvas=[],r.canUseNewCanvasBlendModes()?(r.blendModesCanvas[r.blendModes.NORMAL]="source-over",r.blendModesCanvas[r.blendModes.ADD]="lighter",r.blendModesCanvas[r.blendModes.MULTIPLY]="multiply",r.blendModesCanvas[r.blendModes.SCREEN]="screen",r.blendModesCanvas[r.blendModes.OVERLAY]="overlay",r.blendModesCanvas[r.blendModes.DARKEN]="darken",r.blendModesCanvas[r.blendModes.LIGHTEN]="lighten",r.blendModesCanvas[r.blendModes.COLOR_DODGE]="color-dodge",r.blendModesCanvas[r.blendModes.COLOR_BURN]="color-burn",r.blendModesCanvas[r.blendModes.HARD_LIGHT]="hard-light",r.blendModesCanvas[r.blendModes.SOFT_LIGHT]="soft-light",r.blendModesCanvas[r.blendModes.DIFFERENCE]="difference",r.blendModesCanvas[r.blendModes.EXCLUSION]="exclusion",r.blendModesCanvas[r.blendModes.HUE]="hue",r.blendModesCanvas[r.blendModes.SATURATION]="saturation",r.blendModesCanvas[r.blendModes.COLOR]="color",r.blendModesCanvas[r.blendModes.LUMINOSITY]="luminosity"):(r.blendModesCanvas[r.blendModes.NORMAL]="source-over",r.blendModesCanvas[r.blendModes.ADD]="lighter",r.blendModesCanvas[r.blendModes.MULTIPLY]="source-over",r.blendModesCanvas[r.blendModes.SCREEN]="source-over",r.blendModesCanvas[r.blendModes.OVERLAY]="source-over",r.blendModesCanvas[r.blendModes.DARKEN]="source-over",r.blendModesCanvas[r.blendModes.LIGHTEN]="source-over",r.blendModesCanvas[r.blendModes.COLOR_DODGE]="source-over",r.blendModesCanvas[r.blendModes.COLOR_BURN]="source-over",r.blendModesCanvas[r.blendModes.HARD_LIGHT]="source-over",r.blendModesCanvas[r.blendModes.SOFT_LIGHT]="source-over",r.blendModesCanvas[r.blendModes.DIFFERENCE]="source-over",r.blendModesCanvas[r.blendModes.EXCLUSION]="source-over",r.blendModesCanvas[r.blendModes.HUE]="source-over",r.blendModesCanvas[r.blendModes.SATURATION]="source-over",r.blendModesCanvas[r.blendModes.COLOR]="source-over",r.blendModesCanvas[r.blendModes.LUMINOSITY]="source-over")),this.width=t||800,this.height=e||600,this.view=n||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0,this.maskManager=new r.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="oImageSmoothingEnabled")},r.CanvasRenderer.prototype.constructor=r.CanvasRenderer,r.CanvasRenderer.prototype.render=function(t){r.texturesToUpdate.length=0,r.texturesToDestroy.length=0,t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height)):this.transparent&&this.clearBeforeRender&&this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),r.Texture.frameUpdates.length>0&&(r.Texture.frameUpdates.length=0)},r.CanvasRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e},r.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,t._renderCanvas(this.renderSession)},r.CanvasRenderer.prototype.renderStripFlat=function(t){var e=this.context,r=t.verticies,n=r.length/2;this.count++,e.beginPath();for(var i=1;n-2>i;i++){var o=2*i,s=r[o],a=r[o+2],l=r[o+4],u=r[o+1],h=r[o+3],c=r[o+5];e.moveTo(s,u),e.lineTo(a,h),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},r.CanvasRenderer.prototype.renderStrip=function(t){var e=this.context,r=t.verticies,n=t.uvs,i=r.length/2;this.count++;for(var o=1;i-2>o;o++){var s=2*o,a=r[s],l=r[s+2],u=r[s+4],h=r[s+1],c=r[s+3],p=r[s+5],d=n[s]*t.texture.width,f=n[s+2]*t.texture.width,g=n[s+4]*t.texture.width,v=n[s+1]*t.texture.height,m=n[s+3]*t.texture.height,y=n[s+5]*t.texture.height;e.save(),e.beginPath(),e.moveTo(a,h),e.lineTo(l,c),e.lineTo(u,p),e.closePath(),e.clip();var x=d*m+v*g+f*y-m*g-v*f-d*y,b=a*m+v*u+l*y-m*u-v*l-a*y,_=d*l+a*g+f*u-l*g-a*f-d*u,T=d*m*u+v*l*g+a*f*y-a*m*g-v*f*u-d*l*y,w=h*m+v*p+c*y-m*p-v*c-h*y,E=d*c+h*g+f*p-c*g-h*f-d*p,S=d*m*p+v*c*g+h*f*y-h*m*g-v*f*p-d*c*y;e.transform(b/x,w/x,_/x,E/x,T/x,S/x),e.drawImage(t.texture.baseTexture.source,0,0),e.restore()}},r.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},r.CanvasBuffer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},r.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},r.CanvasGraphics=function(){},r.CanvasGraphics.renderGraphics=function(t,e){for(var n=t.worldAlpha,i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],s=o.points;if(e.strokeStyle="#"+("00000"+(0|o.lineColor).toString(16)).substr(-6),e.lineWidth=o.lineWidth,o.type===r.Graphics.POLY){e.beginPath(),e.moveTo(s[0],s[1]);for(var a=1;a<s.length/2;a++)e.lineTo(s[2*a],s[2*a+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|o.fillColor).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.stroke())}else if(o.type===r.Graphics.RECT)(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|o.fillColor).toString(16)).substr(-6),e.fillRect(s[0],s[1],s[2],s[3])),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeRect(s[0],s[1],s[2],s[3]));else if(o.type===r.Graphics.CIRC)e.beginPath(),e.arc(s[0],s[1],s[2],0,2*Math.PI),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|o.fillColor).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.stroke());else if(o.type===r.Graphics.ELIP){var l=o.points,u=2*l[2],h=2*l[3],c=l[0]-u/2,p=l[1]-h/2;e.beginPath();var d=.5522848,f=u/2*d,g=h/2*d,v=c+u,m=p+h,y=c+u/2,x=p+h/2;e.moveTo(c,x),e.bezierCurveTo(c,x-g,y-f,p,y,p),e.bezierCurveTo(y+f,p,v,x-g,v,x),e.bezierCurveTo(v,x+g,y+f,m,y,m),e.bezierCurveTo(y-f,m,c,x+g,c,x),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|o.fillColor).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.stroke())}else if(o.type===r.Graphics.RREC){var b=s[0],_=s[1],T=s[2],w=s[3],E=s[4],S=Math.min(T,w)/2|0;E=E>S?S:E,e.beginPath(),e.moveTo(b,_+E),e.lineTo(b,_+w-E),e.quadraticCurveTo(b,_+w,b+E,_+w),e.lineTo(b+T-E,_+w),e.quadraticCurveTo(b+T,_+w,b+T,_+w-E),e.lineTo(b+T,_+E),e.quadraticCurveTo(b+T,_,b+T-E,_),e.lineTo(b+E,_),e.quadraticCurveTo(b,_,b,_+E),e.closePath(),(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|o.fillColor).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.stroke())}}},r.CanvasGraphics.renderGraphicsMask=function(t,e){var n=t.graphicsData.length;if(0!==n){n>1&&(n=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var i=0;1>i;i++){var o=t.graphicsData[i],s=o.points;if(o.type===r.Graphics.POLY){e.beginPath(),e.moveTo(s[0],s[1]);for(var a=1;a<s.length/2;a++)e.lineTo(s[2*a],s[2*a+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===r.Graphics.RECT)e.beginPath(),e.rect(s[0],s[1],s[2],s[3]),e.closePath();else if(o.type===r.Graphics.CIRC)e.beginPath(),e.arc(s[0],s[1],s[2],0,2*Math.PI),e.closePath();else if(o.type===r.Graphics.ELIP){var l=o.points,u=2*l[2],h=2*l[3],c=l[0]-u/2,p=l[1]-h/2;e.beginPath();var d=.5522848,f=u/2*d,g=h/2*d,v=c+u,m=p+h,y=c+u/2,x=p+h/2;e.moveTo(c,x),e.bezierCurveTo(c,x-g,y-f,p,y,p),e.bezierCurveTo(y+f,p,v,x-g,v,x),e.bezierCurveTo(v,x+g,y+f,m,y,m),e.bezierCurveTo(y-f,m,c,x+g,c,x),e.closePath()}else if(o.type===r.Graphics.RREC){var b=s[0],_=s[1],T=s[2],w=s[3],E=s[4],S=Math.min(T,w)/2|0;E=E>S?S:E,e.beginPath(),e.moveTo(b,_+E),e.lineTo(b,_+w-E),e.quadraticCurveTo(b,_+w,b+E,_+w),e.lineTo(b+T-E,_+w),e.quadraticCurveTo(b+T,_+w,b+T,_+w-E),e.lineTo(b+T,_+E),e.quadraticCurveTo(b+T,_,b+T-E,_),e.lineTo(b+E,_),e.quadraticCurveTo(b,_,b,_+E),e.closePath()}}}},r.Graphics=function(){r.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.tint=16777215,this.blendMode=r.blendModes.NORMAL,this.currentPath={points:[]},this._webGL=[],this.isMask=!1,this.bounds=null,this.boundsPadding=10,this.dirty=!0},r.Graphics.prototype=Object.create(r.DisplayObjectContainer.prototype),r.Graphics.prototype.constructor=r.Graphics,Object.defineProperty(r.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),r.Graphics.prototype.lineStyle=function(t,e,n){return this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=arguments.length<3?1:n,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:r.Graphics.POLY},this.graphicsData.push(this.currentPath),this},r.Graphics.prototype.moveTo=function(t,e){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:r.Graphics.POLY},this.currentPath.points.push(t,e),this.graphicsData.push(this.currentPath),this},r.Graphics.prototype.lineTo=function(t,e){return this.currentPath.points.push(t,e),this.dirty=!0,this},r.Graphics.prototype.quadraticCurveTo=function(t,e,r,n){0===this.currentPath.points.length&&this.moveTo(0,0);var i,o,s=this.currentPath.points;0===s.length&&this.moveTo(0,0);for(var a=s[s.length-2],l=s[s.length-1],u=0,h=1;20>=h;h++)i=a+(t-a)*(u=h/20),o=l+(e-l)*u,s.push(i+(t+(r-t)*u-i)*u,o+(e+(n-e)*u-o)*u);return this.dirty=!0,this},r.Graphics.prototype.bezierCurveTo=function(t,e,r,n,i,o){0===this.currentPath.points.length&&this.moveTo(0,0);for(var s,a,l,u,h,c=this.currentPath.points,p=c[c.length-2],d=c[c.length-1],f=0,g=1;20>g;g++)l=(a=(s=1-(f=g/20))*s)*s,h=(u=f*f)*f,c.push(l*p+3*a*f*t+3*s*u*r+h*i,l*d+3*a*f*e+3*s*u*n+h*o);return this.dirty=!0,this},r.Graphics.prototype.arcTo=function(t,e,r,n,i){0===this.currentPath.points.length&&this.moveTo(t,e);var o=this.currentPath.points,s=o[o.length-2],a=o[o.length-1]-e,l=s-t,u=n-e,h=r-t,c=Math.abs(a*h-l*u);if(1e-8>c||0===i)o.push(t,e);else{var p=a*a+l*l,d=u*u+h*h,f=a*u+l*h,g=i*Math.sqrt(p)/c,v=i*Math.sqrt(d)/c,m=g*f/p,y=v*f/d,x=g*h+v*l,b=g*u+v*a,_=l*(v+m),T=a*(v+m),w=h*(g+y),E=u*(g+y),S=Math.atan2(T-b,_-x),A=Math.atan2(E-b,w-x);this.arc(x+t,b+e,i,S,A,l*u>h*a)}return this.dirty=!0,this},r.Graphics.prototype.arc=function(t,e,r,n,i,o){var s=t+Math.cos(n)*r,a=e+Math.sin(n)*r,l=this.currentPath.points;if(0===l.length&&(this.moveTo(s,a),l=this.currentPath.points),n===i)return this;!o&&n>=i?i+=2*Math.PI:o&&i>=n&&(n+=2*Math.PI);var u=o?-1*(n-i):i-n,h=Math.abs(u)/(2*Math.PI)*40;if(0===u)return this;for(var c=u/(2*h),p=2*c,d=Math.cos(c),f=Math.sin(c),g=h-1,v=g%1/g,m=0;g>=m;m++){var y=c+n+p*(m+v*m),x=Math.cos(y),b=-Math.sin(y);l.push((d*x+f*b)*r+t,(d*-b+f*x)*r+e)}return this.dirty=!0,this},r.Graphics.prototype.drawPath=function(t){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:r.Graphics.POLY},this.graphicsData.push(this.currentPath),this.currentPath.points=this.currentPath.points.concat(t),this.dirty=!0,this},r.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=arguments.length<2?1:e,this},r.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},r.Graphics.prototype.drawRect=function(t,e,n,i){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,i],type:r.Graphics.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0,this},r.Graphics.prototype.drawRoundedRect=function(t,e,n,i,o){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,i,o],type:r.Graphics.RREC},this.graphicsData.push(this.currentPath),this.dirty=!0,this},r.Graphics.prototype.drawCircle=function(t,e,n){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,n],type:r.Graphics.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0,this},r.Graphics.prototype.drawEllipse=function(t,e,n,i){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,i],type:r.Graphics.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0,this},r.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null,this},r.Graphics.prototype.generateTexture=function(){var t=this.getBounds(),e=new r.CanvasBuffer(t.width,t.height),n=r.Texture.fromCanvas(e.canvas);return e.context.translate(-t.x,-t.y),r.CanvasGraphics.renderGraphics(this,e.context),n},r.Graphics.prototype._renderWebGL=function(t){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._cacheAsBitmap)return this.dirty&&(this._generateCachedSprite(),r.updateWebGLTexture(this._cachedSprite.texture.baseTexture,t.gl),this.dirty=!1),this._cachedSprite.alpha=this.alpha,void r.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),t.blendModeManager.setBlendMode(this.blendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var e=r.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(e[0],e[1])}if(r.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var n=0,i=this.children.length;i>n;n++)this.children[n]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this.mask,t),t.drawCount++,t.spriteBatch.start()}},r.Graphics.prototype._renderCanvas=function(t){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){var e=t.context,n=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=r.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t.context),e.setTransform(n.a,n.c,n.b,n.d,n.tx,n.ty),r.CanvasGraphics.renderGraphics(this,e);for(var i=0,o=this.children.length;o>i;i++)this.children[i]._renderCanvas(t);this._mask&&t.maskManager.popMask(t.context)}},r.Graphics.prototype.getBounds=function(t){this.bounds||this.updateBounds();var e=this.bounds.x,r=this.bounds.width+this.bounds.x,n=this.bounds.y,i=this.bounds.height+this.bounds.y,o=t||this.worldTransform,s=o.a,a=o.c,l=o.b,u=o.d,h=o.tx,c=o.ty,p=s*r+l*i+h,d=u*i+a*r+c,f=s*e+l*i+h,g=u*i+a*e+c,v=s*e+l*n+h,m=u*n+a*e+c,y=s*r+l*n+h,x=u*n+a*r+c,b=p,_=d,T=p,w=d;T=(T=(T=T>f?f:T)>v?v:T)>y?y:T,w=(w=(w=w>g?g:w)>m?m:w)>x?x:w,b=y>(b=v>(b=f>b?f:b)?v:b)?y:b,_=x>(_=m>(_=g>_?g:_)?m:_)?x:_;var E=this._bounds;return E.x=T,E.width=b-T,E.y=w,E.height=_-w,E},r.Graphics.prototype.updateBounds=function(){for(var t,e,n,i,o,s=1/0,a=-1/0,l=1/0,u=-1/0,h=0;h<this.graphicsData.length;h++){var c=this.graphicsData[h],p=c.type,d=c.lineWidth;if(t=c.points,p===r.Graphics.RECT)e=t[0]-d/2,n=t[1]-d/2,s=s>e?e:s,a=e+(i=t[2]+d)>a?e+i:a,l=l>n?e:l,u=n+(o=t[3]+d)>u?n+o:u;else if(p===r.Graphics.CIRC||p===r.Graphics.ELIP)e=t[0],n=t[1],s=s>e-(i=t[2]+d/2)?e-i:s,a=e+i>a?e+i:a,l=l>n-(o=t[3]+d/2)?n-o:l,u=n+o>u?n+o:u;else for(var f=0;f<t.length;f+=2)s=s>(e=t[f])-d?e-d:s,a=e+d>a?e+d:a,l=l>(n=t[f+1])-d?n-d:l,u=n+d>u?n+d:u}var g=this.boundsPadding;this.bounds=new r.Rectangle(s-g,l-g,a-s+2*g,u-l+2*g)},r.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var e=new r.CanvasBuffer(t.width,t.height),n=r.Texture.fromCanvas(e.canvas);this._cachedSprite=new r.Sprite(n),this._cachedSprite.buffer=e,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._cachedSprite.buffer.context.translate(-t.x,-t.y),r.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},r.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},r.Graphics.POLY=0,r.Graphics.RECT=1,r.Graphics.CIRC=2,r.Graphics.ELIP=3,r.Graphics.RREC=4,r.Strip=function(t){r.DisplayObjectContainer.call(this),this.texture=t,this.uvs=new r.Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new r.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new r.Float32Array([1,1,1,1]),this.indices=new r.Uint16Array([0,1,2,3]),this.dirty=!0},r.Strip.prototype=Object.create(r.DisplayObjectContainer.prototype),r.Strip.prototype.constructor=r.Strip,r.Strip.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||(t.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(t),t.shaderManager.setShader(t.shaderManager.stripShader),this._renderStrip(t),t.spriteBatch.start())},r.Strip.prototype._initWebGL=function(t){var e=t.gl;this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),this._uvBuffer=e.createBuffer(),this._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.verticies,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},r.Strip.prototype._renderStrip=function(t){var e=t.gl,n=t.projection,i=t.offset,o=t.shaderManager.stripShader;e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.uniformMatrix3fv(o.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(o.projectionVector,n.x,-n.y),e.uniform2f(o.offsetVector,-i.x,-i.y),e.uniform1f(o.alpha,1),this.dirty?(this.dirty=!1,e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.verticies,e.STATIC_DRAW),e.vertexAttribPointer(o.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.vertexAttribPointer(o.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]||r.createWebGLTexture(this.texture.baseTexture,e)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)):(e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.verticies),e.vertexAttribPointer(o.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.vertexAttribPointer(o.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]||r.createWebGLTexture(this.texture.baseTexture,e)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),e.drawElements(e.TRIANGLE_STRIP,this.indices.length,e.UNSIGNED_SHORT,0)},r.Strip.prototype._renderCanvas=function(t){var e=t.context,r=this.worldTransform;t.roundPixels?e.setTransform(r.a,r.c,r.b,r.d,0|r.tx,0|r.ty):e.setTransform(r.a,r.c,r.b,r.d,r.tx,r.ty);var n=this,i=n.verticies,o=n.uvs,s=i.length/2;this.count++;for(var a=0;s-2>a;a++){var l=2*a,u=i[l],h=i[l+2],c=i[l+4],p=i[l+1],d=i[l+3],f=i[l+5],g=(u+h+c)/3,v=(p+d+f)/3,m=u-g,y=p-v,x=Math.sqrt(m*m+y*y);u=g+m/x*(x+3),p=v+y/x*(x+3),y=d-v,h=g+(m=h-g)/(x=Math.sqrt(m*m+y*y))*(x+3),d=v+y/x*(x+3),y=f-v,c=g+(m=c-g)/(x=Math.sqrt(m*m+y*y))*(x+3),f=v+y/x*(x+3);var b=o[l]*n.texture.width,_=o[l+2]*n.texture.width,T=o[l+4]*n.texture.width,w=o[l+1]*n.texture.height,E=o[l+3]*n.texture.height,S=o[l+5]*n.texture.height;e.save(),e.beginPath(),e.moveTo(u,p),e.lineTo(h,d),e.lineTo(c,f),e.closePath(),e.clip();var A=b*E+w*T+_*S-E*T-w*_-b*S,C=u*E+w*c+h*S-E*c-w*h-u*S,M=b*h+u*T+_*c-h*T-u*_-b*c,R=b*E*c+w*h*T+u*_*S-u*E*T-w*_*c-b*h*S,O=p*E+w*f+d*S-E*f-w*d-p*S,P=b*d+p*T+_*f-d*T-p*_-b*f,D=b*E*f+w*d*T+p*_*S-p*E*T-w*_*f-b*d*S;e.transform(C/A,O/A,M/A,P/A,R/A,D/A),e.drawImage(n.texture.baseTexture.source,0,0),e.restore()}},r.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},r.Rope=function(t,e){r.Strip.call(this,t),this.points=e,this.verticies=new r.Float32Array(4*e.length),this.uvs=new r.Float32Array(4*e.length),this.colors=new r.Float32Array(2*e.length),this.indices=new r.Uint16Array(2*e.length),this.refresh()},r.Rope.prototype=Object.create(r.Strip.prototype),r.Rope.prototype.constructor=r.Rope,r.Rope.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,r=(t[0],this.indices),n=this.colors;this.count-=.2,e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var i,o,s,a=t.length,l=1;a>l;l++)i=t[l],s=l/(a-1),e[o=4*l]=s,e[o+1]=0,e[o+2]=s,e[o+3]=1,n[o=2*l]=1,n[o+1]=1,r[o=2*l]=o,r[o+1]=o+1,i}},r.Rope.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){var e,n=t[0],i={x:0,y:0};this.count-=.2;for(var o,s,a,l,u=this.verticies,h=t.length,c=0;h>c;c++)o=t[c],s=4*c,e=c<t.length-1?t[c+1]:o,i.y=-(e.x-n.x),i.x=e.y-n.y,10*(1-c/(h-1))>1&&1,a=Math.sqrt(i.x*i.x+i.y*i.y),l=this.texture.height/2,i.x/=a,i.y/=a,i.x*=l,i.y*=l,u[s]=o.x+i.x,u[s+1]=o.y+i.y,u[s+2]=o.x-i.x,u[s+3]=o.y-i.y,n=o;r.DisplayObjectContainer.prototype.updateTransform.call(this)}},r.Rope.prototype.setTexture=function(t){this.texture=t},r.TilingSprite=function(t,e,n){r.Sprite.call(this,t),this._width=e||100,this._height=n||100,this.tileScale=new r.Point(1,1),this.tileScaleOffset=new r.Point(1,1),this.tilePosition=new r.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=r.blendModes.NORMAL},r.TilingSprite.prototype=Object.create(r.Sprite.prototype),r.TilingSprite.prototype.constructor=r.TilingSprite,Object.defineProperty(r.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(r.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),r.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},r.TilingSprite.prototype._renderWebGL=function(t){if(!1!==this.visible&&0!==this.alpha){var e,n;for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(r.updateWebGLTexture(this.tilingTexture.baseTexture,t.gl),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(t),t.spriteBatch.start()}},r.TilingSprite.prototype._renderCanvas=function(t){if(!1!==this.visible&&0!==this.alpha){var e=t.context;this._mask&&t.maskManager.pushMask(this._mask,e),e.globalAlpha=this.worldAlpha;var n,i,o=this.worldTransform;if(e.setTransform(o.a,o.c,o.b,o.d,o.tx,o.ty),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=r.blendModesCanvas[t.currentBlendMode]);var s=this.tilePosition,a=this.tileScale;for(s.x%=this.tilingTexture.baseTexture.width,s.y%=this.tilingTexture.baseTexture.height,e.scale(a.x,a.y),e.translate(s.x,s.y),e.fillStyle=this.__tilePattern,e.fillRect(-s.x+this.anchor.x*-this._width,-s.y+this.anchor.y*-this._height,this._width/a.x,this._height/a.y),e.scale(1/a.x,1/a.y),e.translate(-s.x,-s.y),this._mask&&t.maskManager.popMask(t.context),n=0,i=this.children.length;i>n;n++)this.children[n]._renderCanvas(t)}},r.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,r=t*(1-this.anchor.x),n=t*-this.anchor.x,i=e*(1-this.anchor.y),o=e*-this.anchor.y,s=this.worldTransform,a=s.a,l=s.c,u=s.b,h=s.d,c=s.tx,p=s.ty,d=a*n+u*o+c,f=h*o+l*n+p,g=a*r+u*o+c,v=h*o+l*r+p,m=a*r+u*i+c,y=h*i+l*r+p,x=a*n+u*i+c,b=h*i+l*n+p,_=-1/0,T=-1/0,w=1/0,E=1/0;w=(w=(w=(w=w>d?d:w)>g?g:w)>m?m:w)>x?x:w,E=(E=(E=(E=E>f?f:E)>v?v:E)>y?y:E)>b?b:E,_=x>(_=m>(_=g>(_=d>_?d:_)?g:_)?m:_)?x:_,T=b>(T=y>(T=v>(T=f>T?f:T)?v:T)?y:T)?b:T;var S=this._bounds;return S.x=w,S.width=_-w,S.y=E,S.height=T-E,this._currentBounds=S,S},r.TilingSprite.prototype.onTextureUpdate=function(){},r.TilingSprite.prototype.generateTilingTexture=function(t){if(this.texture.baseTexture.hasLoaded){var e,n,i,o=this.texture,s=o.frame,a=s.width!==o.baseTexture.width||s.height!==o.baseTexture.height,l=!1;if(t?(e=r.getNextPowerOfTwo(s.width),n=r.getNextPowerOfTwo(s.height),(s.width!==e||s.height!==n)&&(l=!0)):a&&(e=s.width,n=s.height,l=!0),l)this.tilingTexture&&this.tilingTexture.isTiling?((i=this.tilingTexture.canvasBuffer).resize(e,n),this.tilingTexture.baseTexture.width=e,this.tilingTexture.baseTexture.height=n,this.tilingTexture.needsUpdate=!0):(i=new r.CanvasBuffer(e,n),this.tilingTexture=r.Texture.fromCanvas(i.canvas),this.tilingTexture.canvasBuffer=i,this.tilingTexture.isTiling=!0),i.context.drawImage(o.baseTexture.source,o.crop.x,o.crop.y,o.crop.width,o.crop.height,0,0,e,n),this.tileScaleOffset.x=s.width/e,this.tileScaleOffset.y=s.height/n;else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=o;this.refreshTexture=!1,this.tilingTexture.baseTexture._powerOf2=!0}};var s={BoneData:function(t,e){this.name=t,this.parent=e}};s.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},s.SlotData=function(t,e){this.name=t,this.boneData=e},s.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},s.Bone=function(t,e){this.data=t,this.parent=e,this.setToSetupPose()},s.Bone.yDown=!1,s.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(t,e){var r=this.parent;null!=r?(this.worldX=this.x*r.m00+this.y*r.m01+r.worldX,this.worldY=this.x*r.m10+this.y*r.m11+r.worldY,this.worldScaleX=r.worldScaleX*this.scaleX,this.worldScaleY=r.worldScaleY*this.scaleY,this.worldRotation=r.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var n=this.worldRotation*Math.PI/180,i=Math.cos(n),o=Math.sin(n);this.m00=i*this.worldScaleX,this.m10=o*this.worldScaleX,this.m01=-o*this.worldScaleY,this.m11=i*this.worldScaleY,t&&(this.m00=-this.m00,this.m01=-this.m01),e&&(this.m10=-this.m10,this.m11=-this.m11),s.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY}},s.Slot=function(t,e,r){this.data=t,this.skeleton=e,this.bone=r,this.setToSetupPose()},s.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(t){this.attachment=t,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(t){this._attachmentTime=this.skeleton.time-t},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.skeleton.data.slots,r=0,n=e.length;n>r;r++)if(e[r]==t){this.setAttachment(t.attachmentName?this.skeleton.getAttachmentBySlotIndex(r,t.attachmentName):null);break}}},s.Skin=function(t){this.name=t,this.attachments={}},s.Skin.prototype={addAttachment:function(t,e,r){this.attachments[t+":"+e]=r},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var r in e.attachments){var n=r.indexOf(":"),i=parseInt(r.substring(0,n),10),o=r.substring(n+1),s=t.slots[i];if(s.attachment&&s.attachment.name==o){var a=this.getAttachment(i,o);a&&s.setAttachment(a)}}}},s.Animation=function(t,e,r){this.name=t,this.timelines=e,this.duration=r},s.Animation.prototype={apply:function(t,e,r){r&&this.duration&&(e%=this.duration);for(var n=this.timelines,i=0,o=n.length;o>i;i++)n[i].apply(t,e,1)},mix:function(t,e,r,n){r&&this.duration&&(e%=this.duration);for(var i=this.timelines,o=0,s=i.length;s>o;o++)i[o].apply(t,e,n)}},s.binarySearch=function(t,e,r){var n=0,i=Math.floor(t.length/r)-2;if(!i)return r;for(var o=i>>>1;;){if(t[(o+1)*r]<=e?n=o+1:i=o,n==i)return(n+1)*r;o=n+i>>>1}},s.linearSearch=function(t,e,r){for(var n=0,i=t.length-r;i>=n;n+=r)if(t[n]>e)return n;return-1},s.Curves=function(t){this.curves=[],this.curves.length=6*(t-1)},s.Curves.prototype={setLinear:function(t){this.curves[6*t]=0},setStepped:function(t){this.curves[6*t]=-1},setCurve:function(t,e,r,n,i){var o=.1*.1,s=.1*o,a=3*o,l=6*o,u=6*s,h=2*-e+n,c=2*-r+i,p=3*(e-n)+1,d=3*(r-i)+1,f=6*t,g=this.curves;g[f]=e*(3*.1)+h*a+p*s,g[f+1]=r*(3*.1)+c*a+d*s,g[f+2]=h*l+p*u,g[f+3]=c*l+d*u,g[f+4]=p*u,g[f+5]=d*u},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var r=6*t,n=this.curves,i=n[r];if(!i)return e;if(-1==i)return 0;for(var o=n[r+1],s=n[r+2],a=n[r+3],l=n[r+4],u=n[r+5],h=i,c=o,p=8;;){if(h>=e){var d=h-i,f=c-o;return f+(c-f)*(e-d)/(h-d)}if(!p)break;p--,i+=s,o+=a,s+=l,a+=u,h+=i,c+=o}return c+(1-c)*(e-h)/(1-h)}},s.RotateTimeline=function(t){this.curves=new s.Curves(t),this.frames=[],this.frames.length=2*t},s.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,r){t*=2,this.frames[t]=e,this.frames[t+1]=r},apply:function(t,e,r){var n,i=this.frames;if(!(e<i[0])){var o=t.bones[this.boneIndex];if(e>=i[i.length-2]){for(n=o.data.rotation+i[i.length-1]-o.rotation;n>180;)n-=360;for(;-180>n;)n+=360;return void(o.rotation+=n*r)}var a=s.binarySearch(i,e,2),l=i[a-1],u=i[a],h=1-(e-u)/(i[a-2]-u);for(h=this.curves.getCurvePercent(a/2-1,h),n=i[a+1]-l;n>180;)n-=360;for(;-180>n;)n+=360;for(n=o.data.rotation+(l+n*h)-o.rotation;n>180;)n-=360;for(;-180>n;)n+=360;o.rotation+=n*r}}},s.TranslateTimeline=function(t){this.curves=new s.Curves(t),this.frames=[],this.frames.length=3*t},s.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,r,n){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n},apply:function(t,e,r){var n=this.frames;if(!(e<n[0])){var i=t.bones[this.boneIndex];if(e>=n[n.length-3])return i.x+=(i.data.x+n[n.length-2]-i.x)*r,void(i.y+=(i.data.y+n[n.length-1]-i.y)*r);var o=s.binarySearch(n,e,3),a=n[o-2],l=n[o-1],u=n[o],h=1-(e-u)/(n[o+-3]-u);h=this.curves.getCurvePercent(o/3-1,h),i.x+=(i.data.x+a+(n[o+1]-a)*h-i.x)*r,i.y+=(i.data.y+l+(n[o+2]-l)*h-i.y)*r}}},s.ScaleTimeline=function(t){this.curves=new s.Curves(t),this.frames=[],this.frames.length=3*t},s.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,r,n){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n},apply:function(t,e,r){var n=this.frames;if(!(e<n[0])){var i=t.bones[this.boneIndex];if(e>=n[n.length-3])return i.scaleX+=(i.data.scaleX-1+n[n.length-2]-i.scaleX)*r,void(i.scaleY+=(i.data.scaleY-1+n[n.length-1]-i.scaleY)*r);var o=s.binarySearch(n,e,3),a=n[o-2],l=n[o-1],u=n[o],h=1-(e-u)/(n[o+-3]-u);h=this.curves.getCurvePercent(o/3-1,h),i.scaleX+=(i.data.scaleX-1+a+(n[o+1]-a)*h-i.scaleX)*r,i.scaleY+=(i.data.scaleY-1+l+(n[o+2]-l)*h-i.scaleY)*r}}},s.ColorTimeline=function(t){this.curves=new s.Curves(t),this.frames=[],this.frames.length=5*t},s.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,r,n,i,o){t*=5,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=i,this.frames[t+4]=o},apply:function(t,e,r){var n=this.frames;if(!(e<n[0])){var i=t.slots[this.slotIndex];if(e>=n[n.length-5]){var o=n.length-1;return i.r=n[o-3],i.g=n[o-2],i.b=n[o-1],void(i.a=n[o])}var a=s.binarySearch(n,e,5),l=n[a-4],u=n[a-3],h=n[a-2],c=n[a-1],p=n[a],d=1-(e-p)/(n[a-5]-p);d=this.curves.getCurvePercent(a/5-1,d);var f=l+(n[a+1]-l)*d,g=u+(n[a+2]-u)*d,v=h+(n[a+3]-h)*d,m=c+(n[a+4]-c)*d;1>r?(i.r+=(f-i.r)*r,i.g+=(g-i.g)*r,i.b+=(v-i.b)*r,i.a+=(m-i.a)*r):(i.r=f,i.g=g,i.b=v,i.a=m)}}},s.AttachmentTimeline=function(t){this.curves=new s.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},s.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r},apply:function(t,e){var r=this.frames;if(!(e<r[0])){var n;n=e>=r[r.length-1]?r.length-1:s.binarySearch(r,e,1)-1;var i=this.attachmentNames[n];t.slots[this.slotIndex].setAttachment(i?t.getAttachmentBySlotIndex(this.slotIndex,i):null)}}},s.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},s.SkeletonData.prototype={defaultSkin:null,findBone:function(t){for(var e=this.bones,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null},findBoneIndex:function(t){for(var e=this.bones,r=0,n=e.length;n>r;r++)if(e[r].name==t)return r;return-1},findSlot:function(t){for(var e=this.slots,r=0,n=e.length;n>r;r++)if(e[r].name==t)return slot[r];return null},findSlotIndex:function(t){for(var e=this.slots,r=0,n=e.length;n>r;r++)if(e[r].name==t)return r;return-1},findSkin:function(t){for(var e=this.skins,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null},findAnimation:function(t){for(var e=this.animations,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null}},s.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,r=t.bones.length;r>e;e++){var n=t.bones[e],i=n.parent?this.bones[t.bones.indexOf(n.parent)]:null;this.bones.push(new s.Bone(n,i))}for(this.slots=[],this.drawOrder=[],e=0,r=t.slots.length;r>e;e++){var o=t.slots[e],a=this.bones[t.bones.indexOf(o.boneData)],l=new s.Slot(o,this,a);this.slots.push(l),this.drawOrder.push(l)}},s.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var t=this.flipX,e=this.flipY,r=this.bones,n=0,i=r.length;i>n;n++)r[n].updateWorldTransform(t,e)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,r=t.length;r>e;e++)t[e].setToSetupPose()},setSlotsToSetupPose:function(){for(var t=this.slots,e=0,r=t.length;r>e;e++)t[e].setToSetupPose(e)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,r=0,n=e.length;n>r;r++)if(e[r].data.name==t)return e[r];return null},findBoneIndex:function(t){for(var e=this.bones,r=0,n=e.length;n>r;r++)if(e[r].data.name==t)return r;return-1},findSlot:function(t){for(var e=this.slots,r=0,n=e.length;n>r;r++)if(e[r].data.name==t)return e[r];return null},findSlotIndex:function(t){for(var e=this.slots,r=0,n=e.length;n>r;r++)if(e[r].data.name==t)return r;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){this.skin&&t&&t._attachAll(this,this.skin),this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var r=this.skin.getAttachment(t,e);if(r)return r}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var r=this.slots,n=0,i=r.size;i>n;n++){var o=r[n];if(o.data.name==t){var s=null;if(e&&null==(s=this.getAttachment(n,e)))throw"Attachment not found: "+e+", for slot: "+t;return void o.setAttachment(s)}}throw"Slot not found: "+t},update:function(t){time+=t}},s.AttachmentType={region:0},s.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},s.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,r,n,i){var o=this.uvs;i?(o[2]=t,o[3]=n,o[4]=t,o[5]=e,o[6]=r,o[7]=e,o[0]=r,o[1]=n):(o[0]=t,o[1]=n,o[2]=t,o[3]=e,o[4]=r,o[5]=e,o[6]=r,o[7]=n)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.regionOffsetX*t,n=-this.height/2*this.scaleY+this.regionOffsetY*e,i=r+this.regionWidth*t,o=n+this.regionHeight*e,s=this.rotation*Math.PI/180,a=Math.cos(s),l=Math.sin(s),u=r*a+this.x,h=r*l,c=n*a+this.y,p=n*l,d=i*a+this.x,f=i*l,g=o*a+this.y,v=o*l,m=this.offset;m[0]=u-p,m[1]=c+h,m[2]=u-v,m[3]=g+h,m[4]=d-v,m[5]=g+f,m[6]=d-p,m[7]=c+f},computeVertices:function(t,e,r,n){t+=r.worldX,e+=r.worldY;var i=r.m00,o=r.m01,s=r.m10,a=r.m11,l=this.offset;n[0]=l[0]*i+l[1]*o+t,n[1]=l[0]*s+l[1]*a+e,n[2]=l[2]*i+l[3]*o+t,n[3]=l[2]*s+l[3]*a+e,n[4]=l[4]*i+l[5]*o+t,n[5]=l[4]*s+l[5]*a+e,n[6]=l[6]*i+l[7]*o+t,n[7]=l[6]*s+l[7]*a+e}},s.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},s.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,r){var n=this.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;var i=this.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;this.setMix(n,i,r)},setMix:function(t,e,r){this.animationToMixTime[t.name+":"+e.name]=r},getMix:function(t,e){var r=this.animationToMixTime[t.name+":"+e.name];return r||this.defaultMix}},s.AnimationState=function(t){this.data=t,this.queue=[]},s.AnimationState.prototype={animationSpeed:1,current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(t){if(this.currentTime+=t*this.animationSpeed,this.previousTime+=t,this.mixTime+=t,this.queue.length>0){var e=this.queue[0];this.currentTime>=e.delay&&(this._setAnimation(e.animation,e.loop),this.queue.shift())}},apply:function(t){if(this.current)if(this.previous){this.previous.apply(t,this.previousTime,this.previousLoop);var e=this.mixTime/this.mixDuration;e>=1&&(e=1,this.previous=null),this.current.mix(t,this.currentTime,this.currentLoop,e)}else this.current.apply(t,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(t,e){this.previous=null,t&&this.current&&(this.mixDuration=this.data.getMix(this.current,t),this.mixDuration>0&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=t,this.currentLoop=e,this.currentTime=0},setAnimationByName:function(t,e){var r=this.data.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;this.setAnimation(r,e)},setAnimation:function(t,e){this.queue.length=0,this._setAnimation(t,e)},addAnimationByName:function(t,e,r){var n=this.data.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;this.addAnimation(n,e,r)},addAnimation:function(t,e,r){var n={};if(n.animation=t,n.loop=e,!r||0>=r){var i=this.queue.length?this.queue[this.queue.length-1].animation:this.current;r=null!=i?i.duration-this.data.getMix(i,t)+(r||0):0}n.delay=r,this.queue.push(n)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},s.SkeletonJson=function(t){this.attachmentLoader=t},s.SkeletonJson.prototype={scale:1,readSkeletonData:function(t){for(var e,r=new s.SkeletonData,n=t.bones,i=0,o=n.length;o>i;i++){var a=n[i],l=null;if(a.parent&&!(l=r.findBone(a.parent)))throw"Parent bone not found: "+a.parent;(e=new s.BoneData(a.name,l)).length=(a.length||0)*this.scale,e.x=(a.x||0)*this.scale,e.y=(a.y||0)*this.scale,e.rotation=a.rotation||0,e.scaleX=a.scaleX||1,e.scaleY=a.scaleY||1,r.bones.push(e)}var u=t.slots;for(i=0,o=u.length;o>i;i++){var h=u[i];if(!(e=r.findBone(h.bone)))throw"Slot bone not found: "+h.bone;var c=new s.SlotData(h.name,e),p=h.color;p&&(c.r=s.SkeletonJson.toColor(p,0),c.g=s.SkeletonJson.toColor(p,1),c.b=s.SkeletonJson.toColor(p,2),c.a=s.SkeletonJson.toColor(p,3)),c.attachmentName=h.attachment,r.slots.push(c)}var d=t.skins;for(var f in d)if(d.hasOwnProperty(f)){var g=d[f],v=new s.Skin(f);for(var m in g)if(g.hasOwnProperty(m)){var y=r.findSlotIndex(m),x=g[m];for(var b in x)if(x.hasOwnProperty(b)){var _=this.readAttachment(v,b,x[b]);null!=_&&v.addAttachment(y,b,_)}}r.skins.push(v),"default"==v.name&&(r.defaultSkin=v)}var T=t.animations;for(var w in T)T.hasOwnProperty(w)&&this.readAnimation(w,T[w],r);return r},readAttachment:function(t,e,r){e=r.name||e;var n=s.AttachmentType[r.type||"region"];if(n==s.AttachmentType.region){var i=new s.RegionAttachment;return i.x=(r.x||0)*this.scale,i.y=(r.y||0)*this.scale,i.scaleX=r.scaleX||1,i.scaleY=r.scaleY||1,i.rotation=r.rotation||0,i.width=(r.width||32)*this.scale,i.height=(r.height||32)*this.scale,i.updateOffset(),i.rendererObject={},i.rendererObject.name=e,i.rendererObject.scale={},i.rendererObject.scale.x=i.scaleX,i.rendererObject.scale.y=i.scaleY,i.rendererObject.rotation=-i.rotation*Math.PI/180,i}throw"Unknown attachment type: "+n},readAnimation:function(t,e,r){var n,i,o,a,l,u,h,c=[],p=0,d=e.bones;for(var f in d)if(d.hasOwnProperty(f)){var g=r.findBoneIndex(f);if(-1==g)throw"Bone not found: "+f;var v=d[f];for(o in v)if(v.hasOwnProperty(o))if(l=v[o],"rotate"==o){for((i=new s.RotateTimeline(l.length)).boneIndex=g,n=0,u=0,h=l.length;h>u;u++)a=l[u],i.setFrame(n,a.time,a.angle),s.SkeletonJson.readCurve(i,n,a),n++;c.push(i),p=Math.max(p,i.frames[2*i.getFrameCount()-2])}else{if("translate"!=o&&"scale"!=o)throw"Invalid timeline type for a bone: "+o+" ("+f+")";var m=1;for("scale"==o?i=new s.ScaleTimeline(l.length):(i=new s.TranslateTimeline(l.length),m=this.scale),i.boneIndex=g,n=0,u=0,h=l.length;h>u;u++){var y=((a=l[u]).x||0)*m,x=(a.y||0)*m;i.setFrame(n,a.time,y,x),s.SkeletonJson.readCurve(i,n,a),n++}c.push(i),p=Math.max(p,i.frames[3*i.getFrameCount()-3])}}var b=e.slots;for(var _ in b)if(b.hasOwnProperty(_)){var T=b[_],w=r.findSlotIndex(_);for(o in T)if(T.hasOwnProperty(o))if(l=T[o],"color"==o){for((i=new s.ColorTimeline(l.length)).slotIndex=w,n=0,u=0,h=l.length;h>u;u++){var E=(a=l[u]).color,S=s.SkeletonJson.toColor(E,0),A=s.SkeletonJson.toColor(E,1),C=s.SkeletonJson.toColor(E,2),M=s.SkeletonJson.toColor(E,3);i.setFrame(n,a.time,S,A,C,M),s.SkeletonJson.readCurve(i,n,a),n++}c.push(i),p=Math.max(p,i.frames[5*i.getFrameCount()-5])}else{if("attachment"!=o)throw"Invalid timeline type for a slot: "+o+" ("+_+")";for((i=new s.AttachmentTimeline(l.length)).slotIndex=w,n=0,u=0,h=l.length;h>u;u++)a=l[u],i.setFrame(n++,a.time,a.name);c.push(i),p=Math.max(p,i.frames[i.getFrameCount()-1])}}r.animations.push(new s.Animation(t,c,p))}},s.SkeletonJson.readCurve=function(t,e,r){var n=r.curve;n&&("stepped"==n?t.curves.setStepped(e):n instanceof Array&&t.curves.setCurve(e,n[0],n[1],n[2],n[3]))},s.SkeletonJson.toColor=function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substr(2*e,2),16)/255},s.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var r=new s.AtlasReader(t),n=[];n.length=4;for(var i=null;;){var o=r.readLine();if(null==o)break;if((o=r.trim(o)).length)if(i){var a=new s.AtlasRegion;a.name=o,a.page=i,a.rotate="true"==r.readValue(),r.readTuple(n);var l=parseInt(n[0],10),u=parseInt(n[1],10);r.readTuple(n);var h=parseInt(n[0],10),c=parseInt(n[1],10);a.u=l/i.width,a.v=u/i.height,a.rotate?(a.u2=(l+c)/i.width,a.v2=(u+h)/i.height):(a.u2=(l+h)/i.width,a.v2=(u+c)/i.height),a.x=l,a.y=u,a.width=Math.abs(h),a.height=Math.abs(c),4==r.readTuple(n)&&(a.splits=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)],4==r.readTuple(n)&&(a.pads=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)],r.readTuple(n))),a.originalWidth=parseInt(n[0],10),a.originalHeight=parseInt(n[1],10),r.readTuple(n),a.offsetX=parseInt(n[0],10),a.offsetY=parseInt(n[1],10),a.index=parseInt(r.readValue(),10),this.regions.push(a)}else{(i=new s.AtlasPage).name=o,i.format=s.Atlas.Format[r.readValue()],r.readTuple(n),i.minFilter=s.Atlas.TextureFilter[n[0]],i.magFilter=s.Atlas.TextureFilter[n[1]];var p=r.readValue();i.uWrap=s.Atlas.TextureWrap.clampToEdge,i.vWrap=s.Atlas.TextureWrap.clampToEdge,"x"==p?i.uWrap=s.Atlas.TextureWrap.repeat:"y"==p?i.vWrap=s.Atlas.TextureWrap.repeat:"xy"==p&&(i.uWrap=i.vWrap=s.Atlas.TextureWrap.repeat),e.load(i,o),this.pages.push(i)}else i=null}},s.Atlas.prototype={findRegion:function(t){for(var e=this.regions,r=0,n=e.length;n>r;r++)if(e[r].name==t)return e[r];return null},dispose:function(){for(var t=this.pages,e=0,r=t.length;r>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,r=0,n=e.length;n>r;r++){var i=e[r];i.page==t&&(i.u=i.x/t.width,i.v=i.y/t.height,i.rotate?(i.u2=(i.x+i.height)/t.width,i.v2=(i.y+i.width)/t.height):(i.u2=(i.x+i.width)/t.width,i.v2=(i.y+i.height)/t.height))}}},s.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},s.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},s.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},s.AtlasPage=function(){},s.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},s.AtlasRegion=function(){},s.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},s.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},s.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),r=e.indexOf(":");if(-1==r)throw"Invalid line: "+e;for(var n=0,i=r+1;3>n;n++){var o=e.indexOf(",",i);if(-1==o){if(!n)throw"Invalid line: "+e;break}t[n]=this.trim(e.substr(i,o-i)),i=o+1}return t[n]=this.trim(e.substring(i)),n+1}},s.AtlasAttachmentLoader=function(t){this.atlas=t},s.AtlasAttachmentLoader.prototype={newAttachment:function(t,e,r){switch(e){case s.AttachmentType.region:var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" ("+e+")";var i=new s.RegionAttachment(r);return i.rendererObject=n,i.setUVs(n.u,n.v,n.u2,n.v2,n.rotate),i.regionOffsetX=n.offsetX,i.regionOffsetY=n.offsetY,i.regionWidth=n.width,i.regionHeight=n.height,i.regionOriginalWidth=n.originalWidth,i.regionOriginalHeight=n.originalHeight,i}throw"Unknown attachment type: "+e}},s.Bone.yDown=!0,r.AnimCache={},r.Spine=function(t){if(r.DisplayObjectContainer.call(this),this.spineData=r.AnimCache[t],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+t);this.skeleton=new s.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new s.AnimationStateData(this.spineData),this.state=new s.AnimationState(this.stateData),this.slotContainers=[];for(var e=0,n=this.skeleton.drawOrder.length;n>e;e++){var i=this.skeleton.drawOrder[e],o=i.attachment,a=new r.DisplayObjectContainer;if(this.slotContainers.push(a),this.addChild(a),o instanceof s.RegionAttachment){var l=o.rendererObject.name,u=this.createSprite(i,o.rendererObject);i.currentSprite=u,i.currentSpriteName=l,a.addChild(u)}}},r.Spine.prototype=Object.create(r.DisplayObjectContainer.prototype),r.Spine.prototype.constructor=r.Spine,r.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,n=0,i=e.length;i>n;n++){var o=e[n],a=o.attachment,l=this.slotContainers[n];if(a instanceof s.RegionAttachment){if(a.rendererObject&&(!o.currentSpriteName||o.currentSpriteName!=a.name)){var u=a.rendererObject.name;if(void 0!==o.currentSprite&&(o.currentSprite.visible=!1),o.sprites=o.sprites||{},void 0!==o.sprites[u])o.sprites[u].visible=!0;else{var h=this.createSprite(o,a.rendererObject);l.addChild(h)}o.currentSprite=o.sprites[u],o.currentSpriteName=u}l.visible=!0;var c=o.bone;l.position.x=c.worldX+a.x*c.m00+a.y*c.m01,l.position.y=c.worldY+a.x*c.m10+a.y*c.m11,l.scale.x=c.worldScaleX,l.scale.y=c.worldScaleY,l.rotation=-o.bone.worldRotation*Math.PI/180,l.alpha=o.a,o.currentSprite.tint=r.rgb2hex([o.r,o.g,o.b])}else l.visible=!1}r.DisplayObjectContainer.prototype.updateTransform.call(this)},r.Spine.prototype.createSprite=function(t,e){var n=r.TextureCache[e.name]?e.name:e.name+".png",i=new r.Sprite(r.Texture.fromFrame(n));return i.scale=e.scale,i.rotation=e.rotation,i.anchor.x=i.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[e.name]=i,i},r.BaseTextureCache={},r.texturesToUpdate=[],r.texturesToDestroy=[],r.BaseTextureCacheIdGenerator=0,r.BaseTexture=function(t,e){if(r.EventTarget.call(this),this.width=100,this.height=100,this.scaleMode=e||r.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this.id=r.BaseTextureCacheIdGenerator++,this.premultipliedAlpha=!0,this._glTextures=[],this._dirty=[],t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,r.texturesToUpdate.push(this);else{var n=this;this.source.onload=function(){n.hasLoaded=!0,n.width=n.source.width,n.height=n.source.height;for(var t=0;t<n._glTextures.length;t++)n._dirty[t]=!0;n.dispatchEvent({type:"loaded",content:n})},this.source.onerror=function(){n.dispatchEvent({type:"error",content:n})}}this.imageUrl=null,this._powerOf2=!1}},r.BaseTexture.prototype.constructor=r.BaseTexture,r.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete r.BaseTextureCache[this.imageUrl],delete r.TextureCache[this.imageUrl],this.imageUrl=null,this.source.src=null):this.source&&this.source._pixiId&&delete r.BaseTextureCache[this.source._pixiId],this.source=null,r.texturesToDestroy.push(this)},r.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},r.BaseTexture.fromImage=function(t,e,n){var i=r.BaseTextureCache[t];if(void 0===e&&-1===t.indexOf("data:")&&(e=!0),!i){var o=new Image;e&&(o.crossOrigin=""),o.src=t,(i=new r.BaseTexture(o,n)).imageUrl=t,r.BaseTextureCache[t]=i}return i},r.BaseTexture.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+r.TextureCacheIdGenerator++);var n=r.BaseTextureCache[t._pixiId];return n||(n=new r.BaseTexture(t,e),r.BaseTextureCache[t._pixiId]=n),n},r.TextureCache={},r.FrameCache={},r.TextureCacheIdGenerator=0,r.Texture=function(t,e){if(r.EventTarget.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new r.Rectangle(0,0,1,1)),t instanceof r.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=null,this.valid=!1,this.scope=this,this._uvs=null,this.width=0,this.height=0,this.crop=new r.Rectangle(0,0,1,1),t.hasLoaded)this.noFrame&&(e=new r.Rectangle(0,0,t.width,t.height)),this.setFrame(e);else{var n=this;t.addEventListener("loaded",function(){n.onBaseTextureLoaded()})}},r.Texture.prototype.constructor=r.Texture,r.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new r.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.scope.dispatchEvent({type:"update",content:this})},r.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},r.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&r.Texture.frameUpdates.push(this)},r.Texture.prototype._updateWebGLuvs=function(){this._uvs||(this._uvs=new r.TextureUvs);var t=this.crop,e=this.baseTexture.width,n=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/n,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/n,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/n,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/n},r.Texture.fromImage=function(t,e,n){var i=r.TextureCache[t];return i||(i=new r.Texture(r.BaseTexture.fromImage(t,e,n)),r.TextureCache[t]=i),i},r.Texture.fromFrame=function(t){var e=r.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return e},r.Texture.fromCanvas=function(t,e){var n=r.BaseTexture.fromCanvas(t,e);return new r.Texture(n)},r.Texture.addTextureToCache=function(t,e){r.TextureCache[e]=t},r.Texture.removeTextureFromCache=function(t){var e=r.TextureCache[t];return delete r.TextureCache[t],delete r.BaseTextureCache[t],e},r.Texture.frameUpdates=[],r.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},r.RenderTexture=function(t,e,n,i){if(r.EventTarget.call(this),this.width=t||100,this.height=e||100,this.frame=new r.Rectangle(0,0,this.width,this.height),this.crop=new r.Rectangle(0,0,this.width,this.height),this.baseTexture=new r.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTextures=[],this.baseTexture.scaleMode=i||r.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,this.renderer=n||r.defaultRenderer,this.renderer.type===r.WEBGL_RENDERER){var o=this.renderer.gl;this.textureBuffer=new r.FilterTexture(o,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[o.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new r.Point(this.width/2,-this.height/2)}else this.render=this.renderCanvas,this.textureBuffer=new r.CanvasBuffer(this.width,this.height),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,r.Texture.frameUpdates.push(this)},r.RenderTexture.prototype=Object.create(r.Texture.prototype),r.RenderTexture.prototype.constructor=r.RenderTexture,r.RenderTexture.prototype.resize=function(t,e,n){(t!==this.width||e!==this.height)&&(this.width=this.frame.width=this.crop.width=t,this.height=this.frame.height=this.crop.height=e,n&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===r.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.textureBuffer.resize(this.width,this.height))},r.RenderTexture.prototype.clear=function(){this.renderer.type===r.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear()},r.RenderTexture.prototype.renderWebGL=function(t,e,n){var i=this.renderer.gl;i.colorMask(!0,!0,!0,!0),i.viewport(0,0,this.width,this.height),i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),n&&this.textureBuffer.clear();var o=t.children,s=t.worldTransform;t.worldTransform=r.RenderTexture.tempMatrix,t.worldTransform.d=-1,t.worldTransform.ty=-2*this.projection.y,e&&(t.worldTransform.tx=e.x,t.worldTransform.ty-=e.y);for(var a=0,l=o.length;l>a;a++)o[a].updateTransform();r.WebGLRenderer.updateTextures(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),t.worldTransform=s,this.renderer.spriteBatch.dirty=!0},r.RenderTexture.prototype.renderCanvas=function(t,e,n){var i=t.children,o=t.worldTransform;t.worldTransform=r.RenderTexture.tempMatrix,e?(t.worldTransform.tx=e.x,t.worldTransform.ty=e.y):(t.worldTransform.tx=0,t.worldTransform.ty=0);for(var s=0,a=i.length;a>s;s++)i[s].updateTransform();n&&this.textureBuffer.clear();var l=this.textureBuffer.context;this.renderer.renderDisplayObject(t,l),l.setTransform(1,0,0,1,0,0),t.worldTransform=o},r.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},r.RenderTexture.prototype.getBase64=function(){if(this.renderer.type===r.WEBGL_RENDERER){var t=this.renderer.gl,e=this.textureBuffer.width,n=this.textureBuffer.height,i=new Uint8Array(4*e*n);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,n,t.RGBA,t.UNSIGNED_BYTE,i),t.bindFramebuffer(t.FRAMEBUFFER,null);for(var o=new r.CanvasBuffer(e,n),s=o.context.getImageData(0,0,e,n),a=s.data,l=0;l<i.length;l+=4){var u=i[l+3];a[l]=i[l]*u,a[l+1]=i[l+1]*u,a[l+2]=i[l+2]*u,a[l+3]=u}return o.context.putImageData(s,0,0),o.canvas.toDataURL()}return this.textureBuffer.canvas.toDataURL()},r.RenderTexture.tempMatrix=new r.Matrix,r.AssetLoader=function(t,e){r.EventTarget.call(this),this.assetURLs=t,this.crossorigin=e,this.loadersByType={jpg:r.ImageLoader,jpeg:r.ImageLoader,png:r.ImageLoader,gif:r.ImageLoader,webp:r.ImageLoader,json:r.JsonLoader,atlas:r.AtlasLoader,anim:r.SpineLoader,xml:r.BitmapFontLoader,fnt:r.BitmapFontLoader}},r.AssetLoader.prototype.constructor=r.AssetLoader,r.AssetLoader.prototype._getDataType=function(t){var e="data:";if(t.slice(0,e.length).toLowerCase()===e){var r=t.slice(e.length),n=r.indexOf(",");if(-1===n)return null;var i=r.slice(0,n).split(";")[0];return i&&"text/plain"!==i.toLowerCase()?i.split("/").pop().toLowerCase():"txt"}return null},r.AssetLoader.prototype.load=function(){function t(t){e.onAssetLoaded(t.content)}var e=this;this.loadCount=this.assetURLs.length;for(var r=0;r<this.assetURLs.length;r++){var n=this.assetURLs[r],i=this._getDataType(n);i||(i=n.split("?").shift().split(".").pop().toLowerCase());var o=this.loadersByType[i];if(!o)throw new Error(i+" is an unsupported file type");var s=new o(n,this.crossorigin);s.addEventListener("loaded",t),s.load()}},r.AssetLoader.prototype.onAssetLoaded=function(t){this.loadCount--,this.dispatchEvent({type:"onProgress",content:this,loader:t}),this.onProgress&&this.onProgress(t),this.loadCount||(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())},r.JsonLoader=function(t,e){r.EventTarget.call(this),this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.loaded=!1},r.JsonLoader.prototype.constructor=r.JsonLoader,r.JsonLoader.prototype.load=function(){var t=this;window.XDomainRequest&&t.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){t.onError()},this.ajaxRequest.ontimeout=function(){t.onError()},this.ajaxRequest.onprogress=function(){}):this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onload=function(){t.onJSONLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},r.JsonLoader.prototype.onJSONLoaded=function(){if(this.ajaxRequest.responseText)if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames){var t=this,e=this.baseUrl+this.json.meta.image,n=new r.ImageLoader(e,this.crossorigin),i=this.json.frames;for(var o in this.texture=n.texture.baseTexture,n.addEventListener("loaded",function(){t.onLoaded()}),i){var a=i[o].frame;if(a&&(r.TextureCache[o]=new r.Texture(this.texture,{x:a.x,y:a.y,width:a.w,height:a.h}),r.TextureCache[o].crop=new r.Rectangle(a.x,a.y,a.w,a.h),i[o].trimmed)){var l=i[o].sourceSize,u=i[o].spriteSourceSize;r.TextureCache[o].trim=new r.Rectangle(u.x,u.y,l.w,l.h)}}n.load()}else if(this.json.bones){var h=(new s.SkeletonJson).readSkeletonData(this.json);r.AnimCache[this.url]=h,this.onLoaded()}else this.onLoaded();else this.onError()},r.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},r.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},r.AtlasLoader=function(t,e){r.EventTarget.call(this),this.url=t,this.baseUrl=t.replace(/[^\/]*$/,""),this.crossorigin=e,this.loaded=!1},r.AtlasLoader.constructor=r.AtlasLoader,r.AtlasLoader.prototype.load=function(){this.ajaxRequest=new r.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},r.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var t=this.ajaxRequest.responseText.split(/\r?\n/),e=-3,n=0,i=null,o=!1,s=0,a=0,l=this.onLoaded.bind(this);for(s=0;s<t.length;s++)if(t[s]=t[s].replace(/^\s+|\s+$/g,""),""===t[s]&&(o=s+1),t[s].length>0){if(o===s)this.atlas.meta.image.push(t[s]),n=this.atlas.meta.image.length-1,this.atlas.frames.push({}),e=-3;else if(e>0)if(e%7==1)null!=i&&(this.atlas.frames[n][i.name]=i),i={name:t[s],frame:{}};else{var u=t[s].split(" ");if(e%7==3)i.frame.x=Number(u[1].replace(",","")),i.frame.y=Number(u[2]);else if(e%7==4)i.frame.w=Number(u[1].replace(",","")),i.frame.h=Number(u[2]);else if(e%7==5){var h={x:0,y:0,w:Number(u[1].replace(",","")),h:Number(u[2])};h.w>i.frame.w||h.h>i.frame.h?(i.trimmed=!0,i.realSize=h):i.trimmed=!1}}e++}if(null!=i&&(this.atlas.frames[n][i.name]=i),this.atlas.meta.image.length>0){for(this.images=[],a=0;a<this.atlas.meta.image.length;a++){var c=this.baseUrl+this.atlas.meta.image[a],p=this.atlas.frames[a];for(s in this.images.push(new r.ImageLoader(c,this.crossorigin)),p){var d=p[s].frame;d&&(r.TextureCache[s]=new r.Texture(this.images[a].texture.baseTexture,{x:d.x,y:d.y,width:d.w,height:d.h}),p[s].trimmed&&(r.TextureCache[s].realSize=p[s].realSize,r.TextureCache[s].trim.x=0,r.TextureCache[s].trim.y=0))}}for(this.currentImageId=0,a=0;a<this.images.length;a++)this.images[a].addEventListener("loaded",l);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},r.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.dispatchEvent({type:"loaded",content:this}))},r.AtlasLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},r.SpriteSheetLoader=function(t,e){r.EventTarget.call(this),this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},r.SpriteSheetLoader.prototype.constructor=r.SpriteSheetLoader,r.SpriteSheetLoader.prototype.load=function(){var t=this,e=new r.JsonLoader(this.url,this.crossorigin);e.addEventListener("loaded",function(e){t.json=e.content.json,t.onLoaded()}),e.load()},r.SpriteSheetLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},r.ImageLoader=function(t,e){r.EventTarget.call(this),this.texture=r.Texture.fromImage(t,e),this.frames=[]},r.ImageLoader.prototype.constructor=r.ImageLoader,r.ImageLoader.prototype.load=function(){if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var t=this;this.texture.baseTexture.addEventListener("loaded",function(){t.onLoaded()})}},r.ImageLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},r.ImageLoader.prototype.loadFramedSpriteSheet=function(t,e,n){this.frames=[];for(var i=Math.floor(this.texture.width/t),o=Math.floor(this.texture.height/e),s=0,a=0;o>a;a++)for(var l=0;i>l;l++,s++){var u=new r.Texture(this.texture,{x:l*t,y:a*e,width:t,height:e});this.frames.push(u),n&&(r.TextureCache[n+"-"+s]=u)}if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var h=this;this.texture.baseTexture.addEventListener("loaded",function(){h.onLoaded()})}},r.BitmapFontLoader=function(t,e){r.EventTarget.call(this),this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null},r.BitmapFontLoader.prototype.constructor=r.BitmapFontLoader,r.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new r.AjaxRequest;var t=this;this.ajaxRequest.onreadystatechange=function(){t.onXMLLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},r.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var t=this.ajaxRequest.responseXML;if(!t||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){t=(new DOMParser).parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var e=document.createElement("div");e.innerHTML=this.ajaxRequest.responseText,t=e}var n=this.baseUrl+t.getElementsByTagName("page")[0].getAttribute("file"),i=new r.ImageLoader(n,this.crossorigin);this.texture=i.texture.baseTexture;var o={},s=t.getElementsByTagName("info")[0],a=t.getElementsByTagName("common")[0];o.font=s.getAttribute("face"),o.size=parseInt(s.getAttribute("size"),10),o.lineHeight=parseInt(a.getAttribute("lineHeight"),10),o.chars={};for(var l=t.getElementsByTagName("char"),u=0;u<l.length;u++){var h=parseInt(l[u].getAttribute("id"),10),c=new r.Rectangle(parseInt(l[u].getAttribute("x"),10),parseInt(l[u].getAttribute("y"),10),parseInt(l[u].getAttribute("width"),10),parseInt(l[u].getAttribute("height"),10));o.chars[h]={xOffset:parseInt(l[u].getAttribute("xoffset"),10),yOffset:parseInt(l[u].getAttribute("yoffset"),10),xAdvance:parseInt(l[u].getAttribute("xadvance"),10),kerning:{},texture:r.TextureCache[h]=new r.Texture(this.texture,c)}}var p=t.getElementsByTagName("kerning");for(u=0;u<p.length;u++){var d=parseInt(p[u].getAttribute("first"),10),f=parseInt(p[u].getAttribute("second"),10),g=parseInt(p[u].getAttribute("amount"),10);o.chars[f].kerning[d]=g}r.BitmapText.fonts[o.font]=o;var v=this;i.addEventListener("loaded",function(){v.onLoaded()}),i.load()}},r.BitmapFontLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},r.SpineLoader=function(t,e){r.EventTarget.call(this),this.url=t,this.crossorigin=e,this.loaded=!1},r.SpineLoader.prototype.constructor=r.SpineLoader,r.SpineLoader.prototype.load=function(){var t=this,e=new r.JsonLoader(this.url,this.crossorigin);e.addEventListener("loaded",function(e){t.json=e.content.json,t.onLoaded()}),e.load()},r.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},r.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},r.AlphaMaskFilter=function(t){r.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:t},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mask.value.x=t.width,this.uniforms.mask.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},r.AlphaMaskFilter.prototype=Object.create(r.AbstractFilter.prototype),r.AlphaMaskFilter.prototype.constructor=r.AlphaMaskFilter,r.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(r.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}}),r.ColorMatrixFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},r.ColorMatrixFilter.prototype=Object.create(r.AbstractFilter.prototype),r.ColorMatrixFilter.prototype.constructor=r.ColorMatrixFilter,Object.defineProperty(r.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}),r.GrayFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},r.GrayFilter.prototype=Object.create(r.AbstractFilter.prototype),r.GrayFilter.prototype.constructor=r.GrayFilter,Object.defineProperty(r.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}),r.DisplacementFilter=function(t){r.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},r.DisplacementFilter.prototype=Object.create(r.AbstractFilter.prototype),r.DisplacementFilter.prototype.constructor=r.DisplacementFilter,r.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(r.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}}),Object.defineProperty(r.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}}),Object.defineProperty(r.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}),r.PixelateFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},r.PixelateFilter.prototype=Object.create(r.AbstractFilter.prototype),r.PixelateFilter.prototype.constructor=r.PixelateFilter,Object.defineProperty(r.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.dirty=!0,this.uniforms.pixelSize.value=t}}),r.BlurXFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},r.BlurXFilter.prototype=Object.create(r.AbstractFilter.prototype),r.BlurXFilter.prototype.constructor=r.BlurXFilter,Object.defineProperty(r.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t}}),r.BlurYFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},r.BlurYFilter.prototype=Object.create(r.AbstractFilter.prototype),r.BlurYFilter.prototype.constructor=r.BlurYFilter,Object.defineProperty(r.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),r.BlurFilter=function(){this.blurXFilter=new r.BlurXFilter,this.blurYFilter=new r.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},Object.defineProperty(r.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}}),Object.defineProperty(r.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}}),Object.defineProperty(r.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}),r.InvertFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},r.InvertFilter.prototype=Object.create(r.AbstractFilter.prototype),r.InvertFilter.prototype.constructor=r.InvertFilter,Object.defineProperty(r.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}),r.SepiaFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},r.SepiaFilter.prototype=Object.create(r.AbstractFilter.prototype),r.SepiaFilter.prototype.constructor=r.SepiaFilter,Object.defineProperty(r.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}),r.TwistFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},r.TwistFilter.prototype=Object.create(r.AbstractFilter.prototype),r.TwistFilter.prototype.constructor=r.TwistFilter,Object.defineProperty(r.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.dirty=!0,this.uniforms.offset.value=t}}),Object.defineProperty(r.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(t){this.dirty=!0,this.uniforms.radius.value=t}}),Object.defineProperty(r.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),r.ColorStepFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},r.ColorStepFilter.prototype=Object.create(r.AbstractFilter.prototype),r.ColorStepFilter.prototype.constructor=r.ColorStepFilter,Object.defineProperty(r.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}),r.DotScreenFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},r.DotScreenFilter.prototype=Object.create(r.AbstractFilter.prototype),r.DotScreenFilter.prototype.constructor=r.DotScreenFilter,Object.defineProperty(r.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.dirty=!0,this.uniforms.scale.value=t}}),Object.defineProperty(r.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),r.CrossHatchFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},r.CrossHatchFilter.prototype=Object.create(r.AbstractFilter.prototype),r.CrossHatchFilter.prototype.constructor=r.BlurYFilter,Object.defineProperty(r.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),r.RGBSplitFilter=function(){r.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},r.RGBSplitFilter.prototype=Object.create(r.AbstractFilter.prototype),r.RGBSplitFilter.prototype.constructor=r.RGBSplitFilter,Object.defineProperty(r.RGBSplitFilter.prototype,"angle",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),t.exports&&(e=t.exports=r),e.PIXI=r}).call(this)}).call(window)},Spd4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU5MjdFQTQ3NUQxNTExRTVCRDVBQ0ExRjI2Njc1RDFDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU5MjdFQTQ4NUQxNTExRTVCRDVBQ0ExRjI2Njc1RDFDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTkyN0VBNDU1RDE1MTFFNUJENUFDQTFGMjY2NzVEMUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTkyN0VBNDY1RDE1MTFFNUJENUFDQTFGMjY2NzVEMUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5dxCWYAAAAoElEQVR42mL4//8/Ax7sAcT5aGL8QLwUlwZOIJ4MxP+AuB1J3B6IH/7HockQiK/+RwCQRjYg7gTivzBBZA1MQFwGxD+RNG0HYicgPvsfDcA0yQHxfiTxb0CcC8Q5UPZ/bBojgfg9kth5qC3b/uMBTAwMDIxQDAP/sIhhAiSnHkBzag7UuTidSkzgnMOnkezoQE8AU0hNAISSnAAoyQEEGACW4xp34z9VxgAAAABJRU5ErkJggg=="},"UB/y":function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,"*,:after,:before{margin:0;padding:0;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}body,html{height:100%}body{overflow:hidden;font-family:Open Sans,Lato,sans-serif!important;font-weight:300;color:#454c55}button{margin:0;padding:0;background-color:transparent;border:none;font:inherit;cursor:pointer;color:#b3b9ad}button,button:active,button:hover,button:visited{outline:0}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}a,a:active,a:hover,a:visited{text-decoration:none;color:#454c55;font-weight:600;outline:0;cursor:pointer}::-webkit-scrollbar{width:14px;height:14px;background-color:#252e38}::-webkit-scrollbar-thumb{min-height:40px;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;background-color:hsla(0,0%,100%,.2)}",""])},URgk:function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r("YBdB"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r("yLpj"))},VRh9:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAGCAYAAAD37n+BAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1NzdDOEVBNEM2NDgxMUUzQjA1RkFCNkE0Q0Y2QTQxRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBODk1QTcwOUI2MTgxMUU2OUE5M0Q0NjNBMzc3ODNENyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBODk1QTcwOEI2MTgxMUU2OUE5M0Q0NjNBMzc3ODNENyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzFjMjVkZTYtMjIzOC01ODQ0LTgxMDAtZDIxOGZmYjE5OGQ4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3N0M4RUE0QzY0ODExRTNCMDVGQUI2QTRDRjZBNDFEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+3ekvvQAAAFRJREFUeNpi/LRbeBIDA0MuA3FgEhOQyAcxiFEMxAVMvC5v/oMYBDSBFYPUgmxgIKAJrhjEYYKJ4tCEohgEGP///49i3Oc9IoxAagKUi6IYBAACDACgMyDQ7E7ViwAAAABJRU5ErkJggg=="},W0GV:function(t,e,r){var n=r("l11o");"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,i);n.locals&&(t.exports=n.locals)},XFRQ:function(t,e,r){t.exports=function(){var t=Date.now(),e=t,r=0,n=1/0,i=0,o=0,s=1/0,a=0,l=0,u=0,h=document.createElement("div");h.id="stats",h.addEventListener("mousedown",function(t){t.preventDefault(),y(++u%2)},!1),h.style.cssText="width:80px;opacity:0.9;cursor:pointer";var c=document.createElement("div");c.id="fps",c.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",h.appendChild(c);var p=document.createElement("div");p.id="fpsText",p.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",p.innerHTML="FPS",c.appendChild(p);var d=document.createElement("div");for(d.id="fpsGraph",d.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",c.appendChild(d);74>d.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",d.appendChild(f)}var g=document.createElement("div");g.id="ms",g.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",h.appendChild(g);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",g.appendChild(v);var m=document.createElement("div");for(m.id="msGraph",m.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",g.appendChild(m);74>m.children.length;)(f=document.createElement("span")).style.cssText="width:1px;height:30px;float:left;background-color:#131",m.appendChild(f);var y=function(t){switch(u=t){case 0:c.style.display="block",g.style.display="none";break;case 1:c.style.display="none",g.style.display="block"}};return{REVISION:12,domElement:h,setMode:y,begin:function(){t=Date.now()},end:function(){var u=Date.now();r=u-t,n=Math.min(n,r),i=Math.max(i,r),v.textContent=r+" MS ("+n+"-"+i+")";var h=Math.min(30,30-r/200*30);return m.appendChild(m.firstChild).style.height=h+"px",l++,u>e+1e3&&(o=Math.round(1e3*l/(u-e)),s=Math.min(s,o),a=Math.max(a,o),p.textContent=o+" FPS ("+s+"-"+a+")",h=Math.min(30,30-o/100*30),d.appendChild(d.firstChild).style.height=h+"px",e=u,l=0),u},update:function(){t=this.end()}}}},YBdB:function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i,o,s,a,l=1,u={},h=!1,c=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){f(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},n=function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(i=c.documentElement,n=function(t){var e=c.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(f,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&f(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(s+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return u[l]=i,n(l),l++},p.clearImmediate=d}function d(t){delete u[t]}function f(t){if(h)setTimeout(f,0,t);else{var e=u[t];if(e){h=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{d(t),h=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r("yLpj"),r("8oxB"))},"aET+":function(t,e,r){var n,i,o={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),a=function(t){var e={};return function(t,r){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),l=null,u=0,h=[],c=r("9tPo");function p(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=o[n.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](n.parts[s]);for(;s<n.parts.length;s++)i.parts.push(y(n.parts[s],e))}else{var a=[];for(s=0;s<n.parts.length;s++)a.push(y(n.parts[s],e));o[n.id]={id:n.id,refs:1,parts:a}}}}function d(t,e){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(a):r.push(n[s]={id:s,parts:[a]})}return r}function f(t,e){var r=a(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),h.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertAt.before,r);r.insertBefore(e,i)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return r.nc}();n&&(t.attrs.nonce=n)}return m(e,t.attrs),f(t,e),e}function m(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})}function y(t,e){var r,n,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var s=u++;r=l||(l=v(e)),n=_.bind(null,r,s,!1),i=_.bind(null,r,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),f(t,e),e}(e),n=function(t,e,r){var n=r.css,i=r.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(n=c(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,r,e),i=function(){g(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(e),n=function(t,e){var r=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){g(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=d(t,e);return p(r,e),function(t){for(var n=[],i=0;i<r.length;i++){var s=r[i];(a=o[s.id]).refs--,n.push(a)}t&&p(d(t,e),e);for(i=0;i<n.length;i++){var a;if(0===(a=n[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete o[a.id]}}}};var x,b=(x=[],function(t,e){return x[t]=e,x.filter(Boolean).join("\n")});function _(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}},bdgK:function(t,e,r){"use strict";(function(t){var r=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var r=-1;return t.some(function(t,n){return t[0]===e&&(r=n,!0)}),r}return function(){function e(){this.__entries__=[]}var r={size:{configurable:!0}};return r.size.get=function(){return this.__entries__.length},e.prototype.get=function(e){var r=t(this.__entries__,e),n=this.__entries__[r];return n&&n[1]},e.prototype.set=function(e,r){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=r:this.__entries__.push([e,r])},e.prototype.delete=function(e){var r=this.__entries__,n=t(r,e);~n&&r.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var r=0,n=this.__entries__;r<n.length;r+=1){var i=n[r];t.call(e,i[1],i[0])}},Object.defineProperties(e.prototype,r),e}()}(),n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},s=2,a=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,u=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var r=!1,n=!1,i=0;function a(){r&&(r=!1,t()),n&&u()}function l(){o(a)}function u(){var t=Date.now();if(r){if(t-i<s)return;n=!0}else r=!0,n=!1,setTimeout(l,e);i=t}return u}(this.refresh.bind(this),20)};u.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},u.prototype.removeObserver=function(t){var e=this.observers_,r=e.indexOf(t);~r&&e.splice(r,1),!e.length&&this.connected_&&this.disconnect_()},u.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},u.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},u.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},u.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},u.prototype.onTransitionEnd_=function(t){var e=t.propertyName;void 0===e&&(e=""),a.some(function(t){return!!~e.indexOf(t)})&&this.refresh()},u.getInstance=function(){return this.instance_||(this.instance_=new u),this.instance_},u.instance_=null;var h=function(t,e){for(var r=0,n=Object.keys(e);r<n.length;r+=1){var i=n[r];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},c=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||i},p=y(0,0,0,0);function d(t){return parseFloat(t)||0}function f(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return e.reduce(function(e,r){return e+d(t["border-"+r+"-width"])},0)}function g(t){var e=t.clientWidth,r=t.clientHeight;if(!e&&!r)return p;var n=c(t).getComputedStyle(t),i=function(t){for(var e={},r=0,n=["top","right","bottom","left"];r<n.length;r+=1){var i=n[r],o=t["padding-"+i];e[i]=d(o)}return e}(n),o=i.left+i.right,s=i.top+i.bottom,a=d(n.width),l=d(n.height);if("border-box"===n.boxSizing&&(Math.round(a+o)!==e&&(a-=f(n,"left","right")+o),Math.round(l+s)!==r&&(l-=f(n,"top","bottom")+s)),!function(t){return t===c(t).document.documentElement}(t)){var u=Math.round(a+o)-e,h=Math.round(l+s)-r;1!==Math.abs(u)&&(a-=u),1!==Math.abs(h)&&(l-=h)}return y(i.left,i.top,a,l)}var v="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof c(t).SVGGraphicsElement}:function(t){return t instanceof c(t).SVGElement&&"function"==typeof t.getBBox};function m(t){return n?v(t)?function(t){var e=t.getBBox();return y(0,0,e.width,e.height)}(t):g(t):p}function y(t,e,r,n){return{x:t,y:e,width:r,height:n}}var x=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=t};x.prototype.isActive=function(){var t=m(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},x.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var b=function(t,e){var r,n,i,o,s,a,l,u=(n=(r=e).x,i=r.y,o=r.width,s=r.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),h(l,{x:n,y:i,width:o,height:s,top:i,right:n+o,bottom:s+i,left:n}),l);h(this,{target:t,contentRect:u})},_=function(t,e,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n};_.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new x(t)),this.controller_.addObserver(this),this.controller_.refresh())}},_.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},_.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},_.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},_.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new b(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},_.prototype.clearActive=function(){this.activeObservations_.splice(0)},_.prototype.hasActive=function(){return this.activeObservations_.length>0};var T="undefined"!=typeof WeakMap?new WeakMap:new r,w=function(t){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=u.getInstance(),r=new _(t,e,this);T.set(this,r)};["observe","unobserve","disconnect"].forEach(function(t){w.prototype[t]=function(){return(e=T.get(this))[t].apply(e,arguments);var e}});var E=void 0!==i.ResizeObserver?i.ResizeObserver:w;e.a=E}).call(this,r("yLpj"))},eOGM:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkNDOTYyQUI1NUQxNTExRTU5QkZBRUU0RDI2N0RCMDBEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkNDOTYyQUI2NUQxNTExRTU5QkZBRUU0RDI2N0RCMDBEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Q0M5NjJBQjM1RDE1MTFFNTlCRkFFRTREMjY3REIwMEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Q0M5NjJBQjQ1RDE1MTFFNTlCRkFFRTREMjY3REIwMEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7tGDqWAAAAl0lEQVR42mL6////UiAWAGIGJJwHxB5oYigYRIDAQyC2R5JoB+J/QDwZiDnxaQSBv0DcCcRsUI0wcBWIDfBphIFzQOwMxNuRxH4CcRkQM+HTCALfgDgHiHOhbBjYB8Ry+DTCAMhWJ6grYOA9EEcyMRAGjED8H0MMj1Nzoc5FduoBfE49T2rg4IsOQ3wJwIHUBEBWkgMIMADMoBp5IOgHAAAAAABJRU5ErkJggg=="},ewG8:function(t,e,r){var n;
/*! 
 * angular-hotkeys v1.7.0
 * https://chieffancypants.github.io/angular-hotkeys
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
/*! 
 * angular-hotkeys v1.7.0
 * https://chieffancypants.github.io/angular-hotkeys
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("cfp.hotkeys",[]).provider("hotkeys",["$injector",function(t){this.includeCheatSheet=!0,this.useNgRoute=t.has("ngViewDirective"),this.templateTitle="Keyboard Shortcuts:",this.templateHeader=null,this.templateFooter=null,this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}</h4><div ng-bind-html="header" ng-if="header"></div><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div ng-bind-html="footer" ng-if="footer"></div><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">&#215;</div></div></div>',this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.$get=["$rootElement","$rootScope","$compile","$window","$document",function(t,e,r,n,i){var o=!0;function s(t){var e={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓",return:"⏎",backspace:"⌫"};t=t.split("+");for(var r=0;r<t.length;r++)"mod"===t[r]&&(n.navigator&&n.navigator.platform.indexOf("Mac")>=0?t[r]="command":t[r]="ctrl"),t[r]=e[t[r]]||t[r];return t.join(" + ")}function a(t,e,r,n,i,o){this.combo=t instanceof Array?t:[t],this.description=e,this.callback=r,this.action=n,this.allowIn=i,this.persistent=o,this._formated=null}Mousetrap.prototype.stopCallback=function(t,e){return!o||!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(e.contentEditable&&"true"==e.contentEditable)},a.prototype.format=function(){if(null===this._formated){for(var t=this.combo[0].split(/[\s]/),e=0;e<t.length;e++)t[e]=s(t[e]);this._formated=t}return this._formated};var l=e.$new();l.hotkeys=[],l.helpVisible=!1,l.title=this.templateTitle,l.header=this.templateHeader,l.footer=this.templateFooter,l.toggleCheatSheet=g;var u={};if(this.useNgRoute&&e.$on("$routeChangeSuccess",function(t,e){d(),e&&e.hotkeys&&angular.forEach(e.hotkeys,function(t){var r=t[2];("string"==typeof r||r instanceof String)&&(t[2]=[r,e]),t[5]=!1,v.apply(this,t)})}),this.includeCheatSheet){var h=i[0],c=t[0],p=angular.element(this.template);v(this.cheatSheetHotkey,this.cheatSheetDescription,g),c!==h&&c!==h.documentElement||(c=h.body),angular.element(c).append(r(p)(l))}function d(){for(var t=l.hotkeys.length;t--;){var e=l.hotkeys[t];e&&!e.persistent&&m(e)}}var f=!1;function g(){l.helpVisible=!l.helpVisible,l.helpVisible?(f=y("esc"),m("esc"),v("esc",f.description,g,null,["INPUT","SELECT","TEXTAREA"])):(m("esc"),!1!==f&&v(f))}function v(t,e,r,n,i,o){var s,u=["INPUT","SELECT","TEXTAREA"];if("[object Object]"===Object.prototype.toString.call(t)&&(e=t.description,r=t.callback,n=t.action,o=t.persistent,i=t.allowIn,t=t.combo),m(t),e instanceof Function?(n=r,r=e,e="$$undefined$$"):angular.isUndefined(e)&&(e="$$undefined$$"),void 0===o&&(o=!0),"function"==typeof r){var h;s=r,i instanceof Array||(i=[]);for(var c=0;c<i.length;c++)i[c]=i[c].toUpperCase(),-1!==(h=u.indexOf(i[c]))&&u.splice(h,1);r=function(t){var e=!0;if(t){var r=t.target||t.srcElement,n=r.nodeName.toUpperCase();if((" "+r.className+" ").indexOf(" mousetrap ")>-1)e=!0;else for(var i=0;i<u.length;i++)if(u[i]===n){e=!1;break}}e&&x(s.apply(this,arguments))}}"string"==typeof n?Mousetrap.bind(t,x(r),n):Mousetrap.bind(t,x(r));var p=new a(t,e,r,n,i,o);return l.hotkeys.push(p),p}function m(t){var e=t instanceof a?t.combo:t;if(Mousetrap.unbind(e),angular.isArray(e)){for(var r=!0,n=e.length;n--;)r=m(e[n])&&r;return r}var i=l.hotkeys.indexOf(y(e));return i>-1&&(l.hotkeys[i].combo.length>1?l.hotkeys[i].combo.splice(l.hotkeys[i].combo.indexOf(e),1):(angular.forEach(u,function(t){var e=t.indexOf(l.hotkeys[i]);-1!==e&&t.splice(e,1)}),l.hotkeys.splice(i,1)),!0)}function y(t){if(!t)return l.hotkeys;for(var e,r=0;r<l.hotkeys.length;r++)if((e=l.hotkeys[r]).combo.indexOf(t)>-1)return e;return!1}function x(t){return function(r,n){if(t instanceof Array){var i=t[0],o=t[1];t=function(t){o.scope.$eval(i)}}e.$apply(function(){t(r,y(n))})}}return{add:v,del:m,get:y,bindTo:function(t){return t.$id in u||(u[t.$id]=[],t.$on("$destroy",function(){for(var e=u[t.$id].length;e--;)m(u[t.$id].pop())})),{add:function(e){var r;return r=arguments.length>1?v.apply(this,arguments):v(e),u[t.$id].push(r),this}}},template:this.template,toggleCheatSheet:g,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,useNgRoute:this.useNgRoute,purgeHotkeys:d,templateTitle:this.templateTitle,pause:function(){o=!1},unpause:function(){o=!0}}}]}]).directive("hotkey",["hotkeys",function(t){return{restrict:"A",link:function(e,r,n){var i,o=[];angular.forEach(e.$eval(n.hotkey),function(e,r){i="string"==typeof n.hotkeyAllowIn?n.hotkeyAllowIn.split(/[\s,]+/):[],o.push(r),t.add({combo:r,description:n.hotkeyDescription,callback:e,action:n.hotkeyAction,allowIn:i})}),r.bind("$destroy",function(){angular.forEach(o,t.del)})}}}]).run(["hotkeys",function(t){}])}(),function(i,o,s){for(var a,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)l[111+p]="f"+p;for(p=0;p<=9;++p)l[p+96]=p;function d(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent("on"+e,r)}function f(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return l[t.which]?l[t.which]:u[t.which]?u[t.which]:String.fromCharCode(t.which).toLowerCase()}function g(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function v(t,e,r){return r||(r=function(){if(!a)for(var t in a={},l)t>95&&t<112||l.hasOwnProperty(t)&&(a[l[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==r&&e.length&&(r="keydown"),r}function m(t,e){var r,n,i,o=[];for(r=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<r.length;++i)n=r[i],c[n]&&(n=c[n]),e&&"keypress"!=e&&h[n]&&(n=h[n],o.push("shift")),g(n)&&o.push(n);return{key:n,modifiers:o,action:e=v(n,o,e)}}function y(t){var e=this;if(t=t||o,!(e instanceof y))return new y(t);e.target=t,e._callbacks={},e._directMap={};var r,n={},i=!1,s=!1,a=!1;function l(t){t=t||{};var e,r=!1;for(e in n)t[e]?r=!0:n[e]=0;r||(a=!1)}function u(t,r,i,o,s,a){var l,u,h,c,p=[],d=i.type;if(!e._callbacks[t])return[];for("keyup"==d&&g(t)&&(r=[t]),l=0;l<e._callbacks[t].length;++l)if(u=e._callbacks[t][l],(o||!u.seq||n[u.seq]==u.level)&&d==u.action&&("keypress"==d&&!i.metaKey&&!i.ctrlKey||(h=r,c=u.modifiers,h.sort().join(",")===c.sort().join(",")))){var f=!o&&u.combo==s,v=o&&u.seq==o&&u.level==a;(f||v)&&e._callbacks[t].splice(l,1),p.push(u)}return p}function h(t,r,n,i){e.stopCallback(r,r.target||r.srcElement,n,i)||!1===t(r,n)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(r),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(r))}function c(t){"number"!=typeof t.which&&(t.which=t.keyCode);var r=f(t);r&&("keyup"!=t.type||i!==r?e.handleKey(r,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function p(t,e,o,s){function u(e){return function(){a=e,++n[t],clearTimeout(r),r=setTimeout(l,1e3)}}function c(e){h(o,e,t),"keyup"!==s&&(i=f(e)),setTimeout(l,10)}n[t]=0;for(var p=0;p<e.length;++p){var d=p+1===e.length?c:u(s||m(e[p+1]).action);v(e[p],d,s,t,p)}}function v(t,r,n,i,o){e._directMap[t+":"+n]=r;var s,a=(t=t.replace(/\s+/g," ")).split(" ");a.length>1?p(t,a,r,n):(s=m(t,n),e._callbacks[s.key]=e._callbacks[s.key]||[],u(s.key,s.modifiers,{type:s.action},i,t,o),e._callbacks[s.key][i?"unshift":"push"]({callback:r,modifiers:s.modifiers,action:s.action,seq:i,level:o,combo:t}))}e._handleKey=function(t,e,r){var n,i=u(t,e,r),o={},c=0,p=!1;for(n=0;n<i.length;++n)i[n].seq&&(c=Math.max(c,i[n].level));for(n=0;n<i.length;++n)if(i[n].seq){if(i[n].level!=c)continue;p=!0,o[i[n].seq]=1,h(i[n].callback,r,i[n].combo,i[n].seq)}else p||h(i[n].callback,r,i[n].combo);var d="keypress"==r.type&&s;r.type!=a||g(t)||d||l(o),s=p&&"keydown"==r.type},e._bindMultiple=function(t,e,r){for(var n=0;n<t.length;++n)v(t[n],e,r)},d(t,"keypress",c),d(t,"keydown",c),d(t,"keyup",c)}y.prototype.bind=function(t,e,r){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,r),this},y.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},y.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},y.prototype.reset=function(){return this._callbacks={},this._directMap={},this},y.prototype.stopCallback=function(t,e){return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!function t(e,r){return e!==o&&(e===r||t(e.parentNode,r))}(e,this.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},y.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},y.init=function(){var t=y(o);for(var e in t)"_"!==e.charAt(0)&&(y[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},y.init(),i.Mousetrap=y,t.exports&&(t.exports=y),void 0===(n=function(){return y}.call(e,r,e,t))||(t.exports=n)}(window,document)},g1HB:function(t,e,r){"use strict";var n=r("KHwQ"),i=r.n(n),o=r("NeU8"),s=r.n(o),a=r("MWP8"),l=r.n(a),u=(r("ewG8"),i.a.module("player",[l.a.name,"cfp.hotkeys",s.a]));u.constant("playerColors",["#ff8f16","#ff1d5c","#22a1e4","#de6ddf","#9975e2","#ff0000","#6ac371","#3ac5ca"]),e.a=u},l11o:function(t,e,r){var n=r("sEG9");(t.exports=r("I1BE")(!1)).push([t.i,'.cg-player_container{white-space:nowrap;user-select:none}.cg-player_container.ultraSmall .stats_box{overflow:hidden;margin-right:1%;width:24%!important;margin-bottom:0!important}.cg-player_container.ultraSmall .rankings{width:100%!important;margin-top:15px!important}.cg-player_container.ultraSmall .stats_name{text-overflow:ellipsis;width:77px;height:17px;margin-bottom:6px!important;overflow:hidden}.cg-player_container button:disabled{cursor:auto;opacity:.2}.cg-player_container .stats_panel{position:absolute;z-index:1;top:0;left:0}.cg-player_container .settings_panel.settings_panel_visible{margin-right:0;transition-duration:.2s}.cg-player_container .tooltipIcons{font-size:12px;text-transform:uppercase;font-weight:400;color:#fff;background-color:#000;position:fixed;padding:10px;opacity:.8;z-index:15;text-align:center}.cg-player_container .settings_panel{z-index:1;position:absolute;right:0;height:100%;width:256px;background-color:rgba(37,46,56,.95);overflow-y:auto;transition-duration:.2s;margin-right:-256px}.cg-player_container .settings_panel::-webkit-scrollbar{width:14px;height:14px;background-color:#252e38}.cg-player_container .settings_panel::-webkit-scrollbar-thumb{min-height:40px;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;background-color:hsla(0,0%,100%,.2)}.cg-player_container .settings_panel .settings_option.disabled{opacity:.3}.cg-player_container .settings_panel .settings_option.disabled .settings_button input[type=radio]+label{cursor:auto}.cg-player_container .settings_panel .settings_option{margin:20px 15px;color:#b3b9ad}.cg-player_container .settings_panel .settings_option h3{height:auto;line-height:normal;font-size:14px;font-weight:400}.cg-player_container .settings_panel .settings_option .settings_button{margin-top:10px;border:1px dashed #b3b9ad;border-radius:2px;display:flex}.cg-player_container .settings_panel .settings_option .settings_button input[type=radio]{display:none}.cg-player_container .settings_panel .settings_option .settings_button input[type=radio]+label{font-size:12px;font-weight:600;cursor:pointer;flex:1;color:#b3b9ad;background-color:#252e38;margin:3px;height:27px;line-height:27px;text-align:center}.cg-player_container .settings_panel .settings_option .settings_button input[type=radio]:checked+label{background-color:#b3b9ad;color:#454c55}.cg-player_container .settings_panel .settings_option .settings_button.player_speed{display:block;border:none}.cg-player_container .settings_panel .settings_option .settings_button.player_speed input[type=radio]+label{margin:0;margin-right:-1px;display:inline-block;height:35px;line-height:35px;width:35px;border:1px solid #b3b9ad}.cg-player_container .player{min-width:250px;width:100%;overflow:hidden}.cg-player_container .player.tv-mode{position:relative}.cg-player_container .player.tv-mode .control-panel,.cg-player_container .player.tv-mode .share_footer{position:absolute;z-index:10;width:100%;bottom:-44px;transition:.4s ease}.cg-player_container .player.tv-mode:hover .control-panel{bottom:0;transition:bottom .4s ease}.cg-player_container .player.tv-mode .settings_panel_form{padding-bottom:35px}.cg-player_container .player:-webkit-full-screen{height:100%;display:block!important;width:100%!important;position:relative}.cg-player_container .player:-webkit-full-screen .control-panel,.cg-player_container .player:-webkit-full-screen .share_footer{position:absolute;z-index:10;width:100%;bottom:-44px;transition:.4s ease}.cg-player_container .player:-webkit-full-screen:hover .control-panel{bottom:0}.cg-player_container .player:-webkit-full-screen .settings_panel_form{padding-bottom:35px}.cg-player_container .player:-webkit-full-screen .control-panel,.cg-player_container .player:-webkit-full-screen .share_footer{transition-delay:1s}.cg-player_container .player:-webkit-full-screen .gameBoxContainer{background:#000;height:100%}.cg-player_container .player:-webkit-full-screen:hover .control-panel{bottom:-44px;transition:bottom .4s ease;transition-delay:1s}.cg-player_container .player:-webkit-full-screen .control-panel:hover{bottom:0;transition:.4s ease}.cg-player_container .player:-webkit-full-screen .settings_panel_form{padding-bottom:0}.cg-player_container .player:-moz-full-screen{height:100%;display:block!important;width:100%!important;position:relative}.cg-player_container .player:-moz-full-screen .control-panel,.cg-player_container .player:-moz-full-screen .share_footer{position:absolute;z-index:10;width:100%;bottom:-44px;transition:.4s ease}.cg-player_container .player:-moz-full-screen:hover .control-panel{bottom:0}.cg-player_container .player:-moz-full-screen .settings_panel_form{padding-bottom:35px}.cg-player_container .player:-moz-full-screen .control-panel,.cg-player_container .player:-moz-full-screen .share_footer{transition-delay:1s}.cg-player_container .player:-moz-full-screen .gameBoxContainer{background:#000;height:100%}.cg-player_container .player:-moz-full-screen:hover .control-panel{bottom:-44px;transition:bottom .4s ease;transition-delay:1s}.cg-player_container .player:-moz-full-screen .control-panel:hover{bottom:0;transition:.4s ease}.cg-player_container .player:-moz-full-screen .settings_panel_form{padding-bottom:0}.cg-player_container .player:-ms-fullscreen{height:100%;display:block!important;width:100%!important;position:relative}.cg-player_container .player:-ms-fullscreen .control-panel,.cg-player_container .player:-ms-fullscreen .share_footer{position:absolute;z-index:10;width:100%;bottom:-44px;transition:.4s ease}.cg-player_container .player:-ms-fullscreen:hover .control-panel{bottom:0}.cg-player_container .player:-ms-fullscreen .settings_panel_form{padding-bottom:35px}.cg-player_container .player:-ms-fullscreen .control-panel,.cg-player_container .player:-ms-fullscreen .share_footer{transition-delay:1s}.cg-player_container .player:-ms-fullscreen .gameBoxContainer{background:#000;height:100%}.cg-player_container .player:-ms-fullscreen:hover .control-panel{bottom:-44px;transition:bottom .4s ease;transition-delay:1s}.cg-player_container .player:-ms-fullscreen .control-panel:hover{bottom:0;transition:.4s ease}.cg-player_container .player:-ms-fullscreen .settings_panel_form{padding-bottom:0}.cg-player_container .player:full-screen{height:100%;display:block!important;width:100%!important;position:relative}.cg-player_container .player:full-screen .control-panel,.cg-player_container .player:full-screen .share_footer{position:absolute;z-index:10;width:100%;bottom:-44px;transition:.4s ease}.cg-player_container .player:full-screen:hover .control-panel{bottom:0}.cg-player_container .player:full-screen .settings_panel_form{padding-bottom:35px}.cg-player_container .player:full-screen .control-panel,.cg-player_container .player:full-screen .share_footer{transition-delay:1s}.cg-player_container .player:full-screen .gameBoxContainer{background:#000;height:100%}.cg-player_container .player:full-screen:hover .control-panel{bottom:-44px;transition:bottom .4s ease;transition-delay:1s}.cg-player_container .player:full-screen .control-panel:hover{bottom:0;transition:.4s ease}.cg-player_container .player:full-screen .settings_panel_form{padding-bottom:0}.cg-player_container .player:fullscreen{height:100%;display:block!important;width:100%!important;position:relative}.cg-player_container .player:fullscreen .control-panel,.cg-player_container .player:fullscreen .share_footer{position:absolute;z-index:10;width:100%;bottom:-44px;transition:.4s ease}.cg-player_container .player:fullscreen:hover .control-panel{bottom:0}.cg-player_container .player:fullscreen .settings_panel_form{padding-bottom:35px}.cg-player_container .player:fullscreen .control-panel,.cg-player_container .player:fullscreen .share_footer{transition-delay:1s}.cg-player_container .player:fullscreen .gameBoxContainer{background:#000;height:100%}.cg-player_container .player:fullscreen:hover .control-panel{bottom:-44px;transition:bottom .4s ease;transition-delay:1s}.cg-player_container .player:fullscreen .control-panel:hover{bottom:0;transition:.4s ease}.cg-player_container .player:fullscreen .settings_panel_form{padding-bottom:0}.cg-player_container .gameBoxContainer{position:relative;background-color:grey;width:100%}.cg-player_container .playerDummy{padding-top:50%;display:block;content:""}.cg-player_container canvas{width:100%;height:100%;position:absolute;top:0;bottom:0;right:0;left:0}.cg-player_container canvas:focus{outline:none}.cg-player_container .progress_bar{position:relative;background-color:#f2bb13;width:0;height:100%}.cg-player_container .progress_back{background-color:#3f4446;left:0;bottom:7px;position:absolute;width:100%;height:3px;transition-duration:.5s}.cg-player_container .progress_hitbox{z-index:1;position:absolute;top:-13px;height:20px;width:100%}.cg-player_container .progress_hitbox.active .progress_back,.cg-player_container .progress_hitbox.force_hover .progress_back,.cg-player_container .progress_hitbox:hover .progress_back{height:8px}.cg-player_container .progress_hitbox.force_hover .scroller,.cg-player_container .progress_hitbox:hover .scroller,.cg-player_container .scroller.active{display:block;right:-10px;top:-6px;-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}.cg-player_container .scroller.active .tooltipFrame,.cg-player_container .scroller_handle.force_hover+.scroller .tooltipFrame,.cg-player_container .scroller_handle:hover+.scroller .tooltipFrame{display:block}.cg-player_container .scroller.active .tooltipFrame .tooltip_content,.cg-player_container .scroller_handle.force_hover+.scroller .tooltipFrame .tooltip_content,.cg-player_container .scroller_handle:hover+.scroller .tooltipFrame .tooltip_content{background-color:#f2bb13}.cg-player_container .scroller{z-index:2;position:absolute;right:-10px;top:-3px;display:block;transition-duration:.5s;-webkit-transform-origin:50% 25%;-moz-transform-origin:50% 25%;-ms-transform-origin:50% 25%;-o-transform-origin:50% 25%;transform-origin:50% 25%;-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);-o-transform:scale(0);transform:scale(0)}.cg-player_container .scroller_handle{position:absolute;width:20px;height:20px;margin-top:-6px;margin-left:-10px;z-index:3;cursor:pointer}.cg-player_container .scroller_cursor{position:relative;float:right;background:url('+n(r("vMCt"))+');height:20px;width:20px}.cg-player_container .share_footer{background-color:#454c55;height:54px;position:relative;padding-top:12px;padding-bottom:12px;padding-right:15px}.cg-player_container .share_footer button{margin-left:15px;margin-top:2px;display:inline-block;float:right}.cg-player_container .settings{position:absolute;right:0;margin-right:15px;padding-top:2px;padding-bottom:2px}.cg-player_container .frame-position{display:inline-block;color:#fff;font-size:14px;margin:0 10px;font-weight:400}.cg-player_container .speed_options{display:inline-block;width:160px}.cg-player_container .button_text_container{float:left}.cg-player_container .button_text{color:#b3b9ad;margin-top:4px;font-weight:lighter}.cg-player_container .button_text_over{color:#fff;margin-top:4px;font-weight:lighter}.cg-player_container .multiplier{display:inline;font-size:12px}.cg-player_container .speed_number{display:inline;font-size:14px}.cg-player_container .tooltipFrame{height:28px;display:none;position:absolute;top:-38px!important;margin-left:50%}.cg-player_container .tooltipFrame .tooltipFrameTriangle{top:100%;left:0;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-width:6px;margin-left:-6px}.cg-player_container .tooltipFrameTimer{width:70px;text-align:center}.cg-player_container .tooltip_content{height:100%;margin-left:-50%;margin-right:50%;padding-left:10px;padding-top:8px;padding-right:10px}.cg-player_container .tooltip_text{white-space:nowrap;overflow:hidden;color:#fff;font-size:12px;line-height:12px;font-weight:700}.cg-player_container .scroller .tooltipFrame .frame_timer_text{color:#454c55}.cg-player_container .tooltip_triangle{position:absolute;bottom:-6px;left:-6px;background:url('+n(r("VRh9"))+");height:6px;width:12px}.cg-player_container .ai_player{position:absolute;height:100%;width:10px;z-index:1;display:none;left:0}.cg-player_container .ai_player:hover .tooltipFrame{display:block}.cg-player_container .control-panel{background-color:#252e38;height:44px;position:relative;margin-top:3px}.cg-player_container .control-panel-replay{float:left;height:100%;display:flex;align-items:center;padding:0 10px}.cg-player_container .control-panel-settings{float:right;height:100%;display:flex;align-items:center;padding:0 10px}.cg-player_container .control-panel-button{display:inline-block;margin:0 10px;opacity:.7;transition:opacity .2s;border:none}.cg-player_container .control-panel-button:hover{opacity:1}.cg-player_container .control-panel-button.disabled,.cg-player_container .control-panel-button:disabled{opacity:.2!important;pointer-events:none}.cg-player_container .control-panel-button.first-button{background:url("+n(r("Spd4"))+");height:12px;width:14px}.cg-player_container .control-panel-button.prior-button{background:url("+n(r("rm89"))+");height:12px;width:8px}.cg-player_container .control-panel-button.play-pause-button{background:url("+n(r("NE08"))+");height:22px;width:19px;opacity:1}.cg-player_container .control-panel-button.play-pause-button:hover{opacity:.8}.cg-player_container .control-panel-button.next-button{background:url("+n(r("AhwK"))+");height:12px;width:8px}.cg-player_container .control-panel-button.last-button{background:url("+n(r("eOGM"))+");height:12px;width:14px}.cg-player_container .control-panel-button.settings-button{background:url("+n(r("wveC"))+");height:18px;width:18px}.cg-player_container .control-panel-button.replay-button{background:url("+n(r("v+e/"))+");height:18px;width:14px}.cg-player_container .control-panel-button.fullscreen-button{background:url("+n(r("oMvK"))+");height:18px;width:25px}.cg-player_container .control-panel-button.extract-button{background:url("+n(r("14ch"))+");height:12px;width:13px}.cg-player_container .player.playing .control-panel-button.play-pause-button{background:url("+n(r("pxsY"))+");height:22px;width:19px}.cg-player_container .info_box{-webkit-user-select:initial;-moz-user-select:initial;-ms-user-select:initial;user-select:auto;white-space:normal;background-color:#252e38;padding-left:20px;padding-top:9px;padding-bottom:9px;color:#fff;overflow:auto;position:relative}.cg-player_container .info_box.console-open{height:180px}.cg-player_container .uinput{margin-top:0!important}.cg-player_container .info_game_container{display:block}.cg-player_container .info_game_label{font-size:17px;font-weight:700;margin-bottom:6px}.cg-player_container .info_stderr_container,.cg-player_container .info_stdout_container{margin-top:13px;display:none}.cg-player_container .info_parameters_container{margin-top:13px}.cg-player_container .info_parameters_label,.cg-player_container .info_stderr_label,.cg-player_container .info_stdout_label{font-size:17px;font-weight:700}.cg-player_container .info_game,.cg-player_container .info_parameters,.cg-player_container .info_stderr,.cg-player_container .info_stdout{font-size:14px;font-weight:400;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.cg-player_container .rankings{display:inline-block;vertical-align:top;margin-left:0;margin-top:20px;margin-bottom:20px}.cg-player_container .rankings.small{display:block;width:100%;margin:0;padding:15px}.cg-player_container .stats_box{display:inline-block;color:#454c55;margin-top:10px;margin-bottom:10px;width:225px}.cg-player_container .stats_box.small{width:50%;float:left}.cg-player_container .stats_rank{position:relative;display:inline-block;vertical-align:top;width:50px;height:50px;line-height:50px;text-align:center;font-weight:700;color:#fff;font-size:20px}.cg-player_container .stats_rank.small{width:40px;height:40px;line-height:40px;font-size:14px}.cg-player_container .stats_details_box{display:inline-block;vertical-align:top;line-height:12px;margin-left:10px}.cg-player_container .stats_name{-moz-user-select:initial;-khtml-user-select:initial;-webkit-user-select:initial;-o-user-select:initial;margin-bottom:22px;font-size:18px}.cg-player_container .stats_name.small{margin-bottom:14px}.cg-player_container .stats_icon{display:inline-block}.cg-player_container .stats_icon.nation{margin-left:10px}.cg-player_container .stats_nation,.cg-player_container .stats_score{display:inline-block;margin-left:4px}.cg-player_container .star{position:absolute;top:0;left:0}.cg-player_container .star path{stroke:none}.cg-player_container .star_text{position:relative;font-weight:inherit}.cg-player_container .nickname{font-size:12px;font-weight:700;padding:0 5px;display:inline;color:#454c55;background-color:grey}.cg-player_container .info_ellipsis_button{background:url("+n(r("rTiS"))+");background-repeat:no-repeat;background-position:50%;position:absolute;right:30px;width:25px;height:15px;top:16px}.cg-player_container .info_ellipsis_button .over,.cg-player_container .info_ellipsis_button .under{position:absolute;top:40%;left:0}.cg-player_container .info_ellipsis_button .over,.cg-player_container .info_ellipsis_button .under:hover{opacity:0}.cg-player_container .info_ellipsis_button .over:hover,.cg-player_container .info_ellipsis_button .under{opacity:1}.cg-player_container .info_ellipsis_button:hover{background:url("+n(r("ONr6"))+");background-repeat:no-repeat;background-position:50%}.cg-player_container .settings_close_button{display:block;position:absolute;top:12px;right:12px;height:12px;width:12px;cursor:pointer;background:url("+n(r("CFt4"))+");width:12;height:12;opacity:.8;transition:opacity .2s}.cg-player_container .settings_close_button:hover{opacity:1}.cg-player_container .replay-prompt{height:42px;position:absolute;top:-57px;right:46px;opacity:1;transition:all .2s;cursor:pointer;border:none}.cg-player_container .replay-prompt.ng-enter,.cg-player_container .replay-prompt.ng-leave.ng-leave-active{opacity:0;top:-51px}.cg-player_container .replay-prompt.ng-enter.ng-enter-active,.cg-player_container .replay-prompt.ng-leave{opacity:1;top:-57px}.cg-player_container .replay-prompt-content{display:block;height:100%;padding:0 34px;background:#f2bb13}.cg-player_container .prompt-text{white-space:nowrap;overflow:hidden;color:#454c55;font-size:13px;line-height:42px;font-weight:400;text-transform:uppercase}.cg-player_container .prompt-triangle{position:absolute;bottom:-6px;right:20px;background:url("+n(r("VRh9"))+");height:6px;width:12px}",""])},lSNA:function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},mLhc:function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",u="object"==typeof t,h=e.regeneratorRuntime;if(h)u&&(t.exports=h);else{(h=e.regeneratorRuntime=u?t.exports:{}).wrap=b;var c="suspendedStart",p="suspendedYield",d="executing",f="completed",g={},v={};v[s]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(P([])));y&&y!==n&&i.call(y,s)&&(v=y);var x=E.prototype=T.prototype=Object.create(v);w.prototype=x.constructor=E,E.constructor=w,E[l]=w.displayName="GeneratorFunction",h.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},h.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(x),t},h.awrap=function(t){return{__await:t}},S(A.prototype),A.prototype[a]=function(){return this},h.AsyncIterator=A,h.async=function(t,e,r,n){var i=new A(b(t,e,r,n));return h.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},S(x),x[l]="Generator",x[s]=function(){return this},x.toString=function(){return"[object Generator]"},h.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},h.values=P,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var l=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;R(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}}}function b(t,e,r,n){var i=e&&e.prototype instanceof T?e:T,o=Object.create(i.prototype),s=new O(n||[]);return o._invoke=function(t,e,r){var n=c;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw o;return D()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=C(s,r);if(a){if(a===g)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===c)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var l=_(t,e,r);if("normal"===l.type){if(n=r.done?f:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=f,r.method="throw",r.arg=l.arg)}}}(t,r,s),o}function _(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function T(){}function w(){}function E(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function A(t){var e;this._invoke=function(r,n){function o(){return new Promise(function(e,o){!function e(r,n,o,s){var a=_(t[r],t,n);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,o,s)},function(t){e("throw",t,o,s)}):Promise.resolve(u).then(function(t){l.value=t,o(l)},function(t){return e("throw",t,o,s)})}s(a.arg)}(r,n,e,o)})}return e=e?e.then(o,o):o()}}function C(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,C(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=_(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function P(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:D}}function D(){return{value:r,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},o0o1:function(t,e,r){t.exports=r("qySd")},oMvK:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAASCAYAAACuLnWgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0MzUyN0NBNUQxNTExRTVBNkQwODQ1OUU4N0QwRjU0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY0MzUyN0NCNUQxNTExRTVBNkQwODQ1OUU4N0QwRjU0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjQzNTI3Qzg1RDE1MTFFNUE2RDA4NDU5RTg3RDBGNTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjQzNTI3Qzk1RDE1MTFFNUE2RDA4NDU5RTg3RDBGNTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4gG0iyAAAAqElEQVR42mL4jwqWATEzEDNQgJmh5sABAxJ7ERUsQLZoEbolc6loAbJF82CWzARiRipbAMMgc2eBCEYGBob/DBAwC4hDGCgHa4A4DcpmZEGyAAS4gVgQiPdQYIEL1BwY+M+CQ6ErBZb8RxdgYqADGLVk8FmCK3XtprYlyJnxKxC/B2JjCsx8DzUHBhjpUqzQrYCEgYVULuoXYqtPQGAplSqtpciGAgQYAGYyiAiJzGpZAAAAAElFTkSuQmCC"},pxsY:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAWCAYAAAAinad/AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woeDwIGBcO83QAAACtJREFUOMtjZICC/////2fAAhgZGRmJVcPEQEUwatioYaOGjRo2atjINQwApn4ILBOOJfoAAAAASUVORK5CYII="},q0QK:function(t,e,r){"use strict";var n=r("MVZn"),i=r.n(n),o=r("KHwQ"),s=r.n(o);s.a.module("player").service("gameManagerFactory",["$window","playerColors",function(t,e){if(void 0===window.performance&&(window.performance={}),!window.performance.now){var r=Date.now();window.performance.timing&&window.performance.timing.navigationStart&&(r=window.performance.timing.navigationStart),window.performance.now=function(){return Date.now()-r}}var n=function(t,e,r,n){var i=n.gameId,o=n.tooltips,s=n.refereeInput,a=n.failCause;this.drawer=t,this.gameId=i,this.agents=e,this.tooltips=o||[],this.frames=r,this.refereeInput=s,this.speed=0,this.playing=!1,this.progress=100,this.listeners=[],this.failCause=a,this.eventListeners={pause:[],play:[]},this.currentFrame=0,this.views=r.map(function(t){return(t.keyframe?"KEY_FRAME":"INTERMEDIATE_FRAME")+t.view}),this.enableInteractions(!0)};n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.updateListeners=function(t){var e=this;this.listeners.forEach(function(r){r(e.currentFrame,e.progress/100,e.playing,t,e.isTurnBasedGame(),e.atEnd())})},n.prototype.startAnimation=function(){this.lastTime=null,this.loop()};var o=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,a=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame;n.prototype.loop=function(){var t=this;this.timer=o(function(e){t.animate(e),t.playing&&t.loop()})},n.prototype.animate=function(t){if(this.playing){null===this.lastTime&&(this.lastTime=t);var e=t-this.lastTime;this.lastTime=t;var r=100===this.progress?this.getNextKeyFrameIndex():this.currentFrame,n=this.drawer.getFrameSpeed(r,this.speed),i=100*this.speed*e/500*n,o=!0;(this.progress+i)%(10*this.speed)<i&&(o=!1),this.progress<100&&this.progress+i>100?(this.progress=100,o=!1):this.progress+=i,(i>100||this.progress>100)&&(this.nextKeyFrame(),this.progress=i>100?100:this.progress-100),this.currentFrame<=this.getFrameCount()+1&&!this.atEnd()?this.updateListeners(o):(this.playing=!1,this.updateListeners())}},n.prototype.getGameId=function(){return this.gameId||null},n.prototype.interrupt=function(){this.timer&&(a(this.timer),this.timer=null),this.playing=!1},n.prototype.destroy=function(){this.interrupt()},n.prototype.getNextKeyFrameIndex=function(){var t=this.currentFrame;do{t++}while(t<this.getFrameCount()&&!this.isKeyFrame(t));return t>=this.getFrameCount()&&(t=this.getFrameCount()-1),t},n.prototype.nextKeyFrame=function(){this.currentFrame>=this.getFrameCount()-1?this.progress=100:this.currentFrame=this.getNextKeyFrameIndex()},n.prototype.getPreviousKeyFrameIndex=function(){var t=this.currentFrame;do{t--}while(t>=0&&!this.isKeyFrame(t));return t<0&&(t=0),t},n.prototype.previousKeyFrame=function(){this.currentFrame=this.getPreviousKeyFrameIndex(),0===this.currentFrame&&(this.progress=100)},n.prototype.enableInteractions=function(t){this.interactionsEnabled=t},n.prototype.areInteractionsEnabled=function(){return this.interactionsEnabled},n.prototype.atEnd=function(){return this.currentFrame>=this.getFrameCount()-1&&this.progress>=100},n.prototype.subscribe=function(t){this.listeners.push(t)},n.prototype.on=function(t,e){this.eventListeners[t].push(e)},n.prototype.off=function(t,e){var r=this.eventListeners[t].indexOf(e);r>=0&&this.eventListeners[t].splice(r,1)},n.prototype.triggerEvent=function(t,e){this.eventListeners[t].forEach(function(t){t(e)})},n.prototype.unsubscribe=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},n.prototype.clear=function(){this.listeners=[]},n.prototype.togglePlay=function(t){this.interactionsEnabled&&(this.playing?this.pause(t):this.play(t))},n.prototype.play=function(t){this.interactionsEnabled&&(this.playing||(this.atEnd()?this.currentFrame>0&&(this.currentFrame=0,this.play()):(0===this.currentFrame&&(this.progress=100),this.playing=!0,this.updateListeners(),this.startAnimation()),this.triggerEvent("play",{userInteraction:t||!1,frame:this.currentFrame})))},n.prototype.isPlaying=function(){return this.playing},n.prototype.pause=function(t){this.interactionsEnabled&&this.playing&&(this.interrupt(),this.updateListeners(),this.triggerEvent("pause",{userInteraction:t||!1,frame:this.currentFrame}))},n.prototype.isTurnBasedGame=function(){return this.drawer&&this.drawer.isTurnBasedGame()},n.prototype.next=function(){this.interactionsEnabled&&(this.isTurnBasedGame()?this.progress<100?this.setFrame(this.currentFrame):this.setFrame(this.currentFrame+1):(this.interrupt(),this.progress<100?this.progress=100:this.nextKeyFrame(),this.updateListeners()))},n.prototype.isKeyFrame=function(t){return!this.frames[t]||this.frames[t].keyframe},n.prototype.prior=function(){this.interactionsEnabled&&(this.isTurnBasedGame()?this.setFrame(this.currentFrame-1):(this.interrupt(),this.previousKeyFrame(),this.progress=100,this.updateListeners()))},n.prototype.first=function(){this.interactionsEnabled&&this.setFrame(0)},n.prototype.last=function(){this.interactionsEnabled&&this.setFrame(this.getFrameCount()-1)},n.prototype.setSpeed=function(t){t>0&&t<=100&&(this.speed=t)},n.prototype.getSpeed=function(){return this.speed},n.prototype.setFrame=function(t,e){this.interactionsEnabled&&(this.pause(),t>=0&&t<this.getFrameCount()&&(this.currentFrame=t),void 0!==e&&this.isKeyFrame(t)||(e=100),this.progress=e,this.updateListeners())},this.createGameManagerFromGameInfo=function(t,r,o){function a(){return o?{pseudo:"ME",avatar:null,userId:null}:{pseudo:"IDE CODE",avatar:null,userId:null}}void 0===o&&(o=!0);var l=null;if(r.agents)l=r.agents.map(function(n){var i=n.codingamer,o=n.arenaboss;if(!o&&!i)switch(n.agentId){case-2:i={pseudo:"DEFAULT",avatar:-2,userId:null};break;case-1:i=a()}return{arenaboss:o||null,index:n.index,position:n.position||(r.ranks?r.ranks.indexOf(n.index):n.index),userId:i&&i.userId||null,name:i&&i.pseudo||o&&o.nickname||n.name||null,score:n.score,agentId:n.agentId,gameScore:r.scores?r.scores[n.index]:null,avatar:i&&i.avatar||null,color:(t.playerColors||e)[n.index],rank:n.rank,avatarUrl:n.avatarUrl,type:n.type,typeData:n.typeData}});else{var u=i()({},a(),r.codingamer);l=[{index:0,agentId:-1,score:r.scores[0],name:u&&u.pseudo||null,userId:u&&u.userId||null,avatar:u&&u.avatar||null,avatarUrl:r.avatarUrl}]}var h=r.frames.map(function(t){return s.a.copy(t)}),c=[];for(t&&(c=t.constructViews(h.map(function(t){return t.view})));h.length<c.length;)h.push({agent:null,gameInformation:null,keyframe:!0,view:null});return h.forEach(function(e,r){e.agent=l[e.agentId]||null,t&&(e.gameInformation=t.getGameInformations(e.view,e.gameInformation)),e.view=c[r]}),new n(t,l,h,r)}}])},qySd:function(t,e,r){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r("mLhc"),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},rTiS:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAFCAYAAACw/UeDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMTFCRUU3OTBEOTExMUU0QUU3N0Q0QkUwRDUwOTMxRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMTFCRUU3QTBEOTExMUU0QUU3N0Q0QkUwRDUwOTMxRCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUxMUJFRTc3MEQ5MTExRTRBRTc3RDRCRTBENTA5MzFEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUxMUJFRTc4MEQ5MTExRTRBRTc3RDRCRTBENTA5MzFEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+rNk9TAAAAFlJREFUeNpi3LxzrRwDA8McILYE4uNAnALEjxgwAdnqmIDEXCB2BWIeKL2QATsgWx3IEgs0RVY4NJOtDmTJCTTBYzg0k60OZEkyEO8B4q9QOgGHZrLVAQQYAPlUH00Y8ppwAAAAAElFTkSuQmCC"},rm89:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAMCAYAAABfnvydAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRCNDE3REQ0NUQxNTExRTVCRUQ0ODI0RjAyM0VGQzlFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRCNDE3REQ1NUQxNTExRTVCRUQ0ODI0RjAyM0VGQzlFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REI0MTdERDI1RDE1MTFFNUJFRDQ4MjRGMDIzRUZDOUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REI0MTdERDM1RDE1MTFFNUJFRDQ4MjRGMDIzRUZDOUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz783UMdAAAAYklEQVR42mL8//8/Aw7ABcRTGUAKsGBtIL78H4dkAhB//Q8FyBJcQDz/PwKAFCXAJHWA+BqS5GWoGAOGkVBTuGAmMzEQAkhWXEezQhtmBQxz43MkUd5ExjqwgGIkFNQAAQYAgXX8+VsfqWkAAAAASUVORK5CYII="},sEG9:function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},"v+e/":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNFMEEzODM2NUQxNTExRTVBQjgxQTFDN0U0MzFCRjI3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjNFMEEzODM3NUQxNTExRTVBQjgxQTFDN0U0MzFCRjI3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0UwQTM4MzQ1RDE1MTFFNUFCODFBMUM3RTQzMUJGMjciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0UwQTM4MzU1RDE1MTFFNUFCODFBMUM3RTQzMUJGMjciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz79Ho0BAAAA5klEQVR42ozTPQrCMBQH8NiqFMEKgkdQ71K8lIK6CM5OgohLZgfBUcQLeAAHR61foCI0/gMNhPS1SeBX2te8NnlJmBCCWVRhBGe4wBAqzCFxKrJtUpIvLe0GDSMWe8zeqD6BLTHKSVzrcwmgnN570IcT9OCgzW8HLdmpBgv4wReWsIGt7KB9uAsd9SwvM6Jq8g9+UbVlVe8Yc2jM4UnEMhXzibjvUmpOxI/WZAw1hBUkKZ5TnLZZHKWZUssx0JZjTy1HkQheRNW5y159QN2IvV32akLEPi6JczLmeJDHEMNVHeS/AAMApxu4mLVKiogAAAAASUVORK5CYII="},vMCt:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDQ3RkU0MzNCNjE4MTFFNkFGOUZGMkI4MDFCNjQ4RjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDQ3RkU0MzRCNjE4MTFFNkFGOUZGMkI4MDFCNjQ4RjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENDdGRTQzMUI2MTgxMUU2QUY5RkYyQjgwMUI2NDhGNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENDdGRTQzMkI2MTgxMUU2QUY5RkYyQjgwMUI2NDhGNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pk18G9UAAAGCSURBVHjaYvy0W5gBC2AD4gAotgRiKSD+BcRPgPg8EK8H4o1QMRTAiMXAQCDuAmIVBvzgDhCXA/E6ZEEmJDYzEHdCFRAyjAGqZi1UDzNMkAVJQRsQlzGQDmB6ypFdGEKmYciGhsAMBEVAPwPlYALILJCXQ4FYBpuKR29YGSZvEWE4eZsLzDdX/caQ6/OGQU7kNzbl0kAcxgJNGhjg4Ss2hvhJsgyfvyPibd9lHobTd7gYFuY9ZpAX+4VNWwBItSk2mSnbhFEMgwGQGEgOBzAB6ZDAJgPzJjZw4hZOOUkmbKmdEgAy8Dk2CVAE4AIWajjlnoMMvIRNJtvrLQMv5z8McZAYSA4HOAMycAM2GQVgLIJi00n3CwMX+z8wBrFBYgpiOENpA6hwACXsu7jSIgngKRArwyKliArxUQjEP2EJbTUQd1NgWDfUDJTiqxKUnskwbCpUL0Z5+BeIc6Glxh0iDLoDLQdyoHpxltiwKiAUWnobQzM+LODPQquA1dgyBUCAAQAIH2Ro8L8nQQAAAABJRU5ErkJggg=="},vvB1:function(t,e,r){"use strict";r.r(e),function(t){var n=r("KHwQ"),i=r.n(n),o=r("g1HB"),s=r("bdgK"),a=(r("8kRx"),r("yh4K"),r("q0QK"),r("yqC/"),r("EVdn")),l=r.n(a);function u(t,e,r,n,o,a){var l=this,u=null,h=null,c=null,p=!1,d=null,f=null,g=new Promise(function(e){t.playerLoaded=function(t){l.playerApi=t,window.parent.postMessage({type:"playerLoaded"},"*"),y(),e(t)}}),v=null,m=null;function y(){(u=u&&u.length>0?u:i.a.element("#cg-player"))&&u.length>0?(new s.a(x).observe(u[0]),x()):e(y,200)}function x(){if(!(u=u&&u.length>0?u:i.a.element("#cg-player"))||h&&h.length>0||(h=u.find(".gameBoxContainer")),u&&h){var t=h.outerHeight(!0),e="calc("+(u.height()-t)+"px + "+100*t/u.width()+"%)";e!==v&&(window.parent.postMessage({type:"resize",iframeHeight:e},"*"),v=e)}}t.gameParams={},t.$watch("gameParams",function(t){Object.keys(t).length>0&&window.parent.postMessage({type:"gameParams",gameParams:t},"*")},!0),window.addEventListener("resize",function(){var t=i.a.element(window).width();if(m===t)return;m=t,c&&e.cancel(c);c=e(function(){l.playerApi&&l.playerApi.resize()},300)}),window.addEventListener("message",function(e){if("ready"===e.data.type)window.parent.postMessage({type:"ready"},"*");else if("viewer"===e.data.type)d=o.createDrawerFromViewer(e.data.data).then(function(e){return t.drawer&&t.drawer.destroy(),t.drawer=e,e.waitReady().then(function(){return window.parent.postMessage({type:"viewerOptions",gameName:e.getGameName&&e.getGameName(),playerColors:e.playerColors,canSwapPlayers:e.canSwapPlayers()},"*"),e})});else if("frames"===e.data.type)l.gameManager&&(l.gameManager.destroy(),l.gameManager=null),e.data.gameInfo&&(d||(d=Promise.resolve(null)),f=d.then(function(t){return l.gameManager=a.createGameManagerFromGameInfo(t,e.data.gameInfo,e.data.isUserGame),l.gameManager.subscribe(function(t,e,r,n,i,o){p||window.parent.postMessage({type:"progress",frame:t,progress:e,playing:r,isSubFrame:n,isTurnBasedGame:i,atEnd:o},"*")}),l.gameManager.on("play",function(t){return window.parent.postMessage({type:"play",data:t},"*")}),l.gameManager.on("pause",function(t){return window.parent.postMessage({type:"pause",data:t},"*")}),window.parent.postMessage({type:"parsedGameInfo",frames:l.gameManager.frames,agents:l.gameManager.agents,failCause:l.gameManager.failCause},"*"),g.then(function(t){return t.initReplay(l.gameManager),l.gameManager})}));else if("gameParams"===e.data.type)t.$apply(function(){t.gameParams=e.data.gameParams});else if("play"===e.data.type)f&&f.then(function(t){return t.play()});else if("pause"===e.data.type)f&&f.then(function(t){return t.pause()});else if("speed"===e.data.type)f&&f.then(function(t){return t.setSpeed(e.data.speed)});else if("options"===e.data.type){var r=["showConsole","showRankings","showSmallRankings","collapsableConsole","tvMode","ratio","ultraSmall","asyncRendering","shareable","analyticsType","showReplayPrompt","analyticsGameId","location"];t.$apply(function(){return r.forEach(function(r){t[r]=e.data.options[r]})})}else"language"===e.data.type?n.use(e.data.lang):"baseUrl"===e.data.type?t.baseUrl=e.data.baseUrl:"loggedUserId"===e.data.type?t.loggedUserId=e.data.loggedUserId:"frame"===e.data.type&&f&&f.then(function(t){p=!0,t.setFrame(e.data.frame,e.data.progress),p=!1})}),window.parent.postMessage({type:"ready"},"*"),t.analyticsOpenReplay=function(t,e,r){window.parent.postMessage({type:"analyticsOpenReplay",from:t,analyticsGameId:e,analyticsType:r},"*")}}u.$inject=["$scope","$timeout","$interval","$translate","drawerFactory","gameManagerFactory"],t.$=t.jQuery=l.a,o.a.config(["$compileProvider","$translateProvider",function(t,e){t.debugInfoEnabled(!1),e.useSanitizeValueStrategy("escapeParameters"),e.preferredLanguage("en")}]).controller("AppCtrl",u),e.default=o.a}.call(this,r("yLpj"))},wveC:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMwREJDOTVBNUQxNTExRTVCQzY5QjFCMThCMjE0REJBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMwREJDOTVCNUQxNTExRTVCQzY5QjFCMThCMjE0REJBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzBEQkM5NTg1RDE1MTFFNUJDNjlCMUIxOEIyMTREQkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzBEQkM5NTk1RDE1MTFFNUJDNjlCMUIxOEIyMTREQkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4/7/ziAAABWklEQVR42pzTQStEURTA8TdDU1KiSImSqBmric1kJFIsbaXEwjdAWVkqG8XCl5GNMqxMLGZmYUUpMlEazaTp+l/uy5nrvJec+tV759173rn3vRsYY4IYRfMTTQxEjU0GrZEQ1+PIins7djmICFloAQ84xizWlPEr7mV5HLpx3+FaG8KT+VtUxfUjBm2NsFDB/D/OkQqXdqMso44DzGMOe6gp48bQGXbU49oM4x155etk8ep1tCqX1osT8XA/5pfYEeNKSIaFNvHivWU6plDGG3uBnH1wr2zgZEyhEe1L2s2uKBs4FURHTsmVbaGy8mAbfUq+C7tKvmRbncARzvAm2q1gEW1IYAZX3pJquMSSv/4NZf0N1JX8unvJ19x2r8Vhpe1UxF41nV+H1saoMqGBDyWfiTr9Nk5RFfe3SLvT/izydyi0zFT+k273Z9uD3C/yaVxjCx3+vE8BBgDgV46f6BdvbAAAAABJRU5ErkJggg=="},yLpj:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},yXPU:function(t,e){function r(t,e,r,n,i,o,s){try{var a=t[o](s),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,l,"next",t)}function l(t){r(s,i,o,a,l,"throw",t)}a(void 0)})}}},yh4K:function(t,e,r){"use strict";var n=r("o0o1"),i=r.n(n),o=r("yXPU"),s=r.n(o),a=r("KHwQ"),l=r.n(a),u=r("EVdn"),h=r.n(u),c=r("Qnnr"),p=r.n(c);window.PIXI=p.a,l.a.module("player").service("drawerFactory",["$q","$timeout",function(t,e){var n={Proton:{import:function(){var t=s()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(r.t.bind(null,"1TEc",7));case 2:return t.abrupt("return",window.Proton);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},PIXI3:{import:function(){return Promise.resolve().then(r.t.bind(null,"NK5I",7))}},PIXI4:{import:function(){return Promise.resolve().then(r.t.bind(null,"6FAO",7))}}},o=function(e,r){this.customDemo=r,this.drawerClass=e,this.destroyed=!1,this.initSentDeferred=t.defer()};o.prototype=Object.defineProperties({waitReady:function(){return this.waitPromise||(this.waitPromise=(r=this.isReady.bind(this),n=8e3,i=t.defer(),o=null,function t(){r()?i.resolve():o=e(t,200,!1)}(),void 0!==n&&e(function(){i.resolve()},n),i.promise.finally(function(){null!==o&&e.cancel(o)}),i.promise.cancel=function(){i.reject()},i.promise));var r,n,i,o},getGameRatio:function(){return this.drawerClass.getGameRatio&&this.drawerClass.getGameRatio()||this.getDefaultGameRatio()},getTVSpeed:function(){return this.drawerClass.getTVSpeed&&this.drawerClass.getTVSpeed()||1},getGameName:function(){return this.drawer.getGameName&&this.drawer.getGameName()||null},isTurnBasedGame:function(){return!this.drawer.isTurnBasedGame||this.drawer.isTurnBasedGame()},isReady:function(){return this.drawer&&(!this.drawer.isReady||this.drawer.isReady())},getMaxCanvasSize:function(){return this.drawer&&this.drawer.getMaxCanvasSize&&this.drawer.getMaxCanvasSize()||{width:1920,height:1080}},getFrameSpeed:function(t,e){return this.drawer&&this.drawer.getFrameSpeed&&this.drawer.getFrameSpeed(t,e)||1},destroy:function(){this._destroy(),this.destroyed=!0,this.waitPromise&&this.waitPromise.cancel()},_destroy:function(){this.drawer&&this.drawer.destroy&&!this.destroyed&&this.drawer.destroy()},getOptions:function(){return this.drawer&&this.drawer.getOptions?this.drawer.getOptions():null},enableAsyncRendering:function(t){this.drawer&&this.drawer.enableAsyncRendering&&this.drawer.enableAsyncRendering(t)},constructViews:function(t){if(this.drawerClass.constructViews)return this.drawerClass.constructViews(t.map(function(t){return t.split("\n")})).map(function(t){return t&&t.join("\n")});if(this.drawerClass.getFrameTotal){var e=this.drawerClass.getFrameTotal(t.map(function(t){return t.split("\n")}));if(e>t.length){for(var r=l.a.copy(t);r.length<e;)r.push(null);return r}}return t},getGameInformations:function(t,e){return this.drawerClass&&this.drawerClass.getGameInformations&&this.drawerClass.getGameInformations(t,e)||e},canSwapPlayers:function(){return!!this.drawer.canSwapPlayers&&this.drawer.canSwapPlayers()}},{playerColors:{get:function(){return this.drawerClass.playerColors?this.drawerClass.playerColors:null},configurable:!0,enumerable:!0}});var a=function(){o.apply(this,arguments)};a.prototype=Object.create(o.prototype),l.a.extend(a.prototype,{getDefaultGameRatio:function(){return 2},getVersion:function(){return 0},setRenderListener:function(t,e){this.renderListener={begin:t,end:e}},draw:function(t,e,r,n,i,o,s,a){this.destroyed||(this.lastDraw={frame:t,width:e,height:r,progress:i,views:o,speed:s,colors:this.mappedColors,names:a},this.renderListener&&this.renderListener.begin(),this.drawer.draw(t,0,e,r,this.mappedColors,i,o,s,a),this.renderListener&&this.renderListener.end())},refresh:function(){this.lastDraw&&!this.destroyed&&this.drawer.draw(this.lastDraw.frame,0,this.lastDraw.width,this.lastDraw.height,this.lastDraw.colors,this.lastDraw.progress,this.lastDraw.views,this.lastDraw.speed,this.lastDraw.names)},update:function(){},initCanvas:function(t){if(!this.destroyed&&t.width>0&&t.height>0){this._destroy();var e=this.drawerClass;this.drawer=new e(t.getContext("2d"),t.width,t.height)}},init:function(t,e,r){!this.destroyed&&t.width>0&&t.height>0&&(this.drawer||this.initCanvas(t),this.colors=e,this.drawer.init(t.getContext("2d"),t.width,t.height,r),this.initSentDeferred.resolve())},initFrames:function(t,e,r){if(!this.destroyed){this.playerMapper=r.map(function(t){return t.index}),this.mappedColors=[];var n=this;this.playerMapper.forEach(function(t){n.mappedColors.push(n.colors[t])})}}});var u=function(){o.apply(this,arguments);var t=this.drawerClass;this.drawer=new t,this.framesInitialized=!1};u.prototype=Object.create(o.prototype),l.a.extend(u.prototype,{getDefaultGameRatio:function(){return 1920/1080},getVersion:function(){return 1},getFrameSpeed:function(){return this.framesInitialized?o.prototype.getFrameSpeed.apply(this,arguments):1},setRenderListener:function(t,e){this.drawer.onBeforeRender=t,this.drawer.onAfterRender=e},draw:function(){},refresh:function(){},update:function(t,e,r){this.destroyed||this.drawer.update(t,e,r)},initCanvas:function(){},init:function(t,e,r,n,i){!this.destroyed&&t.width>0&&t.height>0&&(this.drawer.init(t,t.width,t.height,e,r,n,i),this.initSentDeferred.resolve())},initFrames:function(){var t=s()(i.a.mark(function t(e,r,n){var o,s,a,l,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.framesInitialized=!0,this.destroyed){t.next=10;break}return o=r.map(function(t){return t.split("\n")}),s=n.map(function(t,e){return t.name||"Player "+(e+1)}),a=n.map(function(t){return t.avatar}),l=n.map(function(t){return t.index}),u=n.map(function(t){return t.userId?"CODINGAMER"===t.type&&t.typeData.me?"ME":"OTHER":"DEFAULT"}),t.next=9,this.initSentDeferred.promise;case 9:this.drawer.initFrames(e,o,l,s,a,u);case 10:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()});var c=function(){o.apply(this,arguments);var t=this.drawerClass;this.drawer=new t(this.customDemo)};function d(t){return new Function("$",t+"\n return "+"Drawer"+";")(h.a)}c.prototype=Object.create(u.prototype),l.a.extend(c.prototype,{getVersion:function(){return 2},getDefaultOverSampling:function(){return this.drawer.getDefaultOverSampling&&this.drawer.getDefaultOverSampling()},initFrames:function(){var t=s()(i.a.mark(function t(e,r,n){var o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.framesInitialized=!0,this.destroyed){t.next=11;break}return o=r.map(function(t){return t.split("\n")}),t.next=5,this.initSentDeferred.promise;case 5:return t.t0=this.drawer,t.t1=o,t.next=9,Promise.all(n.slice(0,e).map(function(){var t=s()(i.a.mark(function t(e,r){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{index:e.index,color:e.color,name:e.name||"Player "+(r+1),avatar:e.avatarUrl,type:e.type,typeData:e.typeData});case 1:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()));case 9:t.t2=t.sent,t.t0.initFrames.call(t.t0,t.t1,t.t2);case 11:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()});var f={};this.createDrawerFromViewer=function(t){return this.createDrawer(d(t))},this.createDrawer=function(e,r){window.PIXI=p.a;var i=function(t){if(n[t])return f[t]?f[t]:(f[t]=n[t].import().then(function(t){return t}),f[t])},o=e.requirements,s=[];if(o){var l=function(t){return function(r){window[t]=r,e[t]=r}};for(var h in o)s.push(i(o[h]).then(l(h)))}return t.all(s).then(function(){return function(t,e){var r=t.VERSION||0,n=null;switch(r){case 0:n=a;break;case 1:n=u;break;case 2:n=c;break;default:throw new Error("Drawer version "+r+" not supported")}return new n(t,e)}(e,r)})}}])},"yqC/":function(t,e,r){"use strict";(function(t){var e=r("KHwQ"),n=r.n(e),i=(r("W0GV"),r("Bzw/")),o=r("/XPn"),s=r("/457"),a=r.n(s),l=r("XFRQ"),u=r.n(l),h=n.a.module("player"),c=["#ff8f16","#ff1d5c","#22a1e4","#de6ddf","#9975e2","#ff0000","#6ac371","#3ac5ca"];h.config(["$translateProvider",function(t){t.translations("en",i),t.translations("fr",o)}]).directive("cgPlayer",["$rootScope","hotkeys","$compile","$timeout",function(e,r,i,o){return{replace:!0,restrict:"E",scope:{showConsole:"=",showRankings:"=",showSmallRankings:"=",collapsableConsole:"=",tvMode:"=",ratio:"=",ultraSmall:"=",drawer:"=",asyncRendering:"=?",shareable:"=?",analyticsType:"=",showReplayPrompt:"=",analyticsGameId:"=",location:"=",gameParams:"=",baseUrl:"=",loggedUserId:"=",onPlayerReady:"&",analyticsOpenReplay:"&"},controllerAs:"cgPLayer",controller:["$scope",function(t){var e=this;e.gameManager=null,t.$watch("gameManager",function(t){e.gameManager=t})}],template:a.a,link:function(s,a,l){s.expandConsole=!1,s.player=n.a.element(a).find(".player"),s.bar=s.player.find(".progress_bar"),s.hitbox=s.player.find(".progress_hitbox"),s.scroller=s.bar.find(".scroller"),s.cursor=s.scroller.find(".scroller_cursor"),s.handle=s.bar.find(".scroller_handle"),s.tooltip=s.scroller.find(".tooltipFrameTimer"),s.tooltipContent=s.tooltip.find(".tooltip_content"),s.frameTimerText=s.player.find(".frame_timer_text"),s.tooltipWidth=s.tooltip.width(),s.stats=new u.a,s.stats.setMode(0),s.player.find(".stats_panel").append(s.stats.domElement),s.getPlayerColor=function(t){return(s.drawer.playerColors||c)[t]};var h=8,p=[];function d(t,e){var r=s.player,n=r.data("gameManager");if(n){var i=n.getFrameCount()-1,o=e.left/r.width()*i+1,a=100*(o-parseInt(o,10));s.aiBattle?(a=100,o=Math.round(o-1)):o=Math.floor(o),o>i?(o=i,a=100):o<=0&&(o=0,a=100),n.setFrame(o,a)}}s.setScrollerX=function(){var t,e=s.bar,r=s.player.width();e.width(100*s.progress+"%");var n=10*(1-s.progress)-10*s.progress,i=Math.round(s.progress*r)+n;s.cursor.css({left:n}),s.tooltip.css({left:n}),s.handle.css({top:0,left:100*s.progress+"%"});var o=s.tooltipWidth/2;t=i-o<0?i:i+o>r?o+(o+i)-r:o,s.tooltipContent.css({"margin-left":-t,"margin-right":t})},s.displayTooltip=!1,s.hideTooltip=function(){s.tooltipsMessage=null,s.displayTooltip=!1},n.a.element(".cg-player_container").mousemove(function(t){var e,r,i,o=parseInt(n.a.element(".tooltipIcons").css("width")),s=o/2,a=window.innerWidth-o/2,l=(e=t.clientX,r=s,i=a,Math.min(Math.max(e,r),i)-o/2+"px"),u=t.clientY-50+"px";n.a.element(".tooltipIcons").css("left",l),n.a.element(".tooltipIcons").css("top",u)}),s.updateTooltipMessage=function(t){s.tooltipsMessage=null,s.displayTooltip=!0,s.tooltipsMessage=t},s.range=function(t){return new Array(t)},s.getShowRankings=function(){return!1!==s.showRankings},s.getShowConsole=function(){return!1!==s.showConsole&&!0!==s.tvMode},s.endEvent=function(){},t.playerUniqueId||(t.playerUniqueId=0),s.uniqueId=t.playerUniqueId++,s.toggleConsole=function(){s.expandConsole=!s.expandConsole,e.$emit("consoleToggled",{player:s.player,collapsed:s.expandConsole})},s.toggleFullScreen=function(){var t=s.player[0];s.isFullScreen()?(document.cancelFullScreen=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msCancelFullScreen,document.cancelFullScreen&&document.cancelFullScreen()):(t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen||t.msRequestFullscreen,t.requestFullscreen&&t.requestFullscreen())},s.settingsVisible=!1,s.toggleOptions=function(){s.setOptionsVisible(!s.settingsVisible),e.$emit("playerSettingsToggled",s.settingsVisible)},s.closePlayerSettingsCallback=e.$on("closePlayerSettings",function(){s.setOptionsVisible(!1)}),s.setOptionsVisible=function(t){s.settingsVisible=t},s.resetSpeed=function(){};var f,g=null,v=function(t,e){this.frames=e.frames,this.player=t,this.agents=e.agents,this.drawer=s.drawer,this.lastFrame=-1,this.gameManager=e,this.views=e.views,this.frameCount=e.getFrameCount()};function m(t){for(var e="",r=0;r<t.length;r++){var n=t[r];n.match(/[a-zA-Z0-9#¤§$\n]/)?e+=n:e+=" "===n?"&nbsp;":"&#"+n.charCodeAt(0)+";"}return e}v.prototype.update=function(t,e,r,i){var a;(this.progress=e,this.isSubFrame=i,i)||(a=s.aiBattle?g[Math.floor(t+e)-1]:t,(this.lastFrame!==a||!this.playing||this.frameCount<50)&&(this.updateProgressBar(a,e),this.updateFrameCounter(a),!1!==s.showConsole&&this.updateOutput(a),this.lastFrame=a));var l=t<=0,u=t+e>=this.frameCount;this.playing===r&&this.first===l&&this.last===u||(this.playing=r,this.last=u,this.first=l,o(n.a.noop)),this.updateCanvas(t,e,r,i)},v.prototype.updateCanvas=function(t,e,r,n){var i=s.canvas,o=i.width,a=i.height,l=this.drawer,u=this.gameManager,h=0;u&&r&&(h=u.speed),l.update(t,e,h),n||l.draw(this.views[t],o,a,l.playerColors||c,e,this.views,h,s.names)},v.prototype.updateFrameCounter=function(t){s.frameTimerText.html(t+1+"/"+this.frameCount)},v.prototype.updateProgressBar=function(t,e){var r=this.frameCount-1,n=0;s.aiBattle||(n=e-1);var i=(t+n)/r;s.progress=i,s.setScrollerX()},v.prototype.updateOutput=function(t){var e=this.frames[t].gameInformation,r=this.frames[t].stdout,n=this.frames[t].stderr;if(e){var o=m(e);o=(o=o.replace(/\xa4(\w+)\xa4(.+)\xa7(\w+)\xa7/gim,'<span style="color:$1">$2</span>')).replace(/\n/g,"<br/>");var a=this.agents;o=o.replace(/\$([0-9]+)/gi,function(t,e){return'<span class="nickname" style="background-color:'+a[e].color+';">'+a[e].name+"</span>"}),o=i('<div style = "white-space:nowrap;">'+o+"</div>")(s),s.player.find(".info_game").show().html(o)}else s.player.find(".info_game").hide();if(r){var l=m(r).replace(/\n/g,"<br/>");s.player.find(".info_stdout").html(l),s.player.find(".info_stdout_container").show()}else s.player.find(".info_stdout_container").hide();if(n){var u=m(n).replace(/\n/g,"<br/>");s.player.find(".info_stderr").html(u),s.player.find(".info_stderr_container").show()}else s.player.find(".info_stderr_container").hide()},s.realOverSampling=s.overSampling=1,s.availableSpeeds=[.1,.5,1,2,5,10],s.startScreen=!0,s.player.data("gameManager",s.gameManager=null),s.atEnd=function(){if(s.gameManager&&s.gameManager.frames.length>10)return s.gameManager.atEnd()},s.initReplay=function(t){if(s.drawer===t.drawer){var e=s.drawer;if(e){var r=s.gameManager,n=s.gameParams.playSpeed||null;r&&1!==r.speed&&(n=r.speed),s.player.data("gameManager",s.gameManager=t),s.currentGameId=t.gameId;var i=t.agents,o=t.tooltips;s.uinput=t.refereeInput||null,s.aiBattle=i.length>1,s.agents=i,s.names=i.map(function(t,e){return t.name||"Player "+e}),p=o.map(function(t){var e=JSON.parse(t);return i.forEach(function(t,r){e.text=e.text.replace(new RegExp("\\$"+r,"g"),t.name||"Unnamed")}),e}),e.initFrames(i.length,t.views,s.agents),s.updater=new v(s.player,t),t.subscribe(function(t,e,r,n){s.updater.update(t,e,r,n)}),s.frameTimerText.html("0/"+t.getFrameCount()),s.bar.width("0%"),s.resetSpeed();var a=n||1;if(s.gameManager.getSpeed()||t.setSpeed(a),!1!==s.showRankings||!1!==s.showSmallRankings){var l,u,h=i.map(function(t,e){return{index:t.index,position:t.position,color:s.getPlayerColor(e)||null,name:t.name||null,rank:t.rank||null,nation:t.nation||null,score:t.score,gameScore:t.gameScore}});for(h.sort(function(t,e){return t.position-e.position}),l=0,u=h.length;l<u&&h[l].gameScore===h[0].gameScore;l++)h[l].winner=!0;s.rankingData=h}var c=-1,d=!1;(g=t.frames.map(function(t,e){return t.agent&&t.agent.userId===s.loggedUserId&&!d&&(c=e,d=!0),t.keyframe&&(d||(c=e),d=!1),c}))[g.length-1]=g.length-1,s.startScreen=!1,x(s.canvas.width)}else console.error("Trying to start a game before Drawer initialisation !")}else console.error("Trying to start a game with the wrong Drawer!")};var y=function(t,e){return t>=e&&t<e+h?t-e-h:e>=t&&e<t+h?h-(e-t):0};function x(t){var e=s.player.find(".marker_container");if(e.is(":visible")){var r,i,o;e.empty(),p.forEach(function(t,n){var i=t.event,o='\n          <div class="ai_player tooltipFrame'.concat(n,'">\n          <div class="tooltipFrame">\n          <div class="tooltip_content"><div class="tooltip_text"></div><div class="tooltipFrameTriangle"></div></div>\n          </div>\n          </div>');e.append(o);var a=(r=e.find(".tooltipFrame"+n)).find(".tooltip_content")[0],l=r.find(".tooltipFrameTriangle")[0],u=r.find(".tooltip_text")[0],c=t.turn-1;u.innerHTML=t.text||"N/A",r[0].style.display="block";var p=100*c/s.gameManager.getFrameCount();r.width(h),r[0].style.left=p+"%";var d=s.gameManager.agents[i].color||"white";r[0].style["background-color"]=a.style["background-color"]=l.style["border-top-color"]=d,"white"===d&&(u.style.color="black")}),f=e.children();for(var a=[1,-1],l=0,u=a.length;l<u;l++){var c=a[l];for(i=0,o=f.length;i<o;i++){var d=(r=f[i]).style.left.split("%")[0]/100*t;if(d+h>t){var g=(d-(d+h-t))/t*100+"%";r.style.left=g}for(var v=f.toArray();v.length>0;){var m=v.pop();if(m!==r){var x=y(n.a.element(m).offset().left,n.a.element(r).offset().left)*c,b=null,_=x;if(x>0?b=r:x<0&&(b=m,_*=-1),_*=c,null!==b&&Math.abs(_)>=1){var T=(b.style.left.split("%")[0]/100*t+_)/t*100+"%";b.style.left=T,v=f.toArray()}}}}}for(i=0;i<o;i++){r=f[i];var w=50,E=n.a.element(r).find(".tooltipFrame").width()/2,S=r.style.left.split("%")[0]/100*t+h/2;S-E<0?w=.5*(1-(E-S)/E)*100:S+E>t&&(w=100*(1-.5*(1-(E+S-t)/E))),n.a.element(r).find(".tooltip_content").css({"margin-left":"-"+w+"%","margin-right":w+"%"})}}}s.createCanvas=function(t){var e=n.a.element("<canvas></canvas>");e.appendTo(t);var r=e[0];return r.setAttribute("tabIndex","0"),r.addEventListener("mousedown",function(){r.focus()}),r.addEventListener("click",function(){s.$apply(function(){s.setOptionsVisible(!1),s.applyAsyncRendering()})}),r},s.getNextIndex=function(t,e){return t===s.versionCanvases[e]?t=0:t+=1,t===s.versionCanvases[e]&&(t+=1),t>=s.canvases.length?-1:t},s.versionCanvases={},s.drawerOptionChanged=function(t){s.gameParams&&(s.gameParams[t.title.toLowerCase().replace(/ /g,"")]=t.value)},s.drawerQualityChanged=function(t){s.gameParams&&(s.gameParams.overSampling=t)},s.drawerSpeedChanged=function(t){s.gameParams&&(s.gameParams.playSpeed=t)},s.applyAsyncRendering=function(){s.drawer&&(void 0!==s.asyncRendering?s.drawer.enableAsyncRendering(s.asyncRendering):s.drawer.enableAsyncRendering(!0))},s.$watch("drawer",function(t){t&&(s.initDrawer(t),s.applyAsyncRendering())}),s.$watch("asyncRendering",s.applyAsyncRendering),s.initDrawer=function(t){s.drawer=t,s.canvases=[],s.player.find(".canvas-container").empty(),s.player.data("drawer",t),s._initDrawer(t)},s._initDrawer=function(t,e,r){var i,o=s.player.width();if(t){var a=s.player.find(".canvas-container"),l=t.getVersion();if(void 0===e&&s.versionCanvases[l])s.canvas=s.canvases[s.versionCanvases[l]],e=s.versionCanvases[l];else if(r||0===s.canvases.length){var u=s.createCanvas(a);s.canvases.push(u),s.canvas=u,e=s.canvases.length-1}else e||(e=0),s.canvas=s.canvases[e];for(var h=0;h<s.canvases.length;++h)h===e?n.a.element(s.canvases[h]).css({display:"block"}):n.a.element(s.canvases[h]).css({display:"none"});s.ratio?i=s.ratio:t.getGameRatio?i=t.getGameRatio():(i=2,console.log("Game ratio unknown.")),s.gameRatio=i,t.getTVSpeed?s.tvSpeed=t.getTVSpeed():s.tvSpeed=0;var c=o/i;s.canvas.width=o*s.realOverSampling,s.canvas.height=c*s.realOverSampling;try{t.initCanvas(s.canvas),t.setRenderListener(s.stats.begin,s.stats.end),s.player.data("gameRatio",i),n.a.element(".playerDummy").css("padding-top",100/i+"%"),s.resize()}catch(n){if(console.warn(n),r)throw n;console.log("Trying another canvas");var p=s.getNextIndex(e,l);return s._initDrawer(t,p,-1===p)}s.versionCanvases[l]=e,s.$watch("gameParams",function(){var e=s.overSampling;if(s.options=t.getOptions(),s.gameManager&&s.gameParams&&s.gameParams.playSpeed&&s.gameManager.setSpeed(s.gameParams.playSpeed),t.getDefaultOverSampling){var r=t.getDefaultOverSampling();r&&(s.overSampling=r)}s.gameParams&&s.gameParams.overSampling&&(s.overSampling=s.gameParams.overSampling),s.options&&s.options.forEach(function(t){Object.defineProperty(t,"value",t);var e=t.title.toLowerCase().replace(/ /g,"");e in s.gameParams&&(t.value=s.gameParams[e])}),s.overSampling!==e&&s.resize(),s.refresh()})}},s.subscribe=function(t){var e=s.gameManager;e&&e.subscribe(t)},s.destroy=function(){s.destroyed=!0,s.closePlayerSettingsCallback(),s.player.data("gameManager",null),s.gameManager=null,s.lastHotkeys.left&&s.newHotkeys.left===r.get("left")?r.add(s.lastHotkeys.left):r.del("left"),s.lastHotkeys.right&&s.newHotkeys.right===r.get("right")?r.add(s.lastHotkeys.right):r.del("right"),s.lastHotkeys.space&&s.newHotkeys.space===r.get("space")?r.add(s.lastHotkeys.space):r.del("space")},s.lastHotkeys={left:r.get("left"),right:r.get("right"),space:r.get("space")},r.add({combo:"left",description:"Prior frame",callback:function(){s.gameManager&&s.gameManager.prior()}}),r.add({combo:"right",description:"Next frame",callback:function(){s.gameManager&&s.gameManager.next()}}),r.add({combo:"space",description:"Play/Pause",callback:function(t){t.preventDefault(),t.stopPropagation(),s.gameManager&&s.gameManager.togglePlay(!0)}}),s.newHotkeys={left:r.get("left"),right:r.get("right"),space:r.get("space")},s.refresh=function(){s.drawer.refresh()},s.isFullScreen=function(){return(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===s.player[0]},s.resizeCanvas=function(t,e,r){var i,o,a=n.a.element(t);if(s.isFullScreen()){var l=e.data("gameRatio"),u=n.a.element(window).width(),h=n.a.element(window).height(),c=l/(u/h);if(c>=1){var p=h-h/c;a.css("top",p/2+"px"),a.css("width","100%"),a.css("height",1/c*100+"%"),a.css("left",0),i=u,o=u/l}else a.css("top",0),a.css("width",100*c+"%"),a.css("left",(1-c)/2*100+"%"),a.css("height","100%"),i=h*l,o=h}else a.css("top",0),a.css("width","100%"),a.css("height","100%"),a.css("left",0),i=a.width(),o=a.height();if(t&&a.is(":visible")){var d=Math.max(i*s.overSampling/r.width,o*s.overSampling/r.height);d>1&&(s.realOverSampling/=d),t.width=i*s.realOverSampling,t.height=o*s.realOverSampling}return i},s.resize=function(){var t=s.player,e=s.drawer;s.realOverSampling=s.overSampling;var r=0;if(s.canvases)for(var n=0;n<s.canvases.length;++n)r=s.resizeCanvas(s.canvases[n],t,e.getMaxCanvasSize());e&&(e.init(s.canvas,e.playerColors||c,s.realOverSampling,function(){s.endEvent()},s.location),e.refresh()),x(r),s.applyAsyncRendering()};var b={toggleFullScreen:s.toggleFullScreen,isFullScreen:s.isFullScreen,initReplay:s.initReplay,toggleConsole:s.toggleConsole,resize:s.resize};s.onPlayerReady({$playerApi:b}),s.hitbox.mousedown(function(t){var e,r,i,o;1===t.which&&"scroller_handle"!==t.target.classList[0]&&(e={left:t.pageX-n.a.element(this).offset().left},r=t,i=s.player,o=s.handle,i.data("gameManager")&&(r.target=o[0],o.trigger(r),d(0,e)))}),s.isDragging=!1;var _=function(t){s.isDragging||(s.scroller.addClass("active"),s.hitbox.addClass("active"),s.isDragging=!0,s.offsetX=s.player.offset().left),d(0,{left:t.pageX-s.offsetX});var e=t;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()};s.handle.mousedown(function(){n.a.element(window).mousemove(_)}),n.a.element(window).mouseup(function(){var t=s.isDragging;s.isDragging=!1,n.a.element(window).unbind("mousemove",_),t&&(s.scroller.removeClass("active"),s.hitbox.removeClass("active"))}),s.$on("$destroy",s.destroy)}}}])}).call(this,r("yLpj"))}});